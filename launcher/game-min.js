var egret;
(function(c){c.egret_string_code={};c.egret_string_code[-1]="\u4e0d\u5b58\u5728\u7684stringId:{0}";c.egret_string_code[1E3]="Browser.isMobile\u63a5\u53e3\u53c2\u6570\u5df2\u7ecf\u53d8\u66f4\uff0c\u8bf7\u5c3d\u5feb\u8c03\u6574\u7528\u6cd5\u4e3a egret.MainContext.deviceType == egret.MainContext.DEVICE_MOBILE";c.egret_string_code[1001]="\u8be5\u65b9\u6cd5\u76ee\u524d\u4e0d\u5e94\u4f20\u5165 resolutionPolicy \u53c2\u6570\uff0c\u8bf7\u5728 docs/1.0_Final_ReleaseNote\u4e2d\u67e5\u770b\u5982\u4f55\u5347\u7ea7";c.egret_string_code[1002]=
"egret.Ticker\u662f\u6846\u67b6\u5185\u90e8\u4f7f\u7528\u7684\u5355\u4f8b\uff0c\u4e0d\u5141\u8bb8\u5728\u5916\u90e8\u5b9e\u4f8b\u5316\uff0c\u8ba1\u65f6\u5668\u8bf7\u4f7f\u7528egret.Timer\u7c7b\uff01";c.egret_string_code[1003]="Ticker#setTimeout\u65b9\u6cd5\u5373\u5c06\u5e9f\u5f03,\u8bf7\u4f7f\u7528egret.setTimeout";c.egret_string_code[1004]="ExternalInterface\u8c03\u7528\u4e86js\u6ca1\u6709\u6ce8\u518c\u7684\u65b9\u6cd5: {0}";c.egret_string_code[1005]="\u8bbe\u7f6e\u4e86\u5df2\u7ecf\u5b58\u5728\u7684blendMode: {0}";
c.egret_string_code[1006]="child\u4e0d\u5728\u5f53\u524d\u5bb9\u5668\u5185";c.egret_string_code[1007]="\u63d0\u4f9b\u7684\u7d22\u5f15\u8d85\u51fa\u8303\u56f4";c.egret_string_code[1008]="child\u672a\u88abaddChild\u5230\u8be5parent";c.egret_string_code[1009]="\u8bbe\u7f6e\u4e86\u5df2\u7ecf\u5b58\u5728\u7684\u9002\u914d\u6a21\u5f0f:{0}";c.egret_string_code[1010]="addEventListener\u4fa6\u542c\u51fd\u6570\u4e0d\u80fd\u4e3a\u7a7a";c.egret_string_code[1011]='BitmapText\u627e\u4e0d\u5230\u6587\u5b57\u6240\u5bf9\u5e94\u7684\u7eb9\u7406:"{0}"';
c.egret_string_code[1012]="egret.BitmapTextSpriteSheet\u5df2\u5e9f\u5f03\uff0c\u8bf7\u4f7f\u7528egret.BitmapFont\u4ee3\u66ff\u3002";c.egret_string_code[1013]="TextField.setFocus \u6ca1\u6709\u5b9e\u73b0";c.egret_string_code[1014]="Ease\u4e0d\u80fd\u88ab\u5b9e\u4f8b\u5316";c.egret_string_code[1015]="xml not found!";c.egret_string_code[1016]="{0}\u5df2\u7ecf\u5e9f\u5f03";c.egret_string_code[1017]="JSON\u6587\u4ef6\u683c\u5f0f\u4e0d\u6b63\u786e: {0}\ndata: {1}";c.egret_string_code[1018]="egret_html5_localStorage.setItem\u4fdd\u5b58\u5931\u8d25,key={0}&value={1}";
c.egret_string_code[1019]="\u7f51\u7edc\u5f02\u5e38:{0}";c.egret_string_code[1020]="\u65e0\u6cd5\u521d\u59cb\u5316\u7740\u8272\u5668";c.egret_string_code[1021]="\u5f53\u524d\u6d4f\u89c8\u5668\u4e0d\u652f\u6301webgl";c.egret_string_code[1022]="{0} ArgumentError";c.egret_string_code[1023]="\u6b64\u65b9\u6cd5\u5728ScrollView\u5185\u4e0d\u53ef\u7528!";c.egret_string_code[1024]="\u4f7f\u7528\u4e86\u5c1a\u672a\u5b9e\u73b0\u7684ScaleMode";c.egret_string_code[1025]="\u9047\u5230\u6587\u4ef6\u5c3e";c.egret_string_code[1026]=
"EncodingError! The code point {0} could not be encoded.";c.egret_string_code[1027]="DecodingError";c.egret_string_code[1028]="\u8c03\u7528\u4e86\u672a\u914d\u7f6e\u7684\u6ce8\u5165\u89c4\u5219:{0}\u3002 \u8bf7\u5148\u5728\u9879\u76ee\u521d\u59cb\u5316\u91cc\u914d\u7f6e\u6307\u5b9a\u7684\u6ce8\u5165\u89c4\u5219\uff0c\u518d\u8c03\u7528\u5bf9\u5e94\u5355\u4f8b\u3002";c.egret_string_code[1029]="Function.prototype.bind - what is trying to be bound is not callable";c.egret_string_code[1030]="\u8be5API\u5df2\u5e9f\u5f03";
c.egret_string_code[1031]="setVolume\u5df2\u5e9f\u5f03\uff0c\u8bf7\u4f7f\u7528this.volume = value\u4ee3\u66ff";c.egret_string_code[1032]="getVolume\u5df2\u5e9f\u5f03\uff0c\u8bf7\u4f7f\u7528this.volume\u4ee3\u66ff";c.egret_string_code[1033]="\u8de8\u57df\u56fe\u7247\u4e0d\u53ef\u4ee5\u4f7f\u7528toDataURL\u6765\u8f6c\u6362\u6210base64";c.egret_string_code[1034]='\u97f3\u4e50\u6587\u4ef6\u89e3\u7801\u5931\u8d25\uff1a"{0}"\uff0c\u8bf7\u4f7f\u7528\u6807\u51c6\u7684\u8f6c\u6362\u5de5\u5177\u91cd\u65b0\u8f6c\u6362\u4e0bmp3\u3002';
c.egret_string_code[1035]="Native \u4e0b\u6682\u672a\u5b9e\u73b0\u6b64\u529f\u80fd\uff01";c.egret_string_code[2E3]="RES.createGroup()\u4f20\u5165\u4e86\u914d\u7f6e\u4e2d\u4e0d\u5b58\u5728\u7684\u952e\u503c: {0}";c.egret_string_code[2001]='RES\u52a0\u8f7d\u4e86\u4e0d\u5b58\u5728\u6216\u7a7a\u7684\u8d44\u6e90\u7ec4:"{0}"';c.egret_string_code[2002]="\u8bf7\u4e0d\u8981\u4f7f\u7528\u4e0d\u540c\u7684\u7c7b\u578b\u65b9\u5f0f\u6765\u52a0\u8f7d\u540c\u4e00\u4e2a\u7d20\u6750\uff01";c.egret_string_code[3E3]=
"\u4e3b\u9898\u914d\u7f6e\u6587\u4ef6\u52a0\u8f7d\u5931\u8d25: {0}";c.egret_string_code[3001]="\u627e\u4e0d\u5230\u4e3b\u9898\u4e2d\u6240\u914d\u7f6e\u7684\u76ae\u80a4\u7c7b\u540d: {0}";c.egret_string_code[3002]='\u7d22\u5f15:"{0}"\u8d85\u51fa\u96c6\u5408\u5143\u7d20\u7d22\u5f15\u8303\u56f4';c.egret_string_code[3003]="\u5728\u6b64\u7ec4\u4ef6\u4e2d\u4e0d\u53ef\u7528\uff0c\u82e5\u6b64\u7ec4\u4ef6\u4e3a\u5bb9\u5668\u7c7b\uff0c\u8bf7\u4f7f\u7528";c.egret_string_code[3004]="addChild(){0}addElement()\u4ee3\u66ff";
c.egret_string_code[3005]="addChildAt(){0}addElementAt()\u4ee3\u66ff";c.egret_string_code[3006]="removeChild(){0}removeElement()\u4ee3\u66ff";c.egret_string_code[3007]="removeChildAt(){0}removeElementAt()\u4ee3\u66ff";c.egret_string_code[3008]="setChildIndex(){0}setElementIndex()\u4ee3\u66ff";c.egret_string_code[3009]="swapChildren(){0}swapElements()\u4ee3\u66ff";c.egret_string_code[3010]="swapChildrenAt(){0}swapElementsAt()\u4ee3\u66ff";c.egret_string_code[3011]='\u7d22\u5f15:"{0}"\u8d85\u51fa\u53ef\u89c6\u5143\u7d20\u7d22\u5f15\u8303\u56f4';
c.egret_string_code[3012]="\u6b64\u65b9\u6cd5\u5728Scroller\u7ec4\u4ef6\u5185\u4e0d\u53ef\u7528!";c.egret_string_code[3013]="UIStage\u662fGUI\u6839\u5bb9\u5668\uff0c\u53ea\u80fd\u6709\u4e00\u4e2a\u6b64\u5b9e\u4f8b\u5728\u663e\u793a\u5217\u8868\u4e2d\uff01";c.egret_string_code[3014]="propNotPropOrStyle";c.egret_string_code[4E3]="An Bone cannot be added as a child to itself or one of its children (or children's children, etc.)";c.egret_string_code[4001]="Abstract class can not be instantiated!";c.egret_string_code[4002]=
"Unnamed data!";c.egret_string_code[4003]="Nonsupport version!";c.egret_string_code[4004]="Abstract method needs to be implemented in subclass!";c.egret_string_code[3100]="\u5f53\u524d\u6d4f\u89c8\u5668\u4e0d\u652f\u6301WebSocket";c.egret_string_code[3101]="\u8bf7\u5148\u8fde\u63a5WebSocket";c.egret_string_code[3102]="\u8bf7\u5148\u8bbe\u7f6etype\u4e3a\u4e8c\u8fdb\u5236\u7c7b\u578b"})(egret||(egret={}));
(function(c){c.egret_string_code={};c.egret_string_code[-1]="\u4e0d\u5b58\u5728\u7684stringId:{0}";c.egret_string_code[1E3]="Browser.isMobile\u63a5\u53e3\u53c2\u6570\u5df2\u7ecf\u53d8\u66f4\uff0c\u8bf7\u5c3d\u5feb\u8c03\u6574\u7528\u6cd5\u4e3a egret.MainContext.deviceType == egret.MainContext.DEVICE_MOBILE";c.egret_string_code[1001]="\u8be5\u65b9\u6cd5\u76ee\u524d\u4e0d\u5e94\u4f20\u5165 resolutionPolicy \u53c2\u6570\uff0c\u8bf7\u5728 docs/1.0_Final_ReleaseNote\u4e2d\u67e5\u770b\u5982\u4f55\u5347\u7ea7";
c.egret_string_code[1002]="egret.Ticker\u662f\u6846\u67b6\u5185\u90e8\u4f7f\u7528\u7684\u5355\u4f8b\uff0c\u4e0d\u5141\u8bb8\u5728\u5916\u90e8\u5b9e\u4f8b\u5316\uff0c\u8ba1\u65f6\u5668\u8bf7\u4f7f\u7528egret.Timer\u7c7b\uff01";c.egret_string_code[1003]="Ticker#setTimeout\u65b9\u6cd5\u5373\u5c06\u5e9f\u5f03,\u8bf7\u4f7f\u7528egret.setTimeout";c.egret_string_code[1004]="ExternalInterface\u8c03\u7528\u4e86js\u6ca1\u6709\u6ce8\u518c\u7684\u65b9\u6cd5: {0}";c.egret_string_code[1005]="\u8bbe\u7f6e\u4e86\u5df2\u7ecf\u5b58\u5728\u7684blendMode: {0}";
c.egret_string_code[1006]="child\u4e0d\u5728\u5f53\u524d\u5bb9\u5668\u5185";c.egret_string_code[1007]="\u63d0\u4f9b\u7684\u7d22\u5f15\u8d85\u51fa\u8303\u56f4";c.egret_string_code[1008]="child\u672a\u88abaddChild\u5230\u8be5parent";c.egret_string_code[1009]="\u8bbe\u7f6e\u4e86\u5df2\u7ecf\u5b58\u5728\u7684\u9002\u914d\u6a21\u5f0f:{0}";c.egret_string_code[1010]="addEventListener\u4fa6\u542c\u51fd\u6570\u4e0d\u80fd\u4e3a\u7a7a";c.egret_string_code[1011]='BitmapText\u627e\u4e0d\u5230\u6587\u5b57\u6240\u5bf9\u5e94\u7684\u7eb9\u7406:"{0}"';
c.egret_string_code[1012]="egret.BitmapTextSpriteSheet\u5df2\u5e9f\u5f03\uff0c\u8bf7\u4f7f\u7528egret.BitmapFont\u4ee3\u66ff\u3002";c.egret_string_code[1013]="TextField.setFocus \u6ca1\u6709\u5b9e\u73b0";c.egret_string_code[1014]="Ease\u4e0d\u80fd\u88ab\u5b9e\u4f8b\u5316";c.egret_string_code[1015]="xml not found!";c.egret_string_code[1016]="{0}\u5df2\u7ecf\u5e9f\u5f03";c.egret_string_code[1017]="JSON\u6587\u4ef6\u683c\u5f0f\u4e0d\u6b63\u786e: {0}\ndata: {1}";c.egret_string_code[1018]="egret_html5_localStorage.setItem\u4fdd\u5b58\u5931\u8d25,key={0}&value={1}";
c.egret_string_code[1019]="\u7f51\u7edc\u5f02\u5e38:{0}";c.egret_string_code[1020]="\u65e0\u6cd5\u521d\u59cb\u5316\u7740\u8272\u5668";c.egret_string_code[1021]="\u5f53\u524d\u6d4f\u89c8\u5668\u4e0d\u652f\u6301webgl";c.egret_string_code[1022]="{0} ArgumentError";c.egret_string_code[1023]="\u6b64\u65b9\u6cd5\u5728ScrollView\u5185\u4e0d\u53ef\u7528!";c.egret_string_code[1024]="\u4f7f\u7528\u4e86\u5c1a\u672a\u5b9e\u73b0\u7684ScaleMode";c.egret_string_code[1025]="\u9047\u5230\u6587\u4ef6\u5c3e";c.egret_string_code[1026]=
"EncodingError! The code point {0} could not be encoded.";c.egret_string_code[1027]="DecodingError";c.egret_string_code[1028]="\u8c03\u7528\u4e86\u672a\u914d\u7f6e\u7684\u6ce8\u5165\u89c4\u5219:{0}\u3002 \u8bf7\u5148\u5728\u9879\u76ee\u521d\u59cb\u5316\u91cc\u914d\u7f6e\u6307\u5b9a\u7684\u6ce8\u5165\u89c4\u5219\uff0c\u518d\u8c03\u7528\u5bf9\u5e94\u5355\u4f8b\u3002";c.egret_string_code[1029]="Function.prototype.bind - what is trying to be bound is not callable";c.egret_string_code[1030]="\u8be5API\u5df2\u5e9f\u5f03";
c.egret_string_code[1031]="setVolume\u5df2\u5e9f\u5f03\uff0c\u8bf7\u4f7f\u7528this.volume = value\u4ee3\u66ff";c.egret_string_code[1032]="getVolume\u5df2\u5e9f\u5f03\uff0c\u8bf7\u4f7f\u7528this.volume\u4ee3\u66ff";c.egret_string_code[1033]="\u8de8\u57df\u56fe\u7247\u4e0d\u53ef\u4ee5\u4f7f\u7528toDataURL\u6765\u8f6c\u6362\u6210base64";c.egret_string_code[1034]='\u97f3\u4e50\u6587\u4ef6\u89e3\u7801\u5931\u8d25\uff1a"{0}"\uff0c\u8bf7\u4f7f\u7528\u6807\u51c6\u7684\u8f6c\u6362\u5de5\u5177\u91cd\u65b0\u8f6c\u6362\u4e0bmp3\u3002';
c.egret_string_code[1035]="Native \u4e0b\u6682\u672a\u5b9e\u73b0\u6b64\u529f\u80fd\uff01";c.egret_string_code[2E3]="RES.createGroup()\u4f20\u5165\u4e86\u914d\u7f6e\u4e2d\u4e0d\u5b58\u5728\u7684\u952e\u503c: {0}";c.egret_string_code[2001]='RES\u52a0\u8f7d\u4e86\u4e0d\u5b58\u5728\u6216\u7a7a\u7684\u8d44\u6e90\u7ec4:"{0}"';c.egret_string_code[2002]="\u8bf7\u4e0d\u8981\u4f7f\u7528\u4e0d\u540c\u7684\u7c7b\u578b\u65b9\u5f0f\u6765\u52a0\u8f7d\u540c\u4e00\u4e2a\u7d20\u6750\uff01";c.egret_string_code[3E3]=
"\u4e3b\u9898\u914d\u7f6e\u6587\u4ef6\u52a0\u8f7d\u5931\u8d25: {0}";c.egret_string_code[3001]="\u627e\u4e0d\u5230\u4e3b\u9898\u4e2d\u6240\u914d\u7f6e\u7684\u76ae\u80a4\u7c7b\u540d: {0}";c.egret_string_code[3002]='\u7d22\u5f15:"{0}"\u8d85\u51fa\u96c6\u5408\u5143\u7d20\u7d22\u5f15\u8303\u56f4';c.egret_string_code[3003]="\u5728\u6b64\u7ec4\u4ef6\u4e2d\u4e0d\u53ef\u7528\uff0c\u82e5\u6b64\u7ec4\u4ef6\u4e3a\u5bb9\u5668\u7c7b\uff0c\u8bf7\u4f7f\u7528";c.egret_string_code[3004]="addChild(){0}addElement()\u4ee3\u66ff";
c.egret_string_code[3005]="addChildAt(){0}addElementAt()\u4ee3\u66ff";c.egret_string_code[3006]="removeChild(){0}removeElement()\u4ee3\u66ff";c.egret_string_code[3007]="removeChildAt(){0}removeElementAt()\u4ee3\u66ff";c.egret_string_code[3008]="setChildIndex(){0}setElementIndex()\u4ee3\u66ff";c.egret_string_code[3009]="swapChildren(){0}swapElements()\u4ee3\u66ff";c.egret_string_code[3010]="swapChildrenAt(){0}swapElementsAt()\u4ee3\u66ff";c.egret_string_code[3011]='\u7d22\u5f15:"{0}"\u8d85\u51fa\u53ef\u89c6\u5143\u7d20\u7d22\u5f15\u8303\u56f4';
c.egret_string_code[3012]="\u6b64\u65b9\u6cd5\u5728Scroller\u7ec4\u4ef6\u5185\u4e0d\u53ef\u7528!";c.egret_string_code[3013]="UIStage\u662fGUI\u6839\u5bb9\u5668\uff0c\u53ea\u80fd\u6709\u4e00\u4e2a\u6b64\u5b9e\u4f8b\u5728\u663e\u793a\u5217\u8868\u4e2d\uff01";c.egret_string_code[3014]="propNotPropOrStyle";c.egret_string_code[4E3]="An Bone cannot be added as a child to itself or one of its children (or children's children, etc.)";c.egret_string_code[4001]="Abstract class can not be instantiated!";c.egret_string_code[4002]=
"Unnamed data!";c.egret_string_code[4003]="Nonsupport version!";c.egret_string_code[4004]="Abstract method needs to be implemented in subclass!";c.egret_string_code[3100]="\u5f53\u524d\u6d4f\u89c8\u5668\u4e0d\u652f\u6301WebSocket";c.egret_string_code[3101]="\u8bf7\u5148\u8fde\u63a5WebSocket";c.egret_string_code[3102]="\u8bf7\u5148\u8bbe\u7f6etype\u4e3a\u4e8c\u8fdb\u5236\u7c7b\u578b"})(egret||(egret={}));
var __extends=this.__extends||function(c,f){function e(){this.constructor=c}for(var a in f)f.hasOwnProperty(a)&&(c[a]=f[a]);e.prototype=f.prototype;c.prototype=new e};
(function(c){c.superSetter=function(c,e){for(var a=[],b=2;b<arguments.length;b++)a[b-2]=arguments[b];var d=Object.getPrototypeOf(c),b=d.__sets__;null==b&&(b=d.__sets__={});var m=b[e];if(m)return m.apply(c,a);for(d=Object.getPrototypeOf(d);!d.hasOwnProperty(e);)d=Object.getPrototypeOf(d);m=Object.getOwnPropertyDescriptor(d,e).set;b[e]=m;m.apply(c,a)};c.superGetter=function(c,e){var a=Object.getPrototypeOf(c),b=a.__gets__;null==b&&(b=a.__gets__={});var d=b[e];if(d)return d.call(c);for(a=Object.getPrototypeOf(a);!a.hasOwnProperty(e);)a=
Object.getPrototypeOf(a);d=Object.getOwnPropertyDescriptor(a,e).get;b[e]=d;return d.call(c)}})(egret||(egret={}));
(function(c){function f(a){for(var b=[],d=1;d<arguments.length;d++)b[d-1]=arguments[d];if(d=c.egret_string_code[a])for(var m=b.length,s=0;s<m;s++)d=d.replace("{"+s+"}",b[s]);return d}var e=function(){function a(){}a.openLogByType=function(b){null==a.logFuncs&&(a.logFuncs={error:console.error,debug:console.debug,warn:console.warn,info:console.info,log:console.log});switch(b){case a.OFF:console.error=function(){};case a.ERROR:console.warn=function(){};case a.WARN:console.info=function(){},console.log=
function(){};case a.INFO:console.debug=function(){}}switch(b){case a.ALL:console.debug=a.logFuncs.debug;case a.INFO:console.log=a.logFuncs.log,console.info=a.logFuncs.info;case a.WARN:console.warn=a.logFuncs.warn;case a.ERROR:console.error=a.logFuncs.error}};a.fatal=function(a,d){void 0===d&&(d=null);throw Error(c.Logger.getTraceCode("Fatal",a,d));};a.info=function(a,d){void 0===d&&(d=null);c.Logger.traceToConsole("Info",a,d)};a.warning=function(a,d){void 0===d&&(d=null);c.Logger.traceToConsole("Warning",
a,d)};a.traceToConsole=function(a,d,m){console.log(c.Logger.getTraceCode(a,d,m))};a.getTraceCode=function(a,d,m){return"["+a+"]"+d+(null==m?"":":"+m)};a.ALL="all";a.DEBUG="debug";a.INFO="info";a.WARN="warn";a.ERROR="error";a.OFF="off";return a}();c.Logger=e;e.prototype.__class__="egret.Logger";c.getString=f;c.$error=function(a){for(var b=[],d=1;d<arguments.length;d++)b[d-1]=arguments[d];b.unshift(a);(b=f.apply(null,b))?e.fatal(b):e.fatal(f(-1,a))};c.$warn=function(a){for(var b=[],d=1;d<arguments.length;d++)b[d-
1]=arguments[d];b.unshift(a);(b=f.apply(null,b))?e.warning(b):e.warning(f(-1,a))}})(egret||(egret={}));(function(c){var f=function(){function c(){this._hashCode=c.hashCount++}Object.defineProperty(c.prototype,"hashCode",{get:function(){return this._hashCode},enumerable:!0,configurable:!0});c.hashCount=1;return c}();c.HashObject=f;f.prototype.__class__="egret.HashObject"})(egret||(egret={}));
(function(c){var f=function(c){function a(d){void 0===d&&(d=300);c.call(this);this.objectPool=[];this._length=0;1>d&&(d=1);this.autoDisposeTime=d;this.frameCount=0}__extends(a,c);var b=a.prototype;b._checkFrame=function(){this.frameCount--;0>=this.frameCount&&this.dispose()};Object.defineProperty(b,"length",{get:function(){return this._length},enumerable:!0,configurable:!0});b.push=function(d){var m=this.objectPool;-1==m.indexOf(d)&&(m.push(d),d.__recycle&&d.__recycle(),this._length++,0==this.frameCount&&
(this.frameCount=this.autoDisposeTime,a._callBackList.push(this)))};b.pop=function(){if(0==this._length)return null;this._length--;return this.objectPool.pop()};b.dispose=function(){0<this._length&&(this.objectPool=[],this._length=0);this.frameCount=0;var d=a._callBackList,m=d.indexOf(this);-1!=m&&d.splice(m,1)};a._callBackList=[];return a}(c.HashObject);c.Recycler=f;f.prototype.__class__="egret.Recycler"})(egret||(egret={}));
(function(c){c.__START_TIME;c.getTimer=function(){return Date.now()-c.__START_TIME}})(egret||(egret={}));
(function(c){c.__callLaterFunctionList=[];c.__callLaterThisList=[];c.__callLaterArgsList=[];c.callLater=function(f,e){for(var a=[],b=2;b<arguments.length;b++)a[b-2]=arguments[b];c.__callLaterFunctionList.push(f);c.__callLaterThisList.push(e);c.__callLaterArgsList.push(a)};c.__callAsyncFunctionList=[];c.__callAsyncThisList=[];c.__callAsyncArgsList=[];c.__callAsync=function(f,e){for(var a=[],b=2;b<arguments.length;b++)a[b-2]=arguments[b];c.__callAsyncFunctionList.push(f);c.__callAsyncThisList.push(e);
c.__callAsyncArgsList.push(a)}})(egret||(egret={}));
(function(c){var f=function(){function e(){}var a=e.prototype;a.call=function(a){this.callback&&this.callback.call(this.thisObject,a)};a.dispose=function(){this.thisObject=this.callback=null;e.__freeList.push(this)};e.push=function(a,d){var m;m=e.__freeList.length?e.__freeList.pop():new c.RenderCommand;m.callback=a;m.thisObject=d;c.MainContext.__DRAW_COMMAND_LIST.push(m)};e.__freeList=[];return e}();c.RenderCommand=f;f.prototype.__class__="egret.RenderCommand"})(egret||(egret={}));
(function(c){var f=function(e){function a(d,a,b){void 0===a&&(a=!1);void 0===b&&(b=!1);e.call(this);this.data=null;this._type="";this._cancelable=this._bubbles=!1;this._eventPhase=2;this._target=this._currentTarget=null;this._isPropagationImmediateStopped=this._isPropagationStopped=this._isDefaultPrevented=!1;this.isNew=!0;this._type=d;this._bubbles=a;this._cancelable=b}__extends(a,e);var b=a.prototype;Object.defineProperty(b,"type",{get:function(){return this._type},enumerable:!0,configurable:!0});
Object.defineProperty(b,"bubbles",{get:function(){return this._bubbles},enumerable:!0,configurable:!0});Object.defineProperty(b,"cancelable",{get:function(){return this._cancelable},enumerable:!0,configurable:!0});Object.defineProperty(b,"eventPhase",{get:function(){return this._eventPhase},enumerable:!0,configurable:!0});Object.defineProperty(b,"currentTarget",{get:function(){return this._currentTarget},enumerable:!0,configurable:!0});Object.defineProperty(b,"target",{get:function(){return this._target},
enumerable:!0,configurable:!0});b.isDefaultPrevented=function(){return this._isDefaultPrevented};b.preventDefault=function(){this._cancelable&&(this._isDefaultPrevented=!0)};b.stopPropagation=function(){this._bubbles&&(this._isPropagationStopped=!0)};b.stopImmediatePropagation=function(){this._bubbles&&(this._isPropagationImmediateStopped=!0)};b._reset=function(){this.isNew?this.isNew=!1:(this._isPropagationImmediateStopped=this._isPropagationStopped=this._isDefaultPrevented=!1,this._currentTarget=
this._target=null,this._eventPhase=2)};b.__recycle=function(){this.data=this._target=this._currentTarget=null};a._dispatchByTarget=function(d,a,b,e,f,g){void 0===f&&(f=!1);void 0===g&&(g=!1);var h=d.eventRecycler;h||(h=d.eventRecycler=new c.Recycler);var k=h.pop();k?k._type=b:k=new d(b);k._bubbles=f;k._cancelable=g;if(e)for(var n in e)k[n]=e[n],null!==k[n]&&(e[n]=null);d=a.dispatchEvent(k);h.push(k);return d};a._getPropertyData=function(d){var a=d._props;a||(a=d._props={});return a};a.dispatchEvent=
function(d,m,b,c){void 0===b&&(b=!1);var e=a._getPropertyData(a);void 0!=c&&(e.data=c);a._dispatchByTarget(a,d,m,e,b)};a.ADDED_TO_STAGE="addedToStage";a.REMOVED_FROM_STAGE="removedFromStage";a.ADDED="added";a.REMOVED="removed";a.COMPLETE="complete";a.LOOP_COMPLETE="loopcomplete";a.ENTER_FRAME="enterFrame";a.RENDER="render";a.FINISH_RENDER="finishRender";a.FINISH_UPDATE_TRANSFORM="finishUpdateTransform";a.LEAVE_STAGE="leaveStage";a.RESIZE="resize";a.CHANGE="change";a.ACTIVATE="activate";a.DEACTIVATE=
"deactivate";a.CLOSE="close";a.CONNECT="connect";return a}(c.HashObject);c.Event=f;f.prototype.__class__="egret.Event"})(egret||(egret={}));
(function(c){var f=function(c){function a(a,d,m){void 0===d&&(d=!1);void 0===m&&(m=!1);c.call(this,a,d,m);this._status=0}__extends(a,c);Object.defineProperty(a.prototype,"status",{get:function(){return this._status},enumerable:!0,configurable:!0});a.dispatchHTTPStatusEvent=function(b,d){null==a.httpStatusEvent&&(a.httpStatusEvent=new a(a.HTTP_STATUS));a.httpStatusEvent._status=d;b.dispatchEvent(a.httpStatusEvent)};a.HTTP_STATUS="httpStatus";a.httpStatusEvent=null;return a}(c.Event);c.HTTPStatusEvent=
f;f.prototype.__class__="egret.HTTPStatusEvent"})(egret||(egret={}));(function(c){var f=function(c){function a(a,d,m){void 0===d&&(d=!1);void 0===m&&(m=!1);c.call(this,a,d,m)}__extends(a,c);a.SOUND_COMPLETE="soundComplete";return a}(c.Event);c.SoundEvent=f;f.prototype.__class__="egret.SoundEvent"})(egret||(egret={}));
(function(c){var f=function(c){function a(a,d,m){void 0===d&&(d=!1);void 0===m&&(m=!1);c.call(this,a,d,m)}__extends(a,c);a.FOCUS_IN="focusIn";a.FOCUS_OUT="focusOut";return a}(c.Event);c.FocusEvent=f;f.prototype.__class__="egret.FocusEvent"})(egret||(egret={}));
(function(c){var f=function(e){function a(a,d,m){void 0===d&&(d=!1);void 0===m&&(m=!1);e.call(this,a,d,m)}__extends(a,e);a.dispatchIOErrorEvent=function(b){c.Event._dispatchByTarget(a,b,a.IO_ERROR)};a.IO_ERROR="ioError";return a}(c.Event);c.IOErrorEvent=f;f.prototype.__class__="egret.IOErrorEvent"})(egret||(egret={}));
(function(c){var f=function(e){function a(d,a,b,c,f,g,h,k,n,q){void 0===a&&(a=!0);void 0===b&&(b=!0);void 0===c&&(c=0);void 0===f&&(f=0);void 0===g&&(g=0);void 0===h&&(h=!1);void 0===k&&(k=!1);void 0===q&&(q=!1);e.call(this,d,a,b);this._stageY=this._stageX=0;this.touchPointID=NaN;this.touchDown=this.altKey=this.shiftKey=this.ctrlKey=!1;this.touchPointID=c;this._stageX=f;this._stageY=g;this.ctrlKey=h;this.altKey=k;this.touchDown=q}__extends(a,e);var b=a.prototype;Object.defineProperty(b,"stageX",{get:function(){return this._stageX},
enumerable:!0,configurable:!0});Object.defineProperty(b,"stageY",{get:function(){return this._stageY},enumerable:!0,configurable:!0});Object.defineProperty(b,"localX",{get:function(){return this._currentTarget.globalToLocal(this._stageX,this._stageY,c.Point.identity).x},enumerable:!0,configurable:!0});Object.defineProperty(b,"localY",{get:function(){return this._currentTarget.globalToLocal(this._stageX,this._stageY,c.Point.identity).y},enumerable:!0,configurable:!0});a.dispatchTouchEvent=function(d,
m,b,e,f,g,h,k,n){void 0===b&&(b=0);void 0===e&&(e=0);void 0===f&&(f=0);void 0===g&&(g=!1);void 0===h&&(h=!1);void 0===k&&(k=!1);void 0===n&&(n=!1);var q=c.Event._getPropertyData(a);q.touchPointID=b;q._stageX=e;q._stageY=f;q.ctrlKey=g;q.altKey=h;q.shiftKey=k;q.touchDown=n;c.Event._dispatchByTarget(a,d,m,q,!0,!0)};a.TOUCH_TAP="touchTap";a.TOUCH_MOVE="touchMove";a.TOUCH_BEGIN="touchBegin";a.TOUCH_END="touchEnd";a.TOUCH_RELEASE_OUTSIDE="touchReleaseOutside";a.TOUCH_ROLL_OUT="touchRollOut";a.TOUCH_ROLL_OVER=
"touchRollOver";a.TOUCH_OUT="touchOut";a.TOUCH_OVER="touchOver";return a}(c.Event);c.TouchEvent=f;f.prototype.__class__="egret.TouchEvent"})(egret||(egret={}));(function(c){var f=function(e){function a(a,d,m){void 0===d&&(d=!1);void 0===m&&(m=!1);e.call(this,a,d,m)}__extends(a,e);a.dispatchTimerEvent=function(b,d){c.Event._dispatchByTarget(a,b,d)};a.TIMER="timer";a.TIMER_COMPLETE="timerComplete";return a}(c.Event);c.TimerEvent=f;f.prototype.__class__="egret.TimerEvent"})(egret||(egret={}));
(function(c){var f=function(e){function a(a,d,m,c){void 0===d&&(d=!1);void 0===m&&(m=!1);void 0===c&&(c="");e.call(this,a,d,m);this.text=c}__extends(a,e);a.dispatchTextEvent=function(b,d,m){var s=c.Event._getPropertyData(a);s.text=m;c.Event._dispatchByTarget(a,b,d,s)};a.LINK="link";return a}(c.Event);c.TextEvent=f;f.prototype.__class__="egret.TextEvent"})(egret||(egret={}));
(function(c){var f=function(e){function a(a,d,m,c,r){void 0===d&&(d=!1);void 0===m&&(m=!1);void 0===c&&(c=0);void 0===r&&(r=0);e.call(this,a,d,m);this.bytesTotal=this.bytesLoaded=0;this.bytesLoaded=c;this.bytesTotal=r}__extends(a,e);a.dispatchProgressEvent=function(b,d,m,s){void 0===m&&(m=0);void 0===s&&(s=0);c.Event._dispatchByTarget(a,b,d,{bytesLoaded:m,bytesTotal:s})};a.PROGRESS="progress";a.SOCKET_DATA="socketData";return a}(c.Event);c.ProgressEvent=f;f.prototype.__class__="egret.ProgressEvent"})(egret||
(egret={}));(function(c){var f=function(){function c(){}c.CAPTURING_PHASE=1;c.AT_TARGET=2;c.BUBBLING_PHASE=3;return c}();c.EventPhase=f;f.prototype.__class__="egret.EventPhase"})(egret||(egret={}));
(function(c){var f=function(e){function a(d){void 0===d&&(d=null);e.call(this);this._captureEventsMap=this._eventsMap=this._eventTarget=null;this._eventTarget=d?d:this}__extends(a,e);var b=a.prototype;b.addEventListener=function(d,a,b,e,f){void 0===e&&(e=!1);void 0===f&&(f=0);"undefined"===typeof e&&(e=!1);"undefined"===typeof f&&(f=0);a||c.$error(1010);e?(this._captureEventsMap||(this._captureEventsMap={}),e=this._captureEventsMap):(this._eventsMap||(this._eventsMap={}),e=this._eventsMap);var g=
e[d];g||(g=e[d]=[]);this._insertEventBin(g,a,b,f)};b._insertEventBin=function(d,a,b,c,e){void 0===e&&(e=void 0);for(var f=-1,h=d.length,k=0;k<h;k++){var n=d[k];if(n.listener==a&&n.thisObject==b&&n.display==e)return!1;-1==f&&n.priority<c&&(f=k)}a={listener:a,thisObject:b,priority:c};e&&(a.display=e);-1!=f?d.splice(f,0,a):d.push(a);return!0};b.removeEventListener=function(d,a,b,c){void 0===c&&(c=!1);if(c=c?this._captureEventsMap:this._eventsMap){var e=c[d];e&&(this._removeEventBin(e,a,b),0==e.length&&
delete c[d])}};b._removeEventBin=function(d,a,b,c,e){void 0===c&&(c=void 0);void 0===e&&(e=0);for(var f=d.length;e<f;e++){var h=d[e];if(h.listener==a&&h.thisObject==b&&h.display==c)return d.splice(e,1),!0}return!1};b.hasEventListener=function(d){return!!(this._eventsMap&&this._eventsMap[d]||this._captureEventsMap&&this._captureEventsMap[d])};b.willTrigger=function(d){return this.hasEventListener(d)};b.dispatchEvent=function(d){d._reset();d._target=this._eventTarget;d._currentTarget=this._eventTarget;
return this._notifyListener(d)};b._notifyListener=function(d){var a=1==d._eventPhase?this._captureEventsMap:this._eventsMap;if(!a)return!0;a=a[d._type];if(!a)return!0;var b=a.length;if(0==b)return!0;for(var a=a.concat(),c=0;c<b;c++){var e=a[c];e.listener.call(e.thisObject,d);if(d._isPropagationImmediateStopped)break}return!d._isDefaultPrevented};b.dispatchEventWith=function(d,a,b){void 0===a&&(a=!1);c.Event.dispatchEvent(this,d,a,b)};return a}(c.HashObject);c.EventDispatcher=f;f.prototype.__class__=
"egret.EventDispatcher"})(egret||(egret={}));
(function(c){var f=function(e){function a(){e.call(this);this.stage=this.deviceContext=this.netContext=this.touchContext=this.rendererContext=null;this.reuseEvent=new c.Event("")}__extends(a,e);var b=a.prototype;b.run=function(){c.Ticker.getInstance().run();c.Ticker.getInstance().register(this.renderLoop,this,Number.NEGATIVE_INFINITY);c.Ticker.getInstance().register(this.broadcastEnterFrame,this,Number.POSITIVE_INFINITY);this.touchContext.run();this._profileInstance=c.Profiler.getInstance()};b.renderLoop=
function(d){if(0<c.__callLaterFunctionList.length){var b=c.__callLaterFunctionList;c.__callLaterFunctionList=[];var e=c.__callLaterThisList;c.__callLaterThisList=[];var r=c.__callLaterArgsList;c.__callLaterArgsList=[]}d=this.stage;var f=a.cachedEvent;f._type=c.Event.RENDER;this.dispatchEvent(f);c.Stage._invalidateRenderFlag&&(this.broadcastRender(),c.Stage._invalidateRenderFlag=!1);b&&this.doCallLaterList(b,e,r);0<c.__callAsyncFunctionList.length&&this.doCallAsyncList();b=this.rendererContext;b.onRenderStart();
b.clearScreen();a.__DRAW_COMMAND_LIST=[];a._renderLoopPhase="updateTransform";d._updateTransform();a._renderLoopPhase="draw";f._type=c.Event.FINISH_UPDATE_TRANSFORM;this.dispatchEvent(f);a.__use_new_draw?this._draw(b):d._draw(b);f._type=c.Event.FINISH_RENDER;this.dispatchEvent(f);this._profileInstance._isRunning&&this._profileInstance._drawProfiler(b);b.onRenderFinish()};b._draw=function(d){for(var b=a.__DRAW_COMMAND_LIST,c=b.length,e=0;e<c;e++){var f=b[e];f.call(d);f.dispose()}};b.broadcastEnterFrame=
function(d){d=this.reuseEvent;d._type=c.Event.ENTER_FRAME;this.dispatchEvent(d);for(var a=c.DisplayObject._enterFrameCallBackList.concat(),b=a.length,e=0;e<b;e++){var f=a[e];d._target=f.display;d._currentTarget=f.display;f.listener.call(f.thisObject,d)}a=c.Recycler._callBackList;for(e=a.length-1;0<=e;e--)a[e]._checkFrame()};b.broadcastRender=function(){var d=this.reuseEvent;d._type=c.Event.RENDER;for(var a=c.DisplayObject._renderCallBackList.concat(),b=a.length,e=0;e<b;e++){var f=a[e],g=f.display;
d._target=g;d._currentTarget=g;f.listener.call(f.thisObject,d)}};b.doCallLaterList=function(d,a,b){for(var c=d.length,e=0;e<c;e++){var f=d[e];null!=f&&f.apply(a[e],b[e])}};b.doCallAsyncList=function(){var d=c.__callAsyncFunctionList.concat(),a=c.__callAsyncThisList.concat(),b=c.__callAsyncArgsList.concat();c.__callAsyncFunctionList.length=0;c.__callAsyncThisList.length=0;for(var e=c.__callAsyncArgsList.length=0;e<d.length;e++){var f=d[e];null!=f&&f.apply(a[e],b[e])}};a.deviceType=null;a.DEVICE_PC=
"web";a.DEVICE_MOBILE="native";a.RUNTIME_HTML5="runtimeHtml5";a.RUNTIME_NATIVE="runtimeNative";a.__DRAW_COMMAND_LIST=[];a.__use_new_draw=!0;a.cachedEvent=new c.Event("");return a}(c.EventDispatcher);c.MainContext=f;f.prototype.__class__="egret.MainContext"})(egret||(egret={}));var testDeviceType=function(){if(!this.navigator)return!0;var c=navigator.userAgent.toLowerCase();return-1!=c.indexOf("mobile")||-1!=c.indexOf("android")},testRuntimeType=function(){return this.navigator?!0:!1};
egret.MainContext.instance=new egret.MainContext;egret.MainContext.deviceType=testDeviceType()?egret.MainContext.DEVICE_MOBILE:egret.MainContext.DEVICE_PC;egret.MainContext.runtimeType=testRuntimeType()?egret.MainContext.RUNTIME_HTML5:egret.MainContext.RUNTIME_NATIVE;delete testDeviceType;delete testRuntimeType;
(function(c){var f=function(){function e(){this._preDrawCount=this._updateTransformPerformanceCost=this._renderPerformanceCost=this._logicPerformanceCost=this._lastTime=0;this._calculatePreDrawCount=!0;this._txt=null;this._tick=0;this._maxDeltaTime=500;this._totalDeltaTime=0;this._isRunning=!1}var a=e.prototype;e.getInstance=function(){null==e.instance&&(e.instance=new e);return e.instance};a.stop=function(){if(this._isRunning){this._isRunning=!1;c.Ticker.getInstance().unregister(this.update,this);
var a=c.MainContext.instance;a.removeEventListener(c.Event.ENTER_FRAME,this.onEnterFrame,this);a.removeEventListener(c.Event.RENDER,this.onStartRender,this);a.removeEventListener(c.Event.FINISH_RENDER,this.onFinishRender,this);a.removeEventListener(c.Event.FINISH_UPDATE_TRANSFORM,this.onFinishUpdateTransform,this)}};a.run=function(){null==this._txt&&(this._txt=new c.TextField,this._txt.size=28,this._txt.multiline=!0,this._txt._DO_Props_._parent=new c.DisplayObjectContainer);if(!this._isRunning){this._isRunning=
!0;c.Ticker.getInstance().register(this.update,this);var a=c.MainContext.instance;a.addEventListener(c.Event.ENTER_FRAME,this.onEnterFrame,this);a.addEventListener(c.Event.RENDER,this.onStartRender,this);a.addEventListener(c.Event.FINISH_RENDER,this.onFinishRender,this);a.addEventListener(c.Event.FINISH_UPDATE_TRANSFORM,this.onFinishUpdateTransform,this)}};a._drawProfiler=function(a){"_drawWebGL"in a&&a._drawWebGL();this._calculatePreDrawCount=!1;this._txt._updateTransform();this._txt._draw(a)};a._setTxtFontSize=
function(a){this._txt.size=a};a.onEnterFrame=function(a){this._lastTime=c.getTimer()};a.onStartRender=function(a){a=c.getTimer();this._logicPerformanceCost=a-this._lastTime;this._lastTime=a};a.onFinishUpdateTransform=function(a){a=c.getTimer();this._updateTransformPerformanceCost=a-this._lastTime;this._lastTime=a};a.onFinishRender=function(a){a=c.getTimer();this._renderPerformanceCost=a-this._lastTime;this._lastTime=a};a.update=function(a){this._tick++;this._totalDeltaTime+=a;if(this._totalDeltaTime>=
this._maxDeltaTime){a=this._preDrawCount.toString();var d=Math.ceil(this._logicPerformanceCost).toString()+","+Math.ceil(this._updateTransformPerformanceCost).toString()+","+Math.ceil(this._renderPerformanceCost).toString()+","+Math.ceil(c.MainContext.instance.rendererContext.renderCost).toString();this._txt.text="draw:"+a+"\ncost:"+d+"\nFPS:"+Math.floor(1E3*this._tick/this._totalDeltaTime).toString();this._tick=this._totalDeltaTime=0}this._preDrawCount=0;this._calculatePreDrawCount=!0};a.onDrawImage=
function(){this._calculatePreDrawCount&&this._preDrawCount++};return e}();c.Profiler=f;f.prototype.__class__="egret.Profiler"})(egret||(egret={}));
(function(c){var f=function(e){function a(){e.call(this);this._timeScale=1;this._paused=!1;this._callIndex=-1;this.callBackList=[];null!=a.instance&&c.$error(1002)}__extends(a,e);var b=a.prototype;b.run=function(){c.__START_TIME=(new Date).getTime();c.MainContext.instance.deviceContext.executeMainLoop(this.update,this)};b.update=function(d){if(!this._paused){d*=this._timeScale;this._callList=this.callBackList.concat();for(this._callIndex=0;this._callIndex<this._callList.length;this._callIndex++){var a=
this._callList[this._callIndex];a.listener.call(a.thisObject,d)}this._callIndex=-1;this._callList=null}};b.register=function(d,a,b){void 0===b&&(b=0);this._insertEventBin(this.callBackList,d,a,b)};b.unregister=function(d,a){this._removeEventBin(this.callBackList,d,a);this._callList&&-1<this._callIndex&&this._removeEventBin(this._callList,d,a,null,this._callIndex+1)};b.setTimeout=function(d,a,b){for(var e=[],f=3;f<arguments.length;f++)e[f-3]=arguments[f];c.$warn(1003);c.setTimeout.apply(null,[d,a,
b].concat(e))};b.setTimeScale=function(d){this._timeScale=d};b.getTimeScale=function(){return this._timeScale};b.pause=function(){this._paused=!0};b.resume=function(){this._paused=!1};a.getInstance=function(){null==a.instance&&(a.instance=new a);return a.instance};return a}(c.EventDispatcher);c.Ticker=f;f.prototype.__class__="egret.Ticker"})(egret||(egret={}));
(function(c){var f=function(){function c(){}c.LEFT="left";c.RIGHT="right";c.CENTER="center";c.JUSTIFY="justify";c.CONTENT_JUSTIFY="contentJustify";return c}();c.HorizontalAlign=f;f.prototype.__class__="egret.HorizontalAlign"})(egret||(egret={}));(function(c){var f=function(){function c(){}c.TOP="top";c.BOTTOM="bottom";c.MIDDLE="middle";c.JUSTIFY="justify";c.CONTENT_JUSTIFY="contentJustify";return c}();c.VerticalAlign=f;f.prototype.__class__="egret.VerticalAlign"})(egret||(egret={}));
(function(c){var f=function(e){function a(d,a){void 0===a&&(a=0);e.call(this);this._currentCount=0;this._running=!1;this.lastTime=0;this.delay=d;this.repeatCount=a}__extends(a,e);var b=a.prototype;Object.defineProperty(b,"currentCount",{get:function(){return this._currentCount},enumerable:!0,configurable:!0});Object.defineProperty(b,"running",{get:function(){return this._running},enumerable:!0,configurable:!0});b.reset=function(){this.stop();this._currentCount=0};b.start=function(){this._running||
(this.lastTime=c.getTimer(),c.Ticker.getInstance().register(this.onEnterFrame,this),this._running=!0)};b.stop=function(){this._running&&(c.Ticker.getInstance().unregister(this.onEnterFrame,this),this._running=!1)};b.onEnterFrame=function(d){d=c.getTimer();d-this.lastTime>this.delay&&(this.lastTime=d,this._currentCount++,c.TimerEvent.dispatchTimerEvent(this,c.TimerEvent.TIMER),0<this.repeatCount&&this._currentCount>=this.repeatCount&&(this.stop(),c.TimerEvent.dispatchTimerEvent(this,c.TimerEvent.TIMER_COMPLETE)))};
return a}(c.EventDispatcher);c.Timer=f;f.prototype.__class__="egret.Timer"})(egret||(egret={}));
(function(c){function f(c){c=c.prototype?c.prototype:Object.getPrototypeOf(c);if(c.hasOwnProperty("__class__"))return c.__class__;var a=c.constructor.toString(),b=a.indexOf("("),a=a.substring(9,b);Object.defineProperty(c,"__class__",{value:a,enumerable:!1,writable:!0});return a}c.getQualifiedClassName=f;c.getQualifiedSuperclassName=function(c){c=c.prototype?c.prototype:Object.getPrototypeOf(c);if(c.hasOwnProperty("__superclass__"))return c.__superclass__;var a=Object.getPrototypeOf(c);if(null==a)return null;
a=f(a.constructor);if(!a)return null;Object.defineProperty(c,"__superclass__",{value:a,enumerable:!1,writable:!0});return a}})(egret||(egret={}));(function(c){var f={};c.getDefinitionByName=function(c){if(!c)return null;var a=f[c];if(a)return a;for(var b=c.split("."),d=b.length,a=__global,m=0;m<d;m++)if(a=a[b[m]],!a)return null;return f[c]=a}})(egret||(egret={}));var __global=__global||this;
(function(c){function f(a){for(var d in e){var m=e[d];m.delay-=a;0>=m.delay&&(m.listener.apply(m.thisObject,m.params),delete e[d])}}var e={},a=0;c.setTimeout=function(b,d,m){for(var s=[],r=3;r<arguments.length;r++)s[r-3]=arguments[r];s={listener:b,thisObject:d,delay:m,params:s};0==a&&c.Ticker.getInstance().register(f,null);a++;e[a]=s;return a};c.clearTimeout=function(a){delete e[a]}})(egret||(egret={}));
(function(c){function f(a){for(var d in e){var m=e[d];m.delay-=a;0>=m.delay&&(m.delay=m.originDelay,m.listener.apply(m.thisObject,m.params))}}var e={},a=0;c.setInterval=function(b,d,m){for(var s=[],r=3;r<arguments.length;r++)s[r-3]=arguments[r];s={listener:b,thisObject:d,delay:m,originDelay:m,params:s};0==a&&c.Ticker.getInstance().register(f,null);a++;e[a]=s;return a};c.clearInterval=function(a){delete e[a]}})(egret||(egret={}));
(function(c){c.hasDefinition=function(f){return c.getDefinitionByName(f)?!0:!1}})(egret||(egret={}));(function(c){c.toColorString=function(c){if(isNaN(c)||0>c)c=0;for(c=c.toString(16).toUpperCase();6<c.length;)c=c.slice(1,c.length);for(;6>c.length;)c="0"+c;return"#"+c}})(egret||(egret={}));
(function(c){var f=function(e){function a(d,a,b,c,f,g){void 0===d&&(d=1);void 0===a&&(a=0);void 0===b&&(b=0);void 0===c&&(c=1);void 0===f&&(f=0);void 0===g&&(g=0);e.call(this);this.a=d;this.b=a;this.c=b;this.d=c;this.tx=f;this.ty=g}__extends(a,e);var b=a.prototype;b.prepend=function(d,a,b,c,e,f){var h=this.tx;if(1!=d||0!=a||0!=b||1!=c){var k=this.a,n=this.c;this.a=k*d+this.b*b;this.b=k*a+this.b*c;this.c=n*d+this.d*b;this.d=n*a+this.d*c}this.tx=h*d+this.ty*b+e;this.ty=h*a+this.ty*c+f;return this};
b.append=function(d,a,b,c,e,f){var h=this.a,k=this.b,n=this.c,q=this.d;if(1!=d||0!=a||0!=b||1!=c)this.a=d*h+a*n,this.b=d*k+a*q,this.c=b*h+c*n,this.d=b*k+c*q;this.tx=e*h+f*n+this.tx;this.ty=e*k+f*q+this.ty;return this};b.prependTransform=function(d,a,b,e,f,g,h,k,n){if(f%360){var q=c.NumberUtils.cos(f);f=c.NumberUtils.sin(f)}else q=1,f=0;if(k||n)this.tx-=k,this.ty-=n;g||h?(this.prepend(q*b,f*b,-f*e,q*e,0,0),this.prepend(c.NumberUtils.cos(h),c.NumberUtils.sin(h),-c.NumberUtils.sin(g),c.NumberUtils.cos(g),
d,a)):this.prepend(q*b,f*b,-f*e,q*e,d,a);return this};b.appendTransform=function(d,a,b,e,f,g,h,k,n){if(f%360){var q=c.NumberUtils.cos(f);f=c.NumberUtils.sin(f)}else q=1,f=0;g||h?(this.append(c.NumberUtils.cos(h),c.NumberUtils.sin(h),-c.NumberUtils.sin(g),c.NumberUtils.cos(g),d,a),this.append(q*b,f*b,-f*e,q*e,0,0)):this.append(q*b,f*b,-f*e,q*e,d,a);if(k||n)this.tx-=k*this.a+n*this.c,this.ty-=k*this.b+n*this.d;return this};b.rotate=function(d){var a=Math.cos(d);d=Math.sin(d);var b=this.a,c=this.c,e=
this.tx;this.a=b*a-this.b*d;this.b=b*d+this.b*a;this.c=c*a-this.d*d;this.d=c*d+this.d*a;this.tx=e*a-this.ty*d;this.ty=e*d+this.ty*a;return this};b.skew=function(d,a){this.append(c.NumberUtils.cos(a),c.NumberUtils.sin(a),-c.NumberUtils.sin(d),c.NumberUtils.cos(d),0,0);return this};b.scale=function(d,a){this.a*=d;this.d*=a;this.c*=d;this.b*=a;this.tx*=d;this.ty*=a;return this};b.translate=function(d,a){this.tx+=d;this.ty+=a;return this};b.identity=function(){this.a=this.d=1;this.b=this.c=this.tx=this.ty=
0;return this};b.identityMatrix=function(d){this.a=d.a;this.b=d.b;this.c=d.c;this.d=d.d;this.tx=d.tx;this.ty=d.ty;return this};b.invert=function(){var d=this.a,a=this.b,b=this.c,c=this.d,e=this.tx,f=d*c-a*b;this.a=c/f;this.b=-a/f;this.c=-b/f;this.d=d/f;this.tx=(b*this.ty-c*e)/f;this.ty=-(d*this.ty-a*e)/f;return this};a.transformCoords=function(d,a,b){var e=c.Point.identity;e.x=d.a*a+d.c*b+d.tx;e.y=d.d*b+d.b*a+d.ty;return e};b.toArray=function(d){this.array||(this.array=new Float32Array(9));d?(this.array[0]=
this.a,this.array[1]=this.b,this.array[2]=0,this.array[3]=this.c,this.array[4]=this.d,this.array[5]=0,this.array[6]=this.tx,this.array[7]=this.ty):(this.array[0]=this.a,this.array[1]=this.b,this.array[2]=this.tx,this.array[3]=this.c,this.array[4]=this.d,this.array[5]=this.ty,this.array[6]=0,this.array[7]=0);this.array[8]=1;return this.array};b.setTo=function(d,a,b,c,e,f){this.a=d;this.b=a;this.c=b;this.d=c;this.tx=e;this.ty=f};b.copyFrom=function(d){this.identityMatrix(d)};b.clone=function(){return new a(this.a,
this.b,this.c,this.d,this.tx,this.ty)};b.concat=function(d){var a=this.a,b=this.b,c=this.c,e=this.d,f=this.tx,h=this.ty,k=d.a,n=d.b,q=d.c,p=d.d,u=a*k,t=0,C=0,E=e*p,v=f*k+d.tx;d=h*p+d.ty;if(0!=b||0!=c||0!=n||0!=q)u+=b*q,E+=c*n,t+=a*n+b*p,C+=c*k+e*q,v+=h*q,d+=f*n;this.a=u;this.b=t;this.c=C;this.d=E;this.tx=v;this.ty=d};b.deltaTransformPoint=function(d){return new c.Point(this.a*d.x+this.c*d.y,this.b*d.x+this.d*d.y)};b.transformPoint=function(d){return new c.Point(this.a*d.x+this.c*d.y+this.tx,this.b*
d.x+this.d*d.y+this.ty)};b.toString=function(){return"(a="+this.a+", b="+this.b+", c="+this.c+", d="+this.d+", tx="+this.tx+", ty="+this.ty+")"};b.createBox=function(d,a,b,e,f){void 0===b&&(b=0);void 0===e&&(e=0);void 0===f&&(f=0);if(0!==b){b/=c.Matrix.DEG_TO_RAD;var g=c.NumberUtils.cos(b);b=c.NumberUtils.sin(b);this.a=g*d;this.b=b*a;this.c=-b*d;this.d=g*a}else this.a=d,this.c=this.b=0,this.d=a;this.tx=e;this.ty=f};b.createGradientBox=function(d,a,b,c,e){void 0===b&&(b=0);void 0===c&&(c=0);void 0===
e&&(e=0);this.createBox(d/1638.4,a/1638.4,b,c+d/2,e+a/2)};a.identity=new a;a.DEG_TO_RAD=Math.PI/180;return a}(c.HashObject);c.Matrix=f;f.prototype.__class__="egret.Matrix"})(egret||(egret={}));
(function(c){var f=function(e){function a(d,a){void 0===d&&(d=0);void 0===a&&(a=0);e.call(this);this.x=d;this.y=a}__extends(a,e);var b=a.prototype;b.clone=function(){return new a(this.x,this.y)};b.equals=function(d){return this.x==d.x&&this.y==d.y};a.distance=function(d,a){return Math.sqrt((d.x-a.x)*(d.x-a.x)+(d.y-a.y)*(d.y-a.y))};b.setTo=function(d,a){this.x=d;this.y=a};b.copyFrom=function(d){this.x=d.x;this.y=d.y};Object.defineProperty(b,"length",{get:function(){return Math.sqrt(this.x*this.x+this.y*
this.y)},enumerable:!0,configurable:!0});b.add=function(d){return new a(this.x+d.x,this.y+d.y)};a.interpolate=function(d,b,c){var e=1-c;return new a(d.x*c+b.x*e,d.y*c+b.y*e)};b.normalize=function(d){if(0!=this.x||0!=this.y)d/=this.length,this.x*=d,this.y*=d};b.offset=function(d,a){this.x+=d;this.y+=a};a.polar=function(d,b){return new a(d*c.NumberUtils.cos(b/c.Matrix.DEG_TO_RAD),d*c.NumberUtils.sin(b/c.Matrix.DEG_TO_RAD))};b.subtract=function(d){return new a(this.x-d.x,this.y-d.y)};b.toString=function(){return"(x="+
this.x+", y="+this.y+")"};a.identity=new a(0,0);return a}(c.HashObject);c.Point=f;f.prototype.__class__="egret.Point"})(egret||(egret={}));
(function(c){var f=function(e){function a(d,a,b,c){void 0===d&&(d=0);void 0===a&&(a=0);void 0===b&&(b=0);void 0===c&&(c=0);e.call(this);this.x=d;this.y=a;this.width=b;this.height=c}__extends(a,e);var b=a.prototype;Object.defineProperty(b,"left",{get:function(){return this.x},set:function(d){this.width+=this.x-d;this.x=d},enumerable:!0,configurable:!0});Object.defineProperty(b,"right",{get:function(){return this.x+this.width},set:function(d){this.width=d-this.x},enumerable:!0,configurable:!0});Object.defineProperty(b,
"top",{get:function(){return this.y},set:function(d){this.height+=this.y-d;this.y=d},enumerable:!0,configurable:!0});Object.defineProperty(b,"bottom",{get:function(){return this.y+this.height},set:function(d){this.height=d-this.y},enumerable:!0,configurable:!0});Object.defineProperty(b,"topLeft",{get:function(){return new c.Point(this.left,this.top)},set:function(d){this.top=d.y;this.left=d.x},enumerable:!0,configurable:!0});Object.defineProperty(b,"bottomRight",{get:function(){return new c.Point(this.right,
this.bottom)},set:function(d){this.bottom=d.y;this.right=d.x},enumerable:!0,configurable:!0});b.initialize=function(d,a,b,c){this.x=d;this.y=a;this.width=b;this.height=c;return this};b.contains=function(d,a){return this.x<=d&&this.x+this.width>=d&&this.y<=a&&this.y+this.height>=a};b.intersects=function(d){return Math.max(this.x,d.x)<=Math.min(this.right,d.right)&&Math.max(this.y,d.y)<=Math.min(this.bottom,d.bottom)};b.setEmpty=function(){this.height=this.width=this.y=this.x=0};b.clone=function(){return new a(this.x,
this.y,this.width,this.height)};b.containsPoint=function(d){return this.x<d.x&&this.x+this.width>d.x&&this.y<d.y&&this.y+this.height>d.y?!0:!1};b.setTo=function(d,a,b,c){this.initialize(d,a,b,c)};b.copyFrom=function(d){this.x=d.x;this.y=d.y;this.width=d.width;this.height=d.height};b.inflate=function(d,a){this.x-=d;this.width+=2*d;this.y-=a;this.height+=2*a};b.isEmpty=function(){return 0==this.width||0==this.height};b.containsRect=function(d){var a=d.x+d.width,b=d.y+d.height,c=this.x+this.width,e=
this.y+this.height;return d.x>=this.x&&d.x<c&&d.y>=this.y&&d.y<e&&a>this.x&&a<=c&&b>this.y&&b<=e};b.equals=function(d){return this===d?!0:this.x===d.x&&this.y===d.y&&this.width===d.width&&this.height===d.height};b.inflatePoint=function(d){this.inflate(d.x,d.y)};b.intersection=function(d){var a=this.clone(),b=a.x,c=a.y,e=d.x,f=d.y,h=Math.max(b,e),b=Math.min(b+a.width,e+d.width);if(h<=b&&(e=Math.max(c,f),d=Math.min(c+a.height,f+d.height),e<=d))return a.setTo(h,e,b-h,d-e),a;a.setEmpty();return a};b.offset=
function(d,a){this.x+=d;this.y+=a};b.offsetPoint=function(d){this.offset(d.x,d.y)};b.toString=function(){return"(x="+this.x+", y="+this.y+", width="+this.width+", height="+this.height+")"};b.union=function(d){var a=this.clone();if(d.isEmpty())return a;if(a.isEmpty())return a.copyFrom(d),a;var b=Math.min(a.x,d.x),c=Math.min(a.y,d.y);a.setTo(b,c,Math.max(a.right,d.right)-b,Math.max(a.bottom,d.bottom)-c);return a};a.identity=new a(0,0,0,0);return a}(c.HashObject);c.Rectangle=f;f.prototype.__class__=
"egret.Rectangle"})(egret||(egret={}));
(function(c){var f=function(c){function a(d,a,b,f,l,g,h,k){void 0===d&&(d=1);void 0===a&&(a=1);void 0===b&&(b=1);void 0===f&&(f=1);void 0===l&&(l=0);void 0===g&&(g=0);void 0===h&&(h=0);void 0===k&&(k=0);c.call(this);this._redMultiplier=d;this._greenMultiplier=a;this._blueMultiplier=b;this._alphaMultiplier=f;this._redOffset=l;this._greenOffset=g;this._blueOffset=h;this._alphaOffset=k}__extends(a,c);var b=a.prototype;Object.defineProperty(b,"alphaMultiplier",{get:function(){return this._alphaMultiplier},set:function(d){this._alphaMultiplier=
d},enumerable:!0,configurable:!0});Object.defineProperty(b,"alphaOffset",{get:function(){return this._alphaOffset},set:function(d){this._alphaOffset=d},enumerable:!0,configurable:!0});Object.defineProperty(b,"blueMultiplier",{get:function(){return this._blueMultiplier},set:function(d){this._blueMultiplier=d},enumerable:!0,configurable:!0});Object.defineProperty(b,"blueOffset",{get:function(){return this._blueOffset},set:function(d){this._blueOffset=d},enumerable:!0,configurable:!0});Object.defineProperty(b,
"greenMultiplier",{get:function(){return this._greenMultiplier},set:function(d){this._greenMultiplier=d},enumerable:!0,configurable:!0});Object.defineProperty(b,"greenOffset",{get:function(){return this._greenOffset},set:function(d){this._greenOffset=d},enumerable:!0,configurable:!0});Object.defineProperty(b,"redMultiplier",{get:function(){return this._redMultiplier},set:function(d){this._redMultiplier=d},enumerable:!0,configurable:!0});Object.defineProperty(b,"redOffset",{get:function(){return this._redOffset},
set:function(d){this._redOffset=d},enumerable:!0,configurable:!0});Object.defineProperty(b,"color",{get:function(){return this._redOffset<<16+this._greenOffset<<8+this._blueOffset},enumerable:!0,configurable:!0});b.identityColorTransform=function(d){this._alphaMultiplier=d._alphaMultiplier;this._alphaOffset=d._alphaOffset;this._redMultiplier=d._redMultiplier;this._redOffset=d._redOffset;this._greenMultiplier=d._greenMultiplier;this._greenOffset=d._greenOffset;this._blueMultiplier=d._blueMultiplier;
this._blueOffset=d._blueOffset};b.concat=function(d){this._redMultiplier*=d._redMultiplier;this._greenMultiplier*=d._greenMultiplier;this._blueMultiplier*=d._blueMultiplier;this._alphaMultiplier*=d._alphaMultiplier;this._redOffset+=d._redOffset;this._greenOffset+=d._greenOffset;this._blueOffset+=d._blueOffset;this._alphaOffset+=d._alphaOffset};b.toString=function(){return"(redMultiplier="+this._redMultiplier+", greenMultiplier="+this._greenMultiplier+", blueMultiplier="+this._blueMultiplier+", alphaMultiplier="+
this._alphaMultiplier+", redOffset="+this._redOffset+", greenOffset="+this._greenOffset+", blueOffset="+this._blueOffset+", alphaOffset="+this._alphaOffset+")"};return a}(c.HashObject);c.ColorTransform=f;f.prototype.__class__="egret.ColorTransform"})(egret||(egret={}));
(function(c){var f=function(e){function a(d){e.call(this);this._matrix=new c.Matrix;this._matrix2=new c.Matrix;this._colorTransform=new c.ColorTransform;this._colorTransform2=new c.ColorTransform;this._display=d}__extends(a,e);var b=a.prototype;Object.defineProperty(b,"matrix",{get:function(){this._matrix2.identityMatrix(this._matrix);return this._matrix2},set:function(d){this._setMatrix(d)},enumerable:!0,configurable:!0});b._setMatrix=function(d){this._display.__hack_local_matrix||(this._display.__hack_local_matrix=
new c.Matrix);this._display.__hack_local_matrix.identityMatrix(d);this._matrix.identityMatrix(d)};Object.defineProperty(b,"colorTransform",{get:function(){this._colorTransform2.identityColorTransform(this._colorTransform);return this._colorTransform2},set:function(d){this._setColorTransform(d)},enumerable:!0,configurable:!0});b._setColorTransform=function(d){this._colorTransform.identityColorTransform(d)};return a}(c.HashObject);c.Transform=f;f.prototype.__class__="egret.Transform"})(egret||(egret=
{}));
(function(c){var f=function(e){function a(){e.call(this);this._isSupportDOMParser=this._xmlDict=this._parser=null;this._xmlDict={};window.DOMParser?(this._isSupportDOMParser=!0,this._parser=new DOMParser):this._isSupportDOMParser=!1}__extends(a,e);var b=a.prototype;a.getInstance=function(){a._instance||(a._instance=new a);return a._instance};b.parserXML=function(d){for(var a=0;"\n"==d.charAt(a)||"\t"==d.charAt(a)||"\r"==d.charAt(a)||" "==d.charAt(a);)a++;0!=a&&(d=d.substring(a,d.length));this._isSupportDOMParser?a=
this._parser.parseFromString(d,"text/xml"):(a=new ActiveXObject("Microsoft.XMLDOM"),a.async="false",a.loadXML(d));null==a&&c.$warn(1015);return a};a._instance=null;return a}(c.HashObject);c.SAXParser=f;f.prototype.__class__="egret.SAXParser"})(egret||(egret={}));
(function(c){var f=function(d){function b(){d.call(this);this._designHeight=this._designWidth=0;this._scaleY=this._scaleX=1;this._stageHeight=this._stageWidth=this._offSetY=0}__extends(b,d);var e=b.prototype;b.getInstance=function(){null==b.instance&&(a.initialize(),b.instance=new b);return b.instance};e.setDesignSize=function(d,a,b){this._designWidth=d;this._designHeight=a;b&&(c.$warn(1001),this._setResolutionPolicy(b))};e._setResolutionPolicy=function(d){this._resolutionPolicy=d;d.init(this);d._apply(this,
this._designWidth,this._designHeight)};e.getScaleX=function(){return this._scaleX};e.getScaleY=function(){return this._scaleY};e.getOffSetY=function(){return this._offSetY};b.canvas_name="egretCanvas";b.egret_root_div="gameDiv";b.canvas_div_name="canvasDiv";return b}(c.HashObject);c.StageDelegate=f;f.prototype.__class__="egret.StageDelegate";var e=function(){function d(a,b){this._containerStrategy=a;this._contentStrategy=b}var a=d.prototype;a.init=function(d){this._containerStrategy.init(d);this._contentStrategy.init(d)};
a._apply=function(d,a,b){this._containerStrategy._apply(d,a,b);this._contentStrategy._apply(d,a,b)};return d}();c.ResolutionPolicy=e;e.prototype.__class__="egret.ResolutionPolicy";var a=function(){function d(){}var a=d.prototype;d.initialize=function(){d.EQUAL_TO_FRAME=new b};a.init=function(d){};a._apply=function(d,a,b){};a._setupContainer=function(){var d=document.body,a;d&&(a=d.style)&&(a.paddingTop=a.paddingTop||"0px",a.paddingRight=a.paddingRight||"0px",a.paddingBottom=a.paddingBottom||"0px",
a.paddingLeft=a.paddingLeft||"0px",a.borderTop=a.borderTop||"0px",a.borderRight=a.borderRight||"0px",a.borderBottom=a.borderBottom||"0px",a.borderLeft=a.borderLeft||"0px",a.marginTop=a.marginTop||"0px",a.marginRight=a.marginRight||"0px",a.marginBottom=a.marginBottom||"0px",a.marginLeft=a.marginLeft||"0px")};return d}();c.ContainerStrategy=a;a.prototype.__class__="egret.ContainerStrategy";var b=function(d){function a(){d.apply(this,arguments)}__extends(a,d);a.prototype._apply=function(d){this._setupContainer()};
return a}(a);c.EqualToFrame=b;b.prototype.__class__="egret.EqualToFrame";e=function(){function d(){}var a=d.prototype;a.init=function(d){};a._apply=function(d,a,b){};a.setEgretSize=function(d,a,b,m,e,s){void 0===s&&(s=0);c.StageDelegate.getInstance()._stageWidth=Math.round(d);c.StageDelegate.getInstance()._stageHeight=Math.round(a);d=document.getElementById(f.canvas_div_name);a=document.getElementById(f.egret_root_div);d||(d=c.Browser.getInstance().$new("div"),d.id=f.canvas_div_name,a.appendChild(d));
d.style.width=b+"px";d.style.height=m+"px";a.style.width=b+"px";a.style.height=m+"px";a.style.top=s+"px"};a._getClientWidth=function(){return document.documentElement.clientWidth};a._getClientHeight=function(){return document.documentElement.clientHeight};return d}();c.ContentStrategy=e;e.prototype.__class__="egret.ContentStrategy";var d=function(d){function a(b){void 0===b&&(b=0);d.call(this);this.minWidth=NaN;this.minWidth=b}__extends(a,d);a.prototype._apply=function(d,a,b){a=this._getClientWidth();
var m=this._getClientHeight(),c=m/b,e=a/c,s=1;0!=this.minWidth&&(s=Math.min(1,e/this.minWidth));this.setEgretSize(e/s,b,a,m*s);d._scaleX=c*s;d._scaleY=c*s};return a}(e);c.FixedHeight=d;d.prototype.__class__="egret.FixedHeight";d=function(d){function a(b){void 0===b&&(b=0);d.call(this);this.minHeight=NaN;this.minHeight=b}__extends(a,d);a.prototype._apply=function(d,a,b){b=this._getClientWidth();var m=this._getClientHeight(),c=b/a,e=m/c,s=1;0!=this.minHeight&&(s=Math.min(1,e/this.minHeight));this.setEgretSize(a,
e/s,b*s,m,b*(1-s)/2);d._scaleX=c*s;d._scaleY=c*s};return a}(e);c.FixedWidth=d;d.prototype.__class__="egret.FixedWidth";d=function(d){function a(b,c){d.call(this);this.width=b;this.height=c}__extends(a,d);a.prototype._apply=function(d,a,b){b=this.width;var m=this.height,c=b/a;this.setEgretSize(a,m/c,b,m);d._scaleX=c;d._scaleY=c};return a}(e);c.FixedSize=d;d.prototype.__class__="egret.FixedSize";d=function(d){function a(){d.call(this)}__extends(a,d);a.prototype._apply=function(d,a,b){this.setEgretSize(a,
b,a,b,Math.floor((a-a)/2));d._scaleX=1;d._scaleY=1};return a}(e);c.NoScale=d;d.prototype.__class__="egret.NoScale";d=function(d){function a(){d.call(this)}__extends(a,d);a.prototype._apply=function(d,a,b){var m=this._getClientWidth(),c=this._getClientHeight(),e=m,s=c,f=e/a<s/b?e/a:s/b,e=a*f,s=b*f,m=Math.floor((m-e)/2);d._offSetY=Math.floor((c-s)/2);this.setEgretSize(a,b/1,1*e,s,m,d._offSetY);d._scaleX=1*f;d._scaleY=1*f};return a}(e);c.ShowAll=d;d.prototype.__class__="egret.ShowAll";e=function(d){function a(){d.call(this)}
__extends(a,d);a.prototype._apply=function(d,a,b){var m=this._getClientWidth(),c=this._getClientHeight(),m=m/a,c=c/b;this.setEgretSize(a,b,a*m,b*c);d._scaleX=m;d._scaleY=c};return a}(e);c.FullScreen=e;e.prototype.__class__="egret.FullScreen"})(egret||(egret={}));
(function(c){var f=function(e){function a(){e.call(this);this._originalData={};this._drawAreaList=[]}__extends(a,e);var b=a.prototype;a.getInstance=function(){null==a.instance&&(a.instance=new a);return a.instance};b.addDrawArea=function(d){this._drawAreaList.push(d)};b.clearDrawArea=function(){this._drawAreaList=[]};b.drawImage=function(d,b,e,f,l,g,h,k,n,q,p){void 0===p&&(p=void 0);h=h||0;k=k||0;var u=b._texture_to_render;if(null!=u&&0!=g&&0!=l&&0!=n&&0!=q){var t=c.MainContext.instance.rendererContext._texture_scale_factor;
l/=t;g/=t;if(0!=this._drawAreaList.length&&c.MainContext.instance.rendererContext._cacheCanvasContext){t=c.DisplayObject.getTransformBounds(b._getSize(a.identityRectangle),b._worldTransform);b._worldBounds.initialize(t.x,t.y,t.width,t.height);t=this._originalData;t.sourceX=e;t.sourceY=f;t.sourceWidth=l;t.sourceHeight=g;t.destX=h;t.destY=k;t.destWidth=n;t.destHeight=q;for(var C=this.getDrawAreaList(),E=0;E<C.length;E++)if(!this.ignoreRender(b,C[E],t.destX,t.destY)){d.drawImage(u,e,f,l,g,h,k,n,q,p);
break}}else d.drawImage(u,e,f,l,g,h,k,n,q,p)}};b.ignoreRender=function(d,a,b,c){var e=d._worldBounds;b*=d._worldTransform.a;c*=d._worldTransform.d;return e.x+e.width+b<=a.x||e.x+b>=a.x+a.width||e.y+e.height+c<=a.y||e.y+c>=a.y+a.height?!0:!1};b.getDrawAreaList=function(){var d;0==this._drawAreaList.length?(this._defaultDrawAreaList||(this._defaultDrawAreaList=[new c.Rectangle(0,0,c.MainContext.instance.stage.stageWidth,c.MainContext.instance.stage.stageHeight)],c.MainContext.instance.stage.addEventListener(c.Event.RESIZE,
this.onResize,this)),d=this._defaultDrawAreaList):d=this._drawAreaList;return d};b.onResize=function(){c.MainContext.instance.stage.removeEventListener(c.Event.RESIZE,this.onResize,this);this._defaultDrawAreaList=null};a.identityRectangle=new c.Rectangle;return a}(c.HashObject);c.RenderFilter=f;f.prototype.__class__="egret.RenderFilter"})(egret||(egret={}));
(function(c){var f=function(){function e(){}e.mapClass=function(a,b,d){void 0===d&&(d="");a=this.getKey(a)+"#"+d;this.mapClassDic[a]=b};e.getKey=function(a){return"string"==typeof a?a:c.getQualifiedClassName(a)};e.mapValue=function(a,b,d){void 0===d&&(d="");a=this.getKey(a)+"#"+d;this.mapValueDic[a]=b};e.hasMapRule=function(a,b){void 0===b&&(b="");var d=this.getKey(a)+"#"+b;return this.mapValueDic[d]||this.mapClassDic[d]?!0:!1};e.getInstance=function(a,b){void 0===b&&(b="");var d=this.getKey(a)+"#"+
b;if(this.mapValueDic[d])return this.mapValueDic[d];var m=this.mapClassDic[d];if(m)return m=new m,this.mapValueDic[d]=m,delete this.mapClassDic[d],m;c.$error(1028,d)};e.mapClassDic={};e.mapValueDic={};return e}();c.Injector=f;f.prototype.__class__="egret.Injector"})(egret||(egret={}));(function(c){var f=function(c){function a(){c.apply(this,arguments);this.type=null}__extends(a,c);return a}(c.HashObject);c.Filter=f;f.prototype.__class__="egret.Filter"})(egret||(egret={}));
(function(c){var f=function(c){function a(a,d){c.call(this);this.blurX=a;this.blurY=d;this.type="blur"}__extends(a,c);return a}(c.Filter);c.BlurFilter=f;f.prototype.__class__="egret.BlurFilter"})(egret||(egret={}));
(function(c){var f=function(c){function a(d){void 0===d&&(d=null);c.call(this);this._matrix=[];this._matrix2=[];this.type="colorTransform";this._setMatrix(d)}__extends(a,c);var b=a.prototype;Object.defineProperty(b,"matrix",{get:function(){for(var d=0;20>d;d++)this._matrix2[d]=this._matrix[d];return this._matrix2},set:function(d){this._setMatrix(d)},enumerable:!0,configurable:!0});b._setMatrix=function(d){for(var a=0;20>a;a++)this._matrix[a]=d&&d[a]||0};return a}(c.Filter);c.ColorMatrixFilter=f;f.prototype.__class__=
"egret.ColorMatrixFilter"})(egret||(egret={}));
(function(c){var f=function(c){function a(a,d,m,s,f,l,g,h){void 0===a&&(a=16711680);void 0===d&&(d=1);void 0===m&&(m=6);void 0===s&&(s=6);void 0===f&&(f=2);void 0===l&&(l=1);void 0===g&&(g=!1);void 0===h&&(h=!1);c.call(this);this.color=a;this.alpha=d;this.blurX=m;this.blurY=s;this.strength=f;this.quality=l;this.inner=g;this.knockout=h;this.type="glow";this._blue=a&255;this._green=(a&65280)>>8;this._red=a>>16}__extends(a,c);return a}(c.Filter);c.GlowFilter=f;f.prototype.__class__="egret.GlowFilter"})(egret||
(egret={}));(function(c){var f=function(c){function a(a,d,m,s,f,l,g,h,k,n,q){void 0===a&&(a=4);void 0===d&&(d=45);void 0===m&&(m=0);void 0===s&&(s=1);void 0===f&&(f=4);void 0===l&&(l=4);void 0===g&&(g=1);void 0===h&&(h=1);void 0===k&&(k=!1);void 0===n&&(n=!1);c.call(this,m,s,f,l,g,h,k,n);this.distance=a;this.angle=d}__extends(a,c);return a}(c.GlowFilter);c.DropShadowFilter=f;f.prototype.__class__="egret.DropShadowFilter"})(egret||(egret={}));
(function(c){var f=function(){function c(){}c.NORMAL="normal";c.ADD="add";c.ERASE="erase";c.ERASE_REVERSE="eraseReverse";return c}();c.BlendMode=f;f.prototype.__class__="egret.BlendMode"})(egret||(egret={}));
(function(c){var f=function(){function c(){this._name=null;this._explicitHeight=this._explicitWidth=NaN;this._y=this._x=0;this._scaleY=this._scaleX=1;this._rotation=this._anchorY=this._anchorX=this._anchorOffsetY=this._anchorOffsetX=0;this._alpha=1;this._skewY=this._skewX=0;this._blendMode=null;this._touchEnabled=c.defaultTouchEnabled;this._visible=!0;this._worldAlpha=1;this._scrollRect=null;this._cacheAsBitmap=!1;this._stage=this._parent=null;this._needDraw=!1;this._filters=null;this._hasHeightSet=
this._hasWidthSet=!1;this._sizeDirty=this._normalDirty=!0;this._isContainer=!1}c.defaultTouchEnabled=!1;return c}();c.DisplayObjectProperties=f;f.prototype.__class__="egret.DisplayObjectProperties"})(egret||(egret={}));(function(c){var f=function(){return function(){this._hitTestPointTexture=null;this._rectH=this._rectW=0;this._cacheDirty=!1}}();c.DisplayObjectPrivateProperties=f;f.prototype.__class__="egret.DisplayObjectPrivateProperties"})(egret||(egret={}));
(function(c){var f=function(e){function a(){e.call(this);this.renderTexture=this.mask=this._sizeChangeCallTarget=this._sizeChangeCallBack=this.__hack_local_matrix=this._worldBounds=this._texture_to_render=null;this._DO_Props_=new c.DisplayObjectProperties;this._DO_Privs_=new c.DisplayObjectPrivateProperties;this._worldTransform=new c.Matrix;this._worldBounds=new c.Rectangle(0,0,0,0);this._DO_Privs_._cacheBounds=new c.Rectangle(0,0,0,0)}__extends(a,e);var b=a.prototype;b._setDirty=function(){this._DO_Props_._normalDirty=
!0};b.getDirty=function(){return this._DO_Props_._normalDirty||this._DO_Props_._sizeDirty};b._setParentSizeDirty=function(){var d=this._DO_Props_._parent;d&&(d._DO_Props_._hasWidthSet||d._DO_Props_._hasHeightSet?d._setCacheDirty():d._setSizeDirty())};b._setSizeDirty=function(){var d=this._DO_Props_;d._sizeDirty||(d._sizeDirty=!0,this._setDirty(),this._setCacheDirty(),this._setParentSizeDirty(),null!=this._sizeChangeCallBack&&(this._sizeChangeCallTarget==d._parent?this._sizeChangeCallBack.call(this._sizeChangeCallTarget):
this._sizeChangeCallTarget=this._sizeChangeCallBack=null))};b._clearDirty=function(){this._DO_Props_._normalDirty=!1};b._clearSizeDirty=function(){this._DO_Props_._sizeDirty=!1};Object.defineProperty(b,"name",{get:function(){return this._DO_Props_._name},set:function(d){this._DO_Props_._name=d},enumerable:!0,configurable:!0});Object.defineProperty(b,"parent",{get:function(){return this._DO_Props_._parent},enumerable:!0,configurable:!0});b._parentChanged=function(d){this._DO_Props_._parent=d};Object.defineProperty(b,
"x",{get:function(){return this._DO_Props_._x},set:function(d){this._setX(d)},enumerable:!0,configurable:!0});b._setX=function(d){c.NumberUtils.isNumber(d)&&this._DO_Props_._x!=d&&(this._DO_Props_._x=d,this._setDirty(),this._setParentSizeDirty())};Object.defineProperty(b,"y",{get:function(){return this._DO_Props_._y},set:function(d){this._setY(d)},enumerable:!0,configurable:!0});b._setY=function(d){c.NumberUtils.isNumber(d)&&this._DO_Props_._y!=d&&(this._DO_Props_._y=d,this._setDirty(),this._setParentSizeDirty())};
Object.defineProperty(b,"scaleX",{get:function(){return this._DO_Props_._scaleX},set:function(d){c.NumberUtils.isNumber(d)&&this._DO_Props_._scaleX!=d&&(this._DO_Props_._scaleX=d,this._setDirty(),this._setParentSizeDirty())},enumerable:!0,configurable:!0});Object.defineProperty(b,"scaleY",{get:function(){return this._DO_Props_._scaleY},set:function(d){c.NumberUtils.isNumber(d)&&this._DO_Props_._scaleY!=d&&(this._DO_Props_._scaleY=d,this._setDirty(),this._setParentSizeDirty())},enumerable:!0,configurable:!0});
Object.defineProperty(b,"anchorOffsetX",{get:function(){return this._DO_Props_._anchorOffsetX},set:function(d){c.NumberUtils.isNumber(d)&&this._DO_Props_._anchorOffsetX!=d&&(this._DO_Props_._anchorOffsetX=d,this._setDirty(),this._setParentSizeDirty())},enumerable:!0,configurable:!0});Object.defineProperty(b,"anchorOffsetY",{get:function(){return this._DO_Props_._anchorOffsetY},set:function(d){c.NumberUtils.isNumber(d)&&this._DO_Props_._anchorOffsetY!=d&&(this._DO_Props_._anchorOffsetY=d,this._setDirty(),
this._setParentSizeDirty())},enumerable:!0,configurable:!0});Object.defineProperty(b,"anchorX",{get:function(){return this._DO_Props_._anchorX},set:function(d){this._setAnchorX(d)},enumerable:!0,configurable:!0});b._setAnchorX=function(d){c.NumberUtils.isNumber(d)&&this._DO_Props_._anchorX!=d&&(this._DO_Props_._anchorX=d,this._setDirty(),this._setParentSizeDirty())};Object.defineProperty(b,"anchorY",{get:function(){return this._DO_Props_._anchorY},set:function(d){this._setAnchorY(d)},enumerable:!0,
configurable:!0});b._setAnchorY=function(d){c.NumberUtils.isNumber(d)&&this._DO_Props_._anchorY!=d&&(this._DO_Props_._anchorY=d,this._setDirty(),this._setParentSizeDirty())};Object.defineProperty(b,"visible",{get:function(){return this._DO_Props_._visible},set:function(d){this._setVisible(d)},enumerable:!0,configurable:!0});b._setVisible=function(d){this._DO_Props_._visible!=d&&(this._DO_Props_._visible=d,this._setSizeDirty())};Object.defineProperty(b,"rotation",{get:function(){return this._DO_Props_._rotation},
set:function(d){c.NumberUtils.isNumber(d)&&this._DO_Props_._rotation!=d&&(this._DO_Props_._rotation=d,this._setDirty(),this._setParentSizeDirty())},enumerable:!0,configurable:!0});Object.defineProperty(b,"alpha",{get:function(){return this._DO_Props_._alpha},set:function(d){this._setAlpha(d)},enumerable:!0,configurable:!0});b._setAlpha=function(d){c.NumberUtils.isNumber(d)&&this._DO_Props_._alpha!=d&&(this._DO_Props_._alpha=d,this._setDirty(),this._setCacheDirty())};Object.defineProperty(b,"skewX",
{get:function(){return this._DO_Props_._skewX},set:function(d){c.NumberUtils.isNumber(d)&&this._DO_Props_._skewX!=d&&(this._DO_Props_._skewX=d,this._setDirty(),this._setParentSizeDirty())},enumerable:!0,configurable:!0});Object.defineProperty(b,"skewY",{get:function(){return this._DO_Props_._skewY},set:function(d){c.NumberUtils.isNumber(d)&&this._DO_Props_._skewY!=d&&(this._DO_Props_._skewY=d,this._setDirty(),this._setParentSizeDirty())},enumerable:!0,configurable:!0});Object.defineProperty(b,"touchEnabled",
{get:function(){return this._DO_Props_._touchEnabled},set:function(d){this._setTouchEnabled(d)},enumerable:!0,configurable:!0});b._setTouchEnabled=function(d){this._DO_Props_._touchEnabled=d};Object.defineProperty(b,"blendMode",{get:function(){return this._DO_Props_._blendMode},set:function(d){this._DO_Props_._blendMode=d},enumerable:!0,configurable:!0});Object.defineProperty(b,"scrollRect",{get:function(){return this._DO_Props_._scrollRect},set:function(d){this._setScrollRect(d)},enumerable:!0,configurable:!0});
b._setScrollRect=function(d){this._DO_Props_._scrollRect=d;this._setSizeDirty()};Object.defineProperty(b,"measuredWidth",{get:function(){return this._measureBounds().width},enumerable:!0,configurable:!0});Object.defineProperty(b,"measuredHeight",{get:function(){return this._measureBounds().height},enumerable:!0,configurable:!0});Object.defineProperty(b,"explicitWidth",{get:function(){return this._DO_Props_._explicitWidth},enumerable:!0,configurable:!0});Object.defineProperty(b,"explicitHeight",{get:function(){return this._DO_Props_._explicitHeight},
enumerable:!0,configurable:!0});Object.defineProperty(b,"width",{get:function(){return this._getWidth()},set:function(d){this._setWidth(d)},enumerable:!0,configurable:!0});b._getWidth=function(){return this._getSize(c.Rectangle.identity).width};Object.defineProperty(b,"height",{get:function(){return this._getHeight()},set:function(d){this._setHeight(d)},enumerable:!0,configurable:!0});b._getHeight=function(){return this._getSize(c.Rectangle.identity).height};b._setWidth=function(d){this._setSizeDirty();
this._setCacheDirty();this._DO_Props_._explicitWidth=d;this._DO_Props_._hasWidthSet=c.NumberUtils.isNumber(d)};b._setHeight=function(d){this._setSizeDirty();this._setCacheDirty();this._DO_Props_._explicitHeight=d;this._DO_Props_._hasHeightSet=c.NumberUtils.isNumber(d)};Object.defineProperty(b,"worldAlpha",{get:function(){return this._DO_Props_._worldAlpha},set:function(d){this._DO_Props_._worldAlpha=d},enumerable:!0,configurable:!0});b._draw=function(d){if(this._DO_Props_._visible&&!this.drawCacheTexture(d)){var a=
c.MainContext.__use_new_draw&&this._DO_Props_._isContainer;this._hasFilters()&&!a&&this._setGlobalFilters(d);d.setAlpha(this.worldAlpha,this.blendMode);d.setTransform(this._worldTransform);var b=this.mask||this._DO_Props_._scrollRect;b&&!a&&d.pushMask(b);this._render(d);b&&!a&&d.popMask();this._hasFilters()&&!a&&this._removeGlobalFilters(d)}this.destroyCacheBounds()};b._setGlobalFilters=function(d){var b;b=this._DO_Props_._filters?this._DO_Props_._filters.concat():[];if(this._transform){var c=this._transform._colorTransform,
e=a.color;e[0]=c._redMultiplier;e[4]=c._redOffset;e[6]=c._greenMultiplier;e[9]=c._greenOffset;e[12]=c._blueMultiplier;e[14]=c._blueOffset;e[18]=c._alphaMultiplier;e[19]=c._alphaOffset;a.colorMatrixFilter._matrix=e;b.push(a.colorMatrixFilter)}d.setGlobalFilters(b)};b._removeGlobalFilters=function(d){d.setGlobalFilters(null)};b._hasFilters=function(){var d=this._DO_Props_._filters&&0<this._DO_Props_._filters.length;if(this._transform){var a=this._transform._colorTransform;if(1!=a._redMultiplier||0!=
a._redOffset||1!=a._greenMultiplier||0!=a._greenOffset||1!=a._blueMultiplier||0!=a._blueOffset||1!=a._alphaMultiplier||0!=a._alphaOffset)d=!0}return d};b._pushMask=function(d){d.setTransform(this._worldTransform);var a=this.mask||this._DO_Props_._scrollRect;a&&d.pushMask(a)};b._popMask=function(d){d.popMask()};b.drawCacheTexture=function(d){if(!1==this._DO_Props_._cacheAsBitmap)return!1;var a=this.getBounds(c.Rectangle.identity);if(this._DO_Privs_._cacheDirty||null==this._texture_to_render||1<=Math.round(a.width)-
this._texture_to_render._textureWidth||1<=Math.round(a.height)-this._texture_to_render._textureHeight)a=this._makeBitmapCache(),this._DO_Privs_._cacheDirty=!a;if(null==this._texture_to_render)return!1;var b=this._texture_to_render,a=b._offsetX,e=b._offsetY,f=b._textureWidth,b=b._textureHeight;this._updateTransform();d.setAlpha(this.worldAlpha,this.blendMode);d.setTransform(this._worldTransform);c.RenderFilter.getInstance().drawImage(d,this,0,0,f,b,a,e,f,b);return!0};Object.defineProperty(b,"needDraw",
{get:function(){return this._DO_Props_._needDraw},set:function(d){this._DO_Props_._needDraw=d},enumerable:!0,configurable:!0});b._updateTransform=function(){var d=this._DO_Props_;d._visible&&(this._calculateWorldTransform(),"updateTransform"==c.MainContext._renderLoopPhase&&(this.needDraw||this._texture_to_render||d._cacheAsBitmap)&&c.RenderCommand.push(this._draw,this))};b._calculateWorldTransform=function(){var d=this._DO_Props_,a=this._worldTransform,b=d._parent;a.identityMatrix(b._worldTransform);
this._getMatrix(a);var c=d._scrollRect;c&&a.append(1,0,0,1,-c.x,-c.y);this.worldAlpha=b.worldAlpha*d._alpha};b._render=function(d){};b.getBounds=function(d,a){void 0===a&&(a=!0);var b=this._DO_Props_,e=this._DO_Privs_,f=this._measureBounds(),g=b._hasWidthSet?b._explicitWidth:f.width,h=b._hasHeightSet?b._explicitHeight:f.height;e._rectW=f.width;e._rectH=f.height;this._clearSizeDirty();var k=f.x,f=f.y,n=0,q=0;a&&(0!=b._anchorX||0!=b._anchorY?(n=g*b._anchorX,q=h*b._anchorY):(n=b._anchorOffsetX,q=b._anchorOffsetY));
e._cacheBounds.initialize(k-n,f-q,g,h);b=e._cacheBounds;d||(d=new c.Rectangle);return d.initialize(b.x,b.y,b.width,b.height)};b.destroyCacheBounds=function(){var d=this._DO_Privs_;d._cacheBounds.x=0;d._cacheBounds.y=0;d._cacheBounds.width=0;d._cacheBounds.height=0};b._getConcatenatedMatrix=function(){for(var d=a.identityMatrixForGetConcatenated.identity(),b=this;null!=b;){var e=b._DO_Props_;0!=e._anchorX||0!=e._anchorY?(b=b._getSize(c.Rectangle.identity),d.prependTransform(e._x,e._y,e._scaleX,e._scaleY,
e._rotation,e._skewX,e._skewY,b.width*e._anchorX,b.height*e._anchorY)):d.prependTransform(e._x,e._y,e._scaleX,e._scaleY,e._rotation,e._skewX,e._skewY,e._anchorOffsetX,e._anchorOffsetY);e._scrollRect&&d.prepend(1,0,0,1,-e._scrollRect.x,-e._scrollRect.y);b=e._parent}return d};b.localToGlobal=function(d,a,b){void 0===d&&(d=0);void 0===a&&(a=0);var e=this._getConcatenatedMatrix();e.append(1,0,0,1,d,a);b||(b=new c.Point);b.x=e.tx;b.y=e.ty;return b};b.globalToLocal=function(d,a,b){void 0===d&&(d=0);void 0===
a&&(a=0);var e=this._getConcatenatedMatrix();e.invert();e.append(1,0,0,1,d,a);b||(b=new c.Point);b.x=e.tx;b.y=e.ty;return b};b.hitTest=function(d,a,b){void 0===b&&(b=!1);var e=this._DO_Props_;if(!e._visible||!b&&!e._touchEnabled)return null;b=this.getBounds(c.Rectangle.identity,!1);d-=b.x;a-=b.y;return 0<=d&&d<b.width&&0<=a&&a<b.height?this.mask||e._scrollRect?e._scrollRect&&d>e._scrollRect.x&&a>e._scrollRect.y&&d<e._scrollRect.x+e._scrollRect.width&&a<e._scrollRect.y+e._scrollRect.height||this.mask&&
this.mask.x<=d&&d<this.mask.x+this.mask.width&&this.mask.y<=a&&a<this.mask.y+this.mask.height?this:null:this:null};b.hitTestPoint=function(d,a,b){var e=this._DO_Privs_;d=this.globalToLocal(d,a);return b?(e._hitTestPointTexture||(e._hitTestPointTexture=new c.RenderTexture),b=e._hitTestPointTexture,b.drawToTexture(this,new c.Rectangle(d.x-e._hitTestPointTexture._offsetX-1,d.y-e._hitTestPointTexture._offsetY-1,3,3)),0!=b.getPixel32(1,1)[3]?!0:!1):!!this.hitTest(d.x,d.y,!0)};b._getMatrix=function(d){d||
(d=c.Matrix.identity.identity());var a=this._DO_Props_,b,e;e=this._getOffsetPoint();b=e.x;e=e.y;var f=this.__hack_local_matrix;f?(d.append(f.a,f.b,f.c,f.d,f.tx,f.ty),d.append(1,0,0,1,-b,-e)):d.appendTransform(a._x,a._y,a._scaleX,a._scaleY,a._rotation,a._skewX,a._skewY,b,e);return d};b._getSize=function(d){var a=this._DO_Props_;if(a._hasHeightSet&&a._hasWidthSet)return this._clearSizeDirty(),d.initialize(0,0,a._explicitWidth,a._explicitHeight);this._measureSize(d);a._hasWidthSet&&(d.width=a._explicitWidth);
a._hasHeightSet&&(d.height=a._explicitHeight);return d};b._measureSize=function(d){var a=this._DO_Privs_;this._DO_Props_._sizeDirty?(d=this._measureBounds(),a._rectW=d.width,a._rectH=d.height,this._clearSizeDirty()):(d.width=a._rectW,d.height=a._rectH);d.x=0;d.y=0;return d};b._measureBounds=function(){return c.Rectangle.identity.initialize(0,0,0,0)};b._getOffsetPoint=function(){var d=this._DO_Props_,a=d._anchorOffsetX,b=d._anchorOffsetY;if(0!=d._anchorX||0!=d._anchorY)b=this._getSize(c.Rectangle.identity),
a=d._anchorX*b.width,b=d._anchorY*b.height;d=c.Point.identity;d.x=a;d.y=b;return d};b._onAddToStage=function(){this._DO_Props_._stage=c.MainContext.instance.stage;c.DisplayObjectContainer.__EVENT__ADD_TO_STAGE_LIST.push(this)};b._onRemoveFromStage=function(){c.DisplayObjectContainer.__EVENT__REMOVE_FROM_STAGE_LIST.push(this)};Object.defineProperty(b,"stage",{get:function(){return this._DO_Props_._stage},enumerable:!0,configurable:!0});b.addEventListener=function(d,b,s,f,l){void 0===f&&(f=!1);void 0===
l&&(l=0);e.prototype.addEventListener.call(this,d,b,s,f,l);((f=d==c.Event.ENTER_FRAME)||d==c.Event.RENDER)&&this._insertEventBin(f?a._enterFrameCallBackList:a._renderCallBackList,b,s,l,this)};b.removeEventListener=function(d,b,s,f){void 0===f&&(f=!1);e.prototype.removeEventListener.call(this,d,b,s,f);((f=d==c.Event.ENTER_FRAME)||d==c.Event.RENDER)&&this._removeEventBin(f?a._enterFrameCallBackList:a._renderCallBackList,b,s,this)};b.dispatchEvent=function(d){if(!d._bubbles)return e.prototype.dispatchEvent.call(this,
d);for(var a=[],b=this;b;)a.push(b),b=b._DO_Props_._parent;d._reset();this._dispatchPropagationEvent(d,a);return!d._isDefaultPrevented};b._dispatchPropagationEvent=function(d,a,b){b=a.length;for(var c=1,e=b-1;0<=e;e--){var f=a[e];d._currentTarget=f;d._target=this;d._eventPhase=c;f._notifyListener(d);if(d._isPropagationStopped||d._isPropagationImmediateStopped)return}f=a[0];d._currentTarget=f;d._target=this;d._eventPhase=2;f._notifyListener(d);if(!d._isPropagationStopped&&!d._isPropagationImmediateStopped)for(c=
3,e=1;e<b&&(f=a[e],d._currentTarget=f,d._target=this,d._eventPhase=c,f._notifyListener(d),!d._isPropagationStopped&&!d._isPropagationImmediateStopped);e++);};b.willTrigger=function(d){for(var a=this;a;){if(a.hasEventListener(d))return!0;a=a._DO_Props_._parent}return!1};Object.defineProperty(b,"cacheAsBitmap",{get:function(){return this._DO_Props_._cacheAsBitmap},set:function(d){(this._DO_Props_._cacheAsBitmap=d)?c.callLater(this._makeBitmapCache,this):this._texture_to_render=null},enumerable:!0,configurable:!0});
b._makeBitmapCache=function(){this.renderTexture||(this.renderTexture=new c.RenderTexture);var d=this.renderTexture.drawToTexture(this);this._texture_to_render=d?this.renderTexture:null;return d};b._setCacheDirty=function(d){void 0===d&&(d=!0);this._DO_Privs_._cacheDirty=d};a.getTransformBounds=function(d,a){var b=d.x,c=d.y,e=d.width,f=d.height;(b||c)&&a.appendTransform(0,0,1,1,0,0,0,-b,-c);var h=e*a.a,e=e*a.b,k=f*a.c,f=f*a.d,n=a.tx,q=a.ty,p=n,u=n,t=q,C=q;(b=h+n)<p?p=b:b>u&&(u=b);(b=h+k+n)<p?p=b:
b>u&&(u=b);(b=k+n)<p?p=b:b>u&&(u=b);(c=e+q)<t?t=c:c>C&&(C=c);(c=e+f+q)<t?t=c:c>C&&(C=c);(c=f+q)<t?t=c:c>C&&(C=c);return d.initialize(p,t,u-p,C-t)};Object.defineProperty(b,"filters",{get:function(){return this._DO_Props_._filters},set:function(d){this._DO_Props_._filters=d},enumerable:!0,configurable:!0});Object.defineProperty(b,"transform",{get:function(){this._transform||(this._transform=new c.Transform(this));return this._transform},enumerable:!0,configurable:!0});a.color=[1,0,0,0,0,0,1,0,0,0,0,
0,1,0,0,0,0,0,1,0];a.colorMatrixFilter=new c.ColorMatrixFilter;a.identityMatrixForGetConcatenated=new c.Matrix;a._enterFrameCallBackList=[];a._renderCallBackList=[];return a}(c.EventDispatcher);c.DisplayObject=f;f.prototype.__class__="egret.DisplayObject"})(egret||(egret={}));
(function(c){var f=function(e){function a(){e.call(this);this._touchChildren=!0;this._children=[];this._DO_Props_._isContainer=!0}__extends(a,e);var b=a.prototype;Object.defineProperty(b,"touchChildren",{get:function(){return this._touchChildren},set:function(d){this._touchChildren=d},enumerable:!0,configurable:!0});Object.defineProperty(b,"numChildren",{get:function(){return this._children.length},enumerable:!0,configurable:!0});b.setChildIndex=function(d,a){this.doSetChildIndex(d,a)};b.doSetChildIndex=
function(d,a){var b=this._children.indexOf(d);0>b&&c.$error(1006);this._children.splice(b,1);0>a||this._children.length<=a?this._children.push(d):this._children.splice(a,0,d)};b.addChild=function(d){var a=this._children.length;d.parent==this&&a--;return this._doAddChild(d,a)};b.addChildAt=function(d,a){return this._doAddChild(d,a)};b._doAddChild=function(d,b,e){void 0===e&&(e=!0);if(d==this)return d;if(0>b||b>this._children.length)return c.$error(1007),d;var f=d.parent;if(f==this)return this.doSetChildIndex(d,
b),d;if(f){var l=f._children.indexOf(d);0<=l&&f._doRemoveChild(l)}this._children.splice(b,0,d);d._parentChanged(this);e&&d.dispatchEventWith(c.Event.ADDED,!0);if(this._DO_Props_._stage)for(d._onAddToStage(),b=a.__EVENT__ADD_TO_STAGE_LIST;0<b.length;)f=b.shift(),e&&f.dispatchEventWith(c.Event.ADDED_TO_STAGE);d._setDirty();this._setSizeDirty();return d};b.removeChild=function(d){d=this._children.indexOf(d);if(0<=d)return this._doRemoveChild(d);c.$error(1008);return null};b.removeChildAt=function(d){if(0<=
d&&d<this._children.length)return this._doRemoveChild(d);c.$error(1007);return null};b._doRemoveChild=function(d,b){void 0===b&&(b=!0);var e=this._children,f=e[d];b&&f.dispatchEventWith(c.Event.REMOVED,!0);if(this._DO_Props_._stage){f._onRemoveFromStage();for(var l=a.__EVENT__REMOVE_FROM_STAGE_LIST;0<l.length;){var g=l.shift();b&&g.dispatchEventWith(c.Event.REMOVED_FROM_STAGE);g._DO_Props_._stage=null}}f._parentChanged(null);e.splice(d,1);this._setSizeDirty();return f};b.getChildAt=function(d){if(0<=
d&&d<this._children.length)return this._children[d];c.$error(1007);return null};b.contains=function(d){for(;d;){if(d==this)return!0;d=d.parent}return!1};b.swapChildrenAt=function(d,a){0<=d&&d<this._children.length&&0<=a&&a<this._children.length?this._swapChildrenAt(d,a):c.$error(1007)};b.swapChildren=function(d,a){var b=this._children.indexOf(d),e=this._children.indexOf(a);-1==b||-1==e?c.$error(1008):this._swapChildrenAt(b,e)};b._swapChildrenAt=function(d,a){if(d!=a){var b=this._children,c=b[d];b[d]=
b[a];b[a]=c}};b.getChildIndex=function(d){return this._children.indexOf(d)};b.removeChildren=function(){for(var d=this._children.length-1;0<=d;d--)this._doRemoveChild(d)};b._updateTransform=function(){if(this._DO_Props_._visible){this._hasFilters()&&c.RenderCommand.push(this._setGlobalFilters,this);var d=this.mask||this._DO_Props_._scrollRect;d&&c.RenderCommand.push(this._pushMask,this);e.prototype._updateTransform.call(this);if(!this._DO_Props_._cacheAsBitmap||!this._texture_to_render)for(var a=
0,b=this._children,f=b.length;a<f;a++)b[a]._updateTransform();d&&c.RenderCommand.push(this._popMask,this);this._hasFilters()&&c.RenderCommand.push(this._removeGlobalFilters,this)}};b._render=function(d){if(!c.MainContext.__use_new_draw)for(var a=0,b=this._children,e=b.length;a<e;a++)b[a]._draw(d)};b._measureBounds=function(){for(var d=0,a=0,b=0,e=0,f=this._children,g=f.length,h=0;h<g;h++){var k=f[h];if(k.visible){var n=k.getBounds(c.Rectangle.identity,!1),q=n.x,p=n.y,u=n.width,n=n.height,k=k._getMatrix(),
k=c.DisplayObject.getTransformBounds(c.Rectangle.identity.initialize(q,p,u,n),k),q=k.x,p=k.y,u=k.width+k.x,k=k.height+k.y;if(q<d||0==h)d=q;if(u>a||0==h)a=u;if(p<b||0==h)b=p;if(k>e||0==h)e=k}}return c.Rectangle.identity.initialize(d,b,a-d,e-b)};b.hitTest=function(d,a,b){void 0===b&&(b=!1);var f;if(!this._DO_Props_._visible)return null;if(this._DO_Props_._scrollRect){if(d<this._DO_Props_._scrollRect.x||a<this._DO_Props_._scrollRect.y||d>this._DO_Props_._scrollRect.x+this._DO_Props_._scrollRect.width||
a>this._DO_Props_._scrollRect.y+this._DO_Props_._scrollRect.height)return null}else if(this.mask&&(this.mask.x>d||d>this.mask.x+this.mask.width||this.mask.y>a||a>this.mask.y+this.mask.height))return null;for(var l=this._children,g=this._touchChildren,h=l.length-1;0<=h;h--){var k=l[h],n=k._getMatrix(),q=k.scrollRect;q&&n.append(1,0,0,1,-q.x,-q.y);n.invert();n=c.Matrix.transformCoords(n,d,a);if(k=k.hitTest(n.x,n.y,!0)){if(!g)return this;if(k._DO_Props_._touchEnabled&&g)return k;f=this}}return f?f:this._texture_to_render?
e.prototype.hitTest.call(this,d,a,b):null};b._onAddToStage=function(){e.prototype._onAddToStage.call(this);for(var d=this._children.length,a=0;a<d;a++)this._children[a]._onAddToStage()};b._onRemoveFromStage=function(){e.prototype._onRemoveFromStage.call(this);for(var d=this._children,a=d.length,b=0;b<a;b++)d[b]._onRemoveFromStage()};b.getChildByName=function(d){for(var a=this._children,b=a.length,c,e=0;e<b;e++)if(c=a[e],c.name==d)return c;return null};a.__EVENT__ADD_TO_STAGE_LIST=[];a.__EVENT__REMOVE_FROM_STAGE_LIST=
[];return a}(c.DisplayObject);c.DisplayObjectContainer=f;f.prototype.__class__="egret.DisplayObjectContainer"})(egret||(egret={}));(function(c){var f=function(){function c(){}c.NO_BORDER="noBorder";c.NO_SCALE="noScale";c.SHOW_ALL="showAll";c.EXACT_FIT="exactFit";return c}();c.StageScaleMode=f;f.prototype.__class__="egret.StageScaleMode"})(egret||(egret={}));
(function(c){var f=function(e){function a(d,a){void 0===d&&(d=480);void 0===a&&(a=800);e.call(this);this._changeSizeDispatchFlag=!0;this._scaleMode="";this._stageHeight=this._stageWidth=NaN;this._frameRate=60;this.touchEnabled=!0;this._DO_Props_._stage=this;this._stageWidth=d;this._stageHeight=a}__extends(a,e);var b=a.prototype;b.invalidate=function(){a._invalidateRenderFlag=!0};Object.defineProperty(b,"scaleMode",{get:function(){return this._scaleMode},set:function(d){this._scaleMode!=d&&(this._scaleMode=
d,this.setResolutionPolicy())},enumerable:!0,configurable:!0});b.changeSize=function(){this._changeSizeDispatchFlag&&(this.setResolutionPolicy(),this.dispatchEventWith(c.Event.RESIZE))};b.setResolutionPolicy=function(){var d=a.SCALE_MODE_ENUM[this._scaleMode];d||c.$error(1024);var b=new c.EqualToFrame,d=new c.ResolutionPolicy(b,d);c.StageDelegate.getInstance()._setResolutionPolicy(d);this._stageWidth=c.StageDelegate.getInstance()._stageWidth;this._stageHeight=c.StageDelegate.getInstance()._stageHeight};
Object.defineProperty(b,"stageWidth",{get:function(){return this._stageWidth},enumerable:!0,configurable:!0});Object.defineProperty(b,"stageHeight",{get:function(){return this._stageHeight},enumerable:!0,configurable:!0});Object.defineProperty(b,"frameRate",{get:function(){return this._frameRate},set:function(d){this._frameRate=d;c.MainContext.instance.deviceContext.setFrameRate(d)},enumerable:!0,configurable:!0});b.hitTest=function(d,a,b){if(!this._DO_Props_._touchEnabled)return null;var e;if(!this._touchChildren)return this;
b=this._children;for(var f=b.length-1;0<=f;f--){e=b[f];var g=e._getMatrix(),h=e.scrollRect;h&&g.append(1,0,0,1,-h.x,-h.y);g.invert();g=c.Matrix.transformCoords(g,d,a);if((e=e.hitTest(g.x,g.y,!0))&&e.touchEnabled)return e}return this};b.getBounds=function(d){d||(d=new c.Rectangle);return d.initialize(0,0,this._stageWidth,this._stageHeight)};b._updateTransform=function(){for(var d=0,a=this._children.length;d<a;d++)this._children[d]._updateTransform()};Object.defineProperty(b,"focus",{get:function(){return null},
enumerable:!0,configurable:!0});a.registerScaleMode=function(d,b,e){a.SCALE_MODE_ENUM[d]&&!e?c.$warn(1009,d):a.SCALE_MODE_ENUM[d]=b};a._invalidateRenderFlag=!1;a.SCALE_MODE_ENUM={};return a}(c.DisplayObjectContainer);c.Stage=f;f.prototype.__class__="egret.Stage"})(egret||(egret={}));egret.Stage.SCALE_MODE_ENUM[egret.StageScaleMode.NO_SCALE]=new egret.NoScale;egret.Stage.SCALE_MODE_ENUM[egret.StageScaleMode.SHOW_ALL]=new egret.ShowAll;egret.Stage.SCALE_MODE_ENUM[egret.StageScaleMode.NO_BORDER]=new egret.FixedWidth;
egret.Stage.SCALE_MODE_ENUM[egret.StageScaleMode.EXACT_FIT]=new egret.FullScreen;
(function(c){var f=function(){return function(){this._horizontalScrollPolicy=this._verticalScrollPolicy="auto";this._scrollTop=this._scrollLeft=0;this._vCanScroll=this._hCanScroll=!1;this._lastTouchPosition=new c.Point(0,0);this._touchStartPosition=new c.Point(0,0);this._scrollStarted=!1;this._lastTouchTime=0;this._lastTouchEvent=null;this._velocitys=[];this._isVTweenPlaying=this._isHTweenPlaying=!1;this._vScrollTween=this._hScrollTween=null;this._bounces=!0}}();c.ScrollViewProperties=f;f.prototype.__class__=
"egret.ScrollViewProperties"})(egret||(egret={}));
(function(c){var f=function(e){function a(d){void 0===d&&(d=null);e.call(this);this.scrollBeginThreshold=10;this.scrollSpeed=1;this.touchBeginTimer=this.delayTouchBeginEvent=this._content=null;this.touchEnabled=!0;this._ScrV_Props_=new c.ScrollViewProperties;d&&this.setContent(d)}__extends(a,e);var b=a.prototype;Object.defineProperty(b,"bounces",{get:function(){return this._ScrV_Props_._bounces},set:function(d){this._ScrV_Props_._bounces=!!d},enumerable:!0,configurable:!0});b.setContent=function(d){this._content!==
d&&(this.removeContent(),d&&(this._content=d,e.prototype.addChild.call(this,d),this._addEvents()))};b.removeContent=function(){this._content&&(this._removeEvents(),e.prototype.removeChildAt.call(this,0));this._content=null};Object.defineProperty(b,"verticalScrollPolicy",{get:function(){return this._ScrV_Props_._verticalScrollPolicy},set:function(d){d!=this._ScrV_Props_._verticalScrollPolicy&&(this._ScrV_Props_._verticalScrollPolicy=d)},enumerable:!0,configurable:!0});Object.defineProperty(b,"horizontalScrollPolicy",
{get:function(){return this._ScrV_Props_._horizontalScrollPolicy},set:function(d){d!=this._ScrV_Props_._horizontalScrollPolicy&&(this._ScrV_Props_._horizontalScrollPolicy=d)},enumerable:!0,configurable:!0});Object.defineProperty(b,"scrollLeft",{get:function(){return this._ScrV_Props_._scrollLeft},set:function(d){d!=this._ScrV_Props_._scrollLeft&&(this._ScrV_Props_._scrollLeft=d,this._validatePosition(!1,!0),this._updateContentPosition())},enumerable:!0,configurable:!0});Object.defineProperty(b,"scrollTop",
{get:function(){return this._ScrV_Props_._scrollTop},set:function(d){d!=this._ScrV_Props_._scrollTop&&(this._ScrV_Props_._scrollTop=d,this._validatePosition(!0,!1),this._updateContentPosition())},enumerable:!0,configurable:!0});b.setScrollPosition=function(d,a,b){void 0===b&&(b=!1);if(!b||0!=d||0!=a)if(b||this._ScrV_Props_._scrollTop!=d||this._ScrV_Props_._scrollLeft!=a){var c=this._ScrV_Props_._scrollTop,e=this._ScrV_Props_._scrollLeft;if(b){b=this.getMaxScrollLeft();var f=this.getMaxScrollTop();
if(0>=c||c>=f)d/=2;if(0>=e||e>=b)a/=2;d=c+d;a=e+a;if(!this._ScrV_Props_._bounces){if(0>=d||d>=f)d=Math.max(0,Math.min(d,f));if(0>=a||a>=b)a=Math.max(0,Math.min(a,b))}}this._ScrV_Props_._scrollTop=d;this._ScrV_Props_._scrollLeft=a;this._validatePosition(!0,!0);this._updateContentPosition()}};b._validatePosition=function(d,a){void 0===d&&(d=!1);void 0===a&&(a=!1);if(d){var b=this.height,c=this._getContentHeight();this._ScrV_Props_._scrollTop=Math.max(this._ScrV_Props_._scrollTop,(0-b)/2);this._ScrV_Props_._scrollTop=
Math.min(this._ScrV_Props_._scrollTop,c>b?c-b/2:b/2)}a&&(b=this.width,c=this._getContentWidth(),this._ScrV_Props_._scrollLeft=Math.max(this._ScrV_Props_._scrollLeft,(0-b)/2),this._ScrV_Props_._scrollLeft=Math.min(this._ScrV_Props_._scrollLeft,c>b?c-b/2:b/2))};b._setWidth=function(d){this._DO_Props_._explicitWidth!=d&&(e.prototype._setWidth.call(this,d),this._updateContentPosition())};b._setHeight=function(d){this._DO_Props_._explicitHeight!=d&&(e.prototype._setHeight.call(this,d),this._updateContentPosition())};
b._updateContentPosition=function(){var d=this.getBounds(c.Rectangle.identity),a=d.height,d=d.width;this.scrollRect=new c.Rectangle(Math.round(this._ScrV_Props_._scrollLeft),Math.round(this._ScrV_Props_._scrollTop),d,a);this.dispatchEvent(new c.Event(c.Event.CHANGE))};b._checkScrollPolicy=function(){var d=this.__checkScrollPolicy(this._ScrV_Props_._horizontalScrollPolicy,this._getContentWidth(),this.width);this._ScrV_Props_._hCanScroll=d;var a=this.__checkScrollPolicy(this._ScrV_Props_._verticalScrollPolicy,
this._getContentHeight(),this.height);this._ScrV_Props_._vCanScroll=a;return d||a};b.__checkScrollPolicy=function(d,a,b){return"on"==d?!0:"off"==d?!1:a>b};b._addEvents=function(){this.addEventListener(c.TouchEvent.TOUCH_BEGIN,this._onTouchBegin,this);this.addEventListener(c.TouchEvent.TOUCH_BEGIN,this._onTouchBeginCapture,this,!0);this.addEventListener(c.TouchEvent.TOUCH_END,this._onTouchEndCapture,this,!0)};b._removeEvents=function(){this.removeEventListener(c.TouchEvent.TOUCH_BEGIN,this._onTouchBegin,
this);this.removeEventListener(c.TouchEvent.TOUCH_BEGIN,this._onTouchBeginCapture,this,!0);this.removeEventListener(c.TouchEvent.TOUCH_END,this._onTouchEndCapture,this,!0)};b._onTouchBegin=function(d){!d._isDefaultPrevented&&this._checkScrollPolicy()&&(this._ScrV_Props_._touchStartPosition.x=d.stageX,this._ScrV_Props_._touchStartPosition.y=d.stageY,(this._ScrV_Props_._isHTweenPlaying||this._ScrV_Props_._isVTweenPlaying)&&this._onScrollFinished(),this.stage.addEventListener(c.TouchEvent.TOUCH_MOVE,
this._onTouchMove,this),this.stage.addEventListener(c.TouchEvent.TOUCH_END,this._onTouchEnd,this),this.stage.addEventListener(c.TouchEvent.LEAVE_STAGE,this._onTouchEnd,this),this.addEventListener(c.Event.ENTER_FRAME,this._onEnterFrame,this),this._logTouchEvent(d),d.preventDefault())};b._onTouchBeginCapture=function(d){var a=this._checkScrollPolicy();if(a){for(var b=d.target;b!=this;){if("_checkScrollPolicy"in b&&(a=b._checkScrollPolicy()))return;b=b.parent}d.stopPropagation();this.delayTouchBeginEvent=
this.cloneTouchEvent(d);this.touchBeginTimer||(this.touchBeginTimer=new c.Timer(100,1),this.touchBeginTimer.addEventListener(c.TimerEvent.TIMER_COMPLETE,this._onTouchBeginTimer,this));this.touchBeginTimer.start();this._onTouchBegin(d)}};b._onTouchEndCapture=function(d){this.delayTouchBeginEvent&&this._onTouchBeginTimer()};b._onTouchBeginTimer=function(){this.touchBeginTimer.stop();var d=this.delayTouchBeginEvent;this.delayTouchBeginEvent=null;this.stage&&this.dispatchPropagationEvent(d)};b.dispatchPropagationEvent=
function(d){for(var a=[],b=d._target,c=0;b;)b==this&&(c=a.length),a.push(b),b=b.parent;b=a.slice(0,c);b=b.reverse();a=b.concat(a);this._dispatchPropagationEvent(d,a,c)};b._dispatchPropagationEvent=function(d,a,b){for(var c=a.length,e=0;e<c;e++){var f=a[e];d._currentTarget=f;d._eventPhase=e<b?1:e==b?2:3;f._notifyListener(d);if(d._isPropagationStopped||d._isPropagationImmediateStopped)break}};b._onTouchMove=function(d){if(this._ScrV_Props_._lastTouchPosition.x!=d.stageX||this._ScrV_Props_._lastTouchPosition.y!=
d.stageY){if(!this._ScrV_Props_._scrollStarted){var a=d.stageX-this._ScrV_Props_._touchStartPosition.x,b=d.stageY-this._ScrV_Props_._touchStartPosition.y;if(Math.sqrt(a*a+b*b)<this.scrollBeginThreshold){this._logTouchEvent(d);return}}this._ScrV_Props_._scrollStarted=!0;this.delayTouchBeginEvent&&(this.delayTouchBeginEvent=null,this.touchBeginTimer.stop());this.touchChildren=!1;a=this._getPointChange(d);this.setScrollPosition(a.y,a.x,!0);this._calcVelocitys(d);this._logTouchEvent(d)}};b._onTouchEnd=
function(d){this.touchChildren=!0;this._ScrV_Props_._scrollStarted=!1;c.MainContext.instance.stage.removeEventListener(c.TouchEvent.TOUCH_MOVE,this._onTouchMove,this);c.MainContext.instance.stage.removeEventListener(c.TouchEvent.TOUCH_END,this._onTouchEnd,this);c.MainContext.instance.stage.removeEventListener(c.TouchEvent.LEAVE_STAGE,this._onTouchEnd,this);this.removeEventListener(c.Event.ENTER_FRAME,this._onEnterFrame,this);this._moveAfterTouchEnd()};b._onEnterFrame=function(d){d=c.getTimer();100<
d-this._ScrV_Props_._lastTouchTime&&300>d-this._ScrV_Props_._lastTouchTime&&this._calcVelocitys(this._ScrV_Props_._lastTouchEvent)};b._logTouchEvent=function(d){this._ScrV_Props_._lastTouchPosition.x=d.stageX;this._ScrV_Props_._lastTouchPosition.y=d.stageY;this._ScrV_Props_._lastTouchEvent=this.cloneTouchEvent(d);this._ScrV_Props_._lastTouchTime=c.getTimer()};b._getPointChange=function(d){return{x:!1===this._ScrV_Props_._hCanScroll?0:this._ScrV_Props_._lastTouchPosition.x-d.stageX,y:!1===this._ScrV_Props_._vCanScroll?
0:this._ScrV_Props_._lastTouchPosition.y-d.stageY}};b._calcVelocitys=function(d){var a=c.getTimer();if(0==this._ScrV_Props_._lastTouchTime)this._ScrV_Props_._lastTouchTime=a;else{var b=this._getPointChange(d),a=a-this._ScrV_Props_._lastTouchTime;b.x/=a;b.y/=a;this._ScrV_Props_._velocitys.push(b);5<this._ScrV_Props_._velocitys.length&&this._ScrV_Props_._velocitys.shift();this._ScrV_Props_._lastTouchPosition.x=d.stageX;this._ScrV_Props_._lastTouchPosition.y=d.stageY}};b._getContentWidth=function(){return this._content.explicitWidth||
this._content.width};b._getContentHeight=function(){return this._content.explicitHeight||this._content.height};b.getMaxScrollLeft=function(){var d=this._getContentWidth()-this.width;return Math.max(0,d)};b.getMaxScrollTop=function(){var d=this._getContentHeight()-this.height;return Math.max(0,d)};b._moveAfterTouchEnd=function(){if(0!=this._ScrV_Props_._velocitys.length){for(var d=0,b=0,c=0,e=0;e<this._ScrV_Props_._velocitys.length;e++)var f=this._ScrV_Props_._velocitys[e],g=a.weight[e],d=d+f.x*g,
b=b+f.y*g,c=c+g;this._ScrV_Props_._velocitys.length=0;0>=this.scrollSpeed&&(this.scrollSpeed=1);d=d/c*this.scrollSpeed;b=b/c*this.scrollSpeed;f=Math.abs(d);c=Math.abs(b);g=this.getMaxScrollLeft();e=this.getMaxScrollTop();d=0.02<f?this.getAnimationDatas(d,this._ScrV_Props_._scrollLeft,g):{position:this._ScrV_Props_._scrollLeft,duration:1};b=0.02<c?this.getAnimationDatas(b,this._ScrV_Props_._scrollTop,e):{position:this._ScrV_Props_._scrollTop,duration:1};this.setScrollLeft(d.position,d.duration);this.setScrollTop(b.position,
b.duration)}};b._onTweenFinished=function(d){d==this._ScrV_Props_._vScrollTween&&(this._ScrV_Props_._isVTweenPlaying=!1);d==this._ScrV_Props_._hScrollTween&&(this._ScrV_Props_._isHTweenPlaying=!1);!1==this._ScrV_Props_._isHTweenPlaying&&!1==this._ScrV_Props_._isVTweenPlaying&&this._onScrollFinished()};b._onScrollStarted=function(){};b._onScrollFinished=function(){c.Tween.removeTweens(this);this._ScrV_Props_._hScrollTween=null;this._ScrV_Props_._vScrollTween=null;this._ScrV_Props_._isHTweenPlaying=
!1;this._ScrV_Props_._isVTweenPlaying=!1;this.dispatchEvent(new c.Event(c.Event.COMPLETE))};b.setScrollTop=function(d,a){void 0===a&&(a=0);var b=Math.min(this.getMaxScrollTop(),Math.max(d,0));if(0==a)return this.scrollTop=b,null;!1==this._ScrV_Props_._bounces&&(d=b);var e=c.Tween.get(this).to({scrollTop:d},a,c.Ease.quartOut);b!=d&&e.to({scrollTop:b},300,c.Ease.quintOut);this._ScrV_Props_._isVTweenPlaying=!0;this._ScrV_Props_._vScrollTween=e;e.call(this._onTweenFinished,this,[e]);this._ScrV_Props_._isHTweenPlaying||
this._onScrollStarted();return e};b.setScrollLeft=function(d,a){void 0===a&&(a=0);var b=Math.min(this.getMaxScrollLeft(),Math.max(d,0));if(0==a)return this.scrollLeft=b,null;!1==this._ScrV_Props_._bounces&&(d=b);var e=c.Tween.get(this).to({scrollLeft:d},a,c.Ease.quartOut);b!=d&&e.to({scrollLeft:b},300,c.Ease.quintOut);this._ScrV_Props_._isHTweenPlaying=!0;this._ScrV_Props_._hScrollTween=e;e.call(this._onTweenFinished,this,[e]);this._ScrV_Props_._isVTweenPlaying||this._onScrollStarted();return e};
b.getAnimationDatas=function(d,a,b){var c=Math.abs(d),e=0,f=a+500*d;if(0>f||f>b)for(f=a;Infinity!=Math.abs(d)&&0.02<Math.abs(d);)f+=d,d=0>f||f>b?0.998*d*0.95:0.998*d,e++;else e=500*-Math.log(0.02/c);return{position:Math.min(b+50,Math.max(f,-50)),duration:e}};b.cloneTouchEvent=function(d){var a=new c.TouchEvent(d._type,d._bubbles,d.cancelable);a.touchPointID=d.touchPointID;a._stageX=d._stageX;a._stageY=d._stageY;a.ctrlKey=d.ctrlKey;a.altKey=d.altKey;a.shiftKey=d.shiftKey;a.touchDown=d.touchDown;a._isDefaultPrevented=
!1;a._target=d._target;return a};b.throwNotSupportedError=function(){c.$error(1023)};b.addChild=function(d){this.throwNotSupportedError();return null};b.addChildAt=function(d,a){this.throwNotSupportedError();return null};b.removeChild=function(d){this.throwNotSupportedError();return null};b.removeChildAt=function(d){this.throwNotSupportedError();return null};b.setChildIndex=function(d,a){this.throwNotSupportedError()};b.swapChildren=function(d,a){this.throwNotSupportedError()};b.swapChildrenAt=function(d,
a){this.throwNotSupportedError()};b.hitTest=function(d,a,b){void 0===b&&(b=!1);var f=e.prototype.hitTest.call(this,d,a,b);return f?f:c.DisplayObject.prototype.hitTest.call(this,d,a,b)};a.weight=[1,1.33,1.66,2,2.33];return a}(c.DisplayObjectContainer);c.ScrollView=f;f.prototype.__class__="egret.ScrollView"})(egret||(egret={}));(function(c){var f=function(){function c(){}c.REPEAT="repeat";c.SCALE="scale";return c}();c.BitmapFillMode=f;f.prototype.__class__="egret.BitmapFillMode"})(egret||(egret={}));
(function(c){var f=function(e){function a(d){e.call(this);this.scale9Grid=this._texture=null;this.fillMode="scale";d&&(this._texture=d,this._setSizeDirty());this.needDraw=!0}__extends(a,e);var b=a.prototype;Object.defineProperty(b,"texture",{get:function(){return this._texture},set:function(d){d!=this._texture&&(this._setSizeDirty(),this._texture=d)},enumerable:!0,configurable:!0});b._render=function(d){var b=this._texture;b?(this._texture_to_render=b,a._drawBitmap(d,this._DO_Props_._hasWidthSet?
this._DO_Props_._explicitWidth:b._textureWidth,this._DO_Props_._hasHeightSet?this._DO_Props_._explicitHeight:b._textureHeight,this)):this._texture_to_render=null};a._drawBitmap=function(d,b,c,e){var f=e._texture_to_render;if(f){var g=f._textureWidth,h=f._textureHeight;if("scale"==e.fillMode){var k=e.scale9Grid||f.scale9Grid;if(k&&g-k.width<b&&h-k.height<c)a.drawScale9GridImage(d,e,k,b,c);else{var k=f._offsetX,n=f._offsetY,q=f._bitmapWidth||g,p=f._bitmapHeight||h;b/=g;k=Math.round(k*b);b=Math.round(q*
b);c/=h;n=Math.round(n*c);c=Math.round(p*c);a.renderFilter.drawImage(d,e,f._bitmapX,f._bitmapY,q,p,k,n,b,c)}}else a.drawRepeatImage(d,e,b,c,e.fillMode)}};a.drawRepeatImage=function(d,a,b,e,f){var g=a._texture_to_render;if(g){var h=g._textureWidth,k=g._textureHeight,n=g._bitmapX,q=g._bitmapY,h=g._bitmapWidth||h,k=g._bitmapHeight||k,p=g._offsetX,g=g._offsetY;c.RenderFilter.getInstance().drawImage(d,a,n,q,h,k,p,g,b,e,f)}};a.drawScale9GridImage=function(d,a,b,e,f){var g=c.MainContext.instance.rendererContext._texture_scale_factor,
h=a._texture_to_render;if(h&&b){var k=h._textureWidth,n=h._textureHeight,q=h._bitmapX,p=h._bitmapY,u=h._bitmapWidth||k,t=h._bitmapHeight||n;e-=k-u;f-=n-t;if(!d.drawImageScale9(h,q,p,u,t,h._offsetX,h._offsetY,e,f,b)){k=h._offsetX/g;n=h._offsetY/g;h=c.RenderFilter.getInstance();b=c.Rectangle.identity.initialize(b.x-Math.round(k),b.y-Math.round(k),b.width,b.height);k=Math.round(k);n=Math.round(n);b.y==b.bottom&&(b.bottom<t?b.bottom++:b.y--);b.x==b.right&&(b.right<u?b.right++:b.x--);var C=q+b.x/g,E=q+
b.right/g,v=u-b.right,w=p+b.y/g,g=p+b.bottom/g,x=t-b.bottom,y=k+b.x,z=n+b.y,t=f-(t-b.bottom),u=e-(u-b.right);h.drawImage(d,a,q,p,b.x,b.y,k,n,b.x,b.y);h.drawImage(d,a,C,p,b.width,b.y,y,n,u-b.x,b.y);h.drawImage(d,a,E,p,v,b.y,k+u,n,e-u,b.y);h.drawImage(d,a,q,w,b.x,b.height,k,z,b.x,t-b.y);h.drawImage(d,a,C,w,b.width,b.height,y,z,u-b.x,t-b.y);h.drawImage(d,a,E,w,v,b.height,k+u,z,e-u,t-b.y);h.drawImage(d,a,q,g,b.x,x,k,n+t,b.x,f-t);h.drawImage(d,a,C,g,b.width,x,y,n+t,u-b.x,f-t);h.drawImage(d,a,E,g,v,x,k+
u,n+t,e-u,f-t)}}};b._measureBounds=function(){var d=this._texture;return d?c.Rectangle.identity.initialize(0,0,d._textureWidth,d._textureHeight):e.prototype._measureBounds.call(this)};a.renderFilter=c.RenderFilter.getInstance();return a}(c.DisplayObject);c.Bitmap=f;f.prototype.__class__="egret.Bitmap"})(egret||(egret={}));
(function(c){var f=function(e){function a(){e.call(this);this._text="";this._textChanged=!1;this._font=null;this._fontChanged=!1;this._textOffsetY=this._textOffsetX=this._textHeight=this._textWidth=this._lineSpacing=this._letterSpacing=0;this.textLinesChange=!0;this._lineHeights=[];this.needDraw=this.cacheAsBitmap=!0}__extends(a,e);var b=a.prototype;Object.defineProperty(b,"text",{get:function(){return this._text},set:function(d){this.$setText(d)},enumerable:!0,configurable:!0});b.$setText=function(d){this._text!=
d&&(this._textChanged=!0,this._text=d,this._setSizeDirty())};Object.defineProperty(b,"font",{get:function(){return this._font},set:function(d){this.$setFont(d)},enumerable:!0,configurable:!0});b.$setFont=function(d){this._font!=d&&(this._font=d,this._fontChanged=!0,this._setSizeDirty())};Object.defineProperty(b,"letterSpacing",{get:function(){return this._letterSpacing},set:function(d){this._setLetterSpacing(d)},enumerable:!0,configurable:!0});b._setLetterSpacing=function(d){this._letterSpacing=d;
this._setSizeDirty()};Object.defineProperty(b,"lineSpacing",{get:function(){return this._lineSpacing},set:function(d){this._setLineSpacing(d)},enumerable:!0,configurable:!0});b._setLineSpacing=function(d){this._lineSpacing=d};b._setSizeDirty=function(){e.prototype._setSizeDirty.call(this);this.textLinesChange=!0};b._render=function(d){var b=this._getTextLines(),e=b.length;if(0!=e){for(var f=this._font,l=f._getFirstCharHeight(),l=Math.ceil(l*a.EMPTY_FACTOR),g=0,h=this._DO_Props_._hasHeightSet?this._DO_Props_._explicitHeight:
Number.POSITIVE_INFINITY,k=this._lineHeights,n=0;n<e;n++){var q=k[n];if(0<n&&g+q>h)break;for(var p=b[n],u=p.length,t=0,C=0;C<u;C++){var E=p.charAt(C),v=f.getTexture(E);if(v){var E=v._bitmapWidth||v._textureWidth,w=v._bitmapHeight||v._textureHeight;this._texture_to_render=v;c.RenderFilter.getInstance().drawImage(d,this,v._bitmapX,v._bitmapY,E,w,t+v._offsetX,g+v._offsetY,E,w);t+=v._textureWidth+this._letterSpacing}else" "==E?t+=l:c.$warn(1011,E)}g+=q+this._lineSpacing}this._texture_to_render=null}};
b._measureBounds=function(){var d=this._getTextLines();return 0==d.length?c.Rectangle.identity.initialize(0,0,0,0):c.Rectangle.identity.initialize(this._textOffsetX,this._textOffsetY,this._textWidth-this._textOffsetX,this._textHeight-this._textOffsetY+(d.length-1)*this._lineSpacing)};b._getTextLines=function(){if(!this.textLinesChange)return this._textLines;var d=[];this._textLines=d;this.textLinesChange=!1;var b=[];this._lineHeights=b;if(!this._text||!this._font)return d;for(var e=0,f=0,l=0,g=0,
h=this._DO_Props_._hasWidthSet,k=this._DO_Props_._hasWidthSet?this._DO_Props_._explicitWidth:Number.POSITIVE_INFINITY,n=this._font,q=n._getFirstCharHeight(),p=Math.ceil(q*a.EMPTY_FACTOR),u=this._text.split(/(?:\r\n|\r|\n)/),t=u.length,C=!0,E=0;E<t;E++){for(var v=u[E],w=v.length,x=0,y=0,z=!0,A=0;A<w;A++){z||(y+=this._letterSpacing);var F=v.charAt(A),D,G=0,B=0,H=n.getTexture(F);if(H)F=H._textureWidth,D=H._textureHeight,G=H._offsetX,B=H._offsetY;else if(" "==F)F=p,D=q;else{c.$warn(1011,F);z&&(z=!1);
continue}z&&(z=!1,l=Math.min(G,l));C&&(g=Math.min(B,g));h&&0<A&&y+F>k?(d.push(v.substring(0,A)),b.push(x),f+=x,e=Math.max(y,e),v=v.substring(A),w=v.length,A=0,y=F,x=D):(y+=F,x=Math.max(D,x))}C&&(C=!1);d.push(v);b.push(x);f+=x;e=Math.max(y,e)}this._textWidth=e;this._textHeight=f;this._textOffsetX=l;this._textOffsetY=g;return d};a.EMPTY_FACTOR=0.33;return a}(c.DisplayObject);c.BitmapText=f;f.prototype.__class__="egret.BitmapText"})(egret||(egret={}));
(function(c){var f=function(){function c(){}c.LINEAR="linear";c.RADIAL="radial";return c}();c.GradientType=f;f.prototype.__class__="egret.GradientType"})(egret||(egret={}));
(function(c){var f=function(){function a(){this.fillStyle=this.strokeStyle=this.commandQueue=this._renderContext=null;this._dirty=!1;this.lineY=this.lineX=0;this._firstCheck=!0;this._lastY=this._lastX=this._maxY=this._maxX=this._minY=this._minX=0;this.commandQueue=[]}var b=a.prototype;b.beginFill=function(d,a){void 0===a&&(a=1);this.fillStyle=this._parseColor(d,a);this._pushCommand(new e(this._setStyle,this,[this.fillStyle]))};b._parseColor=function(d,a){return"rgba("+(d>>16)+","+((d&65280)>>8)+","+
(d&255)+","+a+")"};b._setStyle=function(d){c.Graphics._currentFillStyle=d;this._renderContext.fillStyle=d;this._renderContext.beginPath()};b.beginGradientFill=function(d,a,b,c,f){void 0===f&&(f=null);this.fillStyle=d=this.getGradient(d,a,b,c,f);this._pushCommand(new e(this._setStyle,this,[d]))};b.getGradient=function(d,a,b,e,f){var g=c.MainContext.instance.rendererContext,h=new c.Matrix;f?(h.a=819.2*f.a,h.b=819.2*f.b,h.c=819.2*f.c,h.d=819.2*f.d,h.tx=f.tx,h.ty=f.ty):(h.a=100,h.d=100);d=d==c.GradientType.LINEAR?
g.createLinearGradient(-1,0,1,0):g.createRadialGradient(0,0,0,0,0,1);f=a.length;for(g=0;g<f;g++)d.addColorStop(e[g]/255,this._parseColor(a[g],b[g]));d.matrix=h;return d};b.drawRect=function(d,a,b,c){this._pushCommand(new e(function(d,a,b,c){this._renderContext.beginPath();this._renderContext.rect(d,a,b,c);this._renderContext.closePath()},this,[d,a,b,c]));this._checkRect(d,a,b,c)};b.drawCircle=function(d,a,b){this._pushCommand(new e(function(d,a,b){this._renderContext.beginPath();this._renderContext.arc(d,
a,b,0,2*Math.PI);this._renderContext.closePath()},this,[d,a,b]));this._checkRect(d-b,a-b,2*b,2*b)};b.drawRoundRect=function(d,a,b,c,f,g){this._pushCommand(new e(function(d,a,b,c,m,e){m/=2;e=e?e/2:m;b=d+b;c=a+c;var f=c-e;this._renderContext.beginPath();this._renderContext.moveTo(b,f);this._renderContext.quadraticCurveTo(b,c,b-m,c);this._renderContext.lineTo(d+m,c);this._renderContext.quadraticCurveTo(d,c,d,c-e);this._renderContext.lineTo(d,a+e);this._renderContext.quadraticCurveTo(d,a,d+m,a);this._renderContext.lineTo(b-
m,a);this._renderContext.quadraticCurveTo(b,a,b,a+e);this._renderContext.lineTo(b,f);this._renderContext.closePath()},this,[d,a,b,c,f,g]));this._checkRect(d,a,b,c)};b.drawEllipse=function(d,a,b,c){this._pushCommand(new e(function(d,a,b,c){d+=b/2;a+=c/2;var e=b>c?b:c;b/=e;c/=e;e/=2;this._renderContext.scale(b,c);this._renderContext.beginPath();this._renderContext.arc(d/b,a/c,e,0,2*Math.PI);this._renderContext.closePath();this._renderContext.scale(1/b,1/c)},this,[d,a,b,c]));this._checkRect(d,a,b,c)};
b.lineStyle=function(d,a,b,c,f,g,h,k){void 0===d&&(d=NaN);void 0===a&&(a=0);void 0===b&&(b=1);void 0===c&&(c=!1);void 0===f&&(f="normal");void 0===g&&(g=null);void 0===h&&(h=null);void 0===k&&(k=3);this.strokeStyle&&(this._createEndLineCommand(),this._pushCommand(this._endLineCommand));this.strokeStyle=this._parseColor(a,b);this._pushCommand(new e(function(d,a){this._renderContext.lineWidth=d;this._renderContext.strokeStyle=a;this._renderContext.beginPath()},this,[d,this.strokeStyle]));this.moveTo(this.lineX,
this.lineY)};b.lineTo=function(d,a){this._pushCommand(new e(function(d,a){this._renderContext.lineTo(d,a)},this,[d,a]));this._checkPoint(this.lineX,this.lineY);this.lineX=d;this.lineY=a;this._checkPoint(d,a)};b.curveTo=function(d,a,b,c){this._pushCommand(new e(function(d,a,b,c){this._renderContext.quadraticCurveTo(d,a,b,c)},this,[d,a,b,c]));this._checkPoint(this.lineX,this.lineY);this.lineX=b;this.lineY=c;this._checkPoint(d,a);this._checkPoint(b,c)};b.cubicCurveTo=function(d,a,b,c,f,g){this._pushCommand(new e(function(d,
a,b,c,e,m){this._renderContext.bezierCurveTo(d,a,b,c,e,m)},this,[d,a,b,c,f,g]));this._checkPoint(this.lineX,this.lineY);this.lineX=f;this.lineY=g;this._checkPoint(d,a);this._checkPoint(b,c);this._checkPoint(f,g)};b.moveTo=function(d,a){this._pushCommand(new e(function(d,a){this._renderContext.moveTo(d,a)},this,[d,a]));this.lineX=d;this.lineY=a};b.clear=function(){this.lineY=this.lineX=this.commandQueue.length=0;this.fillStyle=this.strokeStyle=null;this._maxY=this._maxX=this._minY=this._minX=0;this._dirty=
this._firstCheck=!0};b.endFill=function(){null!=this.fillStyle&&(this._fill(),this.fillStyle=null)};b._beginDraw=function(d){};b._endDraw=function(d){};b._draw=function(d){var a=this.commandQueue.length;if(0!=a){this._beginDraw(d);for(var b=0;b<a;b++){var c=this.commandQueue[b];c.method.apply(c.thisObject,c.args)}this.fillStyle&&(this._createEndFillCommand(),c=this._endFillCommand,c.method.apply(c.thisObject,c.args));this.strokeStyle&&(this._createEndLineCommand(),c=this._endLineCommand,c.method.apply(c.thisObject,
c.args));this._endDraw(d);this._dirty=!1}};b._checkRect=function(d,a,b,c){this._firstCheck?(this._firstCheck=!1,this._minX=d,this._minY=a,this._maxX=d+b,this._maxY=a+c):(this._minX=Math.min(this._minX,d),this._minY=Math.min(this._minY,a),this._maxX=Math.max(this._maxX,d+b),this._maxY=Math.max(this._maxY,a+c));this._dirty=!0};b._checkPoint=function(d,a){this._firstCheck?(this._firstCheck=!1,this._minX=d,this._minY=a,this._maxX=d,this._maxY=a):(this._minX=Math.min(this._minX,d),this._minY=Math.min(this._minY,
a),this._maxX=Math.max(this._maxX,d),this._maxY=Math.max(this._maxY,a));this._lastX=d;this._lastY=a;this._dirty=!0};b._measureBounds=function(){return c.Rectangle.identity.initialize(this._minX,this._minY,this._maxX-this._minX,this._maxY-this._minY)};b._createEndFillCommand=function(){this._endFillCommand||(this._endFillCommand=new e(function(){this._renderContext.fill();this._renderContext.closePath()},this,null))};b._fill=function(){this.fillStyle&&(this._createEndFillCommand(),this._pushCommand(this._endFillCommand));
this.strokeStyle&&(this._createEndLineCommand(),this._pushCommand(this._endLineCommand))};b._createEndLineCommand=function(){this._endLineCommand||(this._endLineCommand=new e(function(){this._renderContext.stroke();this._renderContext.closePath()},this,null))};b._pushCommand=function(d){this.commandQueue.push(d);this._dirty=!0};return a}();c.Graphics=f;f.prototype.__class__="egret.Graphics";var e=function(){return function(a,b,d){this.method=a;this.thisObject=b;this.args=d}}();e.prototype.__class__=
"egret.Command"})(egret||(egret={}));
(function(c){var f=function(e){function a(){e.call(this);this._graphics=null}__extends(a,e);var b=a.prototype;Object.defineProperty(b,"graphics",{get:function(){this._graphics||(this._graphics=new c.Graphics,this.needDraw=!0);return this._graphics},enumerable:!0,configurable:!0});b._draw=function(d){this._graphics&&this._graphics._dirty&&this._setCacheDirty();e.prototype._draw.call(this,d)};b._render=function(d){this._graphics&&this._graphics._draw(d)};b._measureBounds=function(){var d=this._graphics;
return d?d._measureBounds():e.prototype._measureBounds.call(this)};return a}(c.DisplayObject);c.Shape=f;f.prototype.__class__="egret.Shape"})(egret||(egret={}));
(function(c){var f=function(e){function a(){e.call(this);this._graphics=null}__extends(a,e);var b=a.prototype;Object.defineProperty(b,"graphics",{get:function(){this._graphics||(this._graphics=new c.Graphics,this.needDraw=!0);return this._graphics},enumerable:!0,configurable:!0});b._draw=function(d){this._graphics&&this._graphics._dirty&&this._setCacheDirty();e.prototype._draw.call(this,d)};b._render=function(d){this._graphics&&this._graphics._draw(d);e.prototype._render.call(this,d)};b._measureBounds=
function(){for(var d=0,a=0,b=0,e=0,f=this._children.length,g=0;g<f;g++){var h=this._children[g];if(h.visible){var k=h.getBounds(c.Rectangle.identity,!1),n=k.x,q=k.y,p=k.width,k=k.height,h=h._getMatrix(),h=c.DisplayObject.getTransformBounds(c.Rectangle.identity.initialize(n,q,p,k),h),n=h.x,q=h.y,p=h.width+h.x,h=h.height+h.y;if(n<d||0==g)d=n;if(p>a||0==g)a=p;if(q<b||0==g)b=q;if(h>e||0==g)e=h}}if(this._graphics){f=this._graphics._measureBounds();n=f.x;q=f.y;p=f.width+f.x;h=f.height+f.y;if(n<d||0==g)d=
n;if(p>a||0==g)a=p;if(q<b||0==g)b=q;if(h>e||0==g)e=h}return c.Rectangle.identity.initialize(d,b,a-d,e-b)};b.hitTest=function(d,a,b){void 0===b&&(b=!1);var f=e.prototype.hitTest.call(this,d,a,b);return f?f:this._graphics?c.DisplayObject.prototype.hitTest.call(this,d,a,b):null};return a}(c.DisplayObjectContainer);c.Sprite=f;f.prototype.__class__="egret.Sprite"})(egret||(egret={}));
(function(c){var f=function(){function e(){}e._getStartLine=function(a){var b=e._getTextHeight(a),d=0;a._DO_Props_._hasHeightSet&&(!(b<a._DO_Props_._explicitHeight)&&b>a._DO_Props_._explicitHeight&&(d=Math.max(a._TF_Props_._scrollV-1,0),d=Math.min(a._TF_Props_._numLines-1,d)),a._TF_Props_._multiline||(d=Math.max(a._TF_Props_._scrollV-1,0),d=Math.min(a._TF_Props_._numLines-1,d)));return d};e._getHalign=function(a){var b=a._getLinesArr(),d=0;a._TF_Props_._textAlign==c.HorizontalAlign.CENTER?d=0.5:a._TF_Props_._textAlign==
c.HorizontalAlign.RIGHT&&(d=1);a._TF_Props_._type==c.TextFieldType.INPUT&&!a._TF_Props_._multiline&&1<b.length&&(d=0);return d};e._getTextHeight=function(a){return c.TextFieldType.INPUT!=a._TF_Props_._type||a._TF_Props_._multiline?a._TF_Props_._textMaxHeight+(a._TF_Props_._numLines-1)*a._TF_Props_._lineSpacing:a._TF_Props_._size};e._getValign=function(a){var b=e._getTextHeight(a);return a._DO_Props_._hasHeightSet&&b<a._DO_Props_._explicitHeight?(b=0,a._TF_Props_._verticalAlign==c.VerticalAlign.MIDDLE?
b=0.5:a._TF_Props_._verticalAlign==c.VerticalAlign.BOTTOM&&(b=1),b):0};e._getTextElement=function(a,b,d){b=e._getHit(a,b,d);a=a._getLinesArr();return b&&a[b.lineIndex]&&a[b.lineIndex].elements[b.textElementIndex]?a[b.lineIndex].elements[b.textElementIndex]:null};e._getHit=function(a,b,d){var c=a._getLinesArr();if(0==a._TF_Props_._textMaxWidth)return null;var f=0,r=e._getTextHeight(a),l=0;a._DO_Props_._hasHeightSet&&a._DO_Props_._explicitHeight>r&&(l=e._getValign(a)*(a._DO_Props_._explicitHeight-r),
0!=l&&(d-=l));l=0;for(r=e._getStartLine(a);r<c.length;r++){var g=c[r];if(l+g.height>=d){f=r+1;break}else l+=g.height;if(l+a._TF_Props_._lineSpacing>d)return null;l+=a._TF_Props_._lineSpacing}if(0===f)return null;a=c[f-1];for(r=d=0;r<a.elements.length;r++)if(c=a.elements[r],d+c.width<b)d+=c.width;else return{lineIndex:f-1,textElementIndex:r};return null};e._getScrollNum=function(a){var b=1;if(a._TF_Props_._multiline){var d=a.height,c=a.size;a=a.lineSpacing;b=Math.floor(d/(c+a));d-(c+a)*b>c/2&&b++}return b};
return e}();c.TextFieldUtils=f;f.prototype.__class__="egret.TextFieldUtils"})(egret||(egret={}));
(function(c){var f=function(){return function(){this._text=this._type="";this._displayAsPassword=!1;this._fontFamily=c.TextField.default_fontFamily;this._size=30;this._bold=this._italic=!1;this._textColorString="#FFFFFF";this._textColor=16777215;this._strokeColorString="#000000";this._stroke=this._strokeColor=0;this._border=!1;this._borderColor=0;this._background=!1;this._backgroundColor=16777215;this._textAlign="left";this._verticalAlign="top";this._maxChars=this._textMaxHeight=this._textMaxWidth=
0;this._scrollV=-1;this._numLines=this._lineSpacing=0;this._wordWrap=this._multiline=!1;this._restrictNot=this._restrictAnd=null}}();c.TextFieldProperties=f;f.prototype.__class__="egret.TextFieldProperties"})(egret||(egret={}));
(function(c){var f=function(e){function a(){e.call(this);this._inputEnabled=!1;this._bgGraphics=this._inputUtils=null;this._isFlow=!1;this._textArr=[];this._isArrayChanged=!1;this._linesArr=[];this._isTyping=!1;this.needDraw=!0;this._TF_Props_=new c.TextFieldProperties}__extends(a,e);var b=a.prototype;b.isInput=function(){return this._TF_Props_._type==c.TextFieldType.INPUT};b._setTouchEnabled=function(d){e.prototype._setTouchEnabled.call(this,d);this.isInput()&&(this._inputEnabled=!0)};Object.defineProperty(b,
"type",{get:function(){return this._TF_Props_._type},set:function(d){this._setType(d)},enumerable:!0,configurable:!0});b._setType=function(d){var a=this._TF_Props_;a._type!=d&&(a._type=d,a._type==c.TextFieldType.INPUT?(this._DO_Props_._hasWidthSet||this._setWidth(100),this._DO_Props_._hasHeightSet||this._setHeight(30),null==this._inputUtils&&(this._inputUtils=new c.InputController),this._inputUtils.init(this),this._setDirty(),this._DO_Props_._stage&&this._inputUtils._addStageText()):this._inputUtils&&
(this._inputUtils._removeStageText(),this._inputUtils=null))};Object.defineProperty(b,"text",{get:function(){return this._getText()},set:function(d){this._setText(d)},enumerable:!0,configurable:!0});b._getText=function(){return this._TF_Props_._type==c.TextFieldType.INPUT?this._inputUtils._getText():this._TF_Props_._text};b._setSizeDirty=function(){e.prototype._setSizeDirty.call(this);this._isArrayChanged=!0};b._setTextDirty=function(){this._setSizeDirty()};b._setBaseText=function(d){null==d&&(d=
"");var a=this._TF_Props_;d=d.toString();this._isFlow=!1;a._text!=d&&(this._setTextDirty(),a._text=d,d="",d=a._displayAsPassword?this.changeToPassText(a._text):a._text,this.setMiddleStyle([{text:d}]))};b._setText=function(d){null==d&&(d="");this._setBaseText(d);this._inputUtils&&this._inputUtils._setText(this._TF_Props_._text)};Object.defineProperty(b,"displayAsPassword",{get:function(){return this._TF_Props_._displayAsPassword},set:function(d){this._setDisplayAsPassword(d)},enumerable:!0,configurable:!0});
b._setDisplayAsPassword=function(d){var a=this._TF_Props_;a._displayAsPassword!=d&&(a._displayAsPassword=d,this._setTextDirty(),d="",d=a._displayAsPassword?this.changeToPassText(a._text):a._text,this.setMiddleStyle([{text:d}]))};Object.defineProperty(b,"fontFamily",{get:function(){return this._TF_Props_._fontFamily},set:function(d){this._setFontFamily(d)},enumerable:!0,configurable:!0});b._setFontFamily=function(d){this._TF_Props_._fontFamily!=d&&(this._setTextDirty(),this._TF_Props_._fontFamily=
d)};Object.defineProperty(b,"size",{get:function(){return this._TF_Props_._size},set:function(d){this._setSize(d)},enumerable:!0,configurable:!0});b._setSize=function(d){this._TF_Props_._size!=d&&(this._setTextDirty(),this._TF_Props_._size=d)};Object.defineProperty(b,"italic",{get:function(){return this._TF_Props_._italic},set:function(d){this._setItalic(d)},enumerable:!0,configurable:!0});b._setItalic=function(d){this._TF_Props_._italic!=d&&(this._setTextDirty(),this._TF_Props_._italic=d)};Object.defineProperty(b,
"bold",{get:function(){return this._TF_Props_._bold},set:function(d){this._setBold(d)},enumerable:!0,configurable:!0});b._setBold=function(d){this._TF_Props_._bold!=d&&(this._setTextDirty(),this._TF_Props_._bold=d)};Object.defineProperty(b,"textColor",{get:function(){return this._TF_Props_._textColor},set:function(d){this._setTextColor(d)},enumerable:!0,configurable:!0});b._setTextColor=function(d){this._TF_Props_._textColor!=d&&(this._setTextDirty(),this._TF_Props_._textColor=d,this._TF_Props_._textColorString=
c.toColorString(d))};Object.defineProperty(b,"strokeColor",{get:function(){return this._TF_Props_._strokeColor},set:function(d){this._setStrokeColor(d)},enumerable:!0,configurable:!0});b._setStrokeColor=function(d){this._TF_Props_._strokeColor!=d&&(this._setTextDirty(),this._TF_Props_._strokeColor=d,this._TF_Props_._strokeColorString=c.toColorString(d))};Object.defineProperty(b,"stroke",{get:function(){return this._TF_Props_._stroke},set:function(d){this._setStroke(d)},enumerable:!0,configurable:!0});
b._setStroke=function(d){this._TF_Props_._stroke!=d&&(this._setTextDirty(),this._TF_Props_._stroke=d)};Object.defineProperty(b,"textAlign",{get:function(){return this._TF_Props_._textAlign},set:function(d){this._setTextAlign(d)},enumerable:!0,configurable:!0});b._setTextAlign=function(d){this._TF_Props_._textAlign!=d&&(this._setTextDirty(),this._TF_Props_._textAlign=d)};Object.defineProperty(b,"verticalAlign",{get:function(){return this._TF_Props_._verticalAlign},set:function(d){this._setVerticalAlign(d)},
enumerable:!0,configurable:!0});b._setVerticalAlign=function(d){this._TF_Props_._verticalAlign!=d&&(this._setTextDirty(),this._TF_Props_._verticalAlign=d)};Object.defineProperty(b,"maxChars",{get:function(){return this._TF_Props_._maxChars},set:function(d){this._setMaxChars(d)},enumerable:!0,configurable:!0});b._setMaxChars=function(d){this._TF_Props_._maxChars!=d&&(this._TF_Props_._maxChars=d)};Object.defineProperty(b,"scrollV",{get:function(){return Math.min(Math.max(this._TF_Props_._scrollV,1),
this.maxScrollV)},set:function(d){this._TF_Props_._scrollV=Math.max(d,1);this._setDirty()},enumerable:!0,configurable:!0});Object.defineProperty(b,"maxScrollV",{get:function(){this._getLinesArr();return Math.max(this._TF_Props_._numLines-c.TextFieldUtils._getScrollNum(this)+1,1)},enumerable:!0,configurable:!0});Object.defineProperty(b,"selectionBeginIndex",{get:function(){return 0},enumerable:!0,configurable:!0});Object.defineProperty(b,"selectionEndIndex",{get:function(){return 0},enumerable:!0,
configurable:!0});Object.defineProperty(b,"caretIndex",{get:function(){return 0},enumerable:!0,configurable:!0});b._setSelection=function(d,a){};Object.defineProperty(b,"lineSpacing",{get:function(){return this._TF_Props_._lineSpacing},set:function(d){this._setLineSpacing(d)},enumerable:!0,configurable:!0});b._setLineSpacing=function(d){this._TF_Props_._lineSpacing!=d&&(this._setTextDirty(),this._TF_Props_._lineSpacing=d)};b._getLineHeight=function(){return this._TF_Props_._lineSpacing+this._TF_Props_._size};
Object.defineProperty(b,"numLines",{get:function(){return this._TF_Props_._numLines},enumerable:!0,configurable:!0});Object.defineProperty(b,"multiline",{get:function(){return this._TF_Props_._multiline},set:function(d){this._setMultiline(d)},enumerable:!0,configurable:!0});b._setMultiline=function(d){this._TF_Props_._multiline=d;this._setDirty()};Object.defineProperty(b,"restrict",{get:function(){var d=this._TF_Props_,a=null;null!=d._restrictAnd&&(a=d._restrictAnd);null!=d._restrictNot&&(null==a&&
(a=""),a+="^"+d._restrictNot);return a},set:function(d){var a=this._TF_Props_;if(null==d)a._restrictAnd=null,a._restrictNot=null;else{for(var b=-1;b<d.length&&(b=d.indexOf("^",b),0!=b);)if(0<b){if("\\"!=d.charAt(b-1))break;b++}else break;0==b?(a._restrictAnd=null,a._restrictNot=d.substring(b+1)):0<b?(a._restrictAnd=d.substring(0,b),a._restrictNot=d.substring(b+1)):(a._restrictAnd=d,a._restrictNot=null)}},enumerable:!0,configurable:!0});b._setWidth=function(d){e.prototype._setWidth.call(this,d)};b._setHeight=
function(d){e.prototype._setHeight.call(this,d)};Object.defineProperty(b,"border",{get:function(){return this._TF_Props_._border},set:function(d){this._TF_Props_._border=d;this.fillBackground()},enumerable:!0,configurable:!0});Object.defineProperty(b,"borderColor",{get:function(){return this._TF_Props_._borderColor},set:function(d){this._TF_Props_._borderColor=d;this.fillBackground()},enumerable:!0,configurable:!0});Object.defineProperty(b,"background",{get:function(){return this._TF_Props_._background},
set:function(d){this._TF_Props_._background=d;this.fillBackground()},enumerable:!0,configurable:!0});Object.defineProperty(b,"backgroundColor",{get:function(){return this._TF_Props_._backgroundColor},set:function(d){this._TF_Props_._backgroundColor=d;this.fillBackground()},enumerable:!0,configurable:!0});b.fillBackground=function(){var d=this._bgGraphics,a=this._TF_Props_;d&&d.clear();if(a._background||a._border)null==d&&(d=this._bgGraphics=new c.Graphics),a._background&&d.beginFill(a._backgroundColor,
1),a._border&&d.lineStyle(1,a._borderColor),d.drawRect(0,0,this._getWidth(),this._getHeight()),d.endFill()};b.setFocus=function(){c.$warn(1013)};b._onRemoveFromStage=function(){e.prototype._onRemoveFromStage.call(this);this._removeEvent();this._TF_Props_._type==c.TextFieldType.INPUT&&this._inputUtils._removeStageText()};b._onAddToStage=function(){e.prototype._onAddToStage.call(this);this._addEvent();this._TF_Props_._type==c.TextFieldType.INPUT&&this._inputUtils._addStageText()};b._updateBaseTransform=
function(){this._getLinesArr();0==this._TF_Props_._textMaxWidth&&this._TF_Props_._type!=c.TextFieldType.INPUT||e.prototype._updateTransform.call(this)};b._updateTransform=function(){this._TF_Props_._type==c.TextFieldType.INPUT?this._DO_Props_._normalDirty?this._inputUtils._updateProperties():this._inputUtils._updateTransform():this._updateBaseTransform()};b._draw=function(d){e.prototype._draw.call(this,d)};b._render=function(d){this._bgGraphics&&this._bgGraphics._draw(d);var a=this._TF_Props_;if(a._type==
c.TextFieldType.INPUT){if(this._isTyping)return}else if(0==a._textMaxWidth)return;this.drawText(d);this._clearDirty()};b._measureBounds=function(){var d=this._TF_Props_;this._getLinesArr();return 0==d._textMaxWidth?c.Rectangle.identity.initialize(0,0,0,0):c.Rectangle.identity.initialize(0,0,d._textMaxWidth,c.TextFieldUtils._getTextHeight(this))};Object.defineProperty(b,"textFlow",{get:function(){return this._textArr},set:function(d){var a=this._TF_Props_;this._isFlow=!0;var b="";null==d&&(d=[]);for(var c=
0;c<d.length;c++)b+=d[c].text;a._displayAsPassword?this._setBaseText(b):(a._text=b,this.setMiddleStyle(d))},enumerable:!0,configurable:!0});b.changeToPassText=function(d){if(this._TF_Props_._displayAsPassword){for(var a="",b=0,c=d.length;b<c;b++)switch(d.charAt(b)){case "\n":a+="\n";break;case "\r":break;default:a+="*"}return a}return d};b.setMiddleStyle=function(d){this._isArrayChanged=!0;this._textArr=d;this._setSizeDirty()};Object.defineProperty(b,"textWidth",{get:function(){return this._TF_Props_._textMaxWidth},
enumerable:!0,configurable:!0});Object.defineProperty(b,"textHeight",{get:function(){return c.TextFieldUtils._getTextHeight(this)},enumerable:!0,configurable:!0});b.appendText=function(d){this.appendElement({text:d})};b.appendElement=function(d){var a=this._TF_Props_,b=a._text+d.text;a._displayAsPassword?this._setBaseText(b):(a._text=b,this._textArr.push(d),this.setMiddleStyle(this._textArr))};b._getLinesArr=function(){var d=this._TF_Props_;if(!this._isArrayChanged)return this._linesArr;this._isArrayChanged=
!1;var a=this._textArr,b=c.MainContext.instance.rendererContext;this._linesArr.length=0;d._textMaxHeight=0;d._textMaxWidth=0;if(this._DO_Props_._hasWidthSet&&0==this._DO_Props_._explicitWidth)return d._numLines=0,[{width:0,height:0,charNum:0,elements:[],hasNextLine:!1}];this._isFlow||b.setupFont(this);for(var e=this._linesArr,f=0,g=0,h=0,k=0,n,q=0,p=a.length;q<p;q++){var u=a[q];u.style=u.style||{};for(var t=u.text.toString().split(/(?:\r\n|\r|\n)/),C=0,E=t.length;C<E;C++){null==e[k]&&(n={width:0,
height:0,elements:[],charNum:0,hasNextLine:!1},e[k]=n,g=h=f=0);var h=d._type==c.TextFieldType.INPUT?d._size:Math.max(h,u.style.size||d._size),v=!0;if(""==t[C])C==E-1&&(v=!1);else{this._isFlow&&b.setupFont(this,u.style);var w=b.measureText(t[C]);if(this._DO_Props_._hasWidthSet)if(f+w<=this._DO_Props_._explicitWidth)n.elements.push({width:w,text:t[C],style:u.style}),f+=w,g+=t[C].length,C==E-1&&(v=!1);else{for(var x=0,y=0,z=t[C],A=this._TF_Props_._wordWrap?z.split(/\b/):z.match(/./g),F=A.length,D=0;x<
F;x++){w=b.measureText(A[x]);if(0!=f&&f+w>this._DO_Props_._explicitWidth&&0!=f+x)break;D+=A[x].length;y+=w;f+=w;g+=D}if(0<x){n.elements.push({width:y,text:z.substring(0,D),style:u.style});w=z.substring(D);x=0;for(y=w.length;x<y&&" "==w.charAt(x);x++);t[C]=w.substring(x)}""!=t[C]&&(C--,v=!1)}else f+=w,g+=t[C].length,n.elements.push({width:w,text:t[C],style:u.style}),C==E-1&&(v=!1)}v&&(g++,n.hasNextLine=!0);C<t.length-1&&(n.width=f,n.height=h,n.charNum=g,d._textMaxWidth=Math.max(d._textMaxWidth,f),
d._textMaxHeight+=h,k++)}q==a.length-1&&n&&(n.width=f,n.height=h,n.charNum=g,d._textMaxWidth=Math.max(d._textMaxWidth,f),d._textMaxHeight+=h)}d._numLines=e.length;this.fillBackground();return e};Object.defineProperty(b,"wordWrap",{get:function(){return this._TF_Props_._wordWrap},set:function(d){this._TF_Props_._wordWrap=d},enumerable:!0,configurable:!0});b.drawText=function(d){var a=this._TF_Props_,b=this._getLinesArr();if(0!=a._textMaxWidth){var e=this._DO_Props_._hasWidthSet?this._DO_Props_._explicitWidth:
a._textMaxWidth,f=c.TextFieldUtils._getTextHeight(this),g=0,h=c.TextFieldUtils._getStartLine(this);if(this._DO_Props_._hasHeightSet&&this._DO_Props_._explicitHeight>f)var k=c.TextFieldUtils._getValign(this),g=g+k*(this._DO_Props_._explicitHeight-f);for(var g=Math.round(g),f=c.TextFieldUtils._getHalign(this),k=0,n=h,q=a._numLines;n<q;n++){var p=b[n],u=p.height,g=g+u/2;if(n!=h){if(a._type==c.TextFieldType.INPUT&&!a._multiline)break;if(this._DO_Props_._hasHeightSet&&g>this._DO_Props_._explicitHeight)break}for(var k=
Math.round((e-p.width)*f),t=0,C=p.elements.length;t<C;t++){var E=p.elements[t];d.drawText(this,E.text,k,g+(u-(E.style.size||a._size))/2,E.width,E.style);k+=E.width}g+=u/2+a._lineSpacing}}};b._addEvent=function(){this.addEventListener(c.TouchEvent.TOUCH_TAP,this.onTapHandler,this)};b._removeEvent=function(){this.removeEventListener(c.TouchEvent.TOUCH_TAP,this.onTapHandler,this)};b.onTapHandler=function(d){if(this._TF_Props_._type!=c.TextFieldType.INPUT&&(d=c.TextFieldUtils._getTextElement(this,d.localX,
d.localY),null!=d&&(d=d.style)&&d.href&&d.href.match(/^event:/))){var a=d.href.match(/^event:/)[0];c.TextEvent.dispatchTextEvent(this,c.TextEvent.LINK,d.href.substring(a.length))}};a.default_fontFamily="Arial";return a}(c.DisplayObject);c.TextField=f;f.prototype.__class__="egret.TextField"})(egret||(egret={}));
(function(c){var f=function(){function c(){this._replaceArr=[];this.resutlArr=[];this.initReplaceArr()}var a=c.prototype;a.initReplaceArr=function(){this._replaceArr=[];this._replaceArr.push([/&lt;/g,"<"]);this._replaceArr.push([/&gt;/g,">"]);this._replaceArr.push([/&amp;/g,"&"]);this._replaceArr.push([/&quot;/g,'"']);this._replaceArr.push([/&apos;/g,"'"])};a.replaceSpecial=function(a){for(var d=0;d<this._replaceArr.length;d++)a=a.replace(this._replaceArr[d][0],this._replaceArr[d][1]);return a};a.parser=
function(a){this.stackArray=[];this.resutlArr=[];for(var d=0,c=a.length;d<c;){var e=a.indexOf("<",d);0>e?(this.addToResultArr(a.substring(d)),d=c):(this.addToResultArr(a.substring(d,e)),d=a.indexOf(">",e),"/"==a.charAt(e+1)?this.stackArray.pop():this.addToArray(a.substring(e+1,d)),d+=1)}return this.resutlArr};a.addToResultArr=function(a){""!=a&&(a=this.replaceSpecial(a),0<this.stackArray.length?this.resutlArr.push({text:a,style:this.stackArray[this.stackArray.length-1]}):this.resutlArr.push({text:a}))};
a.changeStringToObject=function(a){a=a.trim();var d={},c=[];if("i"==a.charAt(0)||"b"==a.charAt(0))this.addProperty(d,a,"true");else if(c=a.match(/^(font|a)\s/))for(a=a.substring(c[0].length).trim(),c=0;c=a.match(this.getHeadReg());){var e=c[0],f="";a=a.substring(e.length).trim();'"'==a.charAt(0)?(c=a.indexOf('"',1),f=a.substring(1,c),c+=1):"'"==a.charAt(0)?(c=a.indexOf("'",1),f=a.substring(1,c),c+=1):(f=a.match(/(\S)+/)[0],c=f.length);this.addProperty(d,e.substring(0,e.length-1).trim(),f.trim());
a=a.substring(c).trim()}return d};a.getHeadReg=function(){return/^(color|textcolor|strokecolor|stroke|b|bold|i|italic|size|fontfamily|href)(\s)*=/};a.addProperty=function(a,d,c){switch(d.toLowerCase()){case "color":case "textcolor":c=c.replace(/#/,"0x");a.textColor=parseInt(c);break;case "strokecolor":c=c.replace(/#/,"0x");a.strokeColor=parseInt(c);break;case "stroke":a.stroke=parseInt(c);break;case "b":case "bold":a.bold="true"==c;break;case "i":case "italic":a.italic="true"==c;break;case "size":a.size=
parseInt(c);break;case "fontfamily":a.fontFamily=c;break;case "href":a.href=this.replaceSpecial(c)}};a.addToArray=function(a){a=this.changeStringToObject(a);if(0!=this.stackArray.length){var d=this.stackArray[this.stackArray.length-1],c;for(c in d)null==a[c]&&(a[c]=d[c])}this.stackArray.push(a)};return c}();c.HtmlTextParser=f;f.prototype.__class__="egret.HtmlTextParser"})(egret||(egret={}));
(function(c){var f=function(){function c(){}c.DYNAMIC="dynamic";c.INPUT="input";return c}();c.TextFieldType=f;f.prototype.__class__="egret.TextFieldType"})(egret||(egret={}));
(function(c){var f=function(e){function a(d){e.call(this);this._bitmapY=this._bitmapX=this._sourceHeight=this._sourceWidth=0;this._textureMap={};this.texture=d;this._sourceWidth=d._sourceWidth;this._sourceHeight=d._sourceHeight;this._bitmapX=d._bitmapX-d._offsetX;this._bitmapY=d._bitmapY-d._offsetY}__extends(a,e);var b=a.prototype;b.getTexture=function(d){return this._textureMap[d]};b.createTexture=function(d,a,b,e,f,g,h,k,n){void 0===g&&(g=0);void 0===h&&(h=0);"undefined"===typeof k&&(k=g+e);"undefined"===
typeof n&&(n=h+f);var q=this.texture._clone(),p=c.MainContext.instance.rendererContext._texture_scale_factor;q._bitmapX=this._bitmapX+a;q._bitmapY=this._bitmapY+b;q._bitmapWidth=e*p;q._bitmapHeight=f*p;q._offsetX=g;q._offsetY=h;q._textureWidth=k*p;q._textureHeight=n*p;q._sourceWidth=this._sourceWidth;q._sourceHeight=this._sourceHeight;return this._textureMap[d]=q};b.dispose=function(){this.texture&&this.texture.dispose()};return a}(c.HashObject);c.SpriteSheet=f;f.prototype.__class__="egret.SpriteSheet"})(egret||
(egret={}));
(function(c){var f=function(e){function a(){e.call(this);this._text=null;this._isFocus=!1}__extends(a,e);var b=a.prototype;b.init=function(d){this._text=d;this.stageText=c.StageText.create();this.stageText._setTextField(this._text)};b._addStageText=function(){this._text._inputEnabled||(this._text._DO_Props_._touchEnabled=!0);this.stageText._add();this.stageText._addListeners();this.stageText.addEventListener("updateText",this.updateTextHandler,this);this._text.addEventListener(c.TouchEvent.TOUCH_BEGIN,this.onMouseDownHandler,
this);c.MainContext.instance.stage.addEventListener(c.TouchEvent.TOUCH_BEGIN,this.onStageDownHandler,this);this.stageText.addEventListener("blur",this.blurHandler,this);this.stageText.addEventListener("focus",this.focusHandler,this)};b._removeStageText=function(){this._text._inputEnabled||(this._text._DO_Props_._touchEnabled=!1);this.stageText._remove();this.stageText._removeListeners();this.stageText._removeInput();this.stageText.removeEventListener("updateText",this.updateTextHandler,this);this._text.removeEventListener(c.TouchEvent.TOUCH_BEGIN,
this.onMouseDownHandler,this);c.MainContext.instance.stage.removeEventListener(c.TouchEvent.TOUCH_BEGIN,this.onStageDownHandler,this);this.stageText.removeEventListener("blur",this.blurHandler,this);this.stageText.removeEventListener("focus",this.focusHandler,this)};b._getText=function(){return this.stageText._getText()};b._setText=function(d){this.stageText._setText(d)};b.focusHandler=function(d){this._isFocus||(this._isFocus=!0,d.showing||(this._text._isTyping=!0),this._text.dispatchEvent(new c.FocusEvent(c.FocusEvent.FOCUS_IN,
!0)))};b.blurHandler=function(d){this._isFocus&&(this._isFocus=!1,this._text._isTyping=!1,this.stageText.$onBlur(),this._text.dispatchEvent(new c.FocusEvent(c.FocusEvent.FOCUS_OUT,!0)))};b.onMouseDownHandler=function(d){d.stopPropagation();this._text._DO_Props_._visible&&!this._isFocus&&(this.stageText._show(this._text._TF_Props_._multiline,this._text.size,this._text.width,this._text.height),d=this._text.localToGlobal(),this.stageText._initElement(d.x,d.y,this._text._worldTransform.a,this._text._worldTransform.d))};
b.onStageDownHandler=function(d){this.stageText._hide()};b.updateTextHandler=function(d){d=this._text._TF_Props_;var a=this.stageText._getText(),b=!1;null!=d._restrictAnd&&(b=new RegExp("["+d._restrictAnd+"]","g"),a=(a=a.match(b))?a.join(""):"",b=!0);null!=d._restrictNot&&(b=new RegExp("[^"+d._restrictNot+"]","g"),a=(a=a.match(b))?a.join(""):"",b=!0);b&&this.stageText._setText(a);this.resetText();this._text.dispatchEvent(new c.Event(c.Event.CHANGE,!0))};b.resetText=function(){this._text._setBaseText(this.stageText._getText())};
b._hideInput=function(){this.stageText._removeInput()};b._updateTransform=function(){this._text._updateBaseTransform();!this._text._DO_Props_._visible&&this.stageText&&this._hideInput()};b._updateProperties=function(){if(!this._isFocus){var d=this._text._DO_Props_._stage;if(null==d)this.stageText._setVisible(!1);else{for(var a=this._text,b=a._DO_Props_._visible;b;){a=a.parent;if(a==d)break;b=a._DO_Props_._visible}this.stageText._setVisible(b)}this.stageText._setMultiline(this._text._TF_Props_._multiline);
this.stageText._setTextType(this._text._TF_Props_._displayAsPassword?"password":"text");this.stageText._setText(this._text._TF_Props_._text);this.stageText._resetStageText()}this._updateTransform()};return a}(c.HashObject);c.InputController=f;f.prototype.__class__="egret.InputController"})(egret||(egret={}));
(function(c){var f=function(c){function a(d,a){c.call(this,d);this.firstCharHeight=0;"string"==typeof a?this.charList=this.parseConfig(a):a&&a.hasOwnProperty("frames")?this.charList=a.frames:this.charList={}}__extends(a,c);var b=a.prototype;b.getTexture=function(d){var a=this._textureMap[d];if(!a){a=this.charList[d];if(!a)return null;a=this.createTexture(d,a.x,a.y,a.w,a.h,a.offX,a.offY,a.sourceW,a.sourceH);this._textureMap[d]=a}return a};b._getFirstCharHeight=function(){if(0==this.firstCharHeight)for(var d in this.charList){var a=
this.charList[d];if(a){var b=a.sourceH;void 0===b&&(b=a.h,void 0===b&&(b=0),a=a.offY,void 0===a&&(a=0),b+=a);if(!(0>=b)){this.firstCharHeight=b;break}}}return this.firstCharHeight};b.parseConfig=function(d){d=d.split("\r\n").join("\n");d=d.split("\n");for(var a=this.getConfigByKey(d[3],"count"),b={},c=4;c<4+a;c++){var e=d[c],f=String.fromCharCode(this.getConfigByKey(e,"id")),h={};b[f]=h;h.x=this.getConfigByKey(e,"x");h.y=this.getConfigByKey(e,"y");h.w=this.getConfigByKey(e,"width");h.h=this.getConfigByKey(e,
"height");h.offX=this.getConfigByKey(e,"xoffset");h.offY=this.getConfigByKey(e,"yoffset")}return b};b.getConfigByKey=function(d,a){for(var b=d.split(" "),c=0,e=b.length;c<e;c++){var f=b[c];if(a==f.substring(0,a.length))return b=f.substring(a.length+1),parseInt(b)}return 0};return a}(c.SpriteSheet);c.BitmapFont=f;f.prototype.__class__="egret.BitmapFont"})(egret||(egret={}));
(function(c){var f=function(e){function a(d){e.call(this);this._isAddedToStage=!1;this._frames=this._movieClipData=this._textureToRender=null;this._totalFrames=0;this._frameLabels=null;this._frameIntervalTime=0;this._eventPool=null;this._isPlaying=!1;this._isStopped=!0;this._passedTime=this._displayedKeyFrameNum=this._nextFrameNum=this._currentFrameNum=this._playTimes=0;this._setMovieClipData(d);this.needDraw=!0}__extends(a,e);var b=a.prototype;b._init=function(){this._reset();var d=this._movieClipData;
d&&d._isDataValid()&&(this._frames=d.frames,this._totalFrames=d.numFrames,this._frameLabels=d.labels,this._frameIntervalTime=1E3/d.frameRate,this._initFrame())};b._reset=function(){this._frames=null;this._playTimes=0;this._isPlaying=!1;this.setIsStopped(!0);this._currentFrameNum=0;this._nextFrameNum=1;this._passedTime=this._displayedKeyFrameNum=0;this._eventPool=[]};b._initFrame=function(){this._movieClipData._isTextureValid()&&(this._advanceFrame(),this._constructFrame())};b._render=function(d){var b=
this._textureToRender;if(this._texture_to_render=b){var c=Math.round(b._offsetX),e=Math.round(b._offsetY),f=b._bitmapWidth||b._textureWidth,g=b._bitmapHeight||b._textureHeight,h=Math.round(f),k=Math.round(g);a.renderFilter.drawImage(d,this,b._bitmapX,b._bitmapY,f,g,c,e,h,k)}};b._measureBounds=function(){var d=this._textureToRender;return d?c.Rectangle.identity.initialize(d._offsetX,d._offsetY,d._textureWidth,d._textureHeight):e.prototype._measureBounds.call(this)};b._onAddToStage=function(){e.prototype._onAddToStage.call(this);
this._isAddedToStage=!0;this._isPlaying&&1<this._totalFrames&&this.setIsStopped(!1)};b._onRemoveFromStage=function(){e.prototype._onRemoveFromStage.call(this);this._isAddedToStage=!1;this.setIsStopped(!0)};b._getFrameLabelByName=function(d,a){void 0===a&&(a=!1);a&&(d=d.toLowerCase());var b=this._frameLabels;if(b)for(var c=null,e=0;e<b.length;e++)if(c=b[e],a?c.name.toLowerCase()===d:c.name===d)return c;return null};b._getFrameLabelByFrame=function(d){var a=this._frameLabels;if(a)for(var b=null,c=0;c<
a.length;c++)if(b=a[c],b.frame===d)return b;return null};b._getFrameLabelForFrame=function(d){var a=null,b=null,c=this._frameLabels;if(c)for(var e=0;e<c.length;e++){b=c[e];if(b.frame>d)break;a=b}return a};b.play=function(d){void 0===d&&(d=0);this._isPlaying=!0;this.setPlayTimes(d);1<this._totalFrames&&this._isAddedToStage&&this.setIsStopped(!1)};b.stop=function(){this._isPlaying=!1;this.setIsStopped(!0)};b.prevFrame=function(){this.gotoAndStop(this._currentFrameNum-1)};b.nextFrame=function(){this.gotoAndStop(this._currentFrameNum+
1)};b.gotoAndPlay=function(d,a){void 0===a&&(a=0);(0===arguments.length||2<arguments.length)&&c.$error(1022,"MovieClip.gotoAndPlay()");this.play(a);this._gotoFrame(d)};b.gotoAndStop=function(d){1!=arguments.length&&c.$error(1022,"MovieClip.gotoAndStop()");this.stop();this._gotoFrame(d)};b._gotoFrame=function(d){var a;"string"===typeof d?a=this._getFrameLabelByName(d).frame:(a=parseInt(d+"",10),a!=d&&c.$error(1022,"Frame Label Not Found"));1>a?a=1:a>this._totalFrames&&(a=this._totalFrames);a!==this._nextFrameNum&&
(this._nextFrameNum=a,this._advanceFrame(),this._constructFrame(),this._handlePendingEvent())};b._advanceTime=function(d){var a=this._frameIntervalTime;d=this._passedTime+d;this._passedTime=d%a;a=d/a;if(!(1>a)){for(;1<=a;){a--;this._nextFrameNum++;if(this._nextFrameNum>this._totalFrames)if(-1==this._playTimes)this._eventPool.push(c.Event.LOOP_COMPLETE),this._nextFrameNum=1;else if(this._playTimes--,0<this._playTimes)this._eventPool.push(c.Event.LOOP_COMPLETE),this._nextFrameNum=1;else{this._nextFrameNum=
this._totalFrames;this._eventPool.push(c.Event.COMPLETE);this.stop();break}this._advanceFrame()}this._constructFrame();this._handlePendingEvent();this._setDirty()}};b._advanceFrame=function(){this._currentFrameNum=this._nextFrameNum};b._constructFrame=function(){var d=this._currentFrameNum;this._displayedKeyFrameNum!=d&&(this._textureToRender=this._movieClipData.getTextureByFrame(d),this._DO_Props_._sizeDirty=!0,this._displayedKeyFrameNum=d)};b._handlePendingEvent=function(){if(0!=this._eventPool.length){this._eventPool.reverse();
for(var d=this._eventPool,a=d.length,b=!1,e=!1,f=0;f<a;f++){var g=d.pop();g==c.Event.LOOP_COMPLETE?e=!0:g==c.Event.COMPLETE?b=!0:this.dispatchEventWith(g)}e&&this.dispatchEventWith(c.Event.LOOP_COMPLETE);b&&this.dispatchEventWith(c.Event.COMPLETE)}};Object.defineProperty(b,"totalFrames",{get:function(){return this._totalFrames},enumerable:!0,configurable:!0});Object.defineProperty(b,"currentFrame",{get:function(){return this._currentFrameNum},enumerable:!0,configurable:!0});Object.defineProperty(b,
"currentFrameLabel",{get:function(){var d=this._getFrameLabelByFrame(this._currentFrameNum);return d&&d.name},enumerable:!0,configurable:!0});Object.defineProperty(b,"currentLabel",{get:function(){var d=this._getFrameLabelForFrame(this._currentFrameNum);return d?d.name:null},enumerable:!0,configurable:!0});Object.defineProperty(b,"frameRate",{get:function(){return this.movieClipData.frameRate},set:function(d){d!=this._movieClipData.frameRate&&(this._movieClipData.frameRate=d,this._frameIntervalTime=
1E3/this._movieClipData.frameRate)},enumerable:!0,configurable:!0});Object.defineProperty(b,"isPlaying",{get:function(){return this._isPlaying},enumerable:!0,configurable:!0});Object.defineProperty(b,"movieClipData",{get:function(){return this._movieClipData},set:function(d){this._setMovieClipData(d)},enumerable:!0,configurable:!0});b._setMovieClipData=function(d){this._movieClipData!=d&&(this._movieClipData=d,this._init())};b.setPlayTimes=function(d){if(0>d||1<=d)this._playTimes=0>d?-1:Math.floor(d)};
b.setIsStopped=function(d){this._isStopped!=d&&((this._isStopped=d)?(this._playTimes=0,c.Ticker.getInstance().unregister(this._advanceTime,this)):(this._playTimes=0==this._playTimes?1:this._playTimes,c.Ticker.getInstance().register(this._advanceTime,this)))};a.renderFilter=c.RenderFilter.getInstance();return a}(c.DisplayObject);c.MovieClip=f;f.prototype.__class__="egret.MovieClip"})(egret||(egret={}));
(function(c){var f=function(c){function a(d,a){c.call(this);this._name=d;this._frame=a|0}__extends(a,c);var b=a.prototype;Object.defineProperty(b,"name",{get:function(){return this._name},enumerable:!0,configurable:!0});Object.defineProperty(b,"frame",{get:function(){return this._frame},enumerable:!0,configurable:!0});b.clone=function(){return new a(this._name,this._frame)};return a}(c.EventDispatcher);c.FrameLabel=f;f.prototype.__class__="egret.FrameLabel"})(egret||(egret={}));
(function(c){var f=function(e){function a(){e.call(this);this._mcData=null;this.numFrames=1;this.frames=[];this.labels=null;this.frameRate=0;this.spriteSheet=this.textureData=null}__extends(a,e);var b=a.prototype;b._init=function(d,a,b){this.textureData=a;this.spriteSheet=b;this._setMCData(d)};b.getKeyFrameData=function(d){d=this.frames[d-1];d.frame&&(d=this.frames[d.frame-1]);return d};b.getTextureByFrame=function(d){d=this.getKeyFrameData(d);if(d.res){var a=this.getTextureByResName(d.res);a._offsetX=
d.x|0;a._offsetY=d.y|0;return a}return null};b.getTextureByResName=function(d){var a=this.spriteSheet.getTexture(d);a||(a=this.textureData[d],a=this.spriteSheet.createTexture(d,a.x,a.y,a.w,a.h));return a};b._isDataValid=function(){return 0<this.frames.length};b._isTextureValid=function(){return null!=this.textureData&&null!=this.spriteSheet};b._fillMCData=function(d){this.frameRate=d.frameRate||24;this._fillFramesData(d.frames);this._fillFrameLabelsData(d.labels)};b._fillFramesData=function(d){for(var a=
this.frames,b=d?d.length:0,c,e=0;e<b;e++)if(c=d[e],a.push(c),c.duration){var f=parseInt(c.duration);if(1<f){c=a.length;for(var h=1;h<f;h++)a.push({frame:c})}}this.numFrames=a.length};b._fillFrameLabelsData=function(d){if(d){var a=d.length;if(0<a){this.labels=[];for(var b=0;b<a;b++){var e=d[b];this.labels.push(new c.FrameLabel(e.name,e.frame))}}}};Object.defineProperty(b,"mcData",{get:function(){return this._mcData},set:function(d){this._setMCData(d)},enumerable:!0,configurable:!0});b._setMCData=function(d){this._mcData!=
d&&(this._mcData=d)&&this._fillMCData(d)};return a}(c.HashObject);c.MovieClipData=f;f.prototype.__class__="egret.MovieClipData"})(egret||(egret={}));
(function(c){var f=function(e){function a(d,a){e.call(this);this.enableCache=!0;this._mcDataCache={};this._mcDataSet=d;this.setTexture(a)}__extends(a,e);var b=a.prototype;b.clearCache=function(){this._mcDataCache={}};b.generateMovieClipData=function(d){void 0===d&&(d="");if(""==d&&this._mcDataSet)for(d in this._mcDataSet.mc)break;if(""==d)return null;var a=this._findFromCache(d,this._mcDataCache);a||(a=new c.MovieClipData,this._fillData(d,a,this._mcDataCache));return a};b._findFromCache=function(d,
a){return this.enableCache&&a[d]?a[d]:null};b._fillData=function(d,a,b){if(this._mcDataSet){var c=this._mcDataSet.mc[d];c&&(a._init(c,this._mcDataSet.res,this._spriteSheet),this.enableCache&&(b[d]=a))}};Object.defineProperty(b,"mcDataSet",{get:function(){return this._mcDataSet},set:function(d){this._mcDataSet=d},enumerable:!0,configurable:!0});Object.defineProperty(b,"texture",{set:function(d){this.setTexture(d)},enumerable:!0,configurable:!0});Object.defineProperty(b,"spriteSheet",{get:function(){return this._spriteSheet},
enumerable:!0,configurable:!0});b.setTexture=function(d){this._spriteSheet=d?new c.SpriteSheet(d):null};return a}(c.EventDispatcher);c.MovieClipDataFactory=f;f.prototype.__class__="egret.MovieClipDataFactory"})(egret||(egret={}));
(function(c){var f=function(c){function a(){c.call(this);this._scaleY=this._scaleX=1;this._size=30;this._color="#FFFFFF";this._fontFamily="Arial";this._italic=this._bold=!1;this._textAlign="left";this._verticalAlign="top";this._visible=!1;this._height=this._width=0;this._multiline=!1;this._maxChars=0}__extends(a,c);var b=a.prototype;b._setTextField=function(d){this._textfield=d};b._getText=function(){return null};b._setText=function(d){};b._setTextType=function(d){};b._getTextType=function(){return null};
b._show=function(d,a,b,c){};b._add=function(){};b._remove=function(){};b._hide=function(){};b._addListeners=function(){};b._removeListeners=function(){};b._setScale=function(d,a){this._scaleX=d;this._scaleY=a};b.changePosition=function(d,a){};b._setSize=function(d){this._size=d};b._setTextColor=function(d){this._color=d};b._setTextFontFamily=function(d){this._fontFamily=d};b._setBold=function(d){this._bold=d};b._setItalic=function(d){this._italic=d};b._setTextAlign=function(d){this._textAlign=d};
b._setVerticalAlign=function(d){this._verticalAlign=d};b._setVisible=function(d){this._visible=d};b._setWidth=function(d){this._width=d};b._setHeight=function(d){this._height=d};b._setMultiline=function(d){this._multiline=d};b._setMaxChars=function(d){this._maxChars=d};b._resetStageText=function(){};b._initElement=function(d,a,b,c){};b._removeInput=function(){};a.create=function(){return null};b.$onBlur=function(){};return a}(c.EventDispatcher);c.StageText=f;f.prototype.__class__="egret.StageText"})(egret||
(egret={}));(function(c){var f=function(){function c(){}c.GET="get";c.POST="post";return c}();c.URLRequestMethod=f;f.prototype.__class__="egret.URLRequestMethod"})(egret||(egret={}));(function(c){var f=function(){function c(){}c.BINARY="binary";c.TEXT="text";c.VARIABLES="variables";c.TEXTURE="texture";c.SOUND="sound";return c}();c.URLLoaderDataFormat=f;f.prototype.__class__="egret.URLLoaderDataFormat"})(egret||(egret={}));
(function(c){var f=function(c){function a(d){void 0===d&&(d=null);c.call(this);this.variables=null;null!==d&&this.decode(d)}__extends(a,c);var b=a.prototype;b.decode=function(d){this.variables||(this.variables={});d=d.split("+").join(" ");for(var a,b=/[?&]?([^=]+)=([^&]*)/g;a=b.exec(d);){var c=decodeURIComponent(a[1]);a=decodeURIComponent(a[2]);if(!1==c in this.variables)this.variables[c]=a;else{var e=this.variables[c];e instanceof Array?e.push(a):this.variables[c]=[e,a]}}};b.toString=function(){if(!this.variables)return"";
var a=this.variables,b=[],c;for(c in a)b.push(this.encodeValue(c,a[c]));return b.join("&")};b.encodeValue=function(a,b){return b instanceof Array?this.encodeArray(a,b):encodeURIComponent(a)+"="+encodeURIComponent(b)};b.encodeArray=function(a,b){return a?0==b.length?encodeURIComponent(a)+"=":b.map(function(b){return encodeURIComponent(a)+"="+encodeURIComponent(b)}).join("&"):""};return a}(c.HashObject);c.URLVariables=f;f.prototype.__class__="egret.URLVariables"})(egret||(egret={}));
(function(c){var f=function(){return function(c,a){this.value=this.name="";this.name=c;this.value=a}}();c.URLRequestHeader=f;f.prototype.__class__="egret.URLRequestHeader"})(egret||(egret={}));(function(c){var f=function(e){function a(a){void 0===a&&(a=null);e.call(this);this.data=null;this.method=c.URLRequestMethod.GET;this.url="";this.requestHeaders=[];this.url=a}__extends(a,e);return a}(c.HashObject);c.URLRequest=f;f.prototype.__class__="egret.URLRequest"})(egret||(egret={}));
(function(c){var f=function(e){function a(a){void 0===a&&(a=null);e.call(this);this.dataFormat=c.URLLoaderDataFormat.TEXT;this._request=this.data=null;this._status=-1;a&&this.load(a)}__extends(a,e);var b=a.prototype;b.load=function(a){this._request=a;this.data=null;c.MainContext.instance.netContext.proceed(this)};b.__recycle=function(){this.data=this._request=null};return a}(c.EventDispatcher);c.URLLoader=f;f.prototype.__class__="egret.URLLoader"})(egret||(egret={}));
(function(c){var f=function(e){function a(){e.call(this);this._sourceHeight=this._sourceWidth=this._textureHeight=this._textureWidth=this._offsetY=this._offsetX=this._bitmapHeight=this._bitmapWidth=this._bitmapY=this._bitmapX=0;this._bitmapData=null}__extends(a,e);var b=a.prototype;Object.defineProperty(b,"textureWidth",{get:function(){return this._textureWidth},enumerable:!0,configurable:!0});Object.defineProperty(b,"textureHeight",{get:function(){return this._textureHeight},enumerable:!0,configurable:!0});
b._setBitmapData=function(a){var b=c.MainContext.instance.rendererContext._texture_scale_factor;this._bitmapData=a;this._sourceWidth=a.width;this._sourceHeight=a.height;this._textureWidth=this._sourceWidth*b;this._textureHeight=this._sourceHeight*b;this._bitmapWidth=this._textureWidth;this._bitmapHeight=this._textureHeight;this._offsetX=this._offsetY=this._bitmapX=this._bitmapY=0};b.getPixel32=function(a,b){throw Error();};b.dispose=function(){var a=this._bitmapData;a.dispose&&a.dispose()};b._clone=
function(){var d=new a;d._bitmapData=this._bitmapData;return d};b.draw=function(a,b,c,e,f,g,h,k,n,q){};b.toDataURL=function(a,b){throw Error();};b.saveToFile=function(a,b,c){throw Error();};b._drawForCanvas=function(a,b,c,e,f,g,h,k,n,q){var p=this._bitmapData;p&&p.avaliable&&(void 0!=q?this._drawRepeatImageForCanvas(a,b,c,e,f,g,h,k,n,q):a.drawImage(p,b,c,e,f,g,h,k,n))};b._drawForNative=function(a,b,c,e,f,g,h,k,n,q){var p=this._bitmapData;p&&p.avaliable&&(b=Math.max(0,b),c=Math.max(0,c),e=Math.max(0,
e),f=Math.max(0,f),void 0!==q?this._drawRepeatImageForNative(a,b,c,e,f,g,h,k,n,q):a.drawImage(p,b,c,e,f,g,h,k,n))};b._drawRepeatImageForNative=function(a,b,e,f,l,g,h,k,n,q){q=c.MainContext.instance.rendererContext._texture_scale_factor;f*=q;for(l*=q;g<k;g+=f)for(var p=h;p<n;p+=l){var u=Math.min(f,k-g),t=Math.min(l,n-p);this._drawForNative(a,b,e,u/q,t/q,g,p,u,t,void 0)}};b._drawRepeatImageForCanvas=function(a,b,e,f,l,g,h,k,n,q){if(void 0===this.pattern){var p=c.MainContext.instance.rendererContext._texture_scale_factor,
u=this._bitmapData,t=u;if(u.width!=f||u.height!=l||1!=p)t=document.createElement("canvas"),t.width=f*p,t.height=l*p,t.getContext("2d").drawImage(u,b,e,f,l,0,0,f*p,l*p);this.pattern=a.createPattern(t,q)}a.fillStyle=this.pattern;a.translate(g,h);a.fillRect(0,0,k,n);a.translate(-g,-h)};b._disposeForCanvas=function(){a.deleteWebGLTexture(this);var d=this._bitmapData;d.onload=null;d.onerror=null;d.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAACXBIWXMAAAsTAAALEwEAmpwYAAAKTWlDQ1BQaG90b3Nob3AgSUNDIHByb2ZpbGUAAHjanVN3WJP3Fj7f92UPVkLY8LGXbIEAIiOsCMgQWaIQkgBhhBASQMWFiApWFBURnEhVxILVCkidiOKgKLhnQYqIWotVXDjuH9yntX167+3t+9f7vOec5/zOec8PgBESJpHmomoAOVKFPDrYH49PSMTJvYACFUjgBCAQ5svCZwXFAADwA3l4fnSwP/wBr28AAgBw1S4kEsfh/4O6UCZXACCRAOAiEucLAZBSAMguVMgUAMgYALBTs2QKAJQAAGx5fEIiAKoNAOz0ST4FANipk9wXANiiHKkIAI0BAJkoRyQCQLsAYFWBUiwCwMIAoKxAIi4EwK4BgFm2MkcCgL0FAHaOWJAPQGAAgJlCLMwAIDgCAEMeE80DIEwDoDDSv+CpX3CFuEgBAMDLlc2XS9IzFLiV0Bp38vDg4iHiwmyxQmEXKRBmCeQinJebIxNI5wNMzgwAABr50cH+OD+Q5+bk4eZm52zv9MWi/mvwbyI+IfHf/ryMAgQAEE7P79pf5eXWA3DHAbB1v2upWwDaVgBo3/ldM9sJoFoK0Hr5i3k4/EAenqFQyDwdHAoLC+0lYqG9MOOLPv8z4W/gi372/EAe/tt68ABxmkCZrcCjg/1xYW52rlKO58sEQjFu9+cj/seFf/2OKdHiNLFcLBWK8ViJuFAiTcd5uVKRRCHJleIS6X8y8R+W/QmTdw0ArIZPwE62B7XLbMB+7gECiw5Y0nYAQH7zLYwaC5EAEGc0Mnn3AACTv/mPQCsBAM2XpOMAALzoGFyolBdMxggAAESggSqwQQcMwRSswA6cwR28wBcCYQZEQAwkwDwQQgbkgBwKoRiWQRlUwDrYBLWwAxqgEZrhELTBMTgN5+ASXIHrcBcGYBiewhi8hgkEQcgIE2EhOogRYo7YIs4IF5mOBCJhSDSSgKQg6YgUUSLFyHKkAqlCapFdSCPyLXIUOY1cQPqQ28ggMor8irxHMZSBslED1AJ1QLmoHxqKxqBz0XQ0D12AlqJr0Rq0Hj2AtqKn0UvodXQAfYqOY4DRMQ5mjNlhXIyHRWCJWBomxxZj5Vg1Vo81Yx1YN3YVG8CeYe8IJAKLgBPsCF6EEMJsgpCQR1hMWEOoJewjtBK6CFcJg4Qxwicik6hPtCV6EvnEeGI6sZBYRqwm7iEeIZ4lXicOE1+TSCQOyZLkTgohJZAySQtJa0jbSC2kU6Q+0hBpnEwm65Btyd7kCLKArCCXkbeQD5BPkvvJw+S3FDrFiOJMCaIkUqSUEko1ZT/lBKWfMkKZoKpRzame1AiqiDqfWkltoHZQL1OHqRM0dZolzZsWQ8ukLaPV0JppZ2n3aC/pdLoJ3YMeRZfQl9Jr6Afp5+mD9HcMDYYNg8dIYigZaxl7GacYtxkvmUymBdOXmchUMNcyG5lnmA+Yb1VYKvYqfBWRyhKVOpVWlX6V56pUVXNVP9V5qgtUq1UPq15WfaZGVbNQ46kJ1Bar1akdVbupNq7OUndSj1DPUV+jvl/9gvpjDbKGhUaghkijVGO3xhmNIRbGMmXxWELWclYD6yxrmE1iW7L57Ex2Bfsbdi97TFNDc6pmrGaRZp3mcc0BDsax4PA52ZxKziHODc57LQMtPy2x1mqtZq1+rTfaetq+2mLtcu0W7eva73VwnUCdLJ31Om0693UJuja6UbqFutt1z+o+02PreekJ9cr1Dund0Uf1bfSj9Rfq79bv0R83MDQINpAZbDE4Y/DMkGPoa5hpuNHwhOGoEctoupHEaKPRSaMnuCbuh2fjNXgXPmasbxxirDTeZdxrPGFiaTLbpMSkxeS+Kc2Ua5pmutG003TMzMgs3KzYrMnsjjnVnGueYb7ZvNv8jYWlRZzFSos2i8eW2pZ8ywWWTZb3rJhWPlZ5VvVW16xJ1lzrLOtt1ldsUBtXmwybOpvLtqitm63Edptt3xTiFI8p0in1U27aMez87ArsmuwG7Tn2YfYl9m32zx3MHBId1jt0O3xydHXMdmxwvOuk4TTDqcSpw+lXZxtnoXOd8zUXpkuQyxKXdpcXU22niqdun3rLleUa7rrStdP1o5u7m9yt2W3U3cw9xX2r+00umxvJXcM970H08PdY4nHM452nm6fC85DnL152Xlle+70eT7OcJp7WMG3I28Rb4L3Le2A6Pj1l+s7pAz7GPgKfep+Hvqa+It89viN+1n6Zfgf8nvs7+sv9j/i/4XnyFvFOBWABwQHlAb2BGoGzA2sDHwSZBKUHNQWNBbsGLww+FUIMCQ1ZH3KTb8AX8hv5YzPcZyya0RXKCJ0VWhv6MMwmTB7WEY6GzwjfEH5vpvlM6cy2CIjgR2yIuB9pGZkX+X0UKSoyqi7qUbRTdHF09yzWrORZ+2e9jvGPqYy5O9tqtnJ2Z6xqbFJsY+ybuIC4qriBeIf4RfGXEnQTJAntieTE2MQ9ieNzAudsmjOc5JpUlnRjruXcorkX5unOy553PFk1WZB8OIWYEpeyP+WDIEJQLxhP5aduTR0T8oSbhU9FvqKNolGxt7hKPJLmnVaV9jjdO31D+miGT0Z1xjMJT1IreZEZkrkj801WRNberM/ZcdktOZSclJyjUg1plrQr1zC3KLdPZisrkw3keeZtyhuTh8r35CP5c/PbFWyFTNGjtFKuUA4WTC+oK3hbGFt4uEi9SFrUM99m/ur5IwuCFny9kLBQuLCz2Lh4WfHgIr9FuxYji1MXdy4xXVK6ZHhp8NJ9y2jLspb9UOJYUlXyannc8o5Sg9KlpUMrglc0lamUycturvRauWMVYZVkVe9ql9VbVn8qF5VfrHCsqK74sEa45uJXTl/VfPV5bdra3kq3yu3rSOuk626s91m/r0q9akHV0IbwDa0b8Y3lG19tSt50oXpq9Y7NtM3KzQM1YTXtW8y2rNvyoTaj9nqdf13LVv2tq7e+2Sba1r/dd3vzDoMdFTve75TsvLUreFdrvUV99W7S7oLdjxpiG7q/5n7duEd3T8Wej3ulewf2Re/ranRvbNyvv7+yCW1SNo0eSDpw5ZuAb9qb7Zp3tXBaKg7CQeXBJ9+mfHvjUOihzsPcw83fmX+39QjrSHkr0jq/dawto22gPaG97+iMo50dXh1Hvrf/fu8x42N1xzWPV56gnSg98fnkgpPjp2Snnp1OPz3Umdx590z8mWtdUV29Z0PPnj8XdO5Mt1/3yfPe549d8Lxw9CL3Ytslt0utPa49R35w/eFIr1tv62X3y+1XPK509E3rO9Hv03/6asDVc9f41y5dn3m978bsG7duJt0cuCW69fh29u0XdwruTNxdeo94r/y+2v3qB/oP6n+0/rFlwG3g+GDAYM/DWQ/vDgmHnv6U/9OH4dJHzEfVI0YjjY+dHx8bDRq98mTOk+GnsqcTz8p+Vv9563Or59/94vtLz1j82PAL+YvPv655qfNy76uprzrHI8cfvM55PfGm/K3O233vuO+638e9H5ko/ED+UPPR+mPHp9BP9z7nfP78L/eE8/sl0p8zAAAAIGNIUk0AAHolAACAgwAA+f8AAIDpAAB1MAAA6mAAADqYAAAXb5JfxUYAAAATSURBVHjaYvj//z8DAAAA//8DAAj8Av7TpXVhAAAAAElFTkSuQmCC";
d.avaliable=!1;console.log("_disposeForCanvas")};b._disposeForNative=function(){var a=this._bitmapData;a.dispose();a.avaliable=!1;console.log("_disposeForNative")};a.deleteWebGLTexture=function(a){if(a=a._bitmapData){var b=a.webGLTexture;if(b)for(var c in b){var e=b[c];e.glContext.deleteTexture(e)}a.webGLTexture=null}};a.createBitmapData=function(a,b){};a._createBitmapDataForCanvasAndWebGl=function(d,b){var e=a._bitmapDataFactory[d];e||(e=document.createElement("img"),e.setAttribute("bitmapSrc",d),
a._bitmapDataFactory[d]=e);if(e.avaliable)b(0,e);else{a.crossOrigin?e.setAttribute("crossOrigin",a.crossOrigin):e.hasAttribute("crossOrigin")&&e.removeAttribute("crossOrigin");var f=window.URL||window.webkitURL;if(null==a._bitmapCallbackMap[d])if(a._addToCallbackList(d,b),0!=d.indexOf("data:")&&0!=d.indexOf("http:")&&0!=d.indexOf("https:")&&c.Browser.getInstance().isIOS()&&7<=parseInt(c.Browser.getInstance().getIOSVersion().charAt(0))&&f){var l=new XMLHttpRequest;l.open("get",d,!0);l.responseType=
"blob";l.onerror=function(){a._onError(d,e)};l.onload=function(){if(200==this.status){var b=this.response;e.onload=function(){f.revokeObjectURL(e.src);a._onLoad(d,e)};e.onerror=function(){a._onError(d,e)};e.src=f.createObjectURL(b)}else a._onError(d,e)};l.send()}else e.onload=function(){a._onLoad(d,e)},e.onerror=function(){a._onError(d,e)},e.src=d;else a._addToCallbackList(d,b)}};a._onLoad=function(d,b){b.avaliable=!0;b.onload&&(b.onload=null);b.onerror&&(b.onerror=null);var c=a._bitmapCallbackMap[d];
if(c&&c.length){delete a._bitmapCallbackMap[d];for(var e=c.length,f=0;f<e;f++)(0,c[f])(0,b)}};a._onError=function(d,b){var c=a._bitmapCallbackMap[d];if(c&&c.length){delete a._bitmapCallbackMap[d];for(var e=c.length,f=0;f<e;f++)(0,c[f])(1,b)}};a._createBitmapDataForNative=function(d,b){console.log("_createBitmapDataForNative:"+d);var e=a._bitmapDataFactory[d];e?(e.avaliable||(console.log("reload"),e.reload(),e.avaliable=!0),b(0,e)):c.NativeNetContext.__use_asyn?a._bitmapCallbackMap[d]?a._addToCallbackList(d,
b):(a._addToCallbackList(d,b),e=new c.PromiseObject,e.onSuccessFunc=function(b){a._bitmapDataFactory[d]=b;a._onLoad(d,b)},e.onErrorFunc=function(){a._onError(d,null)},console.log("addTextureAsyn"),egret_native.Texture.addTextureAsyn(d,e)):(console.log("addTexture"),e=egret_native.Texture.addTexture(d),a._bitmapDataFactory[d]=e,e.avaliable=!0,b(0,e))};a._addToCallbackList=function(d,b){var c=a._bitmapCallbackMap[d];c||(c=[]);c.push(b);a._bitmapCallbackMap[d]=c};a.crossOrigin=null;a._bitmapDataFactory=
{};a._bitmapCallbackMap={};return a}(c.HashObject);c.Texture=f;f.prototype.__class__="egret.Texture"})(egret||(egret={}));
(function(c){var f=function(e){function a(){e.call(this)}__extends(a,e);var b=a.prototype;b.init=function(){this._bitmapData=document.createElement("canvas");this._bitmapData.avaliable=!0;this.renderContext=c.RendererContext.createRendererContext(this._bitmapData)};b.drawToTexture=function(d,b,e){var f=b||d.getBounds(c.Rectangle.identity);if(0==f.width||0==f.height)return!1;this._bitmapData||this.init();var l=f.x,g=f.y,h=f.width,f=f.height,k,n,q=c.MainContext.instance.rendererContext._texture_scale_factor;
k=h/q;n=f/q;k=Math.round(k);n=Math.round(n);this.setSize(k,n);this.begin();d._worldTransform.identity();d._worldTransform.a=1/q;d._worldTransform.d=1/q;e&&(d._worldTransform.a*=e,d._worldTransform.d*=e);e=d._DO_Props_._anchorOffsetX;q=d._DO_Props_._anchorOffsetY;if(0!=d._DO_Props_._anchorX||0!=d._DO_Props_._anchorY)e=d._DO_Props_._anchorX*k,q=d._DO_Props_._anchorY*n;this._offsetX=l+e;this._offsetY=g+q;d._worldTransform.append(1,0,0,1,-this._offsetX,-this._offsetY);b&&(this._offsetX-=l,this._offsetY-=
g);d.worldAlpha=1;if(d instanceof c.DisplayObjectContainer)for(b=d._children,l=0,g=b.length;l<g;l++)b[l]._updateTransform();this.renderContext.setTransform(d._worldTransform);b=c.RenderFilter.getInstance();l=b._drawAreaList.concat();b._drawAreaList.length=0;this.renderContext.clearScreen();this.renderContext.onRenderStart();c.Texture.deleteWebGLTexture(this);d._hasFilters()&&d._setGlobalFilters(this.renderContext);(g=d.mask||d._DO_Props_._scrollRect)&&this.renderContext.pushMask(g);e=c.MainContext.__use_new_draw;
c.MainContext.__use_new_draw=!1;d._render(this.renderContext);c.MainContext.__use_new_draw=e;g&&this.renderContext.popMask();d._hasFilters()&&d._removeGlobalFilters(this.renderContext);a.identityRectangle.width=k;a.identityRectangle.height=n;b.addDrawArea(a.identityRectangle);this.renderContext.onRenderFinish();b._drawAreaList=l;this._sourceWidth=k;this._sourceHeight=n;this._textureWidth=Math.round(h);this._textureHeight=Math.round(f);this.end();return!0};b.setSize=function(a,b){var c=this._bitmapData;
c.width=a;c.height=b;c.style.width=a+"px";c.style.height=b+"px";this.renderContext._cacheCanvas&&(this.renderContext._cacheCanvas.width=a,this.renderContext._cacheCanvas.height=b)};b.begin=function(){};b.end=function(){};b.dispose=function(){this._bitmapData&&(this.renderContext=this._bitmapData=null)};a.create=function(){return a._pool.length?a._pool.pop():new a};a.release=function(d){a._pool.push(d)};a.identityRectangle=new c.Rectangle;a._pool=[];return a}(c.Texture);c.RenderTexture=f;f.prototype.__class__=
"egret.RenderTexture"})(egret||(egret={}));
(function(c){var f=function(e){function a(){e.call(this);this.renderCost=0;this._texture_scale_factor=1;this.profiler=c.Profiler.getInstance();a.blendModesForGL||a.initBlendMode()}__extends(a,e);var b=a.prototype;Object.defineProperty(b,"texture_scale_factor",{get:function(){return this._texture_scale_factor},set:function(a){this._setTextureScaleFactor(a)},enumerable:!0,configurable:!0});b._setTextureScaleFactor=function(a){this._texture_scale_factor=a};b.clearScreen=function(){};b.clearRect=function(a,
b,c,e){};b.drawImage=function(a,b,c,e,f,g,h,k,n,q){this.profiler.onDrawImage()};b.drawImageScale9=function(a,b,c,e,f,g,h,k,n,q){return!1};b._addOneDraw=function(){this.profiler.onDrawImage()};b.setTransform=function(a){};b.setAlpha=function(a,b){};b.setupFont=function(a,b){};b.measureText=function(a){return 0};b.drawText=function(a,b,c,e,f,g){this.profiler.onDrawImage()};b.strokeRect=function(a,b,c,e,f){};b.pushMask=function(a){};b.popMask=function(){};b.onRenderStart=function(){};b.onRenderFinish=
function(){};b.createLinearGradient=function(a,b,c,e){return null};b.createRadialGradient=function(a,b,c,e,f,g){return null};b.setGlobalFilters=function(a){};b.drawCursor=function(a,b,c,e){};a.createRendererContext=function(a){return null};a.initBlendMode=function(){a.blendModesForGL={};a.blendModesForGL[c.BlendMode.NORMAL]=[1,771];a.blendModesForGL[c.BlendMode.ADD]=[770,1];a.blendModesForGL[c.BlendMode.ERASE]=[0,771];a.blendModesForGL[c.BlendMode.ERASE_REVERSE]=[0,770]};a.registerBlendModeForGL=
function(d,b,e,f){a.blendModesForGL[d]&&!f?c.$warn(1005,d):a.blendModesForGL[d]=[b,e]};a.imageSmoothingEnabled=!0;a.blendModesForGL=null;return a}(c.HashObject);c.RendererContext=f;f.prototype.__class__="egret.RendererContext"})(egret||(egret={}));(function(c){var f=function(){function c(){}c.MOUSE="mouse";c.TOUCH="touch";c.mode="touch";return c}();c.InteractionMode=f;f.prototype.__class__="egret.InteractionMode"})(egret||(egret={}));
(function(c){var f=function(e){function a(){e.call(this);this._currentTouchTarget={};this.maxTouches=2;this.touchDownTarget={};this.touchingIdentifiers=[];this.lastTouchY=this.lastTouchX=-1}__extends(a,e);var b=a.prototype;b.run=function(){};b.getTouchData=function(a,b,c){var e=this._currentTouchTarget[a];null==e&&(e={},this._currentTouchTarget[a]=e);e.stageX=b;e.stageY=c;e.identifier=a;return e};b.dispatchEvent=function(a,b){c.TouchEvent.dispatchTouchEvent(b.target,a,b.identifier,b.stageX,b.stageY,
!1,!1,!1,!0==this.touchDownTarget[b.identifier])};b.onTouchBegan=function(a,b,e){if(this.touchingIdentifiers.length!=this.maxTouches){this.lastTouchX=a;this.lastTouchY=b;var f=c.MainContext.instance.stage.hitTest(a,b);f&&(a=this.getTouchData(e,a,b),this.touchDownTarget[e]=!0,a.target=f,a.beginTarget=f,this.dispatchEvent(c.TouchEvent.TOUCH_BEGIN,a));this.touchingIdentifiers.push(e)}};b.onTouchMove=function(a,b,e){if(-1!=this.touchingIdentifiers.indexOf(e)&&(a!=this.lastTouchX||b!=this.lastTouchY)){this.lastTouchX=
a;this.lastTouchY=b;var f=c.MainContext.instance.stage.hitTest(a,b);f&&(a=this.getTouchData(e,a,b),a.target=f,this.dispatchEvent(c.TouchEvent.TOUCH_MOVE,a))}};b.onTouchEnd=function(a,b,e){var f=this.touchingIdentifiers.indexOf(e);-1!=f&&(this.touchingIdentifiers.splice(f,1),f=c.MainContext.instance.stage.hitTest(a,b))&&(a=this.getTouchData(e,a,b),delete this.touchDownTarget[e],e=a.beginTarget,a.target=f,this.dispatchEvent(c.TouchEvent.TOUCH_END,a),e==f?this.dispatchEvent(c.TouchEvent.TOUCH_TAP,a):
a.beginTarget&&(a.target=a.beginTarget,this.dispatchEvent(c.TouchEvent.TOUCH_RELEASE_OUTSIDE,a)),delete this._currentTouchTarget[a.identifier])};return a}(c.HashObject);c.TouchContext=f;f.prototype.__class__="egret.TouchContext"})(egret||(egret={}));
(function(c){var f=function(e){function a(){e.call(this)}__extends(a,e);var b=a.prototype;b.proceed=function(a){};a._getUrl=function(a){var b=a.url;-1==b.indexOf("?")&&a.method==c.URLRequestMethod.GET&&a.data&&a.data instanceof c.URLVariables&&(b=b+"?"+a.data.toString());return b};b.getChangeList=function(){return[]};b.getVirtualUrl=function(a){return a};return a}(c.HashObject);c.NetContext=f;f.prototype.__class__="egret.NetContext"})(egret||(egret={}));
(function(c){var f=function(c){function a(){c.call(this)}__extends(a,c);var b=a.prototype;b.executeMainLoop=function(a,b){};b.setFrameRate=function(a){};return a}(c.HashObject);c.DeviceContext=f;f.prototype.__class__="egret.DeviceContext"})(egret||(egret={}));(function(c){var f=function(){function c(){}c.call=function(a,b){};c.addCallback=function(a,b){};return c}();c.ExternalInterface=f;f.prototype.__class__="egret.ExternalInterface"})(egret||(egret={}));
(function(c){var f=function(e){function a(){e.call(this);this.trans=null;this.webPSupport=!1;this.header=null;this.ua=navigator.userAgent.toLowerCase();this.trans=this.getTrans("transform")}__extends(a,e);var b=a.prototype;a.getInstance=function(){null==a.instance&&(a.instance=new a);return a.instance};Object.defineProperty(b,"isMobile",{get:function(){c.$warn(1E3);return c.MainContext.deviceType==c.MainContext.DEVICE_MOBILE},enumerable:!0,configurable:!0});b.isIOS=function(){return 0>this.ua.indexOf("windows")&&
(0<=this.ua.indexOf("iphone")||0<=this.ua.indexOf("ipad")||0<=this.ua.indexOf("ipod"))};b.getIOSVersion=function(){return this.ua.toLowerCase().match(/cpu [^\d]*\d.*like mac os x/)[0].match(/\d(_\d)*/)[0]};b.getUserAgent=function(){return this.ua};b.getTrans=function(a,b){void 0===b&&(b=!1);var c="";b?c=this.getHeader(a):(null==this.header&&(this.header=this.getHeader("transform")),c=this.header);return""==c?a:c+a.charAt(0).toUpperCase()+a.substring(1,a.length)};b.getHeader=function(a){var b=document.createElement("div").style;
if(a in b)return"";a=a.charAt(0).toUpperCase()+a.substring(1,a.length);for(var c=["webkit","ms","Moz","O"],e=0;e<c.length;e++)if(c[e]+a in b)return c[e];return""};b.$new=function(a){return this.$(document.createElement(a))};b.$=function(d){var b=document;if(d=d instanceof HTMLElement?d:b.querySelector(d))d.find=d.find||this.$,d.hasClass=d.hasClass||function(a){return this.className.match(new RegExp("(\\s|^)"+a+"(\\s|$)"))},d.addClass=d.addClass||function(a){this.hasClass(a)||(this.className&&(this.className+=
" "),this.className+=a);return this},d.removeClass=d.removeClass||function(a){this.hasClass(a)&&(this.className=this.className.replace(a,""));return this},d.remove=d.remove||function(){},d.appendTo=d.appendTo||function(a){a.appendChild(this);return this},d.prependTo=d.prependTo||function(a){a.childNodes[0]?a.insertBefore(this,a.childNodes[0]):a.appendChild(this);return this},d.transforms=d.transforms||function(){this.style[a.getInstance().trans]=a.getInstance().translate(this.position)+a.getInstance().rotate(this.rotation)+
a.getInstance().scale(this.scale)+a.getInstance().skew(this.skew);return this},d.position=d.position||{x:0,y:0},d.rotation=d.rotation||0,d.scale=d.scale||{x:1,y:1},d.skew=d.skew||{x:0,y:0},d.translates=function(a,d){this.position.x=a;this.position.y=d-c.MainContext.instance.stage.stageHeight;this.transforms();return this},d.rotate=function(a){this.rotation=a;this.transforms();return this},d.resize=function(a,d){this.scale.x=a;this.scale.y=d;this.transforms();return this},d.setSkew=function(a,d){this.skew.x=
a;this.skew.y=d;this.transforms();return this};return d};b.translate=function(a){return"translate("+a.x+"px, "+a.y+"px) "};b.rotate=function(a){return"rotate("+a+"deg) "};b.scale=function(a){return"scale("+a.x+", "+a.y+") "};b.skew=function(a){return"skewX("+-a.x+"deg) skewY("+a.y+"deg)"};return a}(c.HashObject);c.Browser=f;f.prototype.__class__="egret.Browser"})(egret||(egret={}));
(function(c){var f=function(){function c(){}c.getItem=function(a){return null};c.setItem=function(a,b){return!1};c.removeItem=function(a){};c.clear=function(){};return c}();c.localStorage=f;f.prototype.__class__="egret.localStorage"})(egret||(egret={}));
(function(c){var f=function(){function e(){}e.parse=function(a){a=c.SAXParser.getInstance().parserXML(a);if(!a||!a.childNodes)return null;for(var b=a.childNodes.length,d=!1,m=0;m<b;m++){var f=a.childNodes[m];if(1==f.nodeType){d=!0;break}}return d?e.parseNode(f):null};e.parseNode=function(a){if(!a||1!=a.nodeType)return null;var b={};b.localName=a.localName;b.name=a.nodeName;a.namespaceURI&&(b.namespace=a.namespaceURI);a.prefix&&(b.prefix=a.prefix);for(var d=a.attributes,c=d.length,f=0;f<c;f++){var r=
d[f],l=r.name;0!=l.indexOf("xmlns:")&&(b["$"+l]=r.value)}d=a.childNodes;c=d.length;for(f=0;f<c;f++)if(r=e.parseNode(d[f]))b.children||(b.children=[]),r.parent=b,b.children.push(r);!b.children&&(a=a.textContent.trim())&&(b.text=a);return b};e.findChildren=function(a,b,d){d?d.length=0:d=[];e.findByPath(a,b,d);return d};e.findByPath=function(a,b,d){var c=b.indexOf("."),f;-1==c?(f=b,c=!0):(f=b.substring(0,c),b=b.substring(c+1),c=!1);if(a=a.children)for(var r=a.length,l=0;l<r;l++){var g=a[l];g.localName==
f&&(c?d.push(g):e.findByPath(g,b,d))}};e.getAttributes=function(a,b){b?b.length=0:b=[];for(var d in a)"$"==d.charAt(0)&&b.push(d.substring(1));return b};return e}();c.XML=f;f.prototype.__class__="egret.XML"})(egret||(egret={}));
(function(c){var f=function(){function a(){}a.LITTLE_ENDIAN="littleEndian";a.BIG_ENDIAN="bigEndian";return a}();c.Endian=f;f.prototype.__class__="egret.Endian";var e=function(){function a(a){this.BUFFER_EXT_SIZE=0;this.EOF_code_point=this.EOF_byte=-1;this._setArrayBuffer(a||new ArrayBuffer(this.BUFFER_EXT_SIZE));this.endian=f.BIG_ENDIAN}var b=a.prototype;b._setArrayBuffer=function(a){this.write_position=a.byteLength;this.data=new DataView(a);this._position=0};Object.defineProperty(b,"buffer",{get:function(){return this.data.buffer},
set:function(a){this.data=new DataView(a)},enumerable:!0,configurable:!0});Object.defineProperty(b,"dataView",{get:function(){return this.data},set:function(a){this.data=a;this.write_position=a.byteLength},enumerable:!0,configurable:!0});Object.defineProperty(b,"bufferOffset",{get:function(){return this.data.byteOffset},enumerable:!0,configurable:!0});Object.defineProperty(b,"position",{get:function(){return this._position},set:function(a){this._position=a;this.write_position=a>this.write_position?
a:this.write_position},enumerable:!0,configurable:!0});Object.defineProperty(b,"length",{get:function(){return this.write_position},set:function(a){this.write_position=a;var b=new Uint8Array(new ArrayBuffer(a)),c=this.data.buffer.byteLength;c>a&&(this._position=a);a=Math.min(c,a);b.set(new Uint8Array(this.data.buffer,0,a));this.buffer=b.buffer},enumerable:!0,configurable:!0});Object.defineProperty(b,"bytesAvailable",{get:function(){return this.data.byteLength-this._position},enumerable:!0,configurable:!0});
b.clear=function(){this._setArrayBuffer(new ArrayBuffer(this.BUFFER_EXT_SIZE))};b.readBoolean=function(){return this.validate(a.SIZE_OF_BOOLEAN)?0!=this.data.getUint8(this.position++):null};b.readByte=function(){return this.validate(a.SIZE_OF_INT8)?this.data.getInt8(this.position++):null};b.readBytes=function(d,b,c){void 0===b&&(b=0);void 0===c&&(c=0);if(0==c)c=this.bytesAvailable;else if(!this.validate(c))return null;d?d.validateBuffer(c):d=new a(new ArrayBuffer(c));for(var e=0;e<c;e++)d.data.setUint8(e+
b,this.data.getUint8(this.position++))};b.readDouble=function(){if(!this.validate(a.SIZE_OF_FLOAT64))return null;var d=this.data.getFloat64(this.position,this.endian==f.LITTLE_ENDIAN);this.position+=a.SIZE_OF_FLOAT64;return d};b.readFloat=function(){if(!this.validate(a.SIZE_OF_FLOAT32))return null;var d=this.data.getFloat32(this.position,this.endian==f.LITTLE_ENDIAN);this.position+=a.SIZE_OF_FLOAT32;return d};b.readInt=function(){if(!this.validate(a.SIZE_OF_INT32))return null;var d=this.data.getInt32(this.position,
this.endian==f.LITTLE_ENDIAN);this.position+=a.SIZE_OF_INT32;return d};b.readShort=function(){if(!this.validate(a.SIZE_OF_INT16))return null;var d=this.data.getInt16(this.position,this.endian==f.LITTLE_ENDIAN);this.position+=a.SIZE_OF_INT16;return d};b.readUnsignedByte=function(){return this.validate(a.SIZE_OF_UINT8)?this.data.getUint8(this.position++):null};b.readUnsignedInt=function(){if(!this.validate(a.SIZE_OF_UINT32))return null;var d=this.data.getUint32(this.position,this.endian==f.LITTLE_ENDIAN);
this.position+=a.SIZE_OF_UINT32;return d};b.readUnsignedShort=function(){if(!this.validate(a.SIZE_OF_UINT16))return null;var d=this.data.getUint16(this.position,this.endian==f.LITTLE_ENDIAN);this.position+=a.SIZE_OF_UINT16;return d};b.readUTF=function(){if(!this.validate(a.SIZE_OF_UINT16))return null;var d=this.data.getUint16(this.position,this.endian==f.LITTLE_ENDIAN);this.position+=a.SIZE_OF_UINT16;return 0<d?this.readUTFBytes(d):""};b.readUTFBytes=function(a){if(!this.validate(a))return null;var b=
new Uint8Array(this.buffer,this.bufferOffset+this.position,a);this.position+=a;return this.decodeUTF8(b)};b.writeBoolean=function(d){this.validateBuffer(a.SIZE_OF_BOOLEAN);this.data.setUint8(this.position++,d?1:0)};b.writeByte=function(d){this.validateBuffer(a.SIZE_OF_INT8);this.data.setInt8(this.position++,d)};b.writeBytes=function(a,b,c){void 0===b&&(b=0);void 0===c&&(c=0);if(!(0>b||0>c)&&(c=0==c?a.length-b:Math.min(a.length-b,c),0<c)){this.validateBuffer(c);a=new DataView(a.buffer);for(var e=b;e<
c+b;e++)this.data.setUint8(this.position++,a.getUint8(e))}};b.writeDouble=function(d){this.validateBuffer(a.SIZE_OF_FLOAT64);this.data.setFloat64(this.position,d,this.endian==f.LITTLE_ENDIAN);this.position+=a.SIZE_OF_FLOAT64};b.writeFloat=function(d){this.validateBuffer(a.SIZE_OF_FLOAT32);this.data.setFloat32(this.position,d,this.endian==f.LITTLE_ENDIAN);this.position+=a.SIZE_OF_FLOAT32};b.writeInt=function(d){this.validateBuffer(a.SIZE_OF_INT32);this.data.setInt32(this.position,d,this.endian==f.LITTLE_ENDIAN);
this.position+=a.SIZE_OF_INT32};b.writeShort=function(d){this.validateBuffer(a.SIZE_OF_INT16);this.data.setInt16(this.position,d,this.endian==f.LITTLE_ENDIAN);this.position+=a.SIZE_OF_INT16};b.writeUnsignedInt=function(d){this.validateBuffer(a.SIZE_OF_UINT32);this.data.setUint32(this.position,d,this.endian==f.LITTLE_ENDIAN);this.position+=a.SIZE_OF_UINT32};b.writeUTF=function(d){d=this.encodeUTF8(d);var b=d.length;this.validateBuffer(a.SIZE_OF_UINT16+b);this.data.setUint16(this.position,b,this.endian===
f.LITTLE_ENDIAN);this.position+=a.SIZE_OF_UINT16;this._writeUint8Array(d,!1)};b.writeUTFBytes=function(a){this._writeUint8Array(this.encodeUTF8(a))};b.toString=function(){return"[ByteArray] length:"+this.length+", bytesAvailable:"+this.bytesAvailable};b._writeUint8Array=function(a,b){void 0===b&&(b=!0);b&&this.validateBuffer(this.position+a.length);for(var c=0;c<a.length;c++)this.data.setUint8(this.position++,a[c])};b.validate=function(a){if(0<this.data.byteLength&&this._position+a<=this.data.byteLength)return!0;
c.$error(1025)};b.validateBuffer=function(a,b){void 0===b&&(b=!1);this.write_position=a>this.write_position?a:this.write_position;a+=this._position;if(this.data.byteLength<a||b){var c=new Uint8Array(new ArrayBuffer(a+this.BUFFER_EXT_SIZE)),e=Math.min(this.data.buffer.byteLength,a+this.BUFFER_EXT_SIZE);c.set(new Uint8Array(this.data.buffer,0,e));this.buffer=c.buffer}};b.encodeUTF8=function(a){var b=0;a=this.stringToCodePoints(a);for(var c=[];a.length>b;){var e=a[b++];if(this.inRange(e,55296,57343))this.encoderError(e);
else if(this.inRange(e,0,127))c.push(e);else{var f,g;this.inRange(e,128,2047)?(f=1,g=192):this.inRange(e,2048,65535)?(f=2,g=224):this.inRange(e,65536,1114111)&&(f=3,g=240);for(c.push(this.div(e,Math.pow(64,f))+g);0<f;){var h=this.div(e,Math.pow(64,f-1));c.push(128+h%64);f-=1}}}return new Uint8Array(c)};b.decodeUTF8=function(a){for(var b=0,c="",e,f=0,g=0,h=0,k=0;a.length>b;){e=a[b++];if(e===this.EOF_byte)e=0!==g?this.decoderError(!1):this.EOF_code_point;else if(0===g)this.inRange(e,0,127)||(this.inRange(e,
194,223)?(g=1,k=128,f=e-192):this.inRange(e,224,239)?(g=2,k=2048,f=e-224):this.inRange(e,240,244)?(g=3,k=65536,f=e-240):this.decoderError(!1),f*=Math.pow(64,g),e=null);else if(this.inRange(e,128,191))if(h+=1,f+=(e-128)*Math.pow(64,g-h),h!==g)e=null;else{var n=f,q=k,k=h=g=f=0;e=this.inRange(n,q,1114111)&&!this.inRange(n,55296,57343)?n:this.decoderError(!1,e)}else k=h=g=f=0,b--,e=this.decoderError(!1,e);null!==e&&e!==this.EOF_code_point&&(65535>=e?0<e&&(c+=String.fromCharCode(e)):(e-=65536,c+=String.fromCharCode(55296+
(e>>10&1023)),c+=String.fromCharCode(56320+(e&1023))))}return c};b.encoderError=function(a){c.$error(1026,a)};b.decoderError=function(a,b){a&&c.$error(1027);return b||65533};b.inRange=function(a,b,c){return b<=a&&a<=c};b.div=function(a,b){return Math.floor(a/b)};b.stringToCodePoints=function(a){for(var b=[],c=0,e=a.length;c<a.length;){var f=a.charCodeAt(c);if(this.inRange(f,55296,57343))if(this.inRange(f,56320,57343))b.push(65533);else if(c===e-1)b.push(65533);else{var g=a.charCodeAt(c+1);this.inRange(g,
56320,57343)?(f&=1023,g&=1023,c+=1,b.push(65536+(f<<10)+g)):b.push(65533)}else b.push(f);c+=1}return b};a.SIZE_OF_BOOLEAN=1;a.SIZE_OF_INT8=1;a.SIZE_OF_INT16=2;a.SIZE_OF_INT32=4;a.SIZE_OF_UINT8=1;a.SIZE_OF_UINT16=2;a.SIZE_OF_UINT32=4;a.SIZE_OF_FLOAT32=4;a.SIZE_OF_FLOAT64=8;return a}();c.ByteArray=e;e.prototype.__class__="egret.ByteArray"})(egret||(egret={}));
(function(c){c.getOption=function(c){if(window.location){var e=location.search;if(""==e)return"";for(var e=e.slice(1),e=e.split("&"),a=e.length,b=0;b<a;b++){var d=e[b].split("=");if(d[0]==c)return d[1]}}return""}})(egret||(egret={}));
(function(c){var f=function(e){function a(a,b,c){e.call(this);this._target=null;this.loop=this.ignoreGlobalPause=this._useTicks=!1;this._actions=this._steps=this.pluginData=null;this.paused=!1;this.duration=0;this._prevPos=-1;this.position=null;this._stepPosition=this._prevPosition=0;this.passive=!1;this.initialize(a,b,c)}__extends(a,e);var b=a.prototype;a.get=function(d,b,c,e){void 0===b&&(b=null);void 0===c&&(c=null);void 0===e&&(e=!1);e&&a.removeTweens(d);return new a(d,b,c)};a.removeTweens=function(d){if(d.tween_count){for(var b=
a._tweens,c=b.length-1;0<=c;c--)b[c]._target==d&&(b[c].paused=!0,b.splice(c,1));d.tween_count=0}};a.pauseTweens=function(a){if(a.tween_count)for(var b=c.Tween._tweens,e=b.length-1;0<=e;e--)b[e]._target==a&&(b[e].paused=!0)};a.resumeTweens=function(a){if(a.tween_count)for(var b=c.Tween._tweens,e=b.length-1;0<=e;e--)b[e]._target==a&&(b[e].paused=!1)};a.tick=function(d,b){void 0===b&&(b=!1);for(var c=a._tweens.concat(),e=c.length-1;0<=e;e--){var f=c[e];b&&!f.ignoreGlobalPause||f.paused||f.tick(f._useTicks?
1:d)}};a._register=function(d,b){var e=d._target,f=a._tweens;if(b)e&&(e.tween_count=0<e.tween_count?e.tween_count+1:1),f.push(d),a._inited||(c.Ticker.getInstance().register(a.tick,null),a._inited=!0);else for(e&&e.tween_count--,e=f.length;e--;)if(f[e]==d){f.splice(e,1);break}};a.removeAllTweens=function(){for(var d=a._tweens,b=0,c=d.length;b<c;b++){var e=d[b];e.paused=!0;e._target.tweenjs_count=0}d.length=0};b.initialize=function(d,b,c){this._target=d;b&&(this._useTicks=b.useTicks,this.ignoreGlobalPause=
b.ignoreGlobalPause,this.loop=b.loop,b.onChange&&this.addEventListener("change",b.onChange,b.onChangeObj),b.override&&a.removeTweens(d));this.pluginData=c||{};this._curQueueProps={};this._initQueueProps={};this._steps=[];this._actions=[];b&&b.paused?this.paused=!0:a._register(this,!0);b&&null!=b.position&&this.setPosition(b.position,a.NONE)};b.setPosition=function(a,b){void 0===b&&(b=1);0>a&&(a=0);var c=a,e=!1;c>=this.duration&&(this.loop?c%=this.duration:(c=this.duration,e=!0));if(c==this._prevPos)return e;
var f=this._prevPos;this.position=this._prevPos=c;this._prevPosition=a;if(this._target)if(e)this._updateTargetProps(null,1);else if(0<this._steps.length){for(var g=0,h=this._steps.length;g<h&&!(this._steps[g].t>c);g++);g=this._steps[g-1];this._updateTargetProps(g,(this._stepPosition=c-g.t)/g.d)}0!=b&&0<this._actions.length&&(this._useTicks?this._runActions(c,c):1==b&&c<f?(f!=this.duration&&this._runActions(f,this.duration),this._runActions(0,c,!0)):this._runActions(f,c));e&&this.setPaused(!0);this.dispatchEventWith("change");
return e};b._runActions=function(a,b,c){void 0===c&&(c=!1);var e=a,f=b,g=-1,h=this._actions.length,k=1;a>b&&(e=b,f=a,g=h,h=k=-1);for(;(g+=k)!=h;){b=this._actions[g];var n=b.t;(n==f||n>e&&n<f||c&&n==a)&&b.f.apply(b.o,b.p)}};b._updateTargetProps=function(d,b){var c,e,f,g;if(d||1!=b){if(this.passive=!!d.v)return;d.e&&(b=d.e(b,0,1,1));c=d.p0;e=d.p1}else this.passive=!1,c=e=this._curQueueProps;for(var h in this._initQueueProps){null==(f=c[h])&&(c[h]=f=this._initQueueProps[h]);null==(g=e[h])&&(e[h]=g=f);
f=f==g||0==b||1==b||"number"!=typeof f?1==b?g:f:f+(g-f)*b;var k=!1;if(g=a._plugins[h])for(var n=0,q=g.length;n<q;n++){var p=g[n].tween(this,h,f,c,e,b,!!d&&c==e,!d);p==a.IGNORE?k=!0:f=p}k||(this._target[h]=f)}};b.setPaused=function(d){this.paused=d;a._register(this,!d);return this};b._cloneProps=function(a){var b={},c;for(c in a)b[c]=a[c];return b};b._addStep=function(a){0<a.d&&(this._steps.push(a),a.t=this.duration,this.duration+=a.d);return this};b._appendQueueProps=function(d){var b,c,e,f,g,h;for(h in d)if(void 0===
this._initQueueProps[h]){c=this._target[h];if(b=a._plugins[h])for(e=0,f=b.length;e<f;e++)c=b[e].init(this,h,c);this._initQueueProps[h]=this._curQueueProps[h]=void 0===c?null:c}for(h in d){c=this._curQueueProps[h];if(b=a._plugins[h])for(g=g||{},e=0,f=b.length;e<f;e++)b[e].step&&b[e].step(this,h,c,d[h],g);this._curQueueProps[h]=d[h]}g&&this._appendQueueProps(g);return this._curQueueProps};b._addAction=function(a){a.t=this.duration;this._actions.push(a);return this};b._set=function(a,b){for(var c in a)b[c]=
a[c]};b.wait=function(a,b){if(null==a||0>=a)return this;var c=this._cloneProps(this._curQueueProps);return this._addStep({d:a,p0:c,p1:c,v:b})};b.to=function(a,b,c){void 0===c&&(c=void 0);if(isNaN(b)||0>b)b=0;return this._addStep({d:b||0,p0:this._cloneProps(this._curQueueProps),e:c,p1:this._cloneProps(this._appendQueueProps(a))})};b.call=function(a,b,c){void 0===b&&(b=void 0);void 0===c&&(c=void 0);return this._addAction({f:a,p:c?c:[],o:b?b:this._target})};b.set=function(a,b){void 0===b&&(b=null);
return this._addAction({f:this._set,o:this,p:[a,b?b:this._target]})};b.play=function(a){a||(a=this);return this.call(a.setPaused,a,[!1])};b.pause=function(a){a||(a=this);return this.call(a.setPaused,a,[!0])};b.tick=function(a){this.paused||this.setPosition(this._prevPosition+a)};a.NONE=0;a.LOOP=1;a.REVERSE=2;a._tweens=[];a.IGNORE={};a._plugins={};a._inited=!1;return a}(c.EventDispatcher);c.Tween=f;f.prototype.__class__="egret.Tween"})(egret||(egret={}));
(function(c){var f=function(){function e(){c.$error(1014)}e.get=function(a){-1>a&&(a=-1);1<a&&(a=1);return function(b){return 0==a?b:0>a?b*(b*-a+1+a):b*((2-b)*a+(1-a))}};e.getPowIn=function(a){return function(b){return Math.pow(b,a)}};e.getPowOut=function(a){return function(b){return 1-Math.pow(1-b,a)}};e.getPowInOut=function(a){return function(b){return 1>(b*=2)?0.5*Math.pow(b,a):1-0.5*Math.abs(Math.pow(2-b,a))}};e.sineIn=function(a){return 1-Math.cos(a*Math.PI/2)};e.sineOut=function(a){return Math.sin(a*
Math.PI/2)};e.sineInOut=function(a){return-0.5*(Math.cos(Math.PI*a)-1)};e.getBackIn=function(a){return function(b){return b*b*((a+1)*b-a)}};e.getBackOut=function(a){return function(b){return--b*b*((a+1)*b+a)+1}};e.getBackInOut=function(a){a*=1.525;return function(b){return 1>(b*=2)?0.5*b*b*((a+1)*b-a):0.5*((b-=2)*b*((a+1)*b+a)+2)}};e.circIn=function(a){return-(Math.sqrt(1-a*a)-1)};e.circOut=function(a){return Math.sqrt(1- --a*a)};e.circInOut=function(a){return 1>(a*=2)?-0.5*(Math.sqrt(1-a*a)-1):0.5*
(Math.sqrt(1-(a-=2)*a)+1)};e.bounceIn=function(a){return 1-e.bounceOut(1-a)};e.bounceOut=function(a){return a<1/2.75?7.5625*a*a:a<2/2.75?7.5625*(a-=1.5/2.75)*a+0.75:a<2.5/2.75?7.5625*(a-=2.25/2.75)*a+0.9375:7.5625*(a-=2.625/2.75)*a+0.984375};e.bounceInOut=function(a){return 0.5>a?0.5*e.bounceIn(2*a):0.5*e.bounceOut(2*a-1)+0.5};e.getElasticIn=function(a,b){var d=2*Math.PI;return function(c){if(0==c||1==c)return c;var e=b/d*Math.asin(1/a);return-(a*Math.pow(2,10*(c-=1))*Math.sin((c-e)*d/b))}};e.getElasticOut=
function(a,b){var d=2*Math.PI;return function(c){if(0==c||1==c)return c;var e=b/d*Math.asin(1/a);return a*Math.pow(2,-10*c)*Math.sin((c-e)*d/b)+1}};e.getElasticInOut=function(a,b){var d=2*Math.PI;return function(c){var e=b/d*Math.asin(1/a);return 1>(c*=2)?-0.5*a*Math.pow(2,10*(c-=1))*Math.sin((c-e)*d/b):a*Math.pow(2,-10*(c-=1))*Math.sin((c-e)*d/b)*0.5+1}};e.quadIn=e.getPowIn(2);e.quadOut=e.getPowOut(2);e.quadInOut=e.getPowInOut(2);e.cubicIn=e.getPowIn(3);e.cubicOut=e.getPowOut(3);e.cubicInOut=e.getPowInOut(3);
e.quartIn=e.getPowIn(4);e.quartOut=e.getPowOut(4);e.quartInOut=e.getPowInOut(4);e.quintIn=e.getPowIn(5);e.quintOut=e.getPowOut(5);e.quintInOut=e.getPowInOut(5);e.backIn=e.getBackIn(1.7);e.backOut=e.getBackOut(1.7);e.backInOut=e.getBackInOut(1.7);e.elasticIn=e.getElasticIn(1,0.3);e.elasticOut=e.getElasticOut(1,0.3);e.elasticInOut=e.getElasticInOut(1,0.3*1.5);return e}();c.Ease=f;f.prototype.__class__="egret.Ease"})(egret||(egret={}));
(function(c){var f=function(e){function a(){e.call(this);this.path="";this.audio=null;this.type=a.EFFECT;this._pauseTime=0;this._listeners=[]}__extends(a,e);var b=a.prototype;Object.defineProperty(b,"position",{get:function(){return this.audio?Math.floor(1E3*this.audio._getCurrentTime()):0},enumerable:!0,configurable:!0});b.play=function(a,b){void 0===a&&(a=!1);void 0===b&&(b=0);var c=this.audio;c&&(c._setCurrentTime(b/1E3),c._setLoop(a),c._play(this.type))};b.stop=function(){var a=this.audio;a&&
(this._pauseTime=0,a._setCurrentTime(0),a._pause())};b.pause=function(){var a=this.audio;a&&(this._pauseTime=a._getCurrentTime(),a._pause())};b.resume=function(){var a=this.audio;a&&(a._setCurrentTime(this._pauseTime),this._pauseTime=0,a._play(this.type))};b.load=function(){var a=this.audio;a&&a._load()};b.addEventListener=function(a,b,f){e.prototype.addEventListener.call(this,a,b,f);var r=this;this.audio&&1==this._eventsMap[a].length&&(b=a==c.SoundEvent.SOUND_COMPLETE||"ended"==a?function(a){c.Event._dispatchByTarget(c.SoundEvent,
r,c.SoundEvent.SOUND_COMPLETE);c.Event._dispatchByTarget(c.Event,r,"ended")}:function(a){c.Event._dispatchByTarget(c.Event,r,a.type)},this._listeners.push({type:a,func:b}),a=r.getVirtualType(a),this.audio._addEventListener(a,b,!1))};b.removeEventListener=function(a,b,c){e.prototype.removeEventListener.call(this,a,b,c);if(this.audio&&(!this._eventsMap||!this._eventsMap[a]||0==this._eventsMap[a].length))for(c=0;c<this._listeners.length;c++)if(b=this._listeners[c],b.type==a){this._listeners.splice(c,
1);a=this.getVirtualType(a);this.audio._removeEventListener(a,b.func,!1);break}};b.getVirtualType=function(a){switch(a){case c.SoundEvent.SOUND_COMPLETE:return"ended";default:return a}};Object.defineProperty(b,"volume",{get:function(){return this.audio?this.audio._getVolume():0},set:function(a){var b=this.audio;b&&b._setVolume(Math.max(0,Math.min(a,1)))},enumerable:!0,configurable:!0});b.setVolume=function(a){c.$warn(1031);this.volume=a};b.getVolume=function(){c.$warn(1032);return this.volume};b.preload=
function(a,b,c){void 0===b&&(b=null);void 0===c&&(c=null);this.type=a;this.audio._preload(a,b,c)};b._setAudio=function(a){this.audio=a};b.destroy=function(){this.audio._destroy()};a.MUSIC="music";a.EFFECT="effect";return a}(c.EventDispatcher);c.Sound=f;f.prototype.__class__="egret.Sound"})(egret||(egret={}));
(function(c){var f=function(){function c(){}c.isNumber=function(a){return"number"===typeof a&&!isNaN(a)};c.sin=function(a){var b=Math.floor(a),d=b+1,f=c.sinInt(b),s=c.sinInt(d);return(a-b)*s+(d-a)*f};c.sinInt=function(a){a%=360;0>a&&(a+=360);return 90>a?egret_sin_map[a]:180>a?egret_cos_map[a-90]:270>a?-egret_sin_map[a-180]:-egret_cos_map[a-270]};c.cos=function(a){var b=Math.floor(a),d=b+1,f=c.cosInt(b),s=c.cosInt(d);return(a-b)*s+(d-a)*f};c.cosInt=function(a){a%=360;0>a&&(a+=360);return 90>a?egret_cos_map[a]:
180>a?-egret_sin_map[a-90]:270>a?-egret_cos_map[a-180]:egret_sin_map[a-270]};return c}();c.NumberUtils=f;f.prototype.__class__="egret.NumberUtils"})(egret||(egret={}));for(var egret_sin_map={},egret_cos_map={},NumberUtils_i=0;90>=NumberUtils_i;NumberUtils_i++)egret_sin_map[NumberUtils_i]=Math.sin(NumberUtils_i*egret.Matrix.DEG_TO_RAD),egret_cos_map[NumberUtils_i]=Math.cos(NumberUtils_i*egret.Matrix.DEG_TO_RAD);
Function.prototype.bind||(Function.prototype.bind=function(c){"function"!==typeof this&&egret.$error(1029);var f=Array.prototype.slice.call(arguments,1),e=this,a=function(){},b=function(){return e.apply(this instanceof a&&c?this:c,f.concat(Array.prototype.slice.call(arguments)))};a.prototype=this.prototype;b.prototype=new a;return b});
(function(c){var f=function(){function e(){this.downloadingSizeThisObject=this.downloadingSizeFunc=this.onErrorThisObject=this.onErrorFunc=this.onSuccessThisObject=this.onSuccessFunc=null}var a=e.prototype;e.create=function(){return e.promiseObjectList.length?e.promiseObjectList.pop():new c.PromiseObject};a.onSuccess=function(){for(var a=[],d=0;d<arguments.length;d++)a[d-0]=arguments[d];this.onSuccessFunc&&this.onSuccessFunc.apply(this.onSuccessThisObject,a);this.destroy()};a.onError=function(){for(var a=
[],d=0;d<arguments.length;d++)a[d-0]=arguments[d];this.onErrorFunc&&this.onErrorFunc.apply(this.onErrorThisObject,a);this.destroy()};a.downloadingSize=function(){for(var a=[],d=0;d<arguments.length;d++)a[d-0]=arguments[d];this.downloadingSizeFunc&&this.downloadingSizeFunc.apply(this.downloadingSizeThisObject,a)};a.destroy=function(){this.downloadingSizeThisObject=this.downloadingSizeFunc=this.onErrorThisObject=this.onErrorFunc=this.onSuccessThisObject=this.onSuccessFunc=void 0;e.promiseObjectList.push(this)};
e.promiseObjectList=[];return e}();c.PromiseObject=f;f.prototype.__class__="egret.PromiseObject"})(egret||(egret={}));
(function(c){var f=function(e){function a(d){void 0===d&&(d=60);e.call(this);this.frameRate=d;this._time=0;this._requestAnimationId=NaN;this._isActivate=!0;a.requestAnimationFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame;a.cancelAnimationFrame=window.cancelAnimationFrame||window.msCancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.oCancelAnimationFrame||
window.cancelRequestAnimationFrame||window.msCancelRequestAnimationFrame||window.mozCancelRequestAnimationFrame||window.oCancelRequestAnimationFrame||window.webkitCancelRequestAnimationFrame;a.requestAnimationFrame||(a.requestAnimationFrame=function(a){return window.setTimeout(a,1E3/d)});a.cancelAnimationFrame||(a.cancelAnimationFrame=function(a){return window.clearTimeout(a)});a.instance=this;this.registerListener()}__extends(a,e);var b=a.prototype;b.setFrameRate=function(d){0==60%d&&(a.countTime=
60/d-1)};b.enterFrame=function(){var d=a.instance,b=a._thisObject,e=a._callback,f=c.getTimer(),l=f-d._time;d._requestAnimationId=a.requestAnimationFrame.call(window,a.prototype.enterFrame);a.count<a.countTime?a.count++:(a.count=0,e.call(b,l),d._time=f)};b.executeMainLoop=function(d,b){a._callback=d;a._thisObject=b;this.enterFrame()};b.reset=function(){var d=a.instance;d._requestAnimationId&&(d._time=c.getTimer(),a.cancelAnimationFrame.call(window,d._requestAnimationId),d.enterFrame())};b.registerListener=
function(){var d=this,b=function(){d._isActivate&&(d._isActivate=!1,c.MainContext.instance.stage.dispatchEvent(new c.Event(c.Event.DEACTIVATE)))},e=function(){d._isActivate||(d._isActivate=!0,a.instance.reset(),c.MainContext.instance.stage.dispatchEvent(new c.Event(c.Event.ACTIVATE)))},f=function(){document[l]?b():e()};window.addEventListener("focus",e,!1);window.addEventListener("blur",b,!1);var l,g;"undefined"!==typeof document.hidden?(l="hidden",g="visibilitychange"):"undefined"!==typeof document.mozHidden?
(l="mozHidden",g="mozvisibilitychange"):"undefined"!==typeof document.msHidden?(l="msHidden",g="msvisibilitychange"):"undefined"!==typeof document.webkitHidden?(l="webkitHidden",g="webkitvisibilitychange"):"undefined"!==typeof document.oHidden&&(l="oHidden",g="ovisibilitychange");"onpageshow"in window&&"onpagehide"in window&&(window.addEventListener("pageshow",e,!1),window.addEventListener("pagehide",b,!1));l&&g&&document.addEventListener(g,f,!1);f=navigator.userAgent;g=/micromessenger/gi.test(f);
var h=/mqq/ig.test(f);if(/mobile.*qq/gi.test(f)||g)h=!1;h&&(f=window.browser||{},f.execWebFn=f.execWebFn||{},f.execWebFn.postX5GamePlayerMessage=function(a){a=a.type;"app_enter_background"==a?b():"app_enter_foreground"==a&&e()},window.browser=f)};a.instance=null;a.countTime=0;a.requestAnimationFrame=null;a.cancelAnimationFrame=null;a._thisObject=null;a._callback=null;a.count=0;return a}(c.DeviceContext);c.HTML5DeviceContext=f;f.prototype.__class__="egret.HTML5DeviceContext"})(egret||(egret={}));var egret_html5_localStorage;
(function(c){c.getItem=function(c){return window.localStorage.getItem(c)};c.setItem=function(c,e){try{return window.localStorage.setItem(c,e),!0}catch(a){return egret.$warn(1018,c,e),!1}};c.removeItem=function(c){window.localStorage.removeItem(c)};c.clear=function(){window.localStorage.clear()};c.init=function(){for(var f in c)egret.localStorage[f]=c[f]}})(egret_html5_localStorage||(egret_html5_localStorage={}));egret_html5_localStorage.init();
(function(c){var f=function(e){function a(a,b){void 0===b&&(b=!0);e.call(this);this.useCacheCanvas=b;c.Texture.prototype.draw=c.Texture.prototype._drawForCanvas;c.Texture.prototype.dispose=c.Texture.prototype._disposeForCanvas;this.canvas=a||this.createCanvas();this.canvasContext=this.canvas.getContext("2d");b?(this._cacheCanvas=document.createElement("canvas"),this._cacheCanvas.width=this.canvas.width,this._cacheCanvas.height=this.canvas.height,this.drawCanvasContext=this._cacheCanvasContext=this._cacheCanvas.getContext("2d")):
this.drawCanvasContext=this.canvasContext;var f=this.drawCanvasContext;if(void 0==f.imageSmoothingEnabled){for(var r=["webkitImageSmoothingEnabled","mozImageSmoothingEnabled","msImageSmoothingEnabled"],l=0;l<r.length;l++){var g=r[l];if(void 0!=f[g])break}Object.defineProperty(f,"imageSmoothingEnabled",{get:function(){return this[g]},set:function(a){this[g]=a},enumerable:!0,configurable:!0})}this.onResize();var h=this.drawCanvasContext.setTransform,k=this;this.drawCanvasContext.setTransform=function(a,
d,b,c,e,f){k._matrixA=a;k._matrixB=d;k._matrixC=b;k._matrixD=c;k._matrixTx=e;k._matrixTy=f;h.call(k.drawCanvasContext,a,d,b,c,e,f)};this._matrixA=1;this._matrixC=this._matrixB=0;this._matrixD=1;this._transformTy=this._transformTx=this._matrixTy=this._matrixTx=0;this.initBlendMode()}__extends(a,e);var b=a.prototype;b.createCanvas=function(){var a=c.Browser.getInstance().$("#egretCanvas");if(!a){var b=document.getElementById(c.StageDelegate.canvas_div_name),a=c.Browser.getInstance().$new("canvas");
a.id="egretCanvas";b.appendChild(a)}c.MainContext.instance.stage.addEventListener(c.Event.RESIZE,this.onResize,this);return a};b.onResize=function(){if(this.canvas){var a=document.getElementById(c.StageDelegate.canvas_div_name);this.canvas.width=c.MainContext.instance.stage.stageWidth;this.canvas.height=c.MainContext.instance.stage.stageHeight;this.canvas.style.width=a.style.width;this.canvas.style.height=a.style.height;this.useCacheCanvas&&(this._cacheCanvas.width=this.canvas.width,this._cacheCanvas.height=
this.canvas.height);this.drawCanvasContext.imageSmoothingEnabled=c.RendererContext.imageSmoothingEnabled}};b.clearScreen=function(){for(var a=c.RenderFilter.getInstance().getDrawAreaList(),b=0,e=a.length;b<e;b++){var f=a[b];this.clearRect(f.x,f.y,f.width,f.height)}a=c.MainContext.instance.stage;this.useCacheCanvas&&this._cacheCanvasContext.clearRect(0,0,a.stageWidth,a.stageHeight);this.renderCost=0};b.clearRect=function(a,b,c,e){this.canvasContext.clearRect(a,b,c,e)};b.drawImage=function(a,b,f,r,
l,g,h,k,n,q){void 0===q&&(q=void 0);g+=this._transformTx;h+=this._transformTy;var p=c.getTimer();a.draw(this.drawCanvasContext,b,f,r,l,g,h,k,n,q);e.prototype.drawImage.call(this,a,b,f,r,l,g,h,k,n,q);this.renderCost+=c.getTimer()-p};b.setTransform=function(a){1==a.a&&0==a.b&&0==a.c&&1==a.d&&1==this._matrixA&&0==this._matrixB&&0==this._matrixC&&1==this._matrixD?(this._transformTx=a.tx-this._matrixTx,this._transformTy=a.ty-this._matrixTy):(this._transformTx=this._transformTy=0,this._matrixA==a.a&&this._matrixB==
a.b&&this._matrixC==a.c&&this._matrixD==a.d&&this._matrixTx==a.tx&&this._matrixTy==a.ty||this.drawCanvasContext.setTransform(a.a,a.b,a.c,a.d,a.tx,a.ty))};b.setAlpha=function(a,b){this.drawCanvasContext.globalAlpha=a;b?(this.blendValue=this.blendModes[b],this.drawCanvasContext.globalCompositeOperation=this.blendValue):this.blendValue!=c.BlendMode.NORMAL&&(this.blendValue=this.blendModes[c.BlendMode.NORMAL],this.drawCanvasContext.globalCompositeOperation=this.blendValue)};b.initBlendMode=function(){this.blendModes=
{};this.blendModes[c.BlendMode.NORMAL]="source-over";this.blendModes[c.BlendMode.ADD]="lighter";this.blendModes[c.BlendMode.ERASE]="destination-out";this.blendModes[c.BlendMode.ERASE_REVERSE]="destination-in"};b.setupFont=function(a,b){void 0===b&&(b=null);b=b||{};var c=a._TF_Props_,e=null==b.size?c._size:b.size,f=null==b.fontFamily?c._fontFamily:b.fontFamily,g=this.drawCanvasContext,h=(null==b.italic?c._italic:b.italic)?"italic ":"normal ",h=h+((null==b.bold?c._bold:b.bold)?"bold ":"normal ");g.font=
h+(e+"px "+f);g.textAlign="left";g.textBaseline="middle"};b.measureText=function(a){return this.drawCanvasContext.measureText(a).width};b.drawText=function(a,b,f,r,l,g){void 0===g&&(g=null);this.setupFont(a,g);g=g||{};var h=a._TF_Props_,k;k=null!=g.textColor?c.toColorString(g.textColor):h._textColorString;var n;n=null!=g.strokeColor?c.toColorString(g.strokeColor):h._strokeColorString;var h=null!=g.stroke?g.stroke:h._stroke,q=this.drawCanvasContext;q.fillStyle=k;q.strokeStyle=n;h&&(q.lineWidth=2*h,
q.strokeText(b,f+this._transformTx,r+this._transformTy,l||65535));q.fillText(b,f+this._transformTx,r+this._transformTy,l||65535);e.prototype.drawText.call(this,a,b,f,r,l,g)};b.strokeRect=function(a,b,c,e,f){this.drawCanvasContext.strokeStyle=f;this.drawCanvasContext.strokeRect(a,b,c,e)};b.pushMask=function(a){this.drawCanvasContext.save();this.drawCanvasContext.beginPath();this.drawCanvasContext.rect(a.x+this._transformTx,a.y+this._transformTy,a.width,a.height);this.drawCanvasContext.clip();this.drawCanvasContext.closePath()};
b.popMask=function(){this.drawCanvasContext.restore();this.drawCanvasContext.setTransform(1,0,0,1,0,0)};b.onRenderStart=function(){this.drawCanvasContext.save()};b.onRenderFinish=function(){this.drawCanvasContext.restore();this.drawCanvasContext.setTransform(1,0,0,1,0,0);if(this.useCacheCanvas)for(var a=this._cacheCanvas.width,b=this._cacheCanvas.height,e=c.RenderFilter.getInstance().getDrawAreaList(),f=0,l=e.length;f<l;f++){var g=e[f],h=g.x,k=g.y,n=g.width,g=g.height;h+n>a&&(n=a-h);k+g>b&&(g=b-k);
0<n&&0<g&&this.canvasContext.drawImage(this._cacheCanvas,h,k,n,g,h,k,n,g)}};b.drawCursor=function(a,b,c,e){this.drawCanvasContext.strokeStyle="#40a5ff";this.drawCanvasContext.lineWidth=2;this.drawCanvasContext.beginPath();this.drawCanvasContext.moveTo(Math.round(a+this._transformTx),Math.round(b+this._transformTy));this.drawCanvasContext.lineTo(Math.round(c+this._transformTx),Math.round(e+this._transformTy));this.drawCanvasContext.closePath();this.drawCanvasContext.stroke()};b.createLinearGradient=
function(a,b,c,e){return this.drawCanvasContext.createLinearGradient(a,b,c,e)};b.createRadialGradient=function(a,b,c,e,f,g){return this.drawCanvasContext.createRadialGradient(a,b,c,e,f,g)};return a}(c.RendererContext);c.HTML5CanvasRenderer=f;f.prototype.__class__="egret.HTML5CanvasRenderer"})(egret||(egret={}));egret.RendererContext.createRendererContext=function(c){return new egret.HTML5CanvasRenderer(c,!1)};
egret.Graphics.prototype._beginDraw=function(c){this._renderContext=c.drawCanvasContext;var f=c._transformTx;c=c._transformTy;0==f&&0==c||this._renderContext.translate(f,c)};egret.Graphics.prototype._endDraw=function(c){this._renderContext=c.drawCanvasContext;var f=c._transformTx;c=c._transformTy;0==f&&0==c||this._renderContext.translate(-f,-c)};var originCanvas2DFill=CanvasRenderingContext2D.prototype.fill;
CanvasRenderingContext2D.prototype.fill=function(){var c=this.fillStyle;"string"!=typeof c?(c=c.matrix)?(this.transform(c.a,c.b,c.c,c.d,c.tx,c.ty),originCanvas2DFill.call(this),c=egret.MainContext.instance.rendererContext,c._transformTx=c._transformTy=0,this.setTransform(c._matrixA,c._matrixB,c._matrixC,c._matrixD,c._matrixTx,c._matrixTy)):originCanvas2DFill.call(this):originCanvas2DFill.call(this)};
(function(c){var f=function(e){function a(a){e.call(this);this.glID=this.gl=this.canvas=null;this.size=2E3;this.vertices=null;this.vertSize=5;this.indices=null;this.projectionY=this.projectionX=NaN;this.shaderManager=null;this.contextLost=!1;this.glContextId=0;this.currentBlendMode="";this.currentBaseTexture=null;this.currentBatchSize=0;this.worldTransform=null;this.worldAlpha=1;this.maskList=[];this.maskDataFreeList=[];this.graphicsIndexBuffer=this.graphicsBuffer=this.graphicsIndices=this.graphicsPoints=
this.filterType=null;this.graphicsStyle={};c.Texture.prototype.dispose=c.Texture.prototype._disposeForCanvas;this.canvas=a||this.createCanvas();this.canvas.addEventListener("webglcontextlost",this.handleContextLost.bind(this),!1);this.canvas.addEventListener("webglcontextrestored",this.handleContextRestored.bind(this),!1);this.html5Canvas=document.createElement("canvas");this.canvasContext=new c.HTML5CanvasRenderer(this.html5Canvas);this.onResize();this.projectionX=this.canvas.width/2;this.projectionY=
-this.canvas.height/2;a=6*this.size;this.vertices=new Float32Array(4*this.size*this.vertSize);this.indices=new Uint16Array(a);for(var b=0,f=0;b<a;b+=6,f+=4)this.indices[b+0]=f+0,this.indices[b+1]=f+1,this.indices[b+2]=f+2,this.indices[b+3]=f+0,this.indices[b+4]=f+2,this.indices[b+5]=f+3;this.initWebGL();this.shaderManager=new c.WebGLShaderManager(this.gl);this.worldTransform=new c.Matrix;this.initAll()}__extends(a,e);var b=a.prototype;b.onRenderFinish=function(){this._drawWebGL()};a.initWebGLCanvas=
function(){c.RenderTexture.WebGLCanvas||(c.RenderTexture.WebGLCanvas=document.createElement("canvas"),c.RenderTexture.WebGLCanvas.avaliable=!0,c.RenderTexture.WebGLRenderer=new c.WebGLRenderer(c.RenderTexture.WebGLCanvas),c.RenderTexture.WebGLRenderer.setAlpha(1))};b.initAll=function(){a.isInit||(a.isInit=!0,egret_webgl_graphics.init(),c.TextField.prototype._makeBitmapCache=function(){this.renderTexture||(this.renderTexture=new c.RenderTexture);var a=this.getBounds(c.Rectangle.identity);if(0==a.width||
0==a.height)return this._texture_to_render=null,!1;this._bitmapData||(this._bitmapData=document.createElement("canvas"),this._bitmapData.avaliable=!0,this.renderContext=c.RendererContext.createRendererContext(this._bitmapData));var b=this._bitmapData,e=a.width,a=a.height,f,l,g=c.MainContext.instance.rendererContext._texture_scale_factor;f=e/g;l=a/g;f=Math.round(f);l=Math.round(l);b.width=f;b.height=l;b.style.width=f+"px";b.style.height=l+"px";this.renderContext._cacheCanvas&&(this.renderContext._cacheCanvas.width=
f,this.renderContext._cacheCanvas.height=l);this._worldTransform.identity();this._worldTransform.a=1/g;this._worldTransform.d=1/g;this.renderContext.setTransform(this._worldTransform);this.worldAlpha=1;b=c.RenderFilter.getInstance();g=b._drawAreaList.concat();b._drawAreaList.length=0;this.renderContext.clearScreen();this.renderContext.onRenderStart();c.Texture.deleteWebGLTexture(this.renderTexture);this.renderTexture.dispose();this._hasFilters()&&this._setGlobalFilters(this.renderContext);var h=this.mask||
this._DO_Props_._scrollRect;h&&this.renderContext.pushMask(h);this._render(this.renderContext);h&&this.renderContext.popMask();this._hasFilters()&&this._removeGlobalFilters(this.renderContext);c.RenderTexture.identityRectangle.width=f;c.RenderTexture.identityRectangle.height=l;b.addDrawArea(c.RenderTexture.identityRectangle);this.renderContext.onRenderFinish();b._drawAreaList=g;this.renderTexture._bitmapData=this._bitmapData;this.renderTexture._sourceWidth=f;this.renderTexture._sourceHeight=l;this.renderTexture._textureWidth=
e;this.renderTexture._textureHeight=a;this._texture_to_render=this.renderTexture;return!0},c.TextField.prototype._draw=function(a){this._TF_Props_._type==c.TextFieldType.INPUT&&this._isTyping||(this.getDirty()&&(this._texture_to_render=this.renderTexture,this._DO_Props_._cacheAsBitmap=!0),c.DisplayObject.prototype._draw.call(this,a))},c.RenderTexture.prototype.init=function(){this._bitmapData=document.createElement("canvas");this._bitmapData.avaliable=!0;this.canvasContext=this._bitmapData.getContext("2d");
a.initWebGLCanvas();this._webglBitmapData=c.RenderTexture.WebGLCanvas;this.renderContext=c.RenderTexture.WebGLRenderer},c.RenderTexture.prototype.setSize=function(a,b){this._webglBitmapData&&this.renderContext.setSize(a,b);if(this._bitmapData){var c=this._bitmapData;c.width=a;c.height=b;c.style.width=a+"px";c.style.height=b+"px"}},c.RenderTexture.prototype.end=function(){},c.RenderTexture.prototype.drawToTexture=function(a,b,e){var f=b||a.getBounds(c.Rectangle.identity);if(0==f.width||0==f.height)return!1;
"undefined"==typeof e&&(e=1);this._bitmapData||this.init();var l=f.x,g=f.y,h=f.width,f=f.height,f=f/e,k=c.MainContext.instance.rendererContext._texture_scale_factor,h=Math.round(h/e),f=Math.round(f);this.setSize(h,f);var n=this._bitmapData,q=h/k*e,p=f/k*e;n.width=q;n.height=p;n.style.width=q+"px";n.style.height=p+"px";this.begin();a._worldTransform.identity();n=a._DO_Props_._anchorOffsetX;q=a._DO_Props_._anchorOffsetY;if(0!=a._DO_Props_._anchorX||0!=a._DO_Props_._anchorY)n=a._DO_Props_._anchorX*h,
q=a._DO_Props_._anchorY*f;this._offsetX=l+n;this._offsetY=g+q;a._worldTransform.append(1,0,0,1,-this._offsetX,-this._offsetY);b&&(this._offsetX-=l,this._offsetY-=g);a.worldAlpha=1;b=c.MainContext.__use_new_draw;c.MainContext.__use_new_draw=!1;if(a instanceof c.DisplayObjectContainer)for(l=a._children,g=0,n=l.length;g<n;g++)l[g]._updateTransform();this.renderContext.setTransform(a._worldTransform);l=c.RenderFilter.getInstance();g=l._drawAreaList.concat();l._drawAreaList.length=0;n=this.renderContext.gl;
n.viewport(0,0,h,f);n.bindFramebuffer(n.FRAMEBUFFER,null);n.clearColor(0,0,0,0);n.clear(n.COLOR_BUFFER_BIT);this.renderContext.onRenderStart();c.Texture.deleteWebGLTexture(this);a._hasFilters()&&a._setGlobalFilters(this.renderContext);(n=a.mask||a._DO_Props_._scrollRect)&&this.renderContext.pushMask(n);a._render(this.renderContext);this.renderContext._drawWebGL();c.MainContext.__use_new_draw=b;n&&this.renderContext.popMask();a._hasFilters()&&a._removeGlobalFilters(this.renderContext);c.RenderTexture.identityRectangle.width=
h;c.RenderTexture.identityRectangle.height=f;l.addDrawArea(c.RenderTexture.identityRectangle);this.renderContext.onRenderFinish();l._drawAreaList=g;this._sourceWidth=h/k*e;this._sourceHeight=f/k*e;this._textureWidth=h*e;this._textureHeight=f*e;this.canvasContext.drawImage(this._webglBitmapData,0,0,h,f,0,0,this._sourceWidth,this._sourceHeight);return!0})};b.createCanvas=function(){var a=c.Browser.getInstance().$("#egretCanvas");if(!a){var b=document.getElementById(c.StageDelegate.canvas_div_name),
a=c.Browser.getInstance().$new("canvas");a.id="egretCanvas";b.appendChild(a)}c.MainContext.instance.stage.addEventListener(c.Event.RESIZE,this.onResize,this);return a};b.onResize=function(){this.setSize(c.MainContext.instance.stage.stageWidth,c.MainContext.instance.stage.stageHeight)};b.setSize=function(a,b){var e=document.getElementById(c.StageDelegate.canvas_div_name);this.canvas&&(this.canvas.width=a,this.canvas.height=b,this.canvas.style.width=e.style.width,this.canvas.style.height=e.style.height,
this.projectionX=this.canvas.width/2,this.projectionY=-this.canvas.height/2);this.html5Canvas&&(this.html5Canvas.width=a,this.html5Canvas.height=b,this.html5Canvas.style.width=e.style.width,this.html5Canvas.style.height=e.style.height);this.width=a;this.height=b};b.handleContextLost=function(){this.contextLost=!0};b.handleContextRestored=function(){this.initWebGL();this.shaderManager.setContext(this.gl);this.contextLost=!1};b.initWebGL=function(){for(var d={},b,e=["experimental-webgl","webgl"],f=
0;f<e.length;f++){try{b=this.canvas.getContext(e[f],d)}catch(l){}if(b)break}b||c.$error(1021);a.glID++;this.glID=a.glID;this.setContext(b)};b.setContext=function(a){this.gl=a;a.id=this.glContextId++;this.vertexBuffer=a.createBuffer();this.indexBuffer=a.createBuffer();a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,this.indexBuffer);a.bufferData(a.ELEMENT_ARRAY_BUFFER,this.indices,a.STATIC_DRAW);a.bindBuffer(a.ARRAY_BUFFER,this.vertexBuffer);a.bufferData(a.ARRAY_BUFFER,this.vertices,a.DYNAMIC_DRAW);a.disable(a.DEPTH_TEST);
a.disable(a.CULL_FACE);a.enable(a.BLEND);a.colorMask(!0,!0,!0,!0)};b.start=function(){if(!this.contextLost){var a=this.gl;a.activeTexture(a.TEXTURE0);a.bindBuffer(a.ARRAY_BUFFER,this.vertexBuffer);a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,this.indexBuffer);var b;b="colorTransform"==this.filterType?this.shaderManager.colorTransformShader:"blur"==this.filterType?this.shaderManager.blurShader:this.shaderManager.defaultShader;this.shaderManager.activateShader(b);b.syncUniforms();a.uniform2f(b.projectionVector,
this.projectionX,this.projectionY);var c=4*this.vertSize;a.vertexAttribPointer(b.aVertexPosition,2,a.FLOAT,!1,c,0);a.vertexAttribPointer(b.aTextureCoord,2,a.FLOAT,!1,c,8);a.vertexAttribPointer(b.colorAttribute,2,a.FLOAT,!1,c,16)}};b.clearScreen=function(){var a=this.gl;a.colorMask(!0,!0,!0,!0);for(var b=c.RenderFilter.getInstance().getDrawAreaList(),e=0,f=b.length;e<f;e++){var l=b[e];a.viewport(l.x,l.y,l.width,l.height);a.bindFramebuffer(a.FRAMEBUFFER,null);a.clearColor(0,0,0,0);a.clear(a.COLOR_BUFFER_BIT)}a.viewport(0,
0,this.width,this.height);this.renderCost=0};b.setBlendMode=function(a){a||(a=c.BlendMode.NORMAL);if(this.currentBlendMode!=a){var b=c.RendererContext.blendModesForGL[a];b&&(this._drawWebGL(),this.gl.blendFunc(b[0],b[1]),this.currentBlendMode=a)}};b.drawRepeatImage=function(a,b,e,f,l,g,h,k,n,q){q=c.MainContext.instance.rendererContext._texture_scale_factor;f*=q;for(l*=q;g<k;g+=f)for(var p=h;p<n;p+=l){var u=Math.min(f,k-g),t=Math.min(l,n-p);this.drawImage(a,b,e,u/q,t/q,g,p,u,t)}};b.drawImage=function(a,
b,c,e,f,g,h,k,n,q){void 0===q&&(q=void 0);if(!this.contextLost){var p=a._bitmapData;if(p&&p.avaliable)if(void 0!==q)this.drawRepeatImage(a,b,c,e,f,g,h,k,n,q);else{if(this.filters)for(q=0;1>q;q++)if("glow"==this.filters[0].type){this.useGlow(a,b,c,e,f,g,h,k,n);return}this._drawImage(a,b,c,e,f,g,h,k,n)}}};b._drawImage=function(a,b,c,e,f,g,h,k,n){this.createWebGLTexture(a);var q=a._bitmapData.webGLTexture[this.glID];if(q!==this.currentBaseTexture||this.currentBatchSize>=this.size-1)this._drawWebGL(),
this.currentBaseTexture=q;var p=this.worldTransform,u=p.a,t=p.b,C=p.c,E=p.d,v=p.tx,w=p.ty;0==g&&0==h||p.append(1,0,0,1,g,h);1==e/k&&1==f/n||p.append(k/e,0,0,n/f,0,0);g=p.a;h=p.b;k=p.c;n=p.d;var q=p.tx,x=p.ty;p.a=u;p.b=t;p.c=C;p.d=E;p.tx=v;p.ty=w;u=a._sourceWidth;t=a._sourceHeight;a=e;p=f;b/=u;c/=t;e/=u;f/=t;u=this.vertices;t=4*this.currentBatchSize*this.vertSize;C=this.worldAlpha;u[t++]=q;u[t++]=x;u[t++]=b;u[t++]=c;u[t++]=C;u[t++]=g*a+q;u[t++]=h*a+x;u[t++]=e+b;u[t++]=c;u[t++]=C;u[t++]=g*a+k*p+q;u[t++]=
n*p+h*a+x;u[t++]=e+b;u[t++]=f+c;u[t++]=C;u[t++]=k*p+q;u[t++]=n*p+x;u[t++]=b;u[t++]=f+c;u[t++]=C;this.currentBatchSize++};b.useGlow=function(b,e,f,r,l,g,h,k,n){var q=this.filters[0],p=q.distance||0,u=q.angle||0,t=0,C=0;0!=p&&0!=u&&(t=Math.ceil(p*c.NumberUtils.cos(u)),C=Math.ceil(p*c.NumberUtils.sin(u)));var p=q.quality,u=q.blurX/10,E=q.blurY/10,v=k+2*u+20+Math.abs(t),w=n+2*E+20+Math.abs(C);a.initWebGLCanvas();var x=c.RenderTexture.WebGLRenderer,y=c.RenderTexture.WebGLCanvas,z=c.RenderTexture.create();
z._bitmapData||z.init();z.setSize(v,w);z._sourceWidth=v;z._sourceHeight=w;var A=c.RenderTexture.create();A._bitmapData||A.init();A.setSize(v,w);A._sourceWidth=v;A._sourceHeight=w;x.clearScreen();x.filterType="colorTransform";x.setGlobalColorTransform([0,0,0,0,q._red,0,0,0,0,q._green,0,0,0,0,q._blue,0,0,0,0,255*q.alpha]);x.setAlpha(1,c.BlendMode.NORMAL);x.setTransform(new c.Matrix(1,0,0,1,0,0));x.drawImage(b,e,f,r,l,u+10,E+10,k,n);x._drawWebGL();x.filterType=null;z.canvasContext.clearRect(0,0,v,w);
z.canvasContext.drawImage(y,0,0,v,w,0,0,v,w);x.clearScreen();x.setAlpha(1,c.BlendMode.NORMAL);x.setTransform(new c.Matrix(1,0,0,1,0,0));x.filterType="blur";x.setBlurData(u,0);c.Texture.deleteWebGLTexture(z);x.drawImage(z,u,E,v-2*u,w-2*E,u,E,v-2*u,w-2*E);x._drawWebGL();x.filterType=null;A.canvasContext.clearRect(0,0,v,w);A.canvasContext.drawImage(y,0,0,v,w,0,0,v,w);x.clearScreen();x.setAlpha(1,c.BlendMode.NORMAL);x.setTransform(new c.Matrix(1,0,0,1,0,0));x.filterType="blur";x.setBlurData(0,E);c.Texture.deleteWebGLTexture(A);
x.drawImage(A,0,E,v,w-2*E,0,E+5,v,w-2*E);x._drawWebGL();x.filterType=null;z.canvasContext.clearRect(0,0,v,w);z.canvasContext.drawImage(y,0,0,v,w,0,0,v,w);x.clearScreen();x.setAlpha(1,c.BlendMode.NORMAL);x.setTransform(new c.Matrix(1,0,0,1,0,0));c.Texture.deleteWebGLTexture(z);for(q=0;q<p;q++)x.drawImage(z,0,0,v,w,t,C,v,w);x._drawWebGL();x.gl.blendFunc(this.gl.SRC_ALPHA,this.gl.ONE_MINUS_SRC_ALPHA);x.currentBlendMode=null;x.drawImage(b,e,f,r,l,g+u+10,h+E+15,k,n);x._drawWebGL();A.canvasContext.clearRect(0,
0,v,w);A.canvasContext.drawImage(y,0,0,v,w,0,0,v,w);c.Texture.deleteWebGLTexture(A);this._drawImage(A,0,0,v,w,g-u-10,h-E-15,v,w);this._drawWebGL();c.RenderTexture.release(z);c.RenderTexture.release(A)};b._drawWebGL=function(){if(0!=this.currentBatchSize&&!this.contextLost){var a=c.getTimer();this.start();var b=this.gl;b.bindTexture(b.TEXTURE_2D,this.currentBaseTexture);var e=this.vertices.subarray(0,4*this.currentBatchSize*this.vertSize);b.bufferSubData(b.ARRAY_BUFFER,0,e);b.drawElements(b.TRIANGLES,
6*this.currentBatchSize,b.UNSIGNED_SHORT,0);this.currentBatchSize=0;this.renderCost+=c.getTimer()-a;c.Profiler.getInstance().onDrawImage()}};b.setTransform=function(a){var b=this.worldTransform;b.a=a.a;b.b=a.b;b.c=a.c;b.d=a.d;b.tx=a.tx;b.ty=a.ty};b.setAlpha=function(a,b){this.worldAlpha=a;this.setBlendMode(b)};b.createWebGLTexture=function(a){a=a._bitmapData;a.webGLTexture||(a.webGLTexture={});if(!a.webGLTexture[this.glID]){var b=this.gl;a.webGLTexture[this.glID]=b.createTexture();a.webGLTexture[this.glID].glContext=
b;b.bindTexture(b.TEXTURE_2D,a.webGLTexture[this.glID]);b.pixelStorei(b.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0);b.texImage2D(b.TEXTURE_2D,0,b.RGBA,b.RGBA,b.UNSIGNED_BYTE,a);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MAG_FILTER,b.LINEAR);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,b.LINEAR);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_S,b.CLAMP_TO_EDGE);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_T,b.CLAMP_TO_EDGE);b.bindTexture(b.TEXTURE_2D,null)}};b.pushMask=function(a){this._drawWebGL();var b=this.gl;
0==this.maskList.length&&b.enable(b.SCISSOR_TEST);a=this.getScissorRect(a);this.maskList.push(a);this.scissor(a.x,a.y,a.width,a.height)};b.getScissorRect=function(a){var b=this.maskList[this.maskList.length-1],e,f,l;b?b.intersects(b)?(e=Math.max(a.x+this.worldTransform.tx,b.x),f=Math.max(a.y+this.worldTransform.ty,b.y),l=Math.min(a.x+this.worldTransform.tx+a.width,b.x+b.width)-e,a=Math.min(a.y+this.worldTransform.ty+a.height,b.y+b.height)-f):a=l=f=e=0:(e=a.x+this.worldTransform.tx,f=a.y+this.worldTransform.ty,
l=a.width,a=a.height);(b=this.maskDataFreeList.pop())?(b.x=e,b.y=f,b.width=l,b.height=a):b=new c.Rectangle(e,f,l,a);return b};b.popMask=function(){this._drawWebGL();var a=this.gl,b=this.maskList.pop();this.maskDataFreeList.push(b);b=this.maskList.length;0!=b?(b=this.maskList[b-1],(0<b.width||0<b.height)&&this.scissor(b.x,b.y,b.width,b.height)):a.disable(a.SCISSOR_TEST)};b.scissor=function(a,b,e,f){var l=this.gl;0>e&&(e=0);0>f&&(f=0);l.scissor(a,-b+c.MainContext.instance.stage.stageHeight-f,e,f)};
b.setGlobalColorTransform=function(a){this._drawWebGL();if(a){a=a.concat();var b=this.shaderManager.colorTransformShader;b.uniforms.colorAdd.value.w=a.splice(19,1)[0]/255;b.uniforms.colorAdd.value.z=a.splice(14,1)[0]/255;b.uniforms.colorAdd.value.y=a.splice(9,1)[0]/255;b.uniforms.colorAdd.value.x=a.splice(4,1)[0]/255;b.uniforms.matrix.value=a}};b.setBlurData=function(a,b){var c=this.shaderManager.blurShader;c.uniforms.blur.value.x=a;c.uniforms.blur.value.y=b};b.setGlobalFilters=function(a){this._drawWebGL();
this.setFilterProperties(a)};b.setFilterProperties=function(a){if((this.filters=a)&&a.length)for(var b=0;1>b;b++){var c=a[b];this.filterType=c.type;switch(c.type){case "blur":this.setBlurData(c.blurX,c.blurY);break;case "colorTransform":this.setGlobalColorTransform(c._matrix)}}else this.filterType=null};b.setupFont=function(a,b){void 0===b&&(b=null);this.canvasContext.setupFont(a,b)};b.measureText=function(a){return this.canvasContext.measureText(a)};b.renderGraphics=function(a){this._drawWebGL();
var b=this.gl,c=this.shaderManager.primitiveShader;this.graphicsPoints?(this.graphicsPoints.length=0,this.graphicsIndices.length=0):(this.graphicsPoints=[],this.graphicsIndices=[],this.graphicsBuffer=b.createBuffer(),this.graphicsIndexBuffer=b.createBuffer());this.updateGraphics(a);this.shaderManager.activateShader(c);b.blendFunc(b.ONE,b.ONE_MINUS_SRC_ALPHA);b.uniformMatrix3fv(c.translationMatrix,!1,this.worldTransform.toArray(!0));b.uniform2f(c.projectionVector,this.projectionX,-this.projectionY);
b.uniform2f(c.offsetVector,0,0);b.uniform3fv(c.tintColor,[1,1,1]);b.uniform1f(c.alpha,this.worldAlpha);b.bindBuffer(b.ARRAY_BUFFER,this.graphicsBuffer);b.vertexAttribPointer(c.aVertexPosition,2,b.FLOAT,!1,24,0);b.vertexAttribPointer(c.colorAttribute,4,b.FLOAT,!1,24,8);b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,this.graphicsIndexBuffer);b.drawElements(b.TRIANGLE_STRIP,this.graphicsIndices.length,b.UNSIGNED_SHORT,0);this.shaderManager.activateShader(this.shaderManager.defaultShader)};b.updateGraphics=function(a){var b=
this.gl;this.buildRectangle(a);b.bindBuffer(b.ARRAY_BUFFER,this.graphicsBuffer);b.bufferData(b.ARRAY_BUFFER,new Float32Array(this.graphicsPoints),b.STATIC_DRAW);b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,this.graphicsIndexBuffer);b.bufferData(b.ELEMENT_ARRAY_BUFFER,new Uint16Array(this.graphicsIndices),b.STATIC_DRAW)};b.buildRectangle=function(a){var b=a.x,c=a.y,e=a.w;a=a.h;var f=this.graphicsStyle.a,g=this.graphicsStyle.r*f,h=this.graphicsStyle.g*f,k=this.graphicsStyle.b*f,n=this.graphicsPoints,q=this.graphicsIndices,
p=n.length/6;n.push(b,c);n.push(g,h,k,f);n.push(b+e,c);n.push(g,h,k,f);n.push(b,c+a);n.push(g,h,k,f);n.push(b+e,c+a);n.push(g,h,k,f);q.push(p,p,p+1,p+2,p+3,p+3)};b.setGraphicsStyle=function(a,b,c,e){this.graphicsStyle.r=a;this.graphicsStyle.g=b;this.graphicsStyle.b=c;this.graphicsStyle.a=e};a.glID=0;a.isInit=!1;return a}(c.RendererContext);c.WebGLRenderer=f;f.prototype.__class__="egret.WebGLRenderer"})(egret||(egret={}));var egret_webgl_graphics;
(function(c){c.beginFill=function(c,a){void 0===a&&(a=1);this._pushCommand(new f(this._setStyle,this,[(c>>16)/255,((c&65280)>>8)/255,(c&255)/255,a]))};c.beginGradientFill=function(c,a,b,d,f){};c.drawRect=function(c,a,b,d){this._pushCommand(new f(function(a){this.renderContext.renderGraphics(a)},this,[{x:c,y:a,w:b,h:d}]));this._checkRect(c,a,b,d)};c.drawCircle=function(c,a,b){};c.drawRoundRect=function(c,a,b,d,f,s){};c.drawEllipse=function(c,a,b,d){};c.lineStyle=function(c,a,b,d,f,s,r,l){};c.lineTo=
function(c,a){};c.curveTo=function(c,a,b,d){};c.cubicCurveTo=function(c,a,b,d,f,s){};c.moveTo=function(c,a){};c.clear=function(){this._maxY=this._maxX=this._minY=this._minX=this.commandQueue.length=0};c.endFill=function(){};c._pushCommand=function(c){this.commandQueue.push(c)};c._draw=function(c){var a=this.commandQueue.length;if(0!=a)for(this.renderContext=c,c=0;c<a;c++){var b=this.commandQueue[c];b.method.apply(b.thisObject,b.args)}};var f=function(){return function(c,a,b){this.method=c;this.thisObject=
a;this.args=b}}();f.prototype.__class__="egret_webgl_graphics.Command";c._setStyle=function(c,a,b,d){this.renderContext.setGraphicsStyle(c,a,b,d)};c.init=function(){for(var e in c)egret.Graphics.prototype[e]=c[e]}})(egret_webgl_graphics||(egret_webgl_graphics={}));
(function(c){var f=function(){function e(){}e.compileProgram=function(a,b,d){d=e.compileFragmentShader(a,d);b=e.compileVertexShader(a,b);var f=a.createProgram();a.attachShader(f,b);a.attachShader(f,d);a.linkProgram(f);a.getProgramParameter(f,a.LINK_STATUS)||c.$warn(1020);return f};e.compileFragmentShader=function(a,b){return e._compileShader(a,b,a.FRAGMENT_SHADER)};e.compileVertexShader=function(a,b){return e._compileShader(a,b,a.VERTEX_SHADER)};e._compileShader=function(a,b,d){d=a.createShader(d);
a.shaderSource(d,b);a.compileShader(d);return a.getShaderParameter(d,a.COMPILE_STATUS)?d:(c.Logger.info(a.getShaderInfoLog(d)),null)};e.checkCanUseWebGL=function(){if(void 0==e.canUseWebGL)try{var a=document.createElement("canvas");e.canUseWebGL=!!window.WebGLRenderingContext&&!(!a.getContext("webgl")&&!a.getContext("experimental-webgl"))}catch(b){e.canUseWebGL=!1}return e.canUseWebGL};return e}();c.WebGLUtils=f;f.prototype.__class__="egret.WebGLUtils"})(egret||(egret={}));
(function(c){var f=function(){function e(a){this.defaultVertexSrc="attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec2 aColor;\nuniform vec2 projectionVector;\nuniform vec2 offsetVector;\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nconst vec2 center = vec2(-1.0, 1.0);\nvoid main(void) {\n   gl_Position = vec4( ((aVertexPosition + offsetVector) / projectionVector) + center , 0.0, 1.0);\n   vTextureCoord = aTextureCoord;\n   vColor = vec4(aColor.x, aColor.x, aColor.x, aColor.x);\n}";
this.program=this.gl=null;this.fragmentSrc="precision lowp float;\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nuniform sampler2D uSampler;\nvoid main(void) {\ngl_FragColor = texture2D(uSampler, vTextureCoord) * vColor ;\n}";this.uniforms=null;this.gl=a;this.init()}var a=e.prototype;a.init=function(){var a=this.gl,d=c.WebGLUtils.compileProgram(a,this.defaultVertexSrc,this.fragmentSrc);a.useProgram(d);this.uSampler=a.getUniformLocation(d,"uSampler");this.projectionVector=a.getUniformLocation(d,
"projectionVector");this.offsetVector=a.getUniformLocation(d,"offsetVector");this.dimensions=a.getUniformLocation(d,"dimensions");this.aVertexPosition=a.getAttribLocation(d,"aVertexPosition");this.aTextureCoord=a.getAttribLocation(d,"aTextureCoord");this.colorAttribute=a.getAttribLocation(d,"aColor");-1===this.colorAttribute&&(this.colorAttribute=2);this.attributes=[this.aVertexPosition,this.aTextureCoord,this.colorAttribute];for(var e in this.uniforms)this.uniforms[e].uniformLocation=a.getUniformLocation(d,
e);this.initUniforms();this.program=d};a.initUniforms=function(){if(this.uniforms){var a=this.gl,d,c;for(c in this.uniforms){d=this.uniforms[c];var e=d.type;"mat2"===e||"mat3"===e||"mat4"===e?(d.glMatrix=!0,d.glValueLength=1,"mat2"===e?d.glFunc=a.uniformMatrix2fv:"mat3"===e?d.glFunc=a.uniformMatrix3fv:"mat4"===e&&(d.glFunc=a.uniformMatrix4fv)):(d.glFunc=a["uniform"+e],d.glValueLength="2f"===e||"2i"===e?2:"3f"===e||"3i"===e?3:"4f"===e||"4i"===e?4:1)}}};a.syncUniforms=function(){if(this.uniforms){var a,
d=this.gl,c;for(c in this.uniforms)a=this.uniforms[c],1===a.glValueLength?!0===a.glMatrix?a.glFunc.call(d,a.uniformLocation,a.transpose,a.value):a.glFunc.call(d,a.uniformLocation,a.value):2===a.glValueLength?a.glFunc.call(d,a.uniformLocation,a.value.x,a.value.y):3===a.glValueLength?a.glFunc.call(d,a.uniformLocation,a.value.x,a.value.y,a.value.z):4===a.glValueLength&&a.glFunc.call(d,a.uniformLocation,a.value.x,a.value.y,a.value.z,a.value.w)}};return e}();c.EgretShader=f;f.prototype.__class__="egret.EgretShader"})(egret||
(egret={}));
(function(c){var f=function(c){function a(a){c.call(this,a);this.fragmentSrc="precision mediump float;\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nuniform float invert;\nuniform mat4 matrix;\nuniform vec4 colorAdd;\nuniform sampler2D uSampler;\nvoid main(void) {\nvec4 texColor = texture2D(uSampler, vTextureCoord);\nvec4 locColor = texColor * matrix;\nif(texColor.a != 0.0){\nlocColor += colorAdd;\n}\ngl_FragColor = vColor*vec4(locColor.rgb*locColor.a,locColor.a);\n}";this.uniforms={matrix:{type:"mat4",
value:[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]},colorAdd:{type:"4f",value:{x:0,y:0,z:0,w:0}}};this.init()}__extends(a,c);return a}(c.EgretShader);c.ColorTransformShader=f;f.prototype.__class__="egret.ColorTransformShader"})(egret||(egret={}));
(function(c){var f=function(c){function a(a){c.call(this,a);this.fragmentSrc="precision mediump float;uniform vec2 blur;uniform sampler2D uSampler;varying vec2 vTextureCoord;void main(){gl_FragColor = vec4(0.0);gl_FragColor += texture2D(uSampler, (vTextureCoord + vec2(-0.028 * blur.x, -0.028 * blur.y))) * 0.0044299121055113265;gl_FragColor += texture2D(uSampler, (vTextureCoord + vec2(-0.024 * blur.x, -0.024 * blur.y))) * 0.00895781211794;gl_FragColor += texture2D(uSampler, (vTextureCoord + vec2(-0.020 * blur.x, -0.020 * blur.y))) * 0.0215963866053;gl_FragColor += texture2D(uSampler, (vTextureCoord + vec2(-0.016 * blur.x, -0.016 * blur.y))) * 0.0443683338718;gl_FragColor += texture2D(uSampler, (vTextureCoord + vec2(-0.012 * blur.x, -0.012 * blur.y))) * 0.0776744219933;gl_FragColor += texture2D(uSampler, (vTextureCoord + vec2(-0.008 * blur.x, -0.008 * blur.y))) * 0.115876621105;gl_FragColor += texture2D(uSampler, (vTextureCoord + vec2(-0.004 * blur.x, -0.004 * blur.y))) * 0.147308056121;gl_FragColor += texture2D(uSampler, vTextureCoord) * 0.159576912161;gl_FragColor += texture2D(uSampler, (vTextureCoord + vec2( 0.004 * blur.x,  0.004 * blur.y))) * 0.147308056121;gl_FragColor += texture2D(uSampler, (vTextureCoord + vec2( 0.008 * blur.x,  0.008 * blur.y))) * 0.115876621105;gl_FragColor += texture2D(uSampler, (vTextureCoord + vec2( 0.012 * blur.x,  0.012 * blur.y))) * 0.0776744219933;gl_FragColor += texture2D(uSampler, (vTextureCoord + vec2( 0.016 * blur.x,  0.016 * blur.y))) * 0.0443683338718;gl_FragColor += texture2D(uSampler, (vTextureCoord + vec2( 0.020 * blur.x,  0.020 * blur.y))) * 0.0215963866053;gl_FragColor += texture2D(uSampler, (vTextureCoord + vec2( 0.024 * blur.x,  0.024 * blur.y))) * 0.00895781211794;gl_FragColor += texture2D(uSampler, (vTextureCoord + vec2( 0.028 * blur.x,  0.028 * blur.y))) * 0.0044299121055113265;}";this.uniforms=
{blur:{type:"2f",value:{x:2,y:2}}};this.init()}__extends(a,c);return a}(c.EgretShader);c.BlurShader=f;f.prototype.__class__="egret.BlurShader"})(egret||(egret={}));
(function(c){var f=function(){function e(a){this.alpha=this.translationMatrix=this.attributes=this.colorAttribute=this.aVertexPosition=this.tintColor=this.offsetVector=this.projectionVector=this.program=this.gl=null;this.fragmentSrc="precision mediump float;\nvarying vec4 vColor;\nvoid main(void) {\n   gl_FragColor = vColor;\n}";this.vertexSrc="attribute vec2 aVertexPosition;\nattribute vec4 aColor;\nuniform mat3 translationMatrix;\nuniform vec2 projectionVector;\nuniform vec2 offsetVector;\nuniform float alpha;\nuniform vec3 tint;\nvarying vec4 vColor;\nvoid main(void) {\n   vec3 v = translationMatrix * vec3(aVertexPosition , 1.0);\n   v -= offsetVector.xyx;\n   gl_Position = vec4( v.x / projectionVector.x -1.0, v.y / -projectionVector.y + 1.0 , 0.0, 1.0);\n   vColor = aColor * vec4(tint * alpha, alpha);\n}";
this.gl=a;this.init()}e.prototype.init=function(){var a=this.gl,b=c.WebGLUtils.compileProgram(a,this.vertexSrc,this.fragmentSrc);a.useProgram(b);this.projectionVector=a.getUniformLocation(b,"projectionVector");this.offsetVector=a.getUniformLocation(b,"offsetVector");this.tintColor=a.getUniformLocation(b,"tint");this.aVertexPosition=a.getAttribLocation(b,"aVertexPosition");this.colorAttribute=a.getAttribLocation(b,"aColor");this.attributes=[this.aVertexPosition,this.colorAttribute];this.translationMatrix=
a.getUniformLocation(b,"translationMatrix");this.alpha=a.getUniformLocation(b,"alpha");this.program=b};return e}();c.PrimitiveShader=f;f.prototype.__class__="egret.PrimitiveShader"})(egret||(egret={}));
(function(c){var f=function(){function e(a){this.gl=null;this.maxAttibs=10;this.attribState=[];this.tempAttribState=[];this.blurShader=this.colorTransformShader=this.primitiveShader=this.defaultShader=this.currentShader=null;for(var d=0;d<this.maxAttibs;d++)this.attribState[d]=!1;this.setContext(a)}var a=e.prototype;a.setContext=function(a){this.gl=a;this.primitiveShader=new c.PrimitiveShader(a);this.defaultShader=new c.EgretShader(a);this.colorTransformShader=new c.ColorTransformShader(a);this.blurShader=
new c.BlurShader(a);this.activateShader(this.defaultShader)};a.activateShader=function(a){this.currentShader!=a&&(this.gl.useProgram(a.program),this.setAttribs(a.attributes),this.currentShader=a)};a.setAttribs=function(a){var d,c;c=this.tempAttribState.length;for(d=0;d<c;d++)this.tempAttribState[d]=!1;c=a.length;for(d=0;d<c;d++)this.tempAttribState[a[d]]=!0;a=this.gl;c=this.attribState.length;for(d=0;d<c;d++)this.attribState[d]!==this.tempAttribState[d]&&(this.attribState[d]=this.tempAttribState[d],
this.tempAttribState[d]?a.enableVertexAttribArray(d):a.disableVertexAttribArray(d))};return e}();c.WebGLShaderManager=f;f.prototype.__class__="egret.WebGLShaderManager"})(egret||(egret={}));
(function(c){var f=function(e){function a(){e.call(this);c.Texture.createBitmapData=c.Texture._createBitmapDataForCanvasAndWebGl}__extends(a,e);var b=a.prototype;b.initVersion=function(a){this._versionCtr=a};b.proceed=function(a){function b(){if(4==f.readyState)if(f.status!=a._status&&(a._status=f.status,c.HTTPStatusEvent.dispatchHTTPStatusEvent(a,f.status)),400<=f.status||0==f.status)c.IOErrorEvent.dispatchIOErrorEvent(a);else{switch(a.dataFormat){case c.URLLoaderDataFormat.TEXT:a.data=f.responseText;
break;case c.URLLoaderDataFormat.VARIABLES:a.data=new c.URLVariables(f.responseText);break;case c.URLLoaderDataFormat.BINARY:a.data=f.response;break;default:a.data=f.responseText}c.__callAsync(c.Event.dispatchEvent,c.Event,a,c.Event.COMPLETE)}}if(a.dataFormat==c.URLLoaderDataFormat.TEXTURE)this.loadTexture(a);else if(a.dataFormat==c.URLLoaderDataFormat.SOUND)c.Html5Capatibility._audioType==c.AudioType.WEB_AUDIO?this.loadWebAudio(a):c.Html5Capatibility._audioType==c.AudioType.QQ_AUDIO?this.loadQQAudio(a):
this.loadSound(a);else{var e=a._request,f=this.getXHR();f.onreadystatechange=b;var l=this.getVirtualUrl(c.NetContext._getUrl(e));f.open(e.method,l,!0);this.setResponseType(f,a.dataFormat);e.method!=c.URLRequestMethod.GET&&e.data?e.data instanceof c.URLVariables?(f.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),f.send(e.data.toString())):(f.setRequestHeader("Content-Type","multipart/form-data"),f.send(e.data)):f.send()}};b.loadSound=function(a){function b(f){c.clearTimeout(l.__timeoutId);
l.removeEventListener("canplaythrough",b,!1);l.removeEventListener("error",e,!1);f=new c.Html5Audio;f._setAudio(l);var h=new c.Sound;h._setAudio(f);a.data=h;c.__callAsync(c.Event.dispatchEvent,c.Event,a,c.Event.COMPLETE)}function e(f){c.clearTimeout(l.__timeoutId);l.removeEventListener("canplaythrough",b,!1);l.removeEventListener("error",e,!1);c.IOErrorEvent.dispatchIOErrorEvent(a)}var f=this.getVirtualUrl(a._request.url),l=new Audio(f);l.__timeoutId=c.setTimeout(b,this,100);l.addEventListener("canplaythrough",
b,!1);l.addEventListener("error",e,!1);l.load()};b.loadQQAudio=function(a){var b=c.Html5Capatibility._QQRootPath+this.getVirtualUrl(a._request.url);console.log("loadQQAudio");QZAppExternal.preloadSound(function(e){if(0==e.code){e=new c.QQAudio;e._setPath(b);var f=new c.Sound;f._setAudio(e);a.data=f;c.__callAsync(c.Event.dispatchEvent,c.Event,a,c.Event.COMPLETE)}else c.IOErrorEvent.dispatchIOErrorEvent(a)},{bid:-1,url:b,refresh:1})};b.loadWebAudio=function(a){var b=this.getVirtualUrl(a._request.url),
e=new XMLHttpRequest;e.open("GET",b,!0);e.responseType="arraybuffer";console.log("loadWebAudio");e.onload=function(){var f=new c.WebAudio;f._setArrayBuffer(e.response,b,function(){var b=new c.Sound;b._setAudio(f);a.data=b;c.__callAsync(c.Event.dispatchEvent,c.Event,a,c.Event.COMPLETE)})};e.send()};b.getXHR=function(){return window.XMLHttpRequest?new window.XMLHttpRequest:new ActiveXObject("MSXML2.XMLHTTP")};b.setResponseType=function(a,b){switch(b){case c.URLLoaderDataFormat.TEXT:case c.URLLoaderDataFormat.VARIABLES:a.responseType=
c.URLLoaderDataFormat.TEXT;break;case c.URLLoaderDataFormat.BINARY:a.responseType="arraybuffer";break;default:a.responseType=b}};b.loadTexture=function(a){var b=this.getVirtualUrl(a._request.url);c.Browser.getInstance().webPSupport&&0!=b.indexOf("http:")&&(-1!=b.indexOf(".png")?b=b.replace(".png",".webp"):-1!=b.indexOf(".jpg")&&(b=b.replace(".jpg",".webp")));c.Texture.createBitmapData(b,function(b,e){if(0!=b)c.IOErrorEvent.dispatchIOErrorEvent(a);else{var f=new c.Texture;f._setBitmapData(e);a.data=
f;c.__callAsync(c.Event.dispatchEvent,c.Event,a,c.Event.COMPLETE)}})};b.getVirtualUrl=function(a){return this._versionCtr?this._versionCtr.getVirtualUrl(a):a};return a}(c.NetContext);c.HTML5NetContext=f;f.prototype.__class__="egret.HTML5NetContext"})(egret||(egret={}));
(function(c){var f=function(e){function a(){e.call(this);this._isTouchDown=!1;this.rootDiv=null;this.rootDiv=document.getElementById(c.StageDelegate.canvas_div_name);if(!this.rootDiv){var a=document.getElementById(c.StageDelegate.egret_root_div);this.rootDiv=c.Browser.getInstance().$new("div");this.rootDiv.id=c.StageDelegate.canvas_div_name;a.appendChild(this.rootDiv)}}__extends(a,e);var b=a.prototype;b.prevent=function(a){a.stopPropagation();!0==a.isScroll||c.HTMLInput.getInstance().isInputOn()||
a.preventDefault()};b.run=function(){var a=this;window.navigator.msPointerEnabled?(this.rootDiv.addEventListener("MSPointerDown",function(b){a._onTouchBegin(b);a.prevent(b)},!1),this.rootDiv.addEventListener("MSPointerMove",function(b){a._onTouchMove(b);a.prevent(b)},!1),this.rootDiv.addEventListener("MSPointerUp",function(b){a._onTouchEnd(b);a.prevent(b)},!1)):c.MainContext.deviceType==c.MainContext.DEVICE_MOBILE?this.addTouchListener():c.MainContext.deviceType==c.MainContext.DEVICE_PC&&(this.addTouchListener(),
this.addMouseListener());window.addEventListener("mousedown",function(b){a.inOutOfCanvas(b)?a.dispatchLeaveStageEvent():a._isTouchDown=!0});window.addEventListener("mouseup",function(b){a._isTouchDown&&(a.inOutOfCanvas(b)?a.dispatchLeaveStageEvent():a._onTouchEnd(b));a._isTouchDown=!1})};b.addMouseListener=function(){var a=this;this.rootDiv.addEventListener("mousedown",function(b){a._onTouchBegin(b)});this.rootDiv.addEventListener("mousemove",function(b){a._onTouchMove(b)});this.rootDiv.addEventListener("mouseup",
function(b){a._onTouchEnd(b)})};b.addTouchListener=function(){var a=this;this.rootDiv.addEventListener("touchstart",function(b){for(var c=b.changedTouches.length,e=0;e<c;e++)a._onTouchBegin(b.changedTouches[e]);a.prevent(b)},!1);this.rootDiv.addEventListener("touchmove",function(b){for(var c=b.changedTouches.length,e=0;e<c;e++)a._onTouchMove(b.changedTouches[e]);a.prevent(b)},!1);this.rootDiv.addEventListener("touchend",function(b){for(var c=b.changedTouches.length,e=0;e<c;e++)a._onTouchEnd(b.changedTouches[e]);
a.prevent(b)},!1);this.rootDiv.addEventListener("touchcancel",function(b){for(var c=b.changedTouches.length,e=0;e<c;e++)a._onTouchEnd(b.changedTouches[e]);a.prevent(b)},!1)};b.inOutOfCanvas=function(a){var b=this.getLocation(this.rootDiv,a);a=b.x;var b=b.y,e=c.MainContext.instance.stage;return 0>a||0>b||a>e.stageWidth||b>e.stageHeight?!0:!1};b.dispatchLeaveStageEvent=function(){this.touchingIdentifiers.length=0;c.MainContext.instance.stage.dispatchEventWith(c.Event.LEAVE_STAGE)};b._onTouchBegin=function(a){var b=
this.getLocation(this.rootDiv,a),c=-1;a.hasOwnProperty("identifier")&&(c=a.identifier);this.onTouchBegan(b.x,b.y,c)};b._onTouchMove=function(a){var b=this.getLocation(this.rootDiv,a),c=-1;a.hasOwnProperty("identifier")&&(c=a.identifier);this.onTouchMove(b.x,b.y,c)};b._onTouchEnd=function(a){var b=this.getLocation(this.rootDiv,a),c=-1;a.hasOwnProperty("identifier")&&(c=a.identifier);this.onTouchEnd(b.x,b.y,c)};b.getLocation=function(a,b){var e=document.documentElement,f=window,l,g;"function"===typeof a.getBoundingClientRect?
(g=a.getBoundingClientRect(),l=g.left,g=g.top):g=l=0;l+=f.pageXOffset-e.clientLeft;g+=f.pageYOffset-e.clientTop;null!=b.pageX?(e=b.pageX,f=b.pageY):(l-=document.body.scrollLeft,g-=document.body.scrollTop,e=b.clientX,f=b.clientY);var h=c.Point.identity;h.x=(e-l)/c.StageDelegate.getInstance().getScaleX();h.y=(f-g)/c.StageDelegate.getInstance().getScaleY();return h};return a}(c.TouchContext);c.HTML5TouchContext=f;f.prototype.__class__="egret.HTML5TouchContext"})(egret||(egret={}));
(function(c){var f=function(a){function b(){a.call(this);this._isNeedShow=!1;this.inputDiv=this.inputElement=null;this._gscaleY=this._gscaleX=0;this._isNeesHide=!1;this.textValue="";this._styleInfoes={};e.getInstance()}__extends(b,a);var d=b.prototype;d._initElement=function(a,b,d,e){var f=c.StageDelegate.getInstance().getScaleX(),h=c.StageDelegate.getInstance().getScaleY();this.inputDiv.style.left=a*f+"px";this._textfield._TF_Props_._multiline?(this.inputDiv.style.top=b*h+"px",this.inputElement.style.top=
-this._textfield._TF_Props_._lineSpacing/2+"px"):(this.inputDiv.style.top=b*h+"px",this.inputElement.style.top="0px");this._gscaleX=f*d;this._gscaleY=h*e};d._show=function(a,b,d,c){this._multiline=a;e.getInstance().isCurrentStageText(this)?this.inputElement.onblur=null:(this.inputElement=e.getInstance().getInputElement(this),this.inputDiv=e.getInstance()._inputDIV);this._isNeedShow=e.getInstance()._needShow=!0};d.onBlurHandler=function(){e.getInstance().clearInputElement();window.scrollTo(0,0)};d.executeShow=
function(){this.inputElement.value=this._getText();null==this.inputElement.onblur&&(this.inputElement.onblur=this.onBlurHandler);this._resetStageText();0<this._textfield._TF_Props_._maxChars?this.inputElement.setAttribute("maxlength",this._textfield._TF_Props_._maxChars):this.inputElement.removeAttribute("maxlength");this.inputElement.selectionStart=this.inputElement.value.length;this.inputElement.selectionEnd=this.inputElement.value.length;this.inputElement.focus()};d._hide=function(){this._isNeesHide=
!0;0<=c.Browser.getInstance().getUserAgent().indexOf("ios")&&e.getInstance().disconnectStageText(this)};d._getText=function(){this.textValue||(this.textValue="");return this.textValue};d._setText=function(a){this.textValue=a;this.resetText()};d.resetText=function(){this.inputElement&&(this.inputElement.value=this.textValue)};d.$onBlur=function(){c.Html5Capatibility._System_OS==c.SystemOSType.WPHONE&&c.Event.dispatchEvent(this,"updateText",!1)};d._onInput=function(){if(c.Html5Capatibility._System_OS==
c.SystemOSType.WPHONE){var a=this._textfield._TF_Props_;null==a._restrictAnd&&null==a._restrictNot&&(this.textValue=this.inputElement.value,c.Event.dispatchEvent(this,"updateText",!1),this._textfield._getLinesArr(),this.setAreaHeight())}else this.inputElement.selectionStart==this.inputElement.selectionEnd&&(this.textValue=this.inputElement.value,c.Event.dispatchEvent(this,"updateText",!1),this._textfield._getLinesArr(),this.setAreaHeight())};d.setAreaHeight=function(){var a=this._textfield;if(a.multiline){var b=
c.TextFieldUtils._getTextHeight(a);if(a.height<b)this.setElementStyle("height",(a.height+a.lineSpacing)*this._gscaleY+"px"),this.setElementStyle("padding","0px");else{this.setElementStyle("height",(b+a.lineSpacing)*this._gscaleY+"px");var b=(a.height-b)*this._gscaleY,d=c.TextFieldUtils._getValign(a),d=b*d;this.setElementStyle("padding",d+"px 0px "+(b-d)+"px 0px")}this.setElementStyle("lineHeight",(a.size+a.lineSpacing)*this._gscaleY+"px")}};d._onClickHandler=function(a){this._isNeedShow&&(a.stopImmediatePropagation(),
this._isNeedShow=!1,this.executeShow(),this.dispatchEvent(new c.Event("focus")))};d._onDisconnect=function(){this.inputElement=null;this.dispatchEvent(new c.Event("blur"))};d.setElementStyle=function(a,b){this.inputElement&&this._styleInfoes[a]!=b&&(this.inputElement.style[a]=b)};d._removeInput=function(){this.inputElement&&e.getInstance().disconnectStageText(this)};d._resetStageText=function(){if(this.inputElement){var a=this._textfield,b=a._TF_Props_;this.setElementStyle("fontFamily",b._fontFamily);
this.setElementStyle("fontStyle",b._italic?"italic":"normal");this.setElementStyle("fontWeight",b._bold?"bold":"normal");this.setElementStyle("textAlign",b._textAlign);this.setElementStyle("fontSize",b._size*this._gscaleY+"px");this.setElementStyle("color",b._textColorString);this.setElementStyle("width",a._getSize(c.Rectangle.identity).width*this._gscaleX+"px");this.setElementStyle("verticalAlign",b._verticalAlign);if(b._multiline)this.setAreaHeight();else if(this.setElementStyle("lineHeight",a.size*
this._gscaleY+"px"),a.height<a.size)this.setElementStyle("height",a.height*this._gscaleY+"px"),this.setElementStyle("padding","0px");else{this.setElementStyle("height",a.size*this._gscaleY+"px");var b=(a.height-a.size)*this._gscaleY,d=c.TextFieldUtils._getValign(a),d=b*d;this.setElementStyle("padding",d+"px 0px "+(b-d)+"px 0px")}this.inputDiv.style.clip="rect(0px "+a.width*this._gscaleX+"px "+a.height*this._gscaleY+"px 0px)";this.inputDiv.style.height=a.height*this._gscaleY+"px";this.inputDiv.style.width=
a.width*this._gscaleX+"px"}};return b}(c.StageText);c.HTML5StageText=f;f.prototype.__class__="egret.HTML5StageText";var e=function(){function a(){this._needShow=!1}var b=a.prototype;b.isInputOn=function(){return null!=this._stageText};b.isCurrentStageText=function(a){return this._stageText==a};b.initValue=function(a){a.style.position="absolute";a.style.left="0px";a.style.top="0px";a.style.border="none";a.style.padding="0"};b._initStageDelegateDiv=function(){var b=this,e=c.Browser.getInstance().$("#StageDelegateDiv");
e||(e=c.Browser.getInstance().$new("div"),e.id="StageDelegateDiv",document.getElementById(c.StageDelegate.egret_root_div).appendChild(e),b.initValue(e),e.style.width="0px",e.style.height="0px",b._inputDIV=c.Browser.getInstance().$new("div"),b.initValue(b._inputDIV),b._inputDIV.style.width="0px",b._inputDIV.style.height="0px",b._inputDIV.style.left="0px",b._inputDIV.style.top="-100px",b._inputDIV.style[c.Browser.getInstance().getTrans("transformOrigin")]="0% 0% 0px",e.appendChild(b._inputDIV),document.getElementById(c.StageDelegate.canvas_div_name).addEventListener("click",
function(e){b._needShow?(b._needShow=!1,c.MainContext.instance.stage._changeSizeDispatchFlag=!1,b._stageText._onClickHandler(e),a.getInstance().show()):b._inputElement&&(b.clearInputElement(),b._inputElement.blur(),b._inputElement=null)}),b.initInputElement(!0),b.initInputElement(!1))};b.initInputElement=function(a){var b=this;a?(a=document.createElement("textarea"),a.style.resize="none",b._multiElement=a,a.id="egretTextarea"):(a=document.createElement("input"),b._simpleElement=a,a.id="egretInput");
a.type="text";b._inputDIV.appendChild(a);a.setAttribute("tabindex","-1");a.style.width="1px";a.style.height="12px";b.initValue(a);a.style.outline="thin";a.style.background="none";a.style.overflow="hidden";a.style.wordBreak="break-all";a.style.opacity=0;a.oninput=function(){b._stageText&&b._stageText._onInput()}};b.show=function(){var a=this._inputElement;c.__callAsync(function(){a.style.opacity=1},this)};b.disconnectStageText=function(a){if(null==this._stageText||this._stageText==a)this.clearInputElement(),
this._inputElement&&this._inputElement.blur()};b.clearInputElement=function(){this._inputElement&&(this._inputElement.value="",this._inputElement.onblur=null,this._inputElement.style.width="1px",this._inputElement.style.height="12px",this._inputElement.style.left="0px",this._inputElement.style.top="0px",this._inputElement.style.opacity=0,(this._simpleElement==this._inputElement?this._multiElement:this._simpleElement).style.display="block",this._inputDIV.style.left="0px",this._inputDIV.style.top="-100px",
this._inputDIV.style.height="0px",this._inputDIV.style.width="0px");this._stageText&&(this._stageText._onDisconnect(),this._stageText=null);c.MainContext.instance.stage._changeSizeDispatchFlag=!0};b.getInputElement=function(a){this.clearInputElement();this._stageText=a;this._inputElement=this._stageText._multiline?this._multiElement:this._simpleElement;(this._simpleElement==this._inputElement?this._multiElement:this._simpleElement).style.display="none";return this._inputElement};a.getInstance=function(){null==
a._instance&&(a._instance=new c.HTMLInput);return a._instance};return a}();c.HTMLInput=e;e.prototype.__class__="egret.HTMLInput"})(egret||(egret={}));egret.StageText.create=function(){egret.HTMLInput.getInstance()._initStageDelegateDiv();return new egret.HTML5StageText};
(function(c){var f=function(){function e(){var a=this;this._loop=!1;this.func=function(d){a._audio.removeEventListener("ended",a.func);a._onEndedCall&&a._onEndedCall.call(null,d);a.clear()};this.paused=!0;this._listeners=[];this._onEndedCall=null;this._volume=1;this._startTime=0}var a=e.prototype;a._play=function(a){this.removeListeners();c.Html5Capatibility._audioMustLoad&&this._audio.load();this.paused=!1;this._audio.autoplay=!0;this._audio.volume=this._volume;this._audio.removeEventListener("ended",
this.func);this._audio.addEventListener("ended",this.func);this.initStart();try{this._audio.currentTime=this._startTime}catch(d){}finally{this._audio.play()}};a.clear=function(){try{this._audio.pause()}catch(a){}finally{this.removeListeners(),this._loop&&!this.paused&&this._play()}};a._pause=function(){this.paused=!0;this._audio.pause()};a._load=function(){this._audio.load()};a._setAudio=function(a){this._audio=a};a.initStart=function(){for(var a=0;a<this._listeners.length;a++){var d=this._listeners[a];
this._audio.addEventListener(d.type,d.listener,d.useCapture)}};a._addEventListener=function(a,d,c){void 0===c&&(c=!1);"ended"==a?this._onEndedCall=d:(this._listeners.push({type:a,listener:d,useCapture:c}),this._audio&&this._audio.addEventListener(a,d,c))};a.removeListeners=function(){for(var a=0;a<this._listeners.length;a++){var d=this._listeners[a];this._audio&&this._audio.removeEventListener(d.type,d.listener,d.useCapture)}};a._removeEventListener=function(a,d,c){void 0===c&&(c=!1);if("ended"==
a)this._onEndedCall=null;else for(var e=0;e<this._listeners.length;e++){var f=this._listeners[e];if(f.listener==d&&f.useCapture==c&&f.type==a){this._listeners.splice(e,1);this._audio&&this._audio.removeEventListener(a,d,c);break}}};a._preload=function(a,d,e){void 0===d&&(d=null);void 0===e&&(e=null);c.callLater(d,e)};a._destroy=function(){};a._getVolume=function(){return this._volume};a._setVolume=function(a){this._volume=Math.max(0,Math.min(a,1));this._audio.volume=this._volume};a._setLoop=function(a){this._loop=
a};a._getCurrentTime=function(){return this._audio.currentTime};a._setCurrentTime=function(a){this._startTime=a};return e}();c.Html5Audio=f;f.prototype.__class__="egret.Html5Audio"})(egret||(egret={}));
(function(c){var f=function(){function e(){this.context=e.ctx;this.bufferSource=null;this.paused=!0;this._loop=!1;this._listeners=[];this._onEndedCall=null;this._volume=1;this._currentTime=this._startTime=0;this.gain=e.ctx.createGain?e.ctx.createGain():e.ctx.createGainNode()}var a=e.prototype;e.decodeAudios=function(){if(!(0>=e.decodeArr.length||e.isDecoding)){e.isDecoding=!0;var a=e.decodeArr.shift();e.ctx.decodeAudioData(a.buffer,function(d){a.self.audioBuffer=d;a.callback&&a.callback();e.isDecoding=
!1;e.decodeAudios()},function(){alert(c.getString(1034,a.url));a.callback&&a.callback();e.isDecoding=!1;e.decodeAudios()})}};a._play=function(a){var d=this;this.bufferSource&&(this.bufferSource.onended=null,this.removeListeners(),this.bufferSource=null);a=this.context;var c=this.gain,e=a.createBufferSource();this.bufferSource=e;this.addListeners();e.buffer=this.audioBuffer;e.connect(c);c.connect(a.destination);e.onended=function(a){d.clear();d._onEndedCall&&d._onEndedCall.call(null,a);d._loop&&!d.paused&&
d._play()};this.paused=!1;this._startTime=Date.now();this.gain.gain.value=this._volume;e.start(0,this._currentTime);this._currentTime=0};a.clear=function(){if(this.bufferSource){this.removeListeners();var a=this.bufferSource;a.stop?a.stop(0):a.noteOff(0);this.bufferSource.disconnect();this.bufferSource=null}};a.addListeners=function(){for(var a=0;a<this._listeners.length;a++){var d=this._listeners[a];this.bufferSource.addEventListener(d.type,d.listener,d.useCapture)}};a.removeListeners=function(){for(var a=
0;a<this._listeners.length;a++){var d=this._listeners[a];this.bufferSource.removeEventListener(d.type,d.listener,d.useCapture)}};a._pause=function(){this.paused=!0;this.clear()};a._addEventListener=function(a,d,c){void 0===c&&(c=!1);"ended"==a?this._onEndedCall=d:(this._listeners.push({type:a,listener:d,useCapture:c}),this.bufferSource&&this.bufferSource.addEventListener(a,d,c))};a._removeEventListener=function(a,d,c){void 0===c&&(c=!1);if("ended"==a)this._onEndedCall=null;else for(var e=0;e<this._listeners.length;e++){var f=
this._listeners[e];if(f.listener==d&&f.useCapture==c&&f.type==a){this._listeners.splice(e,1);this.bufferSource&&this.bufferSource.removeEventListener(a,d,c);break}}};a._load=function(){this._setArrayBuffer(this._arrayBuffer,this._url,null)};a._setArrayBuffer=function(a,d,c){this._url=d;this._arrayBuffer=a;e.decodeArr.push({buffer:a,callback:c,self:this,url:d});e.decodeAudios()};a._preload=function(a,d,e){void 0===d&&(d=null);void 0===e&&(e=null);c.callLater(d,e)};a._getVolume=function(){return this._volume};
a._setVolume=function(a){this._volume=a;this.gain.gain.value=a};a._setLoop=function(a){this._loop=a};a._getCurrentTime=function(){return this.bufferSource?(Date.now()-this._startTime)/1E3:0};a._setCurrentTime=function(a){this._currentTime=a};a._destroy=function(){};e.canUseWebAudio=window.AudioContext||window.webkitAudioContext||window.mozAudioContext;e.ctx=e.canUseWebAudio?new (window.AudioContext||window.webkitAudioContext||window.mozAudioContext):void 0;e.decodeArr=[];e.isDecoding=!1;return e}();
c.WebAudio=f;f.prototype.__class__="egret.WebAudio"})(egret||(egret={}));
(function(c){var f=function(){function e(){this._loop=!1;this._currentTime=0}var a=e.prototype;a._play=function(a){this._type=a;a==c.Sound.EFFECT?QZAppExternal.playLocalSound(function(a){},{bid:-1,url:this._path,loop:this._loop?-1:0}):QZAppExternal.playLocalBackSound({bid:-1,url:this._path,loop:this._loop?-1:0})};a._pause=function(){this._type==c.Sound.EFFECT?QZAppExternal.stopSound():QZAppExternal.stopBackSound()};a._addEventListener=function(a,d,c){};a._removeEventListener=function(a,d,c){};a._load=
function(){};a._preload=function(a,d,e){void 0===d&&(d=null);void 0===e&&(e=null);c.callLater(d,e)};a._setPath=function(a){this._path=a};a._getVolume=function(){return 1};a._setVolume=function(a){};a._setLoop=function(a){this._loop=a};a._getCurrentTime=function(){return 0};a._setCurrentTime=function(a){this._currentTime=a};a._destroy=function(){};return e}();c.QQAudio=f;f.prototype.__class__="egret.QQAudio"})(egret||(egret={}));
(function(c){(function(f){function e(a,d){var e=document.createElement("canvas"),f=c.RendererContext.createRendererContext(e),r=a._textureWidth,l=a._textureHeight;null==d&&(d=new c.Rectangle,d.x=0,d.y=0,d.width=r,d.height=l);d.x=Math.min(d.x,r-1);d.y=Math.min(d.y,l-1);d.width=Math.min(d.width,r-d.x);d.height=Math.min(d.height,l-d.y);var g=d.width,h=d.height;e.width=g;e.height=h;e.style.width=g+"px";e.style.height=h+"px";var g={_texture_to_render:a},h=c.MainContext.instance.rendererContext._texture_scale_factor,
k=a._offsetX,n=a._offsetY,q=a._bitmapWidth||r,p=a._bitmapHeight||l,k=Math.round(k*h),n=Math.round(n*h);c.RenderFilter.getInstance().drawImage(f,g,a._bitmapX+d.x/h,a._bitmapY+d.y/h,q*d.width/r,p*d.height/l,k,n,d.width,d.height);return e}function a(a,d){try{return e(this,d).toDataURL(a)}catch(f){return c.$error(1033),null}}c.Texture.prototype.toDataURL=a;c.Texture.prototype.saveToFile=function(b,d,c){b=a.call(this,b,c);null!=b&&(c=b.replace(/^data:image[^;]*/,"data:image/octet-stream"),b=document.createElement("a"),
b.download=d,b.href=c,d=document.createEvent("HTMLEvents"),d.initEvent("click",!1,!1),b.dispatchEvent(d))};c.Texture.prototype.getPixel32=function(a,d){if(this._bitmapData&&this._bitmapData.getContext){var f=this._bitmapData.getContext("2d").getImageData(a-this._offsetX,d-this._offsetY,1,1);return f.data}f=e(this,new c.Rectangle(a-1,d-1,3,3)).getContext("2d").getImageData(1,1,1,1);return f.data}})(c.web||(c.web={}))})(egret||(egret={}));
(function(c){var f=function(){function a(){}a.QQ_AUDIO=1;a.WEB_AUDIO=2;a.HTML5_AUDIO=3;return a}();c.AudioType=f;f.prototype.__class__="egret.AudioType";var e=function(){function a(){}a.WPHONE=1;a.IOS=2;a.ADNROID=3;return a}();c.SystemOSType=e;e.prototype.__class__="egret.SystemOSType";var a=function(a){function d(){a.call(this)}__extends(d,a);d._init=function(){var a=navigator.userAgent.toLowerCase();d.ua=a;d._canUseBlob=!1;d._audioType=f.HTML5_AUDIO;d._AudioClass=c.Html5Audio;d._audioMustLoad=!0;
if(0<=a.indexOf("windows phone"))d._System_OS=e.WPHONE,d._audioMustLoad=!1;else if(0<=a.indexOf("android"))d._System_OS=e.ADNROID,0<=a.indexOf("ucbrowser")&&(d._audioMustLoad=!1),window.hasOwnProperty("QZAppExternal")&&0<=a.indexOf("qzone")&&(d._AudioClass=c.QQAudio,d._audioType=f.QQ_AUDIO,(a=document.getElementsByTagName("base"))&&0<a.length?d._QQRootPath=a[0].baseURI:(a=window.location.href.indexOf("?"),-1==a&&(a=window.location.href.length),a=window.location.href.substring(0,a),a=a.substring(0,
a.lastIndexOf("/")),d._QQRootPath=a+"/"));else if(0<=a.indexOf("iphone")||0<=a.indexOf("ipad")||0<=a.indexOf("ipod"))d._System_OS=e.IOS,7<=d.getIOSVersion()&&(d._canUseBlob=!0,d._AudioClass=c.WebAudio,d._audioType=f.WEB_AUDIO);window.URL||window.webkitURL||(d._canUseBlob=!1);window.AudioContext||window.webkitAudioContext||window.mozAudioContext||d._audioType!=f.WEB_AUDIO||(d._audioType=f.HTML5_AUDIO,d._AudioClass=c.Html5Audio)};d.getIOSVersion=function(){var a=d.ua.toLowerCase().match(/cpu [^\d]*\d.*like mac os x/)[0];
return parseInt(a.match(/\d(_\d)*/)[0])||0};d._canUseBlob=!1;d._audioType=0;d._audioMustLoad=!1;d._QQRootPath="";d._System_OS=0;d.ua="";return d}(c.HashObject);c.Html5Capatibility=a;a.prototype.__class__="egret.Html5Capatibility";a._init()})(egret||(egret={}));
(function(c){var f=function(e){function a(){e.call(this);this.localVersionDataPath="localVersion.manifest";this.localVersionData=null;this.changeVersionDataPath="version.manifest";this.changeVersionData=null;this.baseVersionDataPath="base.manifest";this.baseVersionData=null;this.localVersionCodePath="localCode.manifest";this.serverVersionCodePath="code.manifest";this._call=this._load=null}__extends(a,e);var b=a.prototype;b.fetchVersion=function(){this._load=new c.NativeResourceLoader;this._load.addEventListener(c.IOErrorEvent.IO_ERROR,
this.loadError,this);this._load.addEventListener(c.Event.COMPLETE,this.fileLoadComplete,this);this.initLocalVersionData()};b.initLocalVersionData=function(){var a=this.getData("appVersion.manifest",!0);if(a){if(1==a.debug){this.baseVersionData=null;if(a=this.getData(this.localVersionDataPath,!1))for(var b in a)this.deleteFile(b);this.deleteFile(this.localVersionDataPath);this.deleteFile(this.localVersionCodePath);this.loadOver();return}var c=this.getData("appVersion.manifest",!1);if(null==c||c.version!=
a.version){this.localVersionData=this.getData(this.localVersionDataPath,!0);null==this.localVersionData&&(this.localVersionData={});this.deleteFile(this.localVersionCodePath);this.save("appVersion.manifest",JSON.stringify(a));if(a=this.getData(this.localVersionCodePath,!1))for(b in a)a[b]!=this.localVersionData[b]&&this.deleteFile(b);else a={};for(b in this.localVersionData)a[b]!=this.localVersionData[b]&&this.deleteFile(b);this.save(this.localVersionDataPath,JSON.stringify(this.localVersionData));
this.loadCodeVersion();return}}this.localVersionData=this.getLocalData(this.localVersionDataPath);null==this.localVersionData&&(this.localVersionData=this.getLocalData(this.baseVersionDataPath),null==this.localVersionData&&(this.localVersionData={}),this.save(this.localVersionDataPath,JSON.stringify(this.localVersionData)));this.loadCodeVersion()};b.deleteFile=function(a){egret_native.deleteUpdateFile&&egret_native.deleteUpdateFile(a)};b.loadCodeVersion=function(){var a=1;this.newCode=1;var b=this.getLocalData(this.localVersionCodePath);
null!=b&&(a=b.code);b=this.getLocalData(this.serverVersionCodePath);null!=b&&(this.newCode=b.code);this.loadBaseVersion(a!=this.newCode)};b.loadBaseVersion=function(a){this.baseVersionData=this.getLocalData(this.baseVersionDataPath);this.changeVersionData=this.getLocalData(this.changeVersionDataPath);var b=this;null==b.baseVersionData||a?b.loadFile(b.baseVersionDataPath,function(){b.baseVersionData=b.getLocalData(b.baseVersionDataPath);b.loadBaseOver()}):b.loadBaseOver()};b.loadBaseOver=function(){this.save(this.localVersionCodePath,
JSON.stringify({code:this.newCode}));this.loadOver()};b.loadFile=function(a,b){void 0===b&&(b=null);this._call=b;this._load.load(a,1E3)};b.fileLoadComplete=function(a){this._call&&this._call()};b.loadError=function(a){this._load.removeEventListener(c.IOErrorEvent.IO_ERROR,this.loadError,this);this._load.removeEventListener(c.Event.COMPLETE,this.fileLoadComplete,this);this.dispatchEvent(a)};b.loadOver=function(){this._load.removeEventListener(c.IOErrorEvent.IO_ERROR,this.loadError,this);this._load.removeEventListener(c.Event.COMPLETE,
this.fileLoadComplete,this);this.dispatchEvent(new c.Event(c.Event.COMPLETE))};b.save=function(a,b){egret_native.writeFileSync?egret_native.writeFileSync(a,b):egret_native.saveRecord&&egret_native.saveRecord(a,b)};b.getData=function(a,b){if(egret_native.readUpdateFileSync&&egret_native.readResourceFileSync){var c=b?egret_native.readResourceFileSync(a):egret_native.readUpdateFileSync(a);return null!=c?JSON.parse(c):null}return this.getLocalDataByOld(a)};b.getLocalData=function(a){if(egret_native.readUpdateFileSync&&
egret_native.readResourceFileSync){var b=egret_native.readUpdateFileSync(a);if(null!=b)return JSON.parse(b);b=egret_native.readResourceFileSync(a);return null!=b?JSON.parse(b):null}return this.getLocalDataByOld(a)};b.getLocalDataByOld=function(a){var b=null;egret_native.isRecordExists(a)?(a=egret_native.loadRecord(a),b=JSON.parse(a)):egret_native.isFileExists(a)&&(a=egret_native.readFileSync(a),b=JSON.parse(a));return b};b.getChangeList=function(){if(!this.baseVersionData)return[];var a={},b;for(b in this.changeVersionData)1==
this.changeVersionData[b].d?delete this.baseVersionData[b]:this.baseVersionData[b]=this.changeVersionData[b];for(b in this.baseVersionData)null!=this.localVersionData[b]&&this.compareVersion(this.localVersionData,this.baseVersionData,b)||(a[b]={url:b,size:this.baseVersionData[b].s});var c=[];for(b in a)c.push(a[b]);return c};b.compareVersion=function(a,b,c){return null==a[c]||null==b[c]?!1:a[c].v==b[c].v};b.checkIsNewVersion=function(a){return this.baseVersionData?null!=this.changeVersionData[a]?
this.compareVersion(this.changeVersionData,this.localVersionData,a):null!=this.baseVersionData[a]?this.compareVersion(this.baseVersionData,this.localVersionData,a):!0:!0};b.saveVersion=function(a){if(this.baseVersionData){var b=!1;null!=this.changeVersionData[a]?this.compareVersion(this.changeVersionData,this.localVersionData,a)||(b=!0,this.localVersionData[a]=this.changeVersionData[a]):null==this.baseVersionData[a]||this.compareVersion(this.baseVersionData,this.localVersionData,a)||(b=!0,this.localVersionData[a]=
this.baseVersionData[a]);b&&this.save(this.localVersionDataPath,JSON.stringify(this.localVersionData))}};b.getVirtualUrl=function(a){return a};return a}(c.EventDispatcher);c.NativeVersionController=f;f.prototype.__class__="egret.NativeVersionController"})(egret||(egret={}));var RES;
(function(c){var f=function(c){function a(a,d,f){void 0===d&&(d=!1);void 0===f&&(f=!1);c.call(this,a,d,f);this.itemsTotal=this.itemsLoaded=0;this.groupName="";this.resItem=null}__extends(a,c);a.dispatchResourceEvent=function(b,d,c,e,f,l){void 0===c&&(c="");void 0===e&&(e=null);void 0===f&&(f=0);void 0===l&&(l=0);var g=egret.Event._getPropertyData(a);g.groupName=c;g.resItem=e;g.itemsLoaded=f;g.itemsTotal=l;egret.Event._dispatchByTarget(a,b,d,g)};a.ITEM_LOAD_ERROR="itemLoadError";a.CONFIG_COMPLETE=
"configComplete";a.CONFIG_LOAD_ERROR="configLoadError";a.GROUP_PROGRESS="groupProgress";a.GROUP_COMPLETE="groupComplete";a.GROUP_LOAD_ERROR="groupLoadError";return a}(egret.Event);c.ResourceEvent=f;f.prototype.__class__="RES.ResourceEvent"})(RES||(RES={}));
(function(c){var f=function(){function c(a,d,e){this.groupName="";this.data=null;this._loaded=!1;this.name=a;this.url=d;this.type=e}var a=c.prototype;Object.defineProperty(a,"loaded",{get:function(){return this.data?this.data.loaded:this._loaded},set:function(a){this.data&&(this.data.loaded=a);this._loaded=a},enumerable:!0,configurable:!0});a.toString=function(){return'[ResourceItem name="'+this.name+'" url="'+this.url+'" type="'+this.type+'"]'};c.TYPE_XML="xml";c.TYPE_IMAGE="image";c.TYPE_BIN="bin";
c.TYPE_TEXT="text";c.TYPE_JSON="json";c.TYPE_SHEET="sheet";c.TYPE_FONT="font";c.TYPE_SOUND="sound";return c}();c.ResourceItem=f;f.prototype.__class__="RES.ResourceItem"})(RES||(RES={}));
(function(c){var f=function(){function e(){this.keyMap={};this.groupDic={};c.configInstance=this}var a=e.prototype;a.getGroupByName=function(a){var d=[];if(!this.groupDic[a])return d;a=this.groupDic[a];for(var c=a.length,e=0;e<c;e++)d.push(this.parseResourceItem(a[e]));return d};a.getRawGroupByName=function(a){return this.groupDic[a]?this.groupDic[a]:[]};a.createGroup=function(a,d,c){void 0===c&&(c=!1);if(!c&&this.groupDic[a]||!d||0==d.length)return!1;c=this.groupDic;for(var e=[],f=d.length,l=0;l<
f;l++){var g=d[l],h=c[g];if(h)for(var g=h.length,k=0;k<g;k++){var n=h[k];-1==e.indexOf(n)&&e.push(n)}else(n=this.keyMap[g])?-1==e.indexOf(n)&&e.push(n):egret.$warn(2E3,g)}if(0==e.length)return!1;this.groupDic[a]=e;return!0};a.parseConfig=function(a,d){if(a){var c=a.resources;if(c)for(var e=c.length,f=0;f<e;f++){var l=c[f],g=l.url;g&&-1==g.indexOf("://")&&(l.url=d+g);this.addItemToKeyMap(l)}if(c=a.groups)for(e=c.length,f=0;f<e;f++){for(var g=c[f],h=[],k=g.keys.split(","),n=k.length,q=0;q<n;q++)l=k[q].trim(),
(l=this.keyMap[l])&&-1==h.indexOf(l)&&h.push(l);this.groupDic[g.name]=h}}};a.addSubkey=function(a,d){var c=this.keyMap[d];c&&!this.keyMap[a]&&(this.keyMap[a]=c)};a.addItemToKeyMap=function(a){this.keyMap[a.name]||(this.keyMap[a.name]=a);if(a.hasOwnProperty("subkeys")){var d=a.subkeys.split(",");a.subkeys=d;for(var c=d.length,e=0;e<c;e++){var f=d[e];null==this.keyMap[f]&&(this.keyMap[f]=a)}}};a.getName=function(a){return(a=this.keyMap[a])?a.name:""};a.getType=function(a){return(a=this.keyMap[a])?a.type:
""};a.getRawResourceItem=function(a){return this.keyMap[a]};a.getResourceItem=function(a){return(a=this.keyMap[a])?this.parseResourceItem(a):null};a.parseResourceItem=function(a){var d=new c.ResourceItem(a.name,a.url,a.type);d.data=a;return d};return e}();c.ResourceConfig=f;f.prototype.__class__="RES.ResourceConfig"})(RES||(RES={}));
(function(c){var f=function(e){function a(){e.call(this);this.thread=2;this.loadingCount=0;this.resInstance=this.callBack=null;this.groupTotalDic={};this.numLoadedDic={};this.itemListDic={};this.groupErrorDic={};this.retryTimesDic={};this.maxRetryTimes=3;this.failedList=[];this.priorityQueue={};this.lazyLoadList=[];this.analyzerDic={};this.queueIndex=0}__extends(a,e);var b=a.prototype;b.isGroupInLoading=function(a){return void 0!==this.itemListDic[a]};b.loadGroup=function(a,b,e){void 0===e&&(e=0);
if(!this.itemListDic[b]&&b)if(a&&0!=a.length){this.priorityQueue[e]?this.priorityQueue[e].push(b):this.priorityQueue[e]=[b];this.itemListDic[b]=a;e=a.length;for(var f=0;f<e;f++)a[f].groupName=b;this.groupTotalDic[b]=a.length;this.numLoadedDic[b]=0;this.next()}else egret.$warn(2001,b),a=new c.ResourceEvent(c.ResourceEvent.GROUP_LOAD_ERROR),a.groupName=b,this.dispatchEvent(a)};b.loadItem=function(a){this.lazyLoadList.push(a);a.groupName="";this.next()};b.next=function(){for(;this.loadingCount<this.thread;){var a=
this.getOneResourceItem();if(!a)break;this.loadingCount++;if(a.loaded)this.onItemComplete(a);else{var b=this.analyzerDic[a.type];b||(b=this.analyzerDic[a.type]=egret.Injector.getInstance(c.AnalyzerBase,a.type));b.loadFile(a,this.onItemComplete,this)}}};b.getOneResourceItem=function(){if(0<this.failedList.length)return this.failedList.shift();var a=Number.NEGATIVE_INFINITY,b;for(b in this.priorityQueue)a=Math.max(a,b);a=this.priorityQueue[a];if(!a||0==a.length)return 0==this.lazyLoadList.length?null:
this.lazyLoadList.pop();b=a.length;for(var c,e=0;e<b;e++){this.queueIndex>=b&&(this.queueIndex=0);c=this.itemListDic[a[this.queueIndex]];if(0<c.length)break;this.queueIndex++}return 0==c.length?null:c.shift()};b.onItemComplete=function(a){this.loadingCount--;var b=a.groupName;if(!a.loaded){var e=this.retryTimesDic[a.name]||1;if(e>this.maxRetryTimes)delete this.retryTimesDic[a.name],c.ResourceEvent.dispatchResourceEvent(this.resInstance,c.ResourceEvent.ITEM_LOAD_ERROR,b,a);else{this.retryTimesDic[a.name]=
e+1;this.failedList.push(a);this.next();return}}if(b){this.numLoadedDic[b]++;var e=this.numLoadedDic[b],f=this.groupTotalDic[b];a.loaded||(this.groupErrorDic[b]=!0);c.ResourceEvent.dispatchResourceEvent(this.resInstance,c.ResourceEvent.GROUP_PROGRESS,b,a,e,f);e==f&&(a=this.groupErrorDic[b],this.removeGroupName(b),delete this.groupTotalDic[b],delete this.numLoadedDic[b],delete this.itemListDic[b],delete this.groupErrorDic[b],a?c.ResourceEvent.dispatchResourceEvent(this,c.ResourceEvent.GROUP_LOAD_ERROR,
b):c.ResourceEvent.dispatchResourceEvent(this,c.ResourceEvent.GROUP_COMPLETE,b))}else this.callBack.call(this.resInstance,a);this.next()};b.removeGroupName=function(a){for(var b in this.priorityQueue){for(var c=this.priorityQueue[b],e=c.length,f=0,g=!1,e=c.length,h=0;h<e;h++){if(c[h]==a){c.splice(f,1);g=!0;break}f++}if(g){0==c.length&&delete this.priorityQueue[b];break}}};return a}(egret.EventDispatcher);c.ResourceLoader=f;f.prototype.__class__="RES.ResourceLoader"})(RES||(RES={}));
(function(c){var f=function(e){function a(){e.call(this);this.resourceConfig=null;this.resourceConfig=c.configInstance}__extends(a,e);var b=a.prototype;b.addSubkey=function(a,b){this.resourceConfig.addSubkey(a,b)};b.loadFile=function(a,b,c){};b.getRes=function(a){};b.destroyRes=function(a){return!1};a.getStringPrefix=function(a){if(!a)return"";var b=a.indexOf(".");return-1!=b?a.substring(0,b):""};a.getStringTail=function(a){if(!a)return"";var b=a.indexOf(".");return-1!=b?a.substring(b+1):""};return a}(egret.HashObject);
c.AnalyzerBase=f;f.prototype.__class__="RES.AnalyzerBase"})(RES||(RES={}));
(function(c){var f=function(c){function a(){c.call(this);this.fileDic={};this.resItemDic=[];this._dataFormat=egret.URLLoaderDataFormat.BINARY;this.recycler=new egret.Recycler}__extends(a,c);var b=a.prototype;b.loadFile=function(a,b,c){if(this.fileDic[a.name])b.call(c,a);else{var e=this.getLoader();this.resItemDic[e.hashCode]={item:a,func:b,thisObject:c};e.load(new egret.URLRequest(a.url))}};b.getLoader=function(){var a=this.recycler.pop();a||(a=new egret.URLLoader,a.addEventListener(egret.Event.COMPLETE,
this.onLoadFinish,this),a.addEventListener(egret.IOErrorEvent.IO_ERROR,this.onLoadFinish,this));a.dataFormat=this._dataFormat;return a};b.onLoadFinish=function(a){var b=a.target,c=this.resItemDic[b.hashCode];delete this.resItemDic[b.hashCode];var e=c.item,f=c.func;e.loaded=a.type==egret.Event.COMPLETE;e.loaded&&this.analyzeData(e,b.data);this.recycler.push(b);f.call(c.thisObject,e)};b.analyzeData=function(a,b){var c=a.name;!this.fileDic[c]&&b&&(this.fileDic[c]=b)};b.getRes=function(a){return this.fileDic[a]};
b.hasRes=function(a){return null!=this.getRes(a)};b.destroyRes=function(a){return this.fileDic[a]?(this.onResourceDestroy(this.fileDic[a]),delete this.fileDic[a],!0):!1};b.onResourceDestroy=function(a){};return a}(c.AnalyzerBase);c.BinAnalyzer=f;f.prototype.__class__="RES.BinAnalyzer"})(RES||(RES={}));
(function(c){var f=function(c){function a(){c.call(this);this._dataFormat=egret.URLLoaderDataFormat.TEXTURE}__extends(a,c);var b=a.prototype;b.analyzeData=function(a,b){var c=a.name;!this.fileDic[c]&&b&&(this.fileDic[c]=b,(c=a.data)&&c.scale9grid&&(c=c.scale9grid.split(","),b.scale9Grid=new egret.Rectangle(parseInt(c[0]),parseInt(c[1]),parseInt(c[2]),parseInt(c[3]))))};b.onResourceDestroy=function(a){a.dispose()};return a}(c.BinAnalyzer);c.ImageAnalyzer=f;f.prototype.__class__="RES.ImageAnalyzer"})(RES||
(RES={}));(function(c){var f=function(c){function a(){c.call(this);this._dataFormat=egret.URLLoaderDataFormat.TEXT}__extends(a,c);a.prototype.analyzeData=function(a,d){var c=a.name;if(!this.fileDic[c]&&d)try{this.fileDic[c]=JSON.parse(d)}catch(e){egret.$warn(1017,a.url,d)}};return a}(c.BinAnalyzer);c.JsonAnalyzer=f;f.prototype.__class__="RES.JsonAnalyzer"})(RES||(RES={}));
(function(c){var f=function(c){function a(){c.call(this);this._dataFormat=egret.URLLoaderDataFormat.TEXT}__extends(a,c);return a}(c.BinAnalyzer);c.TextAnalyzer=f;f.prototype.__class__="RES.TextAnalyzer"})(RES||(RES={}));
(function(c){var f=function(e){function a(){e.call(this);this.sheetMap={};this.textureMap={};this._dataFormat=egret.URLLoaderDataFormat.TEXT}__extends(a,e);var b=a.prototype;b.getRes=function(a){var b=this.fileDic[a];b||(b=this.textureMap[a]);!b&&(b=c.AnalyzerBase.getStringPrefix(a),b=this.fileDic[b])&&(a=c.AnalyzerBase.getStringTail(a),b=b.getTexture(a));return b};b.onLoadFinish=function(a){var b=a.target,c=this.resItemDic[b.hashCode];delete this.resItemDic[b.hashCode];var e=c.item,f=c.func;e.loaded=
a.type==egret.Event.COMPLETE;if(e.loaded)if("string"==typeof b.data){if(e.loaded=!1,a=this.analyzeConfig(e,b.data)){b=e.url;e.url=a;this._dataFormat=egret.URLLoaderDataFormat.TEXTURE;this.loadFile(e,f,c.thisObject);this._dataFormat=egret.URLLoaderDataFormat.TEXT;e.url=b;return}}else this.analyzeBitmap(e,b.data);this.recycler.push(b);f.call(c.thisObject,e)};b.analyzeConfig=function(a,b){var c=a.name,e,f="";try{e=JSON.parse(b)}catch(g){egret.$warn(1017,a.url,b)}e&&(this.sheetMap[c]=e,f=this.getRelativePath(a.url,
e.file));return f};b.analyzeBitmap=function(a,b){var c=a.name;if(!this.fileDic[c]&&b){var e=this.sheetMap[c];delete this.sheetMap[c];e=this.parseSpriteSheet(b,e,a.data&&a.data.subkeys?"":c);this.fileDic[c]=e}};b.getRelativePath=function(a,b){a=a.split("\\").join("/");var c=a.lastIndexOf("/");return a=-1!=c?a.substring(0,c+1)+b:b};b.parseSpriteSheet=function(a,b,c){b=b.frames;if(!b)return null;var e=new egret.SpriteSheet(a),f=this.textureMap,g;for(g in b){var h=b[g];a=e.createTexture(g,h.x,h.y,h.w,
h.h,h.offX,h.offY,h.sourceW,h.sourceH);h.scale9grid&&(h=h.scale9grid.split(","),a.scale9Grid=new egret.Rectangle(parseInt(h[0]),parseInt(h[1]),parseInt(h[2]),parseInt(h[3])));null==f[g]&&(f[g]=a,c&&this.addSubkey(g,c))}return e};b.destroyRes=function(a){var b=this.fileDic[a];if(b){delete this.fileDic[a];for(var c in b._textureMap)this.textureMap[c]&&delete this.textureMap[c];this.onResourceDestroy(b);return!0}return!1};b.onResourceDestroy=function(a){a.dispose()};return a}(c.BinAnalyzer);c.SheetAnalyzer=
f;f.prototype.__class__="RES.SheetAnalyzer"})(RES||(RES={}));
(function(c){var f=function(c){function a(){c.call(this)}__extends(a,c);var b=a.prototype;b.analyzeConfig=function(a,b){var c=a.name,e,f="";try{e=JSON.parse(b)}catch(g){}e?f=this.getRelativePath(a.url,e.file):(e=b,f=this.getTexturePath(a.url,e));this.sheetMap[c]=e;return f};b.analyzeBitmap=function(a,b){var c=a.name;if(!this.fileDic[c]&&b){var e=this.sheetMap[c];delete this.sheetMap[c];e=new egret.BitmapFont(b,e);this.fileDic[c]=e}};b.getTexturePath=function(a,b){var c="",e=b.split("\n")[2],f=e.indexOf('file="');
-1!=f&&(e=e.substring(f+6),f=e.indexOf('"'),c=e.substring(0,f));a=a.split("\\").join("/");f=a.lastIndexOf("/");return a=-1!=f?a.substring(0,f+1)+c:c};b.onResourceDestroy=function(a){a.dispose()};return a}(c.SheetAnalyzer);c.FontAnalyzer=f;f.prototype.__class__="RES.FontAnalyzer"})(RES||(RES={}));
(function(c){var f=function(c){function a(){c.call(this);this._dataFormat=egret.URLLoaderDataFormat.SOUND}__extends(a,c);a.prototype.analyzeData=function(a,c){var e=a.name;!this.fileDic[e]&&c&&(this.fileDic[e]=c,(e=a.data)&&e.soundType?c.preload(e.soundType):c.preload(egret.Sound.EFFECT))};return a}(c.BinAnalyzer);c.SoundAnalyzer=f;f.prototype.__class__="RES.SoundAnalyzer"})(RES||(RES={}));
(function(c){var f=function(c){function a(){c.call(this);this._dataFormat=egret.URLLoaderDataFormat.TEXT}__extends(a,c);a.prototype.analyzeData=function(a,c){var e=a.name;if(!this.fileDic[e]&&c)try{var f=egret.XML.parse(c);this.fileDic[e]=f}catch(r){}};return a}(c.BinAnalyzer);c.XMLAnalyzer=f;f.prototype.__class__="RES.XMLAnalyzer"})(RES||(RES={}));
(function(c){c.loadConfig=function(a,b,c){void 0===b&&(b="");void 0===c&&(c="json");e.loadConfig(a,b,c)};c.loadGroup=function(a,b){void 0===b&&(b=0);e.loadGroup(a,b)};c.isGroupLoaded=function(a){return e.isGroupLoaded(a)};c.getGroupByName=function(a){return e.getGroupByName(a)};c.createGroup=function(a,b,c){void 0===c&&(c=!1);return e.createGroup(a,b,c)};c.hasRes=function(a){return e.hasRes(a)};c.parseConfig=function(a,b){void 0===b&&(b="");e.parseConfig(a,b)};c.getRes=function(a){return e.getRes(a)};
c.getResAsync=function(a,b,c){e.getResAsync(a,b,c)};c.getResByUrl=function(a,b,c,f){void 0===f&&(f="");e.getResByUrl(a,b,c,f)};c.destroyRes=function(a,b){return e.destroyRes(a,b)};c.setMaxLoadingThread=function(a){e.setMaxLoadingThread(a)};c.setMaxRetryTimes=function(a){e.setMaxRetryTimes(a)};c.addEventListener=function(a,b,c,f,s){void 0===f&&(f=!1);void 0===s&&(s=0);e.addEventListener(a,b,c,f,s)};c.removeEventListener=function(a,b,c,f){void 0===f&&(f=!1);e.removeEventListener(a,b,c,f)};var f=function(a){function b(){a.call(this);
this.analyzerDic={};this.configItemList=[];this.configComplete=this.callLaterFlag=!1;this.loadedGroups=[];this.groupNameList=[];this.asyncDic={};this._loadedUrlTypes={};this.init()}__extends(b,a);var d=b.prototype;d.getAnalyzerByType=function(a){var b=this.analyzerDic[a];b||(b=this.analyzerDic[a]=egret.Injector.getInstance(c.AnalyzerBase,a));return b};d.init=function(){egret.Injector.hasMapRule(c.AnalyzerBase,c.ResourceItem.TYPE_BIN)||egret.Injector.mapClass(c.AnalyzerBase,c.BinAnalyzer,c.ResourceItem.TYPE_BIN);
egret.Injector.hasMapRule(c.AnalyzerBase,c.ResourceItem.TYPE_IMAGE)||egret.Injector.mapClass(c.AnalyzerBase,c.ImageAnalyzer,c.ResourceItem.TYPE_IMAGE);egret.Injector.hasMapRule(c.AnalyzerBase,c.ResourceItem.TYPE_TEXT)||egret.Injector.mapClass(c.AnalyzerBase,c.TextAnalyzer,c.ResourceItem.TYPE_TEXT);egret.Injector.hasMapRule(c.AnalyzerBase,c.ResourceItem.TYPE_JSON)||egret.Injector.mapClass(c.AnalyzerBase,c.JsonAnalyzer,c.ResourceItem.TYPE_JSON);egret.Injector.hasMapRule(c.AnalyzerBase,c.ResourceItem.TYPE_SHEET)||
egret.Injector.mapClass(c.AnalyzerBase,c.SheetAnalyzer,c.ResourceItem.TYPE_SHEET);egret.Injector.hasMapRule(c.AnalyzerBase,c.ResourceItem.TYPE_FONT)||egret.Injector.mapClass(c.AnalyzerBase,c.FontAnalyzer,c.ResourceItem.TYPE_FONT);egret.Injector.hasMapRule(c.AnalyzerBase,c.ResourceItem.TYPE_SOUND)||egret.Injector.mapClass(c.AnalyzerBase,c.SoundAnalyzer,c.ResourceItem.TYPE_SOUND);egret.Injector.hasMapRule(c.AnalyzerBase,c.ResourceItem.TYPE_XML)||egret.Injector.mapClass(c.AnalyzerBase,c.XMLAnalyzer,
c.ResourceItem.TYPE_XML);this.resConfig=new c.ResourceConfig;this.resLoader=new c.ResourceLoader;this.resLoader.callBack=this.onResourceItemComp;this.resLoader.resInstance=this;this.resLoader.addEventListener(c.ResourceEvent.GROUP_COMPLETE,this.onGroupComp,this);this.resLoader.addEventListener(c.ResourceEvent.GROUP_LOAD_ERROR,this.onGroupError,this)};d.loadConfig=function(a,b,c){void 0===c&&(c="json");this.configItemList.push({url:a,resourceRoot:b,type:c});this.callLaterFlag||(egret.callLater(this.startLoadConfig,
this),this.callLaterFlag=!0)};d.startLoadConfig=function(){this.callLaterFlag=!1;var a=this.configItemList;this.configItemList=[];this.loadingConfigList=a;for(var d=a.length,e=[],f=0;f<d;f++){var g=a[f],g=new c.ResourceItem(g.url,g.url,g.type);e.push(g)}this.resLoader.loadGroup(e,b.GROUP_CONFIG,Number.MAX_VALUE)};d.isGroupLoaded=function(a){return-1!=this.loadedGroups.indexOf(a)};d.getGroupByName=function(a){return this.resConfig.getGroupByName(a)};d.loadGroup=function(a,b){void 0===b&&(b=0);if(-1!=
this.loadedGroups.indexOf(a))c.ResourceEvent.dispatchResourceEvent(this,c.ResourceEvent.GROUP_COMPLETE,a);else if(!this.resLoader.isGroupInLoading(a))if(this.configComplete){var d=this.resConfig.getGroupByName(a);this.resLoader.loadGroup(d,a,b)}else this.groupNameList.push({name:a,priority:b})};d.createGroup=function(a,b,c){void 0===c&&(c=!1);if(c){var d=this.loadedGroups.indexOf(a);-1!=d&&this.loadedGroups.splice(d,1)}return this.resConfig.createGroup(a,b,c)};d.onGroupComp=function(a){if(a.groupName==
b.GROUP_CONFIG){a=this.loadingConfigList.length;for(var d=0;d<a;d++){var e=this.loadingConfigList[d],f=this.getAnalyzerByType(e.type),g=f.getRes(e.url);f.destroyRes(e.url);this.resConfig.parseConfig(g,e.resourceRoot)}this.configComplete=!0;this.loadingConfigList=null;c.ResourceEvent.dispatchResourceEvent(this,c.ResourceEvent.CONFIG_COMPLETE);this.loadDelayGroups()}else this.loadedGroups.push(a.groupName),this.dispatchEvent(a)};d.loadDelayGroups=function(){var a=this.groupNameList;this.groupNameList=
[];for(var b=a.length,c=0;c<b;c++){var d=a[c];this.loadGroup(d.name,d.priority)}};d.onGroupError=function(a){a.groupName==b.GROUP_CONFIG?(this.loadingConfigList=null,c.ResourceEvent.dispatchResourceEvent(this,c.ResourceEvent.CONFIG_LOAD_ERROR)):this.dispatchEvent(a)};d.hasRes=function(a){var b=this.resConfig.getType(a);return""==b&&(a=c.AnalyzerBase.getStringPrefix(a),b=this.resConfig.getType(a),""==b)?!1:!0};d.parseConfig=function(a,b){this.resConfig.parseConfig(a,b);this.configComplete||this.loadingConfigList||
(this.configComplete=!0,this.loadDelayGroups())};d.getRes=function(a){var b=this.resConfig.getType(a);return""==b&&(b=c.AnalyzerBase.getStringPrefix(a),b=this.resConfig.getType(b),""==b)?null:this.getAnalyzerByType(b).getRes(a)};d.getResAsync=function(a,b,d){var e=this.resConfig.getType(a),f=this.resConfig.getName(a);if(""==e&&(f=c.AnalyzerBase.getStringPrefix(a),e=this.resConfig.getType(f),""==e)){egret.__callAsync(b,d);return}(e=this.getAnalyzerByType(e).getRes(a))?egret.__callAsync(b,d,e,a):(a=
{key:a,compFunc:b,thisObject:d},this.asyncDic[f]?this.asyncDic[f].push(a):(this.asyncDic[f]=[a],f=this.resConfig.getResourceItem(f),this.resLoader.loadItem(f)))};d.getResByUrl=function(a,b,d,e){void 0===e&&(e="");if(a){e||(e=this.getTypeByUrl(a));null!=this._loadedUrlTypes[a]&&this._loadedUrlTypes[a]!=e&&egret.$warn(2002);this._loadedUrlTypes[a]=e;var f=this.getAnalyzerByType(e).getRes(a);f?egret.__callAsync(b,d,f,a):(b={key:a,compFunc:b,thisObject:d},this.asyncDic[a]?this.asyncDic[a].push(b):(this.asyncDic[a]=
[b],a=new c.ResourceItem(a,a,e),this.resLoader.loadItem(a)))}else egret.__callAsync(b,d)};d.getTypeByUrl=function(a){(a=a.substr(a.lastIndexOf(".")+1))&&(a=a.toLowerCase());switch(a){case c.ResourceItem.TYPE_XML:case c.ResourceItem.TYPE_JSON:case c.ResourceItem.TYPE_SHEET:break;case "png":case "jpg":case "gif":case "jpeg":case "bmp":a=c.ResourceItem.TYPE_IMAGE;break;case "fnt":a=c.ResourceItem.TYPE_FONT;break;case "txt":a=c.ResourceItem.TYPE_TEXT;break;case "mp3":case "ogg":case "mpeg":case "wav":case "m4a":case "mp4":case "aiff":case "wma":case "mid":a=
c.ResourceItem.TYPE_SOUND;break;default:a=c.ResourceItem.TYPE_BIN}return a};d.onResourceItemComp=function(a){var b=this.asyncDic[a.name];delete this.asyncDic[a.name];a=this.getAnalyzerByType(a.type);for(var c=b.length,d=0;d<c;d++){var e=b[d],f=a.getRes(e.key);e.compFunc.call(e.thisObject,f,e.key)}};d.destroyRes=function(a,b){void 0===b&&(b=!0);var c=this.resConfig.getRawGroupByName(a);if(c&&0<c.length){var d=this.loadedGroups.indexOf(a);-1!=d&&this.loadedGroups.splice(d,1);for(var e=c.length,f=0;f<
e;f++)if(d=c[f],b||!this.isResInLoadedGroup(d.name)){d.loaded=!1;var k=this.getAnalyzerByType(d.type);k.destroyRes(d.name);this.removeLoadedGroupsByItemName(d.name)}return!0}c=this.resConfig.getType(a);if(""==c){c=this._loadedUrlTypes[a];if(null==c||""==c)return!1;delete this._loadedUrlTypes[a];k=this.getAnalyzerByType(c);k.destroyRes(a);return!0}d=this.resConfig.getRawResourceItem(a);d.loaded=!1;k=this.getAnalyzerByType(c);c=k.destroyRes(a);this.removeLoadedGroupsByItemName(d.name);return c};d.removeLoadedGroupsByItemName=
function(a){for(var b=this.loadedGroups,c=b.length,d=0;d<c;d++)for(var e=this.resConfig.getRawGroupByName(b[d]),f=e.length,k=0;k<f;k++)if(e[k].name==a){b.splice(d,1);d--;c=b.length;break}};d.isResInLoadedGroup=function(a){for(var b=this.loadedGroups,c=b.length,d=0;d<c;d++)for(var e=this.resConfig.getRawGroupByName(b[d]),f=e.length,k=0;k<f;k++)if(e[k].name==a)return!0;return!1};d.setMaxLoadingThread=function(a){1>a&&(a=1);this.resLoader.thread=a};d.setMaxRetryTimes=function(a){a=Math.max(a,0);this.resLoader.maxRetryTimes=
a};b.GROUP_CONFIG="RES__CONFIG";return b}(egret.EventDispatcher);f.prototype.__class__="RES.Resource";var e=new f})(RES||(RES={}));var tweenSetTimeOut=function(c,f){return egret.setTimeout.call(this,c,this,f)},tweenClearTimeout=egret.clearTimeout,_gsScope="undefined"!=typeof module&&module.exports&&"undefined"!=typeof global?global:this||window;
(_gsScope._gsQueue||(_gsScope._gsQueue=[])).push(function(){_gsScope._gsDefine("TweenMax",["core.Animation","core.SimpleTimeline","TweenLite"],function(c,f,e){var a=function(a){var b,c=[],d=a.length;for(b=0;b!==d;c.push(a[b++]));return c},b=function(a,c,d){e.call(this,a,c,d);this._cycle=0;this._yoyo=!0===this.vars.yoyo;this._repeat=this.vars.repeat||0;this._repeatDelay=this.vars.repeatDelay||0;this._dirty=!0;this.render=b.prototype.render},d=e._internals,m=d.isSelector,s=d.isArray,r=b.prototype=e.to({},
0.1,{}),l=[];b.version="1.13.1";r.constructor=b;r.kill()._gc=!1;b.killTweensOf=b.killDelayedCallsTo=e.killTweensOf;b.getTweensOf=e.getTweensOf;b.lagSmoothing=e.lagSmoothing;b.ticker=e.ticker;b.render=e.render;r.invalidate=function(){return this._yoyo=!0===this.vars.yoyo,this._repeat=this.vars.repeat||0,this._repeatDelay=this.vars.repeatDelay||0,this._uncache(!0),e.prototype.invalidate.call(this)};r.updateTo=function(a,b){var c,d=this.ratio;b&&this._startTime<this._timeline._time&&(this._startTime=
this._timeline._time,this._uncache(!1),this._gc?this._enabled(!0,!1):this._timeline.insert(this,this._startTime-this._delay));for(c in a)this.vars[c]=a[c];if(this._initted)if(b)this._initted=!1;else if(this._gc&&this._enabled(!0,!1),this._notifyPluginsOfEnabled&&this._firstPT&&e._onPluginEvent("_onDisable",this),0.998<this._time/this._duration)c=this._time,this.render(0,!0,!1),this._initted=!1,this.render(c,!0,!1);else if(0<this._time){this._initted=!1;this._init();for(var d=1/(1-d),f=this._firstPT;f;)c=
f.s+f.c,f.c*=d,f.s=c-f.c,f=f._next}return this};r.render=function(a,b,c){this._initted||0===this._duration&&this.vars.repeat&&this.invalidate();var e,f,g,h,k,m,s,r=this._dirty?this.totalDuration():this._totalDuration,z=this._time,A=this._totalTime,F=this._cycle,D=this._duration,G=this._rawPrevTime;if(a>=r?(this._totalTime=r,this._cycle=this._repeat,this._yoyo&&0!==(1&this._cycle)?(this._time=0,this.ratio=this._ease._calcEnd?this._ease.getRatio(0):0):(this._time=D,this.ratio=this._ease._calcEnd?this._ease.getRatio(1):
1),this._reversed||(e=!0,f="onComplete"),0===D&&(this._initted||!this.vars.lazy||c)&&(this._startTime===this._timeline._duration&&(a=0),(0===a||0>G||1E-10===G)&&G!==a&&(c=!0,1E-10<G&&(f="onReverseComplete")),this._rawPrevTime=s=!b||a||G===a?a:1E-10)):1E-7>a?(this._totalTime=this._time=this._cycle=0,this.ratio=this._ease._calcEnd?this._ease.getRatio(0):0,(0!==A||0===D&&0<G&&1E-10!==G)&&(f="onReverseComplete",e=this._reversed),0>a?(this._active=!1,0===D&&(this._initted||!this.vars.lazy||c)&&(0<=G&&
(c=!0),this._rawPrevTime=s=!b||a||G===a?a:1E-10)):this._initted||(c=!0)):(this._totalTime=this._time=a,0!==this._repeat&&(g=D+this._repeatDelay,this._cycle=this._totalTime/g>>0,0!==this._cycle&&this._cycle===this._totalTime/g&&this._cycle--,this._time=this._totalTime-this._cycle*g,this._yoyo&&0!==(1&this._cycle)&&(this._time=D-this._time),this._time>D?this._time=D:0>this._time&&(this._time=0)),this._easeType?(h=this._time/D,k=this._easeType,m=this._easePower,(1===k||3===k&&0.5<=h)&&(h=1-h),3===k&&
(h*=2),1===m?h*=h:2===m?h*=h*h:3===m?h*=h*h*h:4===m&&(h*=h*h*h*h),this.ratio=1===k?1-h:2===k?h:0.5>this._time/D?h/2:1-h/2):this.ratio=this._ease.getRatio(this._time/D)),z===this._time&&!c&&F===this._cycle)return A!==this._totalTime&&this._onUpdate&&(b||this._onUpdate.apply(this.vars.onUpdateScope||this,this.vars.onUpdateParams||l)),void 0;if(!this._initted){if(this._init(),!this._initted||this._gc)return;if(!c&&this._firstPT&&(!1!==this.vars.lazy&&this._duration||this.vars.lazy&&!this._duration))return this._time=
z,this._totalTime=A,this._rawPrevTime=G,this._cycle=F,d.lazyTweens.push(this),this._lazy=a,void 0;this._time&&!e?this.ratio=this._ease.getRatio(this._time/D):e&&this._ease._calcEnd&&(this.ratio=this._ease.getRatio(0===this._time?0:1))}!1!==this._lazy&&(this._lazy=!1);this._active||!this._paused&&this._time!==z&&0<=a&&(this._active=!0);0!==A||(2===this._initted&&0<a&&this._init(),this._startAt&&(0<=a?this._startAt.render(a,b,c):f||(f="_dummyGS")),!this.vars.onStart||0===this._totalTime&&0!==D||!b&&
this.vars.onStart.apply(this.vars.onStartScope||this,this.vars.onStartParams||l));for(g=this._firstPT;g;)g.f?g.t[g.p](g.c*this.ratio+g.s):g.t[g.p]=g.c*this.ratio+g.s,g=g._next;this._onUpdate&&(0>a&&this._startAt&&this._startTime&&this._startAt.render(a,b,c),b||(this._totalTime!==A||e)&&this._onUpdate.apply(this.vars.onUpdateScope||this,this.vars.onUpdateParams||l));this._cycle!==F&&(b||this._gc||this.vars.onRepeat&&this.vars.onRepeat.apply(this.vars.onRepeatScope||this,this.vars.onRepeatParams||l));
f&&(!this._gc||c)&&(0>a&&this._startAt&&!this._onUpdate&&this._startTime&&this._startAt.render(a,b,c),e&&(this._timeline.autoRemoveChildren&&this._enabled(!1,!1),this._active=!1),!b&&this.vars[f]&&this.vars[f].apply(this.vars[f+"Scope"]||this,this.vars[f+"Params"]||l),0===D&&1E-10===this._rawPrevTime&&1E-10!==s&&(this._rawPrevTime=0))};b.to=function(a,c,d){return new b(a,c,d)};b.from=function(a,c,d){return d.runBackwards=!0,d.immediateRender=0!=d.immediateRender,new b(a,c,d)};b.fromTo=function(a,
c,d,e){return e.startAt=d,e.immediateRender=0!=e.immediateRender&&0!=d.immediateRender,new b(a,c,e)};b.staggerTo=b.allTo=function(c,d,f,g,h,k,E){g=g||0;var v,r,x,y,z=f.delay||0,A=[],F=function(){f.onComplete&&f.onComplete.apply(f.onCompleteScope||this,arguments);h.apply(E||this,k||l)};s(c)||("string"==typeof c&&(c=e.selector(c)||c),m(c)&&(c=a(c)));v=c.length;for(x=0;v>x;x++){r={};for(y in f)r[y]=f[y];r.delay=z;x===v-1&&h&&(r.onComplete=F);A[x]=new b(c[x],d,r);z+=g}return A};b.staggerFrom=b.allFrom=
function(a,c,d,e,f,g,h){return d.runBackwards=!0,d.immediateRender=0!=d.immediateRender,b.staggerTo(a,c,d,e,f,g,h)};b.staggerFromTo=b.allFromTo=function(a,c,d,e,f,g,h,k){return e.startAt=d,e.immediateRender=0!=e.immediateRender&&0!=d.immediateRender,b.staggerTo(a,c,e,f,g,h,k)};b.delayedCall=function(a,c,d,e,f){return new b(c,0,{delay:a,onComplete:c,onCompleteParams:d,onCompleteScope:e,onReverseComplete:c,onReverseCompleteParams:d,onReverseCompleteScope:e,immediateRender:!1,useFrames:f,overwrite:0})};
b.set=function(a,c){return new b(a,0,c)};b.isTweening=function(a){return 0<e.getTweensOf(a,!0).length};var g=function(a,b){for(var c=[],d=0,f=a._first;f;)f instanceof e?c[d++]=f:(b&&(c[d++]=f),c=c.concat(g(f,b)),d=c.length),f=f._next;return c},h=b.getAllTweens=function(a){return g(c._rootTimeline,a).concat(g(c._rootFramesTimeline,a))};b.killAll=function(a,b,c,d){null==b&&(b=!0);null==c&&(c=!0);var e,g,k=h(0!=d),l=k.length,m=b&&c&&d;for(g=0;l>g;g++)d=k[g],(m||d instanceof f||(e=d.target===d.vars.onComplete)&&
c||b&&!e)&&(a?d.totalTime(d._reversed?0:d.totalDuration()):d._enabled(!1,!1))};b.killChildTweensOf=function(c,f){if(null!=c){var p,g,h,k=d.tweenLookup;if("string"==typeof c&&(c=e.selector(c)||c),m(c)&&(c=a(c)),s(c))for(g=c.length;-1<--g;)b.killChildTweensOf(c[g],f);else{p=[];for(h in k)for(g=k[h].target.parentNode;g;)g===c&&(p=p.concat(k[h].tweens)),g=g.parentNode;h=p.length;for(g=0;h>g;g++)f&&p[g].totalTime(p[g].totalDuration()),p[g]._enabled(!1,!1)}}};var k=function(a,b,c,d){b=!1!==b;c=!1!==c;d=
!1!==d;for(var e,g=h(d),k=b&&c&&d,l=g.length;-1<--l;)d=g[l],(k||d instanceof f||(e=d.target===d.vars.onComplete)&&c||b&&!e)&&d.paused(a)};return b.pauseAll=function(a,b,c){k(!0,a,b,c)},b.resumeAll=function(a,b,c){k(!1,a,b,c)},b.globalTimeScale=function(a){var b=c._rootTimeline,d=e.ticker.time;return arguments.length?(a=a||1E-10,b._startTime=d-(d-b._startTime)*b._timeScale/a,b=c._rootFramesTimeline,d=e.ticker.frame,b._startTime=d-(d-b._startTime)*b._timeScale/a,b._timeScale=c._rootTimeline._timeScale=
a,a):b._timeScale},r.progress=function(a){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&0!==(1&this._cycle)?1-a:a)+this._cycle*(this._duration+this._repeatDelay),!1):this._time/this.duration()},r.totalProgress=function(a){return arguments.length?this.totalTime(this.totalDuration()*a,!1):this._totalTime/this.totalDuration()},r.time=function(a,b){return arguments.length?(this._dirty&&this.totalDuration(),a>this._duration&&(a=this._duration),this._yoyo&&0!==(1&this._cycle)?a=this._duration-
a+this._cycle*(this._duration+this._repeatDelay):0!==this._repeat&&(a+=this._cycle*(this._duration+this._repeatDelay)),this.totalTime(a,b)):this._time},r.duration=function(a){return arguments.length?c.prototype.duration.call(this,a):this._duration},r.totalDuration=function(a){return arguments.length?-1===this._repeat?this:this.duration((a-this._repeat*this._repeatDelay)/(this._repeat+1)):(this._dirty&&(this._totalDuration=-1===this._repeat?999999999999:this._duration*(this._repeat+1)+this._repeatDelay*
this._repeat,this._dirty=!1),this._totalDuration)},r.repeat=function(a){return arguments.length?(this._repeat=a,this._uncache(!0)):this._repeat},r.repeatDelay=function(a){return arguments.length?(this._repeatDelay=a,this._uncache(!0)):this._repeatDelay},r.yoyo=function(a){return arguments.length?(this._yoyo=a,this):this._yoyo},b},!0);_gsScope._gsDefine("TimelineLite",["core.Animation","core.SimpleTimeline","TweenLite"],function(c,f,e){var a=function(a){f.call(this,a);this._labels={};this.autoRemoveChildren=
!0===this.vars.autoRemoveChildren;this.smoothChildTiming=!0===this.vars.smoothChildTiming;this._sortChildren=!0;this._onUpdate=this.vars.onUpdate;var b,c=this.vars;for(b in c)a=c[b],m(a)&&-1!==a.join("").indexOf("{self}")&&(c[b]=this._swapSelfInParams(a));m(c.tweens)&&this.add(c.tweens,0,c.align,c.stagger)},b=e._internals,d=b.isSelector,m=b.isArray,s=b.lazyTweens,r=b.lazyRender,l=[],g=_gsScope._gsDefine.globals,h=function(a){var b,c={};for(b in a)c[b]=a[b];return c},k=function(a,b,c,d){a._timeline.pause(a._startTime);
b&&b.apply(d||a._timeline,c||l)},b=a.prototype=new f;return a.version="1.13.1",b.constructor=a,b.kill()._gc=!1,b.to=function(a,b,c,d){var f=c.repeat&&g.TweenMax||e;return b?this.add(new f(a,b,c),d):this.set(a,c,d)},b.from=function(a,b,c,d){return this.add((c.repeat&&g.TweenMax||e).from(a,b,c),d)},b.fromTo=function(a,b,c,d,f){var h=d.repeat&&g.TweenMax||e;return b?this.add(h.fromTo(a,b,c,d),f):this.set(a,d,f)},b.staggerTo=function(b,c,f,g,k,l,m,s){l=new a({onComplete:l,onCompleteParams:m,onCompleteScope:s,
smoothChildTiming:this.smoothChildTiming});"string"==typeof b&&(b=e.selector(b)||b);if(d(b)){s=[];var r=b.length;for(m=0;m!==r;s.push(b[m++]));b=s}g=g||0;for(m=0;b.length>m;m++)f.startAt&&(f.startAt=h(f.startAt)),l.to(b[m],c,h(f),m*g);return this.add(l,k)},b.staggerFrom=function(a,b,c,d,e,f,g,h){return c.immediateRender=0!=c.immediateRender,c.runBackwards=!0,this.staggerTo(a,b,c,d,e,f,g,h)},b.staggerFromTo=function(a,b,c,d,e,f,g,h,k){return d.startAt=c,d.immediateRender=0!=d.immediateRender&&0!=c.immediateRender,
this.staggerTo(a,b,d,e,f,g,h,k)},b.call=function(a,b,c,d){return this.add(e.delayedCall(0,a,b,c),d)},b.set=function(a,b,c){return c=this._parseTimeOrLabel(c,0,!0),null==b.immediateRender&&(b.immediateRender=c===this._time&&!this._paused),this.add(new e(a,0,b),c)},a.exportRoot=function(b,c){b=b||{};null==b.smoothChildTiming&&(b.smoothChildTiming=!0);var d,f,g=new a(b),h=g._timeline;null==c&&(c=!0);h._remove(g,!0);g._startTime=0;g._rawPrevTime=g._time=g._totalTime=h._time;for(d=h._first;d;)f=d._next,
c&&d instanceof e&&d.target===d.vars.onComplete||g.add(d,d._startTime-d._delay),d=f;return h.add(g,0),g},b.add=function(b,d,g,h){var k,l,s;if("number"!=typeof d&&(d=this._parseTimeOrLabel(d,0,!0,b)),!(b instanceof c)){if(b instanceof Array||b&&b.push&&m(b)){g=g||"normal";h=h||0;k=b.length;for(l=0;k>l;l++)m(s=b[l])&&(s=new a({tweens:s})),this.add(s,d),"string"!=typeof s&&"function"!=typeof s&&("sequence"===g?d=s._startTime+s.totalDuration()/s._timeScale:"start"===g&&(s._startTime-=s.delay())),d+=h;
return this._uncache(!0)}if("string"==typeof b)return this.addLabel(b,d);if("function"!=typeof b)throw"Cannot add "+b+" into the timeline; it is not a tween, timeline, function, or string.";b=e.delayedCall(0,b)}if(f.prototype.add.call(this,b,d),(this._gc||this._time===this._duration)&&!this._paused&&this._duration<this.duration())for(g=this,b=g.rawTime()>b._startTime;g._timeline;)b&&g._timeline.smoothChildTiming?g.totalTime(g._totalTime,!0):g._gc&&g._enabled(!0,!1),g=g._timeline;return this},b.remove=
function(a){if(a instanceof c)return this._remove(a,!1);if(a instanceof Array||a&&a.push&&m(a)){for(var b=a.length;-1<--b;)this.remove(a[b]);return this}return"string"==typeof a?this.removeLabel(a):this.kill(null,a)},b._remove=function(a,b){f.prototype._remove.call(this,a,b);var c=this._last;return c?this._time>c._startTime+c._totalDuration/c._timeScale&&(this._time=this.duration(),this._totalTime=this._totalDuration):this._time=this._totalTime=this._duration=this._totalDuration=0,this},b.append=
function(a,b){return this.add(a,this._parseTimeOrLabel(null,b,!0,a))},b.insert=b.insertMultiple=function(a,b,c,d){return this.add(a,b||0,c,d)},b.appendMultiple=function(a,b,c,d){return this.add(a,this._parseTimeOrLabel(null,b,!0,a),c,d)},b.addLabel=function(a,b){return this._labels[a]=this._parseTimeOrLabel(b),this},b.addPause=function(a,b,c,d){return this.call(k,["{self}",b,c,d],this,a)},b.removeLabel=function(a){return delete this._labels[a],this},b.getLabelTime=function(a){return null!=this._labels[a]?
this._labels[a]:-1},b._parseTimeOrLabel=function(a,b,d,e){var f;if(e instanceof c&&e.timeline===this)this.remove(e);else if(e&&(e instanceof Array||e.push&&m(e)))for(f=e.length;-1<--f;)e[f]instanceof c&&e[f].timeline===this&&this.remove(e[f]);if("string"==typeof b)return this._parseTimeOrLabel(b,d&&"number"==typeof a&&null==this._labels[b]?a-this.duration():0,d);if(b=b||0,"string"!=typeof a||!isNaN(a)&&null==this._labels[a])null==a&&(a=this.duration());else{if(f=a.indexOf("="),-1===f)return null==
this._labels[a]?d?this._labels[a]=this.duration()+b:b:this._labels[a]+b;b=parseInt(a.charAt(f-1)+"1",10)*Number(a.substr(f+1));a=1<f?this._parseTimeOrLabel(a.substr(0,f-1),0,d):this.duration()}return Number(a)+b},b.seek=function(a,b){return this.totalTime("number"==typeof a?a:this._parseTimeOrLabel(a),!1!==b)},b.stop=function(){return this.paused(!0)},b.gotoAndPlay=function(a,b){return this.play(a,b)},b.gotoAndStop=function(a,b){return this.pause(a,b)},b.render=function(a,b,c){this._gc&&this._enabled(!0,
!1);var d,e,f,g,h=this._dirty?this.totalDuration():this._totalDuration,k=this._time,m=this._startTime,y=this._timeScale,z=this._paused;if(a>=h?(this._totalTime=this._time=h,this._reversed||this._hasPausedChild()||(e=!0,g="onComplete",0===this._duration&&(0===a||0>this._rawPrevTime||1E-10===this._rawPrevTime)&&this._rawPrevTime!==a&&this._first&&(d=!0,1E-10<this._rawPrevTime&&(g="onReverseComplete"))),this._rawPrevTime=this._duration||!b||a||this._rawPrevTime===a?a:1E-10,a=h+1E-4):1E-7>a?(this._totalTime=
this._time=0,(0!==k||0===this._duration&&1E-10!==this._rawPrevTime&&(0<this._rawPrevTime||0>a&&0<=this._rawPrevTime))&&(g="onReverseComplete",e=this._reversed),0>a?(this._active=!1,0<=this._rawPrevTime&&this._first&&(d=!0),this._rawPrevTime=a):(this._rawPrevTime=this._duration||!b||a||this._rawPrevTime===a?a:1E-10,a=0,this._initted||(d=!0))):this._totalTime=this._time=this._rawPrevTime=a,this._time!==k&&this._first||c||d){if(this._initted||(this._initted=!0),this._active||!this._paused&&this._time!==
k&&0<a&&(this._active=!0),0===k&&this.vars.onStart&&0!==this._time&&(b||this.vars.onStart.apply(this.vars.onStartScope||this,this.vars.onStartParams||l)),this._time>=k)for(d=this._first;d&&(f=d._next,!this._paused||z);)(d._active||d._startTime<=this._time&&!d._paused&&!d._gc)&&(d._reversed?d.render((d._dirty?d.totalDuration():d._totalDuration)-(a-d._startTime)*d._timeScale,b,c):d.render((a-d._startTime)*d._timeScale,b,c)),d=f;else for(d=this._last;d&&(f=d._prev,!this._paused||z);)(d._active||k>=d._startTime&&
!d._paused&&!d._gc)&&(d._reversed?d.render((d._dirty?d.totalDuration():d._totalDuration)-(a-d._startTime)*d._timeScale,b,c):d.render((a-d._startTime)*d._timeScale,b,c)),d=f;this._onUpdate&&(b||(s.length&&r(),this._onUpdate.apply(this.vars.onUpdateScope||this,this.vars.onUpdateParams||l)));g&&(this._gc||(m===this._startTime||y!==this._timeScale)&&(0===this._time||h>=this.totalDuration())&&(e&&(s.length&&r(),this._timeline.autoRemoveChildren&&this._enabled(!1,!1),this._active=!1),!b&&this.vars[g]&&
this.vars[g].apply(this.vars[g+"Scope"]||this,this.vars[g+"Params"]||l)))}},b._hasPausedChild=function(){for(var b=this._first;b;){if(b._paused||b instanceof a&&b._hasPausedChild())return!0;b=b._next}return!1},b.getChildren=function(a,b,c,d){d=d||-9999999999;for(var f=[],g=this._first,h=0;g;)d>g._startTime||(g instanceof e?!1!==b&&(f[h++]=g):(!1!==c&&(f[h++]=g),!1!==a&&(f=f.concat(g.getChildren(!0,b,c)),h=f.length))),g=g._next;return f},b.getTweensOf=function(a,b){var c,d,f=this._gc,g=[],h=0;f&&this._enabled(!0,
!0);c=e.getTweensOf(a);for(d=c.length;-1<--d;)(c[d].timeline===this||b&&this._contains(c[d]))&&(g[h++]=c[d]);return f&&this._enabled(!1,!0),g},b._contains=function(a){for(a=a.timeline;a;){if(a===this)return!0;a=a.timeline}return!1},b.shiftChildren=function(a,b,c){c=c||0;for(var d,e=this._first,f=this._labels;e;)e._startTime>=c&&(e._startTime+=a),e=e._next;if(b)for(d in f)f[d]>=c&&(f[d]+=a);return this._uncache(!0)},b._kill=function(a,b){if(!a&&!b)return this._enabled(!1,!1);for(var c=b?this.getTweensOf(b):
this.getChildren(!0,!0,!1),d=c.length,e=!1;-1<--d;)c[d]._kill(a,b)&&(e=!0);return e},b.clear=function(a){var b=this.getChildren(!1,!0,!0),c=b.length;for(this._time=this._totalTime=0;-1<--c;)b[c]._enabled(!1,!1);return!1!==a&&(this._labels={}),this._uncache(!0)},b.invalidate=function(){for(var a=this._first;a;)a.invalidate(),a=a._next;return this},b._enabled=function(a,b){if(a===this._gc)for(var c=this._first;c;)c._enabled(a,!0),c=c._next;return f.prototype._enabled.call(this,a,b)},b.duration=function(a){return arguments.length?
(0!==this.duration()&&0!==a&&this.timeScale(this._duration/a),this):(this._dirty&&this.totalDuration(),this._duration)},b.totalDuration=function(a){if(!arguments.length){if(this._dirty){var b,c,d=0;c=this._last;for(var e=999999999999;c;)b=c._prev,c._dirty&&c.totalDuration(),c._startTime>e&&this._sortChildren&&!c._paused?this.add(c,c._startTime-c._delay):e=c._startTime,0>c._startTime&&!c._paused&&(d-=c._startTime,this._timeline.smoothChildTiming&&(this._startTime+=c._startTime/this._timeScale),this.shiftChildren(-c._startTime,
!1,-9999999999),e=0),c=c._startTime+c._totalDuration/c._timeScale,c>d&&(d=c),c=b;this._duration=this._totalDuration=d;this._dirty=!1}return this._totalDuration}return 0!==this.totalDuration()&&0!==a&&this.timeScale(this._totalDuration/a),this},b.usesFrames=function(){for(var a=this._timeline;a._timeline;)a=a._timeline;return a===c._rootFramesTimeline},b.rawTime=function(){return this._paused?this._totalTime:(this._timeline.rawTime()-this._startTime)*this._timeScale},a},!0);_gsScope._gsDefine("TimelineMax",
["TimelineLite","TweenLite","easing.Ease"],function(c,f,e){var a=function(a){c.call(this,a);this._repeat=this.vars.repeat||0;this._repeatDelay=this.vars.repeatDelay||0;this._cycle=0;this._yoyo=!0===this.vars.yoyo;this._dirty=!0},b=[],d=f._internals,m=d.lazyTweens,s=d.lazyRender,r=new e(null,null,1,0);e=a.prototype=new c;return e.constructor=a,e.kill()._gc=!1,a.version="1.13.1",e.invalidate=function(){return this._yoyo=!0===this.vars.yoyo,this._repeat=this.vars.repeat||0,this._repeatDelay=this.vars.repeatDelay||
0,this._uncache(!0),c.prototype.invalidate.call(this)},e.addCallback=function(a,b,c,d){return this.add(f.delayedCall(0,a,c,d),b)},e.removeCallback=function(a,b){if(a)if(null==b)this._kill(null,a);else for(var c=this.getTweensOf(a,!1),d=c.length,e=this._parseTimeOrLabel(b);-1<--d;)c[d]._startTime===e&&c[d]._enabled(!1,!1);return this},e.tweenTo=function(a,c){c=c||{};var d,e,n,m={ease:r,overwrite:c.delay?2:1,useFrames:this.usesFrames(),immediateRender:!1};for(e in c)m[e]=c[e];return m.time=this._parseTimeOrLabel(a),
d=Math.abs(Number(m.time)-this._time)/this._timeScale||0.001,n=new f(this,d,m),m.onStart=function(){n.target.paused(!0);n.vars.time!==n.target.time()&&d===n.duration()&&n.duration(Math.abs(n.vars.time-n.target.time())/n.target._timeScale);c.onStart&&c.onStart.apply(c.onStartScope||n,c.onStartParams||b)},n},e.tweenFromTo=function(a,b,c){c=c||{};a=this._parseTimeOrLabel(a);c.startAt={onComplete:this.seek,onCompleteParams:[a],onCompleteScope:this};c.immediateRender=!1!==c.immediateRender;b=this.tweenTo(b,
c);return b.duration(Math.abs(b.vars.time-a)/this._timeScale||0.001)},e.render=function(a,c,d){this._gc&&this._enabled(!0,!1);var e,f,q,p,u,t=this._dirty?this.totalDuration():this._totalDuration,C=this._duration,r=this._time,v=this._totalTime,w=this._startTime,x=this._timeScale,y=this._rawPrevTime,z=this._paused,A=this._cycle;if(a>=t?(this._locked||(this._totalTime=t,this._cycle=this._repeat),this._reversed||this._hasPausedChild()||(f=!0,p="onComplete",0===this._duration&&(0===a||0>y||1E-10===y)&&
y!==a&&this._first&&(e=!0,1E-10<y&&(p="onReverseComplete"))),this._rawPrevTime=this._duration||!c||a||this._rawPrevTime===a?a:1E-10,this._yoyo&&0!==(1&this._cycle)?this._time=a=0:(this._time=C,a=C+1E-4)):1E-7>a?(this._locked||(this._totalTime=this._cycle=0),this._time=0,(0!==r||0===C&&1E-10!==y&&(0<y||0>a&&0<=y)&&!this._locked)&&(p="onReverseComplete",f=this._reversed),0>a?(this._active=!1,0<=y&&this._first&&(e=!0),this._rawPrevTime=a):(this._rawPrevTime=C||!c||a||this._rawPrevTime===a?a:1E-10,a=
0,this._initted||(e=!0))):(0===C&&0>y&&(e=!0),this._time=this._rawPrevTime=a,this._locked||(this._totalTime=a,0!==this._repeat&&(u=C+this._repeatDelay,this._cycle=this._totalTime/u>>0,0!==this._cycle&&this._cycle===this._totalTime/u&&this._cycle--,this._time=this._totalTime-this._cycle*u,this._yoyo&&0!==(1&this._cycle)&&(this._time=C-this._time),this._time>C?(this._time=C,a=C+1E-4):0>this._time?this._time=a=0:a=this._time))),this._cycle!==A&&!this._locked){u=this._yoyo&&0!==(1&A);var F=u===(this._yoyo&&
0!==(1&this._cycle)),D=this._totalTime,G=this._cycle,B=this._rawPrevTime,H=this._time;if(this._totalTime=A*C,A>this._cycle?u=!u:this._totalTime+=C,this._time=r,this._rawPrevTime=0===C?y-1E-4:y,this._cycle=A,this._locked=!0,r=u?0:C,this.render(r,c,0===C),c||this._gc||this.vars.onRepeat&&this.vars.onRepeat.apply(this.vars.onRepeatScope||this,this.vars.onRepeatParams||b),F&&(r=u?C+1E-4:-1E-4,this.render(r,!0,!1)),this._locked=!1,this._paused&&!z)return;this._time=H;this._totalTime=D;this._cycle=G;this._rawPrevTime=
B}if(!(this._time!==r&&this._first||d||e))return v!==this._totalTime&&this._onUpdate&&(c||this._onUpdate.apply(this.vars.onUpdateScope||this,this.vars.onUpdateParams||b)),void 0;if(this._initted||(this._initted=!0),this._active||!this._paused&&this._totalTime!==v&&0<a&&(this._active=!0),0===v&&this.vars.onStart&&0!==this._totalTime&&(c||this.vars.onStart.apply(this.vars.onStartScope||this,this.vars.onStartParams||b)),this._time>=r)for(e=this._first;e&&(q=e._next,!this._paused||z);)(e._active||e._startTime<=
this._time&&!e._paused&&!e._gc)&&(e._reversed?e.render((e._dirty?e.totalDuration():e._totalDuration)-(a-e._startTime)*e._timeScale,c,d):e.render((a-e._startTime)*e._timeScale,c,d)),e=q;else for(e=this._last;e&&(q=e._prev,!this._paused||z);)(e._active||r>=e._startTime&&!e._paused&&!e._gc)&&(e._reversed?e.render((e._dirty?e.totalDuration():e._totalDuration)-(a-e._startTime)*e._timeScale,c,d):e.render((a-e._startTime)*e._timeScale,c,d)),e=q;this._onUpdate&&(c||(m.length&&s(),this._onUpdate.apply(this.vars.onUpdateScope||
this,this.vars.onUpdateParams||b)));p&&(this._locked||this._gc||(w===this._startTime||x!==this._timeScale)&&(0===this._time||t>=this.totalDuration())&&(f&&(m.length&&s(),this._timeline.autoRemoveChildren&&this._enabled(!1,!1),this._active=!1),!c&&this.vars[p]&&this.vars[p].apply(this.vars[p+"Scope"]||this,this.vars[p+"Params"]||b)))},e.getActive=function(a,b,c){null==a&&(a=!0);null==b&&(b=!0);null==c&&(c=!1);var d=[];c=this.getChildren(a,b,c);var e=0,f=c.length;for(a=0;f>a;a++)b=c[a],b.isActive()&&
(d[e++]=b);return d},e.getLabelAfter=function(a){a||0!==a&&(a=this._time);var b,c=this.getLabelsArray(),d=c.length;for(b=0;d>b;b++)if(c[b].time>a)return c[b].name;return null},e.getLabelBefore=function(a){null==a&&(a=this._time);for(var b=this.getLabelsArray(),c=b.length;-1<--c;)if(a>b[c].time)return b[c].name;return null},e.getLabelsArray=function(){var a,b=[],c=0;for(a in this._labels)b[c++]={time:this._labels[a],name:a};return b.sort(function(a,b){return a.time-b.time}),b},e.progress=function(a){return arguments.length?
this.totalTime(this.duration()*(this._yoyo&&0!==(1&this._cycle)?1-a:a)+this._cycle*(this._duration+this._repeatDelay),!1):this._time/this.duration()},e.totalProgress=function(a){return arguments.length?this.totalTime(this.totalDuration()*a,!1):this._totalTime/this.totalDuration()},e.totalDuration=function(a){return arguments.length?-1===this._repeat?this:this.duration((a-this._repeat*this._repeatDelay)/(this._repeat+1)):(this._dirty&&(c.prototype.totalDuration.call(this),this._totalDuration=-1===
this._repeat?999999999999:this._duration*(this._repeat+1)+this._repeatDelay*this._repeat),this._totalDuration)},e.time=function(a,b){return arguments.length?(this._dirty&&this.totalDuration(),a>this._duration&&(a=this._duration),this._yoyo&&0!==(1&this._cycle)?a=this._duration-a+this._cycle*(this._duration+this._repeatDelay):0!==this._repeat&&(a+=this._cycle*(this._duration+this._repeatDelay)),this.totalTime(a,b)):this._time},e.repeat=function(a){return arguments.length?(this._repeat=a,this._uncache(!0)):
this._repeat},e.repeatDelay=function(a){return arguments.length?(this._repeatDelay=a,this._uncache(!0)):this._repeatDelay},e.yoyo=function(a){return arguments.length?(this._yoyo=a,this):this._yoyo},e.currentLabel=function(a){return arguments.length?this.seek(a,!0):this.getLabelBefore(this._time+1E-8)},a},!0);(function(){var c=180/Math.PI,f=[],e=[],a=[],b={},d=function(a,b,c,d){this.a=a;this.b=b;this.c=c;this.d=d;this.da=d-a;this.ca=c-a;this.ba=b-a},m=function(a,b,c,d){var e={a:a},f={},m={},l={c:d},
s=(a+b)/2,r=(b+c)/2;c=(c+d)/2;b=(s+r)/2;var r=(r+c)/2,v=(r-b)/8;return e.b=s+(a-s)/4,f.b=b+v,e.c=f.a=(e.b+f.b)/2,f.c=m.a=(b+r)/2,m.b=r-v,l.b=c+(d-c)/4,m.c=l.a=(m.b+l.b)/2,[e,f,m,l]},s=function(c,h,k,n,q,p){var l,t,s,r,v={},w=[],x=p||c[0];q="string"==typeof q?","+q+",":",x,y,z,left,top,right,bottom,marginTop,marginLeft,marginRight,marginBottom,paddingLeft,paddingTop,paddingRight,paddingBottom,backgroundPosition,backgroundPosition_y,";null==h&&(h=1);for(t in c[0])w.push(t);if(1<c.length){s=c[c.length-
1];r=!0;for(l=w.length;-1<--l;)if(t=w[l],0.05<Math.abs(x[t]-s[t])){r=!1;break}r&&(c=c.concat(),p&&c.unshift(p),c.push(c[1]),p=c[c.length-3])}f.length=e.length=a.length=0;for(l=w.length;-1<--l;){t=w[l];b[t]=-1!==q.indexOf(","+t+",");s=v;var x=t,y;y=c;var z=t,A=b[t],F=p,D=void 0,G=void 0,B=void 0,H=void 0,I=void 0,B=void 0,K=[];if(F)for(y=[F].concat(y),G=y.length;-1<--G;)"string"==typeof(B=y[G][z])&&"="===B.charAt(1)&&(y[G][z]=F[z]+Number(B.charAt(0)+B.substr(2)));if(D=y.length-2,0>D)y=(K[0]=new d(y[0][z],
0,0,y[-1>D?0:1][z]),K);else{for(G=0;D>G;G++)B=y[G][z],H=y[G+1][z],K[G]=new d(B,0,0,H),A&&(I=y[G+2][z],f[G]=(f[G]||0)+(H-B)*(H-B),e[G]=(e[G]||0)+(I-H)*(I-H));y=(K[G]=new d(y[G][z],0,0,y[G+1][z]),K)}s[x]=y}for(l=f.length;-1<--l;)f[l]=Math.sqrt(f[l]),e[l]=Math.sqrt(e[l]);if(!n){for(l=w.length;-1<--l;)if(b[t])for(c=v[w[l]],s=c.length-1,q=0;s>q;q++)p=c[q+1].da/e[q]+c[q].da/f[q],a[q]=(a[q]||0)+p*p;for(l=a.length;-1<--l;)a[l]=Math.sqrt(a[l])}l=w.length;for(q=k?4:1;-1<--l;){t=w[l];p=c=v[t];s=h;x=k;y=n;t=
b[t];for(var J=F=A=z=void 0,M=H=B=J=K=I=G=D=void 0,Q=void 0,R=p.length-1,N=0,L=p[0].a,z=0;R>z;z++)D=p[N],A=D.a,F=D.d,J=p[N+1].d,t?(H=f[z],M=e[z],Q=0.25*(M+H)*s/(y?0.5:a[z]||0.5),G=F-(F-A)*(y?0.5*s:0!==H?Q/H:0),I=F+(J-F)*(y?0.5*s:0!==M?Q/M:0),K=F-(G+((I-G)*(3*H/(H+M)+0.5)/4||0))):(G=F-0.5*(F-A)*s,I=F+0.5*(J-F)*s,K=F-(G+I)/2),G+=K,I+=K,D.c=J=G,D.b=0!==z?L:L=D.a+0.6*(D.c-D.a),D.da=F-A,D.ca=J-A,D.ba=L-A,x?(B=m(A,L,J,F),p.splice(N,1,B[0],B[1],B[2],B[3]),N+=4):N++,L=I;D=p[N];D.b=L;D.c=L+0.4*(D.d-L);D.da=
D.d-D.a;D.ca=D.c-D.a;D.ba=L-D.a;x&&(B=m(D.a,L,D.c,D.d),p.splice(N,1,B[0],B[1],B[2],B[3]));r&&(c.splice(0,q),c.splice(c.length-q,q))}return v},r=_gsScope._gsDefine.plugin({propName:"bezier",priority:-1,version:"1.3.3",API:2,global:!0,init:function(a,b,c){this._target=a;b instanceof Array&&(b={values:b});this._func={};this._round={};this._props=[];this._timeRes=null==b.timeResolution?6:parseInt(b.timeResolution,10);var e,f,p,m,l,r=b.values||[],E={};p=r[0];this._autoRotate=(f=b.autoRotate||c.vars.orientToBezier)?
f instanceof Array?f:[["x","y","rotation",!0===f?0:Number(f)||0]]:null;for(e in p)this._props.push(e);for(p=this._props.length;-1<--p;)e=this._props[p],this._overwriteProps.push(e),f=this._func[e]="function"==typeof a[e],E[e]=f?a[e.indexOf("set")||"function"!=typeof a["get"+e.substr(3)]?e:"get"+e.substr(3)]():parseFloat(a[e]),l||E[e]!==r[0][e]&&(l=E);if("cubic"!==b.type&&"quadratic"!==b.type&&"soft"!==b.type)E=s(r,isNaN(b.curviness)?1:b.curviness,!1,"thruBasic"===b.type,b.correlate,l);else{p=r;var r=
(r=b.type)||"soft",v,w,x,y,z,A,F;b={};l="cubic"===r?3:2;var D="soft"===r,G=[];if(D&&E&&(p=[E].concat(p)),null==p||l+1>p.length)throw"invalid Bezier data";for(v in p[0])G.push(v);for(y=G.length;-1<--y;){v=G[y];b[v]=f=[];F=0;A=p.length;for(z=0;A>z;z++)r=null==E?p[z][v]:"string"==typeof(w=p[z][v])&&"="===w.charAt(1)?E[v]+Number(w.charAt(0)+w.substr(2)):Number(w),D&&1<z&&A-1>z&&(f[F++]=(r+f[F-2])/2),f[F++]=r;A=F-l+1;for(z=F=0;A>z;z+=l)r=f[z],v=f[z+1],w=f[z+2],x=2===l?0:f[z+3],f[F++]=w=3===l?new d(r,v,
w,x):new d(r,(2*v+r)/3,(2*v+w)/3,w);f.length=F}E=b}if(this._beziers=E,this._segCount=this._beziers[e].length,this._timeRes){f=this._beziers;e=this._timeRes;e=e>>0||6;E=[];v=[];p=w=0;b=e-1;l=[];r=[];for(m in f){y=f[m];z=E;A=e;var B=void 0,H=void 0,I=D=F=H=void 0,K=B=void 0,J=void 0,J=I=void 0,G=1/A;for(x=y.length;-1<--x;)for(I=y[x],H=I.a,F=I.d-H,D=I.c-H,I=I.b-H,H=0,K=1;A>=K;K++)B=G*K,J=1-B,B=H-(H=(B*B*F+3*J*(B*D+J*I))*B),J=x*A+K-1,z[J]=(z[J]||0)+B*B}f=E.length;for(m=0;f>m;m++)w+=Math.sqrt(E[m]),y=
m%e,r[y]=w,y===b&&(p+=w,y=m/e>>0,l[y]=r,v[y]=p,w=0,r=[]);this._length=p;this._lengths=v;this._segments=l;this._l1=this._li=this._s1=this._si=0;this._l2=this._lengths[0];this._curSeg=this._segments[0];this._s2=this._curSeg[0];this._prec=1/this._curSeg.length}if(f=this._autoRotate)for(this._initialRotations=[],f[0]instanceof Array||(this._autoRotate=f=[f]),p=f.length;-1<--p;){for(m=0;3>m;m++)e=f[p][m],this._func[e]="function"==typeof a[e]?a[e.indexOf("set")||"function"!=typeof a["get"+e.substr(3)]?
e:"get"+e.substr(3)]:!1;e=f[p][2];this._initialRotations[p]=this._func[e]?this._func[e].call(this._target):this._target[e]}return this._startRatio=c.vars.runBackwards?1:0,!0},set:function(a){var b,d,e,f,p,m;p=this._segCount;var l=this._func,s=this._target,r=a!==this._startRatio;if(this._timeRes){if(b=this._lengths,f=this._curSeg,a*=this._length,e=this._li,a>this._l2&&p-1>e){for(p-=1;p>e&&a>=(this._l2=b[++e]););this._l1=b[e-1];this._li=e;this._curSeg=f=this._segments[e];this._s2=f[this._s1=this._si=
0]}else if(this._l1>a&&0<e){for(;0<e&&(this._l1=b[--e])>=a;);0===e&&this._l1>a?this._l1=0:e++;this._l2=b[e];this._li=e;this._curSeg=f=this._segments[e];this._s1=f[(this._si=f.length-1)-1]||0;this._s2=f[this._si]}if(b=e,a-=this._l1,e=this._si,a>this._s2&&f.length-1>e){for(p=f.length-1;p>e&&a>=(this._s2=f[++e]););this._s1=f[e-1];this._si=e}else if(this._s1>a&&0<e){for(;0<e&&(this._s1=f[--e])>=a;);0===e&&this._s1>a?this._s1=0:e++;this._s2=f[e];this._si=e}p=(e+(a-this._s1)/(this._s2-this._s1))*this._prec}else b=
0>a?0:1<=a?p-1:p*a>>0,p*=a-1/p*b;d=1-p;for(e=this._props.length;-1<--e;)a=this._props[e],f=this._beziers[a][b],m=(p*p*f.da+3*d*(p*f.ca+d*f.ba))*p+f.a,this._round[a]&&(m=Math.round(m)),l[a]?s[a](m):s[a]=m;if(this._autoRotate){var v,w,x,y,z,A,F=this._autoRotate;for(e=F.length;-1<--e;)a=F[e][2],z=F[e][3]||0,A=!0===F[e][4]?1:c,f=this._beziers[F[e][0]],d=this._beziers[F[e][1]],f&&d&&(f=f[b],d=d[b],v=f.a+(f.b-f.a)*p,x=f.b+(f.c-f.b)*p,v+=(x-v)*p,x+=(f.c+(f.d-f.c)*p-x)*p,w=d.a+(d.b-d.a)*p,y=d.b+(d.c-d.b)*
p,w+=(y-w)*p,y+=(d.c+(d.d-d.c)*p-y)*p,m=r?Math.atan2(y-w,x-v)*A+z:this._initialRotations[e],l[a]?s[a](m):s[a]=m)}}}),l=r.prototype;r.bezierThrough=s;r.cubicToQuadratic=m;r._autoCSS=!0;r.quadraticToCubic=function(a,b,c){return new d(a,(2*b+a)/3,(2*b+c)/3,c)};r._cssRegister=function(){var a=_gsScope._gsDefine.globals.CSSPlugin;if(a){var a=a._internals,b=a._parseToProxy,c=a._setPluginRatio,d=a.CSSPropTween;a._registerComplexSpecialProp("bezier",{parser:function(a,e,f,g,m,l){e instanceof Array&&(e={values:e});
l=new r;var s,w,x=e.values,y=x.length-1,z=[],A={};if(0>y)return m;for(f=0;y>=f;f++)w=b(a,x[f],g,m,l,y!==f),z[f]=w.end;for(s in e)A[s]=e[s];return A.values=z,m=new d(a,"bezier",0,0,w.pt,2),m.data=w,m.plugin=l,m.setRatio=c,0===A.autoRotate&&(A.autoRotate=!0),!A.autoRotate||A.autoRotate instanceof Array||(f=!0===A.autoRotate?0:Number(A.autoRotate),A.autoRotate=null!=w.end.left?[["left","top","rotation",f,!1]]:null!=w.end.x?[["x","y","rotation",f,!1]]:!1),A.autoRotate&&(g._transform||g._enableTransforms(!1),
w.autoRotate=g._target._gsTransform),l._onInitTween(w.proxy,A,g._tween),m}})}};l._roundProps=function(a,b){for(var c=this._overwriteProps,d=c.length;-1<--d;)(a[c[d]]||a.bezier||a.bezierThrough)&&(this._round[c[d]]=b)};l._kill=function(a){var b,c,d=this._props;for(b in this._beziers)if(b in a)for(delete this._beziers[b],delete this._func[b],c=d.length;-1<--c;)d[c]===b&&d.splice(c,1);return this._super._kill.call(this,a)}})();_gsScope._gsDefine("plugins.CSSPlugin",["plugins.TweenPlugin","TweenLite"],
function(c,f){},!0);(function(){var c=_gsScope._gsDefine.plugin({propName:"roundProps",priority:-1,API:2,init:function(c,e,a){return this._tween=a,!0}}).prototype;c._onInitAllProps=function(){for(var c,e,a,b=this._tween,d=b.vars.roundProps instanceof Array?b.vars.roundProps:b.vars.roundProps.split(","),m=d.length,s={},r=b._propLookup.roundProps;-1<--m;)s[d[m]]=1;for(m=d.length;-1<--m;)for(c=d[m],e=b._firstPT;e;)a=e._next,e.pg?e.t._roundProps(s,!0):e.n===c&&(this._add(e.t,c,e.s,e.c),a&&(a._prev=e._prev),
e._prev?e._prev._next=a:b._firstPT===e&&(b._firstPT=a),e._next=e._prev=null,b._propLookup[c]=r),e=a;return!1};c._add=function(c,e,a,b){this._addTween(c,e,a,a+b,e,!0);this._overwriteProps.push(e)}})();_gsScope._gsDefine.plugin({propName:"attr",API:2,version:"0.3.3",init:function(c,f){var e,a;if("function"!=typeof c.setAttribute)return!1;this._target=c;this._proxy={};this._start={};this._end={};for(e in f)this._start[e]=this._proxy[e]=a=c.getAttribute(e),a=this._addTween(this._proxy,e,parseFloat(a),
f[e],e),this._end[e]=a?a.s+a.c:f[e],this._overwriteProps.push(e);return!0},set:function(c){this._super.setRatio.call(this,c);for(var f=this._overwriteProps,e=f.length,a=1===c?this._end:c?this._proxy:this._start;-1<--e;)c=f[e],this._target.setAttribute(c,a[c]+"")}});_gsScope._gsDefine.plugin({propName:"directionalRotation",version:"0.2.1",API:2,init:function(c,f){"object"!=typeof f&&(f={rotation:f});this.finals={};var e,a,b,d,m,s,r=!0===f.useRadians?2*Math.PI:360;for(e in f)"useRadians"!==e&&(s=(f[e]+
"").split("_"),a=s[0],b=parseFloat("function"!=typeof c[e]?c[e]:c[e.indexOf("set")||"function"!=typeof c["get"+e.substr(3)]?e:"get"+e.substr(3)]()),d=this.finals[e]="string"==typeof a&&"="===a.charAt(1)?b+parseInt(a.charAt(0)+"1",10)*Number(a.substr(2)):Number(a)||0,m=d-b,s.length&&(a=s.join("_"),-1!==a.indexOf("short")&&(m%=r,m!==m%(r/2)&&(m=0>m?m+r:m-r)),-1!==a.indexOf("_cw")&&0>m?m=(m+9999999999*r)%r-(0|m/r)*r:-1!==a.indexOf("ccw")&&0<m&&(m=(m-9999999999*r)%r-(0|m/r)*r)),(1E-6<m||-1E-6>m)&&(this._addTween(c,
e,b,b+m,e),this._overwriteProps.push(e)));return!0},set:function(c){if(1!==c)this._super.setRatio.call(this,c);else for(c=this._firstPT;c;)c.f?c.t[c.p](this.finals[c.p]):c.t[c.p]=this.finals[c.p],c=c._next}})._autoCSS=!0;_gsScope._gsDefine("easing.Back",["easing.Ease"],function(c){var f,e,a,b=_gsScope.GreenSockGlobals||_gsScope,d=2*Math.PI,m=Math.PI/2,s=b.com.greensock._class,r=function(a,b){var d=s("easing."+a,function(){},!0),e=d.prototype=new c;return e.constructor=d,e.getRatio=b,d},l=c.register||
function(){},g=function(a,b,c,d){b=s("easing."+a,{easeOut:new b,easeIn:new c,easeInOut:new d},!0);return l(b,a),b},h=function(a,b,c){this.t=a;this.v=b;c&&(this.next=c,c.prev=this,this.c=c.v-b,this.gap=c.t-a)},k=function(a,b){var d=s("easing."+a,function(a){this._p1=a||0===a?a:1.70158;this._p2=1.525*this._p1},!0),e=d.prototype=new c;return e.constructor=d,e.getRatio=b,e.config=function(a){return new d(a)},d},k=g("Back",k("BackOut",function(a){return(a-=1)*a*((this._p1+1)*a+this._p1)+1}),k("BackIn",
function(a){return a*a*((this._p1+1)*a-this._p1)}),k("BackInOut",function(a){return 1>(a*=2)?0.5*a*a*((this._p2+1)*a-this._p2):0.5*((a-=2)*a*((this._p2+1)*a+this._p2)+2)})),n=s("easing.SlowMo",function(a,b,c){null==a?a=0.7:1<a&&(a=1);this._p=1!==a?b||0===b?b:0.7:0;this._p1=(1-a)/2;this._p2=a;this._p3=this._p1+this._p2;this._calcEnd=!0===c},!0),q=n.prototype=new c;return q.constructor=n,q.getRatio=function(a){var b=a+(0.5-a)*this._p;return this._p1>a?this._calcEnd?1-(a=1-a/this._p1)*a:b-(a=1-a/this._p1)*
a*a*a*b:a>this._p3?this._calcEnd?1-(a=(a-this._p3)/this._p1)*a:b+(a-b)*(a=(a-this._p3)/this._p1)*a*a*a:this._calcEnd?1:b},n.ease=new n(0.7,0.7),q.config=n.config=function(a,b,c){return new n(a,b,c)},f=s("easing.SteppedEase",function(a){a=a||1;this._p1=1/a;this._p2=a+1},!0),q=f.prototype=new c,q.constructor=f,q.getRatio=function(a){return 0>a?a=0:1<=a&&(a=0.999999999),(this._p2*a>>0)*this._p1},q.config=f.config=function(a){return new f(a)},e=s("easing.RoughEase",function(a){a=a||{};for(var b,d,e,f,
g=a.taper||"none",m=[],l=0,k=f=0|(a.points||20),n=!1!==a.randomize,q=!0===a.clamp,s=a.template instanceof c?a.template:null,r="number"==typeof a.strength?0.4*a.strength:0.4;-1<--k;)a=n?Math.random():1/f*k,b=s?s.getRatio(a):a,"none"===g?d=r:"out"===g?(e=1-a,d=e*e*r):"in"===g?d=a*a*r:0.5>a?(e=2*a,d=0.5*e*e*r):(e=2*(1-a),d=0.5*e*e*r),n?b+=Math.random()*d-0.5*d:k%2?b+=0.5*d:b-=0.5*d,q&&(1<b?b=1:0>b&&(b=0)),m[l++]={x:a,y:b};m.sort(function(a,b){return a.x-b.x});d=new h(1,1,null);for(k=f;-1<--k;)f=m[k],
d=new h(f.x,f.y,d);this._prev=new h(0,0,0!==d.t?d:d.next)},!0),q=e.prototype=new c,q.constructor=e,q.getRatio=function(a){var b=this._prev;if(a>b.t){for(;b.next&&a>=b.t;)b=b.next;b=b.prev}else for(;b.prev&&b.t>=a;)b=b.prev;return this._prev=b,b.v+(a-b.t)/b.gap*b.c},q.config=function(a){return new e(a)},e.ease=new e,g("Bounce",r("BounceOut",function(a){return 1/2.75>a?7.5625*a*a:2/2.75>a?7.5625*(a-=1.5/2.75)*a+0.75:2.5/2.75>a?7.5625*(a-=2.25/2.75)*a+0.9375:7.5625*(a-=2.625/2.75)*a+0.984375}),r("BounceIn",
function(a){return 1/2.75>(a=1-a)?1-7.5625*a*a:2/2.75>a?1-(7.5625*(a-=1.5/2.75)*a+0.75):2.5/2.75>a?1-(7.5625*(a-=2.25/2.75)*a+0.9375):1-(7.5625*(a-=2.625/2.75)*a+0.984375)}),r("BounceInOut",function(a){var b=0.5>a;return a=b?1-2*a:2*a-1,a=1/2.75>a?7.5625*a*a:2/2.75>a?7.5625*(a-=1.5/2.75)*a+0.75:2.5/2.75>a?7.5625*(a-=2.25/2.75)*a+0.9375:7.5625*(a-=2.625/2.75)*a+0.984375,b?0.5*(1-a):0.5*a+0.5})),g("Circ",r("CircOut",function(a){return Math.sqrt(1-(a-=1)*a)}),r("CircIn",function(a){return-(Math.sqrt(1-
a*a)-1)}),r("CircInOut",function(a){return 1>(a*=2)?-0.5*(Math.sqrt(1-a*a)-1):0.5*(Math.sqrt(1-(a-=2)*a)+1)})),a=function(a,b,e){var f=s("easing."+a,function(a,b){this._p1=a||1;this._p2=b||e;this._p3=this._p2/d*(Math.asin(1/this._p1)||0)},!0);a=f.prototype=new c;return a.constructor=f,a.getRatio=b,a.config=function(a,b){return new f(a,b)},f},g("Elastic",a("ElasticOut",function(a){return this._p1*Math.pow(2,-10*a)*Math.sin((a-this._p3)*d/this._p2)+1},0.3),a("ElasticIn",function(a){return-(this._p1*
Math.pow(2,10*(a-=1))*Math.sin((a-this._p3)*d/this._p2))},0.3),a("ElasticInOut",function(a){return 1>(a*=2)?-0.5*this._p1*Math.pow(2,10*(a-=1))*Math.sin((a-this._p3)*d/this._p2):0.5*this._p1*Math.pow(2,-10*(a-=1))*Math.sin((a-this._p3)*d/this._p2)+1},0.45)),g("Expo",r("ExpoOut",function(a){return 1-Math.pow(2,-10*a)}),r("ExpoIn",function(a){return Math.pow(2,10*(a-1))-0.001}),r("ExpoInOut",function(a){return 1>(a*=2)?0.5*Math.pow(2,10*(a-1)):0.5*(2-Math.pow(2,-10*(a-1)))})),g("Sine",r("SineOut",function(a){return Math.sin(a*
m)}),r("SineIn",function(a){return-Math.cos(a*m)+1}),r("SineInOut",function(a){return-0.5*(Math.cos(Math.PI*a)-1)})),s("easing.EaseLookup",{find:function(a){return c.map[a]}},!0),l(b.SlowMo,"SlowMo","ease,"),l(e,"RoughEase","ease,"),l(f,"SteppedEase","ease,"),k},!0)});_gsScope._gsDefine&&_gsScope._gsQueue.pop()();
(function(c,f){var e=c.GreenSockGlobals=c.GreenSockGlobals||c;if(!e.TweenLite){var a,b,d,m,s,r=function(a){var b=a.split("."),c=e;for(a=0;b.length>a;a++)c[b[a]]=c=c[b[a]]||{};return c},l=r("com.greensock"),g=function(a){var b,c=[],d=a.length;for(b=0;b!==d;c.push(a[b++]));return c},h=function(){},k=function(){var a=Object.prototype.toString,b=a.call([]);return function(c){return null!=c&&(c instanceof Array||"object"==typeof c&&!!c.push&&a.call(c)===b)}}(),n={},q=function(a,b,d,g){this.sc=n[a]?n[a].sc:
[];n[a]=this;this.gsClass=null;this.func=d;var h=[];this.check=function(m){for(var k,l,p=b.length,s=p;-1<--p;)(k=n[b[p]]||new q(b[p],[])).gsClass?(h[p]=k.gsClass,s--):m&&k.sc.push(this);if(0===s&&d)for(m=("com.greensock."+a).split("."),k=m.pop(),l=r(m.join("."))[k]=this.gsClass=d.apply(d,h),g&&(e[k]=l,"function"==typeof define&&define.amd?define((c.GreenSockAMDPath?c.GreenSockAMDPath+"/":"")+a.split(".").pop(),[],function(){return l}):a===f&&"undefined"!=typeof module&&module.exports&&(module.exports=
l)),p=0;this.sc.length>p;p++)this.sc[p].check()};this.check(!0)},p=c._gsDefine=function(a,b,c,d){return new q(a,b,c,d)},u=l._class=function(a,b,c){return b=b||function(){},p(a,[],function(){return b},c),b};p.globals=e;var t=[0,0,1,1],C=[],E=u("easing.Ease",function(a,b,c,d){this._func=a;this._type=c||0;this._power=d||0;this._params=b?t.concat(b):t},!0),v=E.map={},w=E.register=function(a,b,c,d){var e,f,g;b=b.split(",");for(var h=b.length,m=(c||"easeIn,easeOut,easeInOut").split(",");-1<--h;)for(e=b[h],
c=d?u("easing."+e,null,!0):l.easing[e]||{},f=m.length;-1<--f;)g=m[f],v[e+"."+g]=v[g+e]=c[g]=a.getRatio?a:a[g]||new a};d=E.prototype;d._calcEnd=!1;d.getRatio=function(a){if(this._func)return this._params[0]=a,this._func.apply(null,this._params);var b=this._type,c=this._power,d=1===b?1-a:2===b?a:0.5>a?2*a:2*(1-a);return 1===c?d*=d:2===c?d*=d*d:3===c?d*=d*d*d:4===c&&(d*=d*d*d*d),1===b?1-d:2===b?d:0.5>a?d/2:1-d/2};a=["Linear","Quad","Cubic","Quart","Quint,Strong"];for(b=a.length;-1<--b;)d=a[b]+",Power"+
b,w(new E(null,null,1,b),d,"easeOut",!0),w(new E(null,null,2,b),d,"easeIn"+(0===b?",easeNone":"")),w(new E(null,null,3,b),d,"easeInOut");v.linear=l.easing.Linear.easeIn;v.swing=l.easing.Quad.easeInOut;var x=u("events.EventDispatcher",function(a){this._listeners={};this._eventTarget=a||this});d=x.prototype;d.addEventListener=function(a,b,c,d,e){e=e||0;var f,g=this._listeners[a],h=0;null==g&&(this._listeners[a]=g=[]);for(f=g.length;-1<--f;)a=g[f],a.c===b&&a.s===c?g.splice(f,1):0===h&&e>a.pr&&(h=f+1);
g.splice(h,0,{c:b,s:c,up:d,pr:e});this!==m||s||m.wake()};d.removeEventListener=function(a,b){var c,d=this._listeners[a];if(d)for(c=d.length;-1<--c;)if(d[c].c===b)return d.splice(c,1),void 0};d.dispatchEvent=function(a){var b,c,d,e=this._listeners[a];if(e)for(b=e.length,c=this._eventTarget;-1<--b;)d=e[b],d.up?d.c.call(d.s||c,{type:a,target:c}):d.c.call(d.s||c)};var y=c.requestAnimationFrame,z=c.cancelAnimationFrame,A=Date.now||function(){return(new Date).getTime()},F=A();a=["ms","moz","webkit","o"];
for(b=a.length;-1<--b&&!y;)y=c[a[b]+"RequestAnimationFrame"],z=c[a[b]+"CancelAnimationFrame"]||c[a[b]+"CancelRequestAnimationFrame"];u("Ticker",function(a,b){var c,d,e,f,g,k=this,l=A(),n=!1!==b&&y,p=500,q=33,r=function(a){var b,h;b=A()-F;b>p&&(l+=b-q);F+=b;k.time=(F-l)/1E3;b=k.time-g;(!c||0<b||!0===a)&&(k.frame++,g+=b+(b>=f?0.004:f-b),h=!0);!0!==a&&(e=d(r));h&&k.dispatchEvent("tick")};x.call(k);k.time=k.frame=0;k.tick=function(){r(!0)};k.lagSmoothing=function(a,b){p=a||1E10;q=Math.min(b,p,0)};k.sleep=
function(){null!=e&&(n&&z?z(e):tweenClearTimeout(e),d=h,e=null,k===m&&(s=!1))};k.wake=function(){null!==e?k.sleep():10<k.frame&&(F=A()-p+5);d=0===c?h:n&&y?y:function(a){return tweenSetTimeOut(a,0|1E3*(g-k.time)+1)};k===m&&(s=!0);r(2)};k.fps=function(a){return arguments.length?(c=a,f=1/(c||60),g=this.time+f,k.wake(),void 0):c};k.useRAF=function(a){return arguments.length?(k.sleep(),n=a,k.fps(c),void 0):n};k.fps(a);tweenSetTimeOut(function(){n&&(!e||5>k.frame)&&k.useRAF(!1)},1500)});d=l.Ticker.prototype=
new l.events.EventDispatcher;d.constructor=l.Ticker;var D=u("core.Animation",function(a,b){if(this.vars=b=b||{},this._duration=this._totalDuration=a||0,this._delay=Number(b.delay)||0,this._timeScale=1,this._active=!0===b.immediateRender,this.data=b.data,this._reversed=!0===b.reversed,P){s||m.wake();var c=this.vars.useFrames?L:P;c.add(this,c._time);this.vars.paused&&this.paused(!0)}});m=D.ticker=new l.Ticker;d=D.prototype;d._dirty=d._gc=d._initted=d._paused=!1;d._totalTime=d._time=0;d._rawPrevTime=
-1;d._next=d._last=d._onUpdate=d._timeline=d.timeline=null;d._paused=!1;var G=function(){s&&2E3<A()-F&&m.wake();tweenSetTimeOut(G,2E3)};G();d.play=function(a,b){return null!=a&&this.seek(a,b),this.reversed(!1).paused(!1)};d.pause=function(a,b){return null!=a&&this.seek(a,b),this.paused(!0)};d.resume=function(a,b){return null!=a&&this.seek(a,b),this.paused(!1)};d.seek=function(a,b){return this.totalTime(Number(a),!1!==b)};d.restart=function(a,b){return this.reversed(!1).paused(!1).totalTime(a?-this._delay:
0,!1!==b,!0)};d.reverse=function(a,b){return null!=a&&this.seek(a||this.totalDuration(),b),this.reversed(!0).paused(!1)};d.render=function(){};d.invalidate=function(){return this};d.isActive=function(){var a,b=this._timeline,c=this._startTime;return!b||!this._gc&&!this._paused&&b.isActive()&&(a=b.rawTime())>=c&&c+this.totalDuration()/this._timeScale>a};d._enabled=function(a,b){return s||m.wake(),this._gc=!a,this._active=this.isActive(),!0!==b&&(a&&!this.timeline?this._timeline.add(this,this._startTime-
this._delay):!a&&this.timeline&&this._timeline._remove(this,!0)),!1};d._kill=function(){return this._enabled(!1,!1)};d.kill=function(a,b){return this._kill(a,b),this};d._uncache=function(a){for(a=a?this:this.timeline;a;)a._dirty=!0,a=a.timeline;return this};d._swapSelfInParams=function(a){for(var b=a.length,c=a.concat();-1<--b;)"{self}"===a[b]&&(c[b]=this);return c};d.eventCallback=function(a,b,c,d){if("on"===(a||"").substr(0,2)){var e=this.vars;if(1===arguments.length)return e[a];null==b?delete e[a]:
(e[a]=b,e[a+"Params"]=k(c)&&-1!==c.join("").indexOf("{self}")?this._swapSelfInParams(c):c,e[a+"Scope"]=d);"onUpdate"===a&&(this._onUpdate=b)}return this};d.delay=function(a){return arguments.length?(this._timeline.smoothChildTiming&&this.startTime(this._startTime+a-this._delay),this._delay=a,this):this._delay};d.duration=function(a){return arguments.length?(this._duration=this._totalDuration=a,this._uncache(!0),this._timeline.smoothChildTiming&&0<this._time&&this._time<this._duration&&0!==a&&this.totalTime(a/
this._duration*this._totalTime,!0),this):(this._dirty=!1,this._duration)};d.totalDuration=function(a){return this._dirty=!1,arguments.length?this.duration(a):this._totalDuration};d.time=function(a,b){return arguments.length?(this._dirty&&this.totalDuration(),this.totalTime(a>this._duration?this._duration:a,b)):this._time};d.totalTime=function(a,b,c){if(s||m.wake(),!arguments.length)return this._totalTime;if(this._timeline){if(0>a&&!c&&(a+=this.totalDuration()),this._timeline.smoothChildTiming){this._dirty&&
this.totalDuration();var d=this._totalDuration,e=this._timeline;if(a>d&&!c&&(a=d),this._startTime=(this._paused?this._pauseTime:e._time)-(this._reversed?d-a:a)/this._timeScale,e._dirty||this._uncache(!1),e._timeline)for(;e._timeline;)e._timeline._time!==(e._startTime+e._totalTime)/e._timeScale&&e.totalTime(e._totalTime,!0),e=e._timeline}this._gc&&this._enabled(!0,!1);(this._totalTime!==a||0===this._duration)&&(this.render(a,b,!1),I.length&&S())}return this};d.progress=d.totalProgress=function(a,b){return arguments.length?
this.totalTime(this.duration()*a,b):this._time/this.duration()};d.startTime=function(a){return arguments.length?(a!==this._startTime&&(this._startTime=a,this.timeline&&this.timeline._sortChildren&&this.timeline.add(this,a-this._delay)),this):this._startTime};d.timeScale=function(a){if(!arguments.length)return this._timeScale;if(a=a||1E-10,this._timeline&&this._timeline.smoothChildTiming){var b=this._pauseTime,b=b||0===b?b:this._timeline.totalTime();this._startTime=b-(b-this._startTime)*this._timeScale/
a}return this._timeScale=a,this._uncache(!1)};d.reversed=function(a){return arguments.length?(a!=this._reversed&&(this._reversed=a,this.totalTime(this._timeline&&!this._timeline.smoothChildTiming?this.totalDuration()-this._totalTime:this._totalTime,!0)),this):this._reversed};d.paused=function(a){if(!arguments.length)return this._paused;if(a!=this._paused&&this._timeline){s||a||m.wake();var b=this._timeline,c=b.rawTime(),d=c-this._pauseTime;!a&&b.smoothChildTiming&&(this._startTime+=d,this._uncache(!1));
this._pauseTime=a?c:null;this._paused=a;this._active=this.isActive();!a&&0!==d&&this._initted&&this.duration()&&this.render(b.smoothChildTiming?this._totalTime:(c-this._startTime)/this._timeScale,!0,!0)}return this._gc&&!a&&this._enabled(!0,!1),this};b=u("core.SimpleTimeline",function(a){D.call(this,0,a);this.autoRemoveChildren=this.smoothChildTiming=!0});d=b.prototype=new D;d.constructor=b;d.kill()._gc=!1;d._first=d._last=null;d._sortChildren=!1;d.add=d.insert=function(a,b){var c,d;if(a._startTime=
Number(b||0)+a._delay,a._paused&&this!==a._timeline&&(a._pauseTime=a._startTime+(this.rawTime()-a._startTime)/a._timeScale),a.timeline&&a.timeline._remove(a,!0),a.timeline=a._timeline=this,a._gc&&a._enabled(!0,!0),c=this._last,this._sortChildren)for(d=a._startTime;c&&c._startTime>d;)c=c._prev;return c?(a._next=c._next,c._next=a):(a._next=this._first,this._first=a),a._next?a._next._prev=a:this._last=a,a._prev=c,this._timeline&&this._uncache(!0),this};d._remove=function(a,b){return a.timeline===this&&
(b||a._enabled(!1,!0),a._prev?a._prev._next=a._next:this._first===a&&(this._first=a._next),a._next?a._next._prev=a._prev:this._last===a&&(this._last=a._prev),a._next=a._prev=a.timeline=null,this._timeline&&this._uncache(!0)),this};d.render=function(a,b,c){var d,e=this._first;for(this._totalTime=this._time=this._rawPrevTime=a;e;)d=e._next,(e._active||a>=e._startTime&&!e._paused)&&(e._reversed?e.render((e._dirty?e.totalDuration():e._totalDuration)-(a-e._startTime)*e._timeScale,b,c):e.render((a-e._startTime)*
e._timeScale,b,c)),e=d};d.rawTime=function(){return s||m.wake(),this._totalTime};var B=u("TweenLite",function(a,b,d){if(D.call(this,b,d),this.render=B.prototype.render,null==a)throw"Cannot tween a null target.";this.target=a="string"!=typeof a?a:B.selector(a)||a;var e,f;e=a.jquery||a.length&&a!==c&&a[0]&&(a[0]===c||a[0].nodeType&&a[0].style&&!a.nodeType);d=this.vars.overwrite;if(this._overwrite=d=null==d?N[B.defaultOverwrite]:"number"==typeof d?d>>0:N[d],(e||a instanceof Array||a.push&&k(a))&&"number"!=
typeof a[0])for(this._targets=f=g(a),this._propLookup=[],this._siblings=[],a=0;f.length>a;a++)(e=f[a])?"string"!=typeof e?e.length&&e!==c&&e[0]&&(e[0]===c||e[0].nodeType&&e[0].style&&!e.nodeType)?(f.splice(a--,1),this._targets=f=f.concat(g(e))):(this._siblings[a]=T(e,this,!1),1===d&&1<this._siblings[a].length&&U(e,this,null,1,this._siblings[a])):(e=f[a--]=B.selector(e),"string"==typeof e&&f.splice(a+1,1)):f.splice(a--,1);else this._propLookup={},this._siblings=T(a,this,!1),1===d&&1<this._siblings.length&&
U(a,this,null,1,this._siblings);(this.vars.immediateRender||0===b&&0===this._delay&&!1!==this.vars.immediateRender)&&(this._time=-1E-10,this.render(-this._delay))},!0),H=function(a){return a.length&&a!==c&&a[0]&&(a[0]===c||a[0].nodeType&&a[0].style&&!a.nodeType)};d=B.prototype=new D;d.constructor=B;d.kill()._gc=!1;d.ratio=0;d._firstPT=d._targets=d._overwrittenProps=d._startAt=null;d._notifyPluginsOfEnabled=d._lazy=!1;B.version="1.13.1";B.defaultEase=d._ease=new E(null,null,1,1);B.defaultOverwrite=
"auto";B.ticker=m;B.autoSleep=!0;B.lagSmoothing=function(a,b){m.lagSmoothing(a,b)};B.selector=c.$||c.jQuery||function(a){var b=c.$||c.jQuery;return b?(B.selector=b,b(a)):"undefined"==typeof document?a:document.querySelectorAll?document.querySelectorAll(a):document.getElementById("#"===a.charAt(0)?a.substr(1):a)};var I=[],K={},w=B._internals={isArray:k,isSelector:H,lazyTweens:I},J=B._plugins={},M=w.tweenLookup={},Q=0,R=w.reservedProps={ease:1,delay:1,overwrite:1,onComplete:1,onCompleteParams:1,onCompleteScope:1,
useFrames:1,runBackwards:1,startAt:1,onUpdate:1,onUpdateParams:1,onUpdateScope:1,onStart:1,onStartParams:1,onStartScope:1,onReverseComplete:1,onReverseCompleteParams:1,onReverseCompleteScope:1,onRepeat:1,onRepeatParams:1,onRepeatScope:1,easeParams:1,yoyo:1,immediateRender:1,repeat:1,repeatDelay:1,data:1,paused:1,reversed:1,autoCSS:1,lazy:1},N={none:0,all:1,auto:2,concurrent:3,allOnStart:4,preexisting:5,"true":1,"false":0},L=D._rootFramesTimeline=new b,P=D._rootTimeline=new b,S=w.lazyRender=function(){var b=
I.length;for(K={};-1<--b;)(a=I[b])&&!1!==a._lazy&&(a.render(a._lazy,!1,!0),a._lazy=!1);I.length=0};P._startTime=m.time;L._startTime=m.frame;P._active=L._active=!0;tweenSetTimeOut(S,1);D._updateRoot=B.render=function(){var a,b,c;if(I.length&&S(),P.render((m.time-P._startTime)*P._timeScale,!1,!1),L.render((m.frame-L._startTime)*L._timeScale,!1,!1),I.length&&S(),!(m.frame%120)){for(c in M){b=M[c].tweens;for(a=b.length;-1<--a;)b[a]._gc&&b.splice(a,1);0===b.length&&delete M[c]}if(c=P._first,(!c||c._paused)&&
B.autoSleep&&!L._first&&1===m._listeners.tick.length){for(;c&&c._paused;)c=c._next;c||m.sleep()}}};m.addEventListener("tick",D._updateRoot);var T=function(a,b,c){var d,e,f=a._gsTweenID;if(M[f||(a._gsTweenID=f="t"+Q++)]||(M[f]={target:a,tweens:[]}),b&&(d=M[f].tweens,d[e=d.length]=b,c))for(;-1<--e;)d[e]===b&&d.splice(e,1);return M[f].tweens},U=function(a,b,c,d,e){var f,g,h;if(1===d||4<=d){a=e.length;for(f=0;a>f;f++)if((h=e[f])!==b)h._gc||h._enabled(!1,!1)&&(g=!0);else if(5===d)break;return g}var m,
k=b._startTime+1E-10,l=[],n=0,p=0===b._duration;for(f=e.length;-1<--f;)(h=e[f])===b||h._gc||h._paused||(h._timeline!==b._timeline?(m=m||V(b,0,p),0===V(h,m,p)&&(l[n++]=h)):k>=h._startTime&&h._startTime+h.totalDuration()/h._timeScale>k&&((p||!h._initted)&&2E-10>=k-h._startTime||(l[n++]=h)));for(f=n;-1<--f;)h=l[f],2===d&&h._kill(c,a)&&(g=!0),(2!==d||!h._firstPT&&h._initted)&&h._enabled(!1,!1)&&(g=!0);return g},V=function(a,b,c){for(var d=a._timeline,e=d._timeScale,f=a._startTime;d._timeline;){if(f+=
d._startTime,e*=d._timeScale,d._paused)return-100;d=d._timeline}return f/=e,f>b?f-b:c&&f===b||!a._initted&&2E-10>f-b?1E-10:(f+=a.totalDuration()/a._timeScale/e)>b+1E-10?0:f-b-1E-10};d._init=function(){var a,b,c,d=this.vars,e=this._overwrittenProps,f=this._duration,g=!!d.immediateRender,h=d.ease;if(d.startAt){this._startAt&&(this._startAt.render(-1,!0),this._startAt.kill());c={};for(a in d.startAt)c[a]=d.startAt[a];if(c.overwrite=!1,c.immediateRender=!0,c.lazy=g&&!1!==d.lazy,c.startAt=c.delay=null,
this._startAt=B.to(this.target,0,c),g)if(0<this._time)this._startAt=null;else if(0!==f)return}else if(d.runBackwards&&0!==f)if(this._startAt)this._startAt.render(-1,!0),this._startAt.kill(),this._startAt=null;else{c={};for(a in d)R[a]&&"autoCSS"!==a||(c[a]=d[a]);if(c.overwrite=0,c.data="isFromStart",c.lazy=g&&!1!==d.lazy,c.immediateRender=g,this._startAt=B.to(this.target,0,c),g){if(0===this._time)return}else this._startAt._init(),this._startAt._enabled(!1)}if(this._ease=h=h?h instanceof E?h:"function"==
typeof h?new E(h,d.easeParams):v[h]||B.defaultEase:B.defaultEase,d.easeParams instanceof Array&&h.config&&(this._ease=h.config.apply(h,d.easeParams)),this._easeType=this._ease._type,this._easePower=this._ease._power,this._firstPT=null,this._targets)for(a=this._targets.length;-1<--a;)this._initProps(this._targets[a],this._propLookup[a]={},this._siblings[a],e?e[a]:null)&&(b=!0);else b=this._initProps(this.target,this._propLookup,this._siblings,e);if(b&&B._onPluginEvent("_onInitAllProps",this),e&&(this._firstPT||
"function"!=typeof this.target&&this._enabled(!1,!1)),d.runBackwards)for(c=this._firstPT;c;)c.s+=c.c,c.c=-c.c,c=c._next;this._onUpdate=d.onUpdate;this._initted=!0};d._initProps=function(a,b,d,e){var f,g,h,m,l;if(null==a)return!1;K[a._gsTweenID]&&S();if(!this.vars.css&&a.style&&a!==c&&a.nodeType&&J.css&&!1!==this.vars.autoCSS){g=this.vars;var n,p={};for(n in g)R[n]||n in a&&"transform"!==n&&"x"!==n&&"y"!==n&&"width"!==n&&"height"!==n&&"className"!==n&&"border"!==n||!(!J[n]||J[n]&&J[n]._autoCSS)||(p[n]=
g[n],delete g[n]);g.css=p}for(f in this.vars){if(g=this.vars[f],R[f])g&&(g instanceof Array||g.push&&k(g))&&-1!==g.join("").indexOf("{self}")&&(this.vars[f]=this._swapSelfInParams(g,this));else if(J[f]&&(m=new J[f])._onInitTween(a,this.vars[f],this)){this._firstPT=l={_next:this._firstPT,t:m,p:"setRatio",s:0,c:1,f:!0,n:f,pg:!0,pr:m._priority};for(g=m._overwriteProps.length;-1<--g;)b[m._overwriteProps[g]]=this._firstPT;(m._priority||m._onInitAllProps)&&(h=!0);(m._onDisable||m._onEnable)&&(this._notifyPluginsOfEnabled=
!0)}else this._firstPT=b[f]=l={_next:this._firstPT,t:a,p:f,f:"function"==typeof a[f],n:f,pg:!1,pr:0},l.s=l.f?a[f.indexOf("set")||"function"!=typeof a["get"+f.substr(3)]?f:"get"+f.substr(3)]():parseFloat(a[f]),l.c="string"==typeof g&&"="===g.charAt(1)?parseInt(g.charAt(0)+"1",10)*Number(g.substr(2)):Number(g)-l.s||0;l&&l._next&&(l._next._prev=l)}return e&&this._kill(e,a)?this._initProps(a,b,d,e):1<this._overwrite&&this._firstPT&&1<d.length&&U(a,this,b,this._overwrite,d)?(this._kill(b,a),this._initProps(a,
b,d,e)):(this._firstPT&&(!1!==this.vars.lazy&&this._duration||this.vars.lazy&&!this._duration)&&(K[a._gsTweenID]=!0),h)};d.render=function(a,b,c){var d,e,f,g,h=this._time,m=this._duration;f=this._rawPrevTime;if(a>=m)this._totalTime=this._time=m,this.ratio=this._ease._calcEnd?this._ease.getRatio(1):1,this._reversed||(d=!0,e="onComplete"),0===m&&(this._initted||!this.vars.lazy||c)&&(this._startTime===this._timeline._duration&&(a=0),(0===a||0>f||1E-10===f)&&f!==a&&(c=!0,1E-10<f&&(e="onReverseComplete")),
this._rawPrevTime=g=!b||a||f===a?a:1E-10);else if(1E-7>a)this._totalTime=this._time=0,this.ratio=this._ease._calcEnd?this._ease.getRatio(0):0,(0!==h||0===m&&0<f&&1E-10!==f)&&(e="onReverseComplete",d=this._reversed),0>a?(this._active=!1,0===m&&(this._initted||!this.vars.lazy||c)&&(0<=f&&(c=!0),this._rawPrevTime=g=!b||a||f===a?a:1E-10)):this._initted||(c=!0);else if(this._totalTime=this._time=a,this._easeType){var k=a/m,l=this._easeType,n=this._easePower;(1===l||3===l&&0.5<=k)&&(k=1-k);3===l&&(k*=2);
1===n?k*=k:2===n?k*=k*k:3===n?k*=k*k*k:4===n&&(k*=k*k*k*k);this.ratio=1===l?1-k:2===l?k:0.5>a/m?k/2:1-k/2}else this.ratio=this._ease.getRatio(a/m);if(this._time!==h||c){if(!this._initted){if(this._init(),!this._initted||this._gc)return;if(!c&&this._firstPT&&(!1!==this.vars.lazy&&this._duration||this.vars.lazy&&!this._duration))return this._time=this._totalTime=h,this._rawPrevTime=f,I.push(this),this._lazy=a,void 0;this._time&&!d?this.ratio=this._ease.getRatio(this._time/m):d&&this._ease._calcEnd&&
(this.ratio=this._ease.getRatio(0===this._time?0:1))}!1!==this._lazy&&(this._lazy=!1);this._active||!this._paused&&this._time!==h&&0<=a&&(this._active=!0);0!==h||(this._startAt&&(0<=a?this._startAt.render(a,b,c):e||(e="_dummyGS")),!this.vars.onStart||0===this._time&&0!==m||!b&&this.vars.onStart.apply(this.vars.onStartScope||this,this.vars.onStartParams||C));for(f=this._firstPT;f;)f.f?f.t[f.p](f.c*this.ratio+f.s):f.t[f.p]=f.c*this.ratio+f.s,f=f._next;this._onUpdate&&(0>a&&this._startAt&&this._startTime&&
this._startAt.render(a,b,c),b||(this._time!==h||d)&&this._onUpdate.apply(this.vars.onUpdateScope||this,this.vars.onUpdateParams||C));e&&(!this._gc||c)&&(0>a&&this._startAt&&!this._onUpdate&&this._startTime&&this._startAt.render(a,b,c),d&&(this._timeline.autoRemoveChildren&&this._enabled(!1,!1),this._active=!1),!b&&this.vars[e]&&this.vars[e].apply(this.vars[e+"Scope"]||this,this.vars[e+"Params"]||C),0===m&&1E-10===this._rawPrevTime&&1E-10!==g&&(this._rawPrevTime=0))}};d._kill=function(a,b){if("all"===
a&&(a=null),null==a&&(null==b||b===this.target))return this._lazy=!1,this._enabled(!1,!1);b="string"!=typeof b?b||this._targets||this.target:B.selector(b)||b;var c,d,e,f,g,h,m;if((k(b)||H(b))&&"number"!=typeof b[0])for(c=b.length;-1<--c;)this._kill(a,b[c])&&(h=!0);else{if(this._targets)for(c=this._targets.length;-1<--c;){if(b===this._targets[c]){g=this._propLookup[c]||{};this._overwrittenProps=this._overwrittenProps||[];d=this._overwrittenProps[c]=a?this._overwrittenProps[c]||{}:"all";break}}else{if(b!==
this.target)return!1;g=this._propLookup;d=this._overwrittenProps=a?this._overwrittenProps||{}:"all"}if(g){c=a||g;m=a!==d&&"all"!==d&&a!==g&&("object"!=typeof a||!a._tempKill);for(e in c)(f=g[e])&&(f.pg&&f.t._kill(c)&&(h=!0),f.pg&&0!==f.t._overwriteProps.length||(f._prev?f._prev._next=f._next:f===this._firstPT&&(this._firstPT=f._next),f._next&&(f._next._prev=f._prev),f._next=f._prev=null),delete g[e]),m&&(d[e]=1);!this._firstPT&&this._initted&&this._enabled(!1,!1)}}return h};d.invalidate=function(){return this._notifyPluginsOfEnabled&&
B._onPluginEvent("_onDisable",this),this._firstPT=null,this._overwrittenProps=null,this._onUpdate=null,this._startAt=null,this._initted=this._active=this._notifyPluginsOfEnabled=this._lazy=!1,this._propLookup=this._targets?{}:[],this};d._enabled=function(a,b){if(s||m.wake(),a&&this._gc){var c,d=this._targets;if(d)for(c=d.length;-1<--c;)this._siblings[c]=T(d[c],this,!0);else this._siblings=T(this.target,this,!0)}return D.prototype._enabled.call(this,a,b),this._notifyPluginsOfEnabled&&this._firstPT?
B._onPluginEvent(a?"_onEnable":"_onDisable",this):!1};B.to=function(a,b,c){return new B(a,b,c)};B.from=function(a,b,c){return c.runBackwards=!0,c.immediateRender=0!=c.immediateRender,new B(a,b,c)};B.fromTo=function(a,b,c,d){return d.startAt=c,d.immediateRender=0!=d.immediateRender&&0!=c.immediateRender,new B(a,b,d)};B.delayedCall=function(a,b,c,d,e){return new B(b,0,{delay:a,onComplete:b,onCompleteParams:c,onCompleteScope:d,onReverseComplete:b,onReverseCompleteParams:c,onReverseCompleteScope:d,immediateRender:!1,
useFrames:e,overwrite:0})};B.set=function(a,b){return new B(a,0,b)};B.getTweensOf=function(a,b){if(null==a)return[];a="string"!=typeof a?a:B.selector(a)||a;var c,d,e,f;if((k(a)||H(a))&&"number"!=typeof a[0]){c=a.length;for(d=[];-1<--c;)d=d.concat(B.getTweensOf(a[c],b));for(c=d.length;-1<--c;)for(f=d[c],e=c;-1<--e;)f===d[e]&&d.splice(c,1)}else for(d=T(a).concat(),c=d.length;-1<--c;)(d[c]._gc||b&&!d[c].isActive())&&d.splice(c,1);return d};B.killTweensOf=B.killDelayedCallsTo=function(a,b,c){"object"==
typeof b&&(c=b,b=!1);b=B.getTweensOf(a,b);for(var d=b.length;-1<--d;)b[d]._kill(c,a)};var O=u("plugins.TweenPlugin",function(a,b){this._overwriteProps=(a||"").split(",");this._propName=this._overwriteProps[0];this._priority=b||0;this._super=O.prototype},!0);if(d=O.prototype,O.version="1.10.1",O.API=2,d._firstPT=null,d._addTween=function(a,b,c,d,e,f){var g,h;return null!=d&&(g="number"==typeof d||"="!==d.charAt(1)?Number(d)-c:parseInt(d.charAt(0)+"1",10)*Number(d.substr(2)))?(this._firstPT=h={_next:this._firstPT,
t:a,p:b,s:c,c:g,f:"function"==typeof a[b],n:e||b,r:f},h._next&&(h._next._prev=h),h):void 0},d.setRatio=function(a){for(var b,c=this._firstPT;c;)b=c.c*a+c.s,c.r?b=Math.round(b):1E-6>b&&-1E-6<b&&(b=0),c.f?c.t[c.p](b):c.t[c.p]=b,c=c._next},d._kill=function(a){var b,c=this._overwriteProps,d=this._firstPT;if(null!=a[this._propName])this._overwriteProps=[];else for(b=c.length;-1<--b;)null!=a[c[b]]&&c.splice(b,1);for(;d;)null!=a[d.n]&&(d._next&&(d._next._prev=d._prev),d._prev?(d._prev._next=d._next,d._prev=
null):this._firstPT===d&&(this._firstPT=d._next)),d=d._next;return!1},d._roundProps=function(a,b){for(var c=this._firstPT;c;)(a[this._propName]||null!=c.n&&a[c.n.split(this._propName+"_").join("")])&&(c.r=b),c=c._next},B._onPluginEvent=function(a,b){var c,d,e,f,g,h=b._firstPT;if("_onInitAllProps"===a){for(;h;){g=h._next;for(d=e;d&&d.pr>h.pr;)d=d._next;(h._prev=d?d._prev:f)?h._prev._next=h:e=h;(h._next=d)?d._prev=h:f=h;h=g}h=b._firstPT=e}for(;h;)h.pg&&"function"==typeof h.t[a]&&h.t[a]()&&(c=!0),h=
h._next;return c},O.activate=function(a){for(var b=a.length;-1<--b;)a[b].API===O.API&&(J[(new a[b])._propName]=a[b]);return!0},p.plugin=function(a){if(!(a&&a.propName&&a.init&&a.API))throw"illegal plugin definition.";var b,c=a.propName,d=a.priority||0,e=a.overwriteProps,f={init:"_onInitTween",set:"setRatio",kill:"_kill",round:"_roundProps",initAll:"_onInitAllProps"},g=u("plugins."+c.charAt(0).toUpperCase()+c.substr(1)+"Plugin",function(){O.call(this,c,d);this._overwriteProps=e||[]},!0===a.global),
h=g.prototype=new O(c);h.constructor=g;g.API=a.API;for(b in f)"function"==typeof a[b]&&(h[f[b]]=a[b]);return g.version=a.version,O.activate([g]),g},a=c._gsQueue){for(b=0;a.length>b;b++)a[b]();for(d in n)n[d].func||c.console.log("GSAP encountered missing dependency: com.greensock."+d)}s=!1}})("undefined"!=typeof module&&module.exports&&"undefined"!=typeof global?global:this||window,"TweenMax");
var Elements=function(c){function f(){c.call(this);this.targets=[];this.canClear=!1}__extends(f,c);var e=f.prototype;e.onCreate=function(){};e.onDestroy=function(){this&&this.parent&&this.parent.removeChild(this)};e.move=function(){};e.onHit=function(){};e.onEnterFrame=function(a){};return f}(egret.Sprite);Elements.prototype.__class__="Elements";
var Base=function(c){function f(){c.call(this)}__extends(f,c);var e=f.prototype;e.selectItem=function(){this.dispatchEvent(new TowerEvent(TowerEvent.SHOWTOOL,this))};e.deselectItem=function(){this.dispatchEvent(new TowerEvent(TowerEvent.HIDETOOL,this))};e.reselectItem=function(){this.dispatchEvent(new TowerEvent(TowerEvent.HIDETOOL,this));Group.dispose()};return f}(egret.Sprite);Base.prototype.__class__="Base";
var TowerBase=function(c){function f(){c.call(this);this.targets=[];this.buildID=1;this.maxRadius=140;this.minRadius=100}__extends(f,c);var e=f.prototype;e.destory=function(){};e.init=function(){};e.onEnterFrame=function(a){};return f}(Base);TowerBase.prototype.__class__="TowerBase";
var VectorElements=function(c){function f(){c.call(this);this.posArr=[];this._maxSpeed=0.3;this.suckBlood=this._angle=0;this._arrivalThreshold=2;this._pathThreshold=5;this._position=new Vector2D;this._velocity=new Vector2D;this._steeringForce=new Vector2D}__extends(f,c);var e=f.prototype;e.onEnterFrame=function(a){1==this.curState&&(this.followPath(this.posArr),this._velocity=this._velocity.add(this._steeringForce),this._steeringForce=new Vector2D,this._velocity.truncate(this._maxSpeed),this._position=
this._position.add(this._velocity),this.x=this.position.x,this.y=this.position.y,this._angle=(180*this._velocity.angle/Math.PI+360)%360)};Object.defineProperty(e,"position",{get:function(){return this._position},set:function(a){this._position=a;this.x=this._position.x;this.y=this._position.y},enumerable:!0,configurable:!0});Object.defineProperty(e,"velocity",{get:function(){return this._velocity},set:function(a){this._velocity=a},enumerable:!0,configurable:!0});e.seek=function(a){a=a.subtract(this._position);
a.normalize();a=a.multiply(this._maxSpeed);a=a.subtract(this._velocity);this._steeringForce=this._steeringForce.add(a)};e.arrive=function(a){var b=a.subtract(this._position);b.normalize();this._position.dist(a)>this._arrivalThreshold?b=b.multiply(this._maxSpeed):(b=b.zero(),this._velocity=this._velocity.zero(),this.fsm.changeState(2));a=b.subtract(this._velocity);this._steeringForce=this._steeringForce.add(a)};e.followPath=function(a,b){void 0===b&&(b=!1);var c=a[this._pathIndex];null!=c&&(this._position.dist(c)<
this._pathThreshold&&(this._pathIndex>=a.length-1?b&&(this._pathIndex=0):this._pathIndex++),this._pathIndex>=a.length-1&&!b?this.arrive(c):this.seek(c))};return f}(Elements);VectorElements.prototype.__class__="VectorElements";
var ShieldSoldierBase=function(c){function f(){c.call(this);this.moveToTarget=!1;this.yoffset=this.xoffset=this.timesum=this.fireDelay=0;this.atjijie=!1;this.maxSoldRadius=50;this.minSoldRadius=25;this.voiceArr=["shield_fire1","shield_fire2","shield_fire3"];this.ratioSoldY=this.minSoldRadius/this.maxSoldRadius;this.fsm=new StateMachine(this);this.lifeBar=new LifeBar;this.addChild(this.lifeBar)}__extends(f,c);var e=f.prototype;e.setPath2=function(a){this.posArr.length=0;this.posArr.push(a);this.fsm.changeState(1)};
e.live=function(){0>=this._hp&&(this.fsm.changeState(5),2==this.specialType&&(this.specialType=0,GuankaBase.instance.addSoldier(this.x,this.y)));this._hp>this.life&&(this._hp=this.life)};Object.defineProperty(e,"hp",{get:function(){return this._hp},set:function(a){this._hp=a;this.live();this.lifeBar.setProgress(this._hp,this.life)},enumerable:!0,configurable:!0});e.selectItem=function(){this.dispatchEvent(new SoldEvent(SoldEvent.SELECT,this))};e.deselectItem=function(){this.dispatchEvent(new SoldEvent(SoldEvent.DESELECT,
this))};e.reselectItem=function(){};e.createYQ=function(){this.view.touchEnabled=!1};e.clearYQ=function(){null!=this.selectYQ&&(this.removeChild(this.selectYQ),this.selectYQ=null);this.view.touchEnabled=!0};e.onDestroy=function(){c.prototype.onDestroy.call(this);null!=this.target&&(this.target=null);this.clearYQ()};e.hittest=function(){if(null!=this.target&&(GuankaBase.instance.damage(this,this.target,this.damage),0>=this.target.hp)){var a=this.targets.indexOf(this.target);-1!=a&&this.targets.splice(a,
1);a=this.atargets.indexOf(this.target);-1!=a&&this.atargets.splice(a,1);this.target=null}};e.onEnterFrame=function(a){this.timesum+=a;this.fsm.onEnterFrame(a);c.prototype.onEnterFrame.call(this,a);this.canClear&&ObjectPool.getInstance().destroyObject(this)};e.getMoveAngle=function(a){0<=a&&60>=a||300<=a&&360>=a?(this.stateLabel="walking",this.view.scaleX=1):60<a&&120>a?this.stateLabel="walkingDown":120<=a&&240>=a?(this.stateLabel="walking",this.view.scaleX=-1):240<a&&300>a&&(this.stateLabel="walkingUp")};
e.idling=function(){0!=this.curState&&(this.curState=0,this.view.gotoAndStop(this.stateLabel));this.moveOrFight()};e.moving=function(){this.getMoveAngle(this._angle);1!=this.curState&&(this.curState=1,this.view.gotoAndPlay(this.stateLabel));this.moveOrFight();this.checkLast(this.stateLabel)};e.movingEnd=function(){2!=this.curState&&(this.curState=2,this.fsm.changeState(0))};e.fighting=function(){if(3!=this.curState){this.curState=3;this.view.gotoAndPlay(this.stateLabel);null!=this.target&&(this.view.scaleX=
this.x<=this.target.x?1:-1);var a=Math.floor(3*Math.random());SoundManager.playEffect(this.voiceArr[a])}this.checkLastEnd(this.stateLabel)};e.fightingEnd=function(){4!=this.curState&&(this.curState=4,this.hittest(),this.timesum=0);null==this.target?(this.fsm.changeState(1),this.moveOrFight()):this.timesum>=this.fireDelay&&(this.fsm.changeState(3),this.timesum=0)};e.dying=function(){5!=this.curState&&(this.curState=5,this.view.gotoAndPlay(this.stateLabel));this.checkLastEnd(this.stateLabel)};e.dyingEnd=
function(){6!=this.curState&&(this.curState=6,this.canClear=!0)};e.checkLast=function(a){this.view._getFrameLabelForFrame(this.view.currentFrame+1).name!=a&&this.view.gotoAndPlay(a)};e.checkLastEnd=function(a){if(this.view._getFrameLabelForFrame(this.view.currentFrame+1).name!=a||this.view.currentFrame>=this.view.totalFrames)this.view.stop(),3==this.curState?this.fsm.changeState(4):5==this.curState&&this.fsm.changeState(6)};e.isIdle=function(){this.stateLabel="idle";return!0};e.isMove=function(){return!0};
e.isFighting=function(){this.stateLabel="fighting";return!0};e.isDead=function(){this.stateLabel="dead";return!0};e.moveOrFight=function(){this.getTarget();null!=this.target&&(this.moveToTarget?(this.moveToTarget=!1,this.fsm.changeState(3)):(this.moveToTarget=!0,this.target.beAttack=!1))};e.getTarget=function(){var a;this.atargets=[];for(a=0;a<this.targets.length;a++){var b=this.targets[a],c=Utils.containsXY(b.x,b.y,this.x,this.y,this.maxSoldRadius,this.ratioSoldY),e=this.atargets.indexOf(b);c?-1==
e&&this.atargets.push(b):-1!=e&&this.atargets.splice(e,1)}0<this.atargets.length&&null==this.target&&(this.target=this.atargets[0])};return f}(VectorElements);ShieldSoldierBase.prototype.__class__="ShieldSoldierBase";
var SkillBase=function(c){function f(){c.call(this);this.cdtime=this.curtime=0;this.iscd=!0}__extends(f,c);var e=f.prototype;e.initbm=function(){this.skillbm=new egret.Bitmap;this.skillbm.x=12;this.skillbm.y=8;this.addChild(this.skillbm);this.mb=Utils.createBitmapByName("mb");this.mb.anchorY=1;this.mb.x=12;this.mb.y=46;this.addChild(this.mb);this.bkbm=Utils.createBitmapByName("uiskilloff");this.addChild(this.bkbm);this.touchEnabled=!0};e.onCreate=function(){this.iscd=!0;this.curtime=0};e.onDestroy=
function(){};e.onEnterFrame=function(a){this.iscd&&(this.curtime+=a,a=this.curtime/this.cdtime,this.setMbheight(38*(1-a)),1<=a&&(this.iscd=!1,this.skillbm.texture=RES.getRes(this.on),this.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.touchHandle,this)))};e.setMbheight=function(a){this.mb.height=a};e.touchHandle=function(a){Group.selectItem(this)};e.selectItem=function(){this.bkbm.texture=RES.getRes("uiskillon");var a,b,c=GuankaBase.instance.objArr.length;for(a=0;a<c;a++){b=GuankaBase.instance.objArr[a];
var e=egret.getQualifiedSuperclassName(b);if("ShieldSoldierBase"==e||"HeroBase"==e)b.view.touchEnabled=!1}};e.reselectItem=function(){};e.deselectItem=function(){this.bkbm.texture=RES.getRes("uiskilloff");var a,b,c=GuankaBase.instance.objArr.length;for(a=0;a<c;a++){b=GuankaBase.instance.objArr[a];var e=egret.getQualifiedSuperclassName(b);if("ShieldSoldierBase"==e||"HeroBase"==e)b.view.touchEnabled=!0}};e.setPoint=function(a){this.skillbm.texture=RES.getRes(this.off);this.setMbheight(38);this.curtime=
0;this.iscd=!0;this.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.touchHandle,this)};return f}(egret.Sprite);SkillBase.prototype.__class__="SkillBase";
var MagicTowerBase=function(c){function f(){c.call(this);this.fireDelay=1E3;this.timesum=0;this.isfire=!1;this.voiceArr=["magic_ready1","magic_ready2","magic_ready3"];var a=Math.floor(3*Math.random());SoundManager.playEffect(this.voiceArr[a])}__extends(f,c);var e=f.prototype;e.playFireVoice=function(){SoundManager.playEffect("magic_fire1")};e.onEnterFrame=function(a){this.atargets=[];for(a=0;a<this.targets.length;a++){var b=this.targets[a];if(null==b.target){var c=Utils.containsXY(b.x,b.y,this.sx,
this.sy-22,this.maxRadius,this.ratioY),e=this.atargets.indexOf(b);c?-1==e&&this.atargets.push(b):-1!=e&&this.atargets.splice(e,1)}}for(a=0;a<this.targets.length;a++)b=this.targets[a],null!=b.target&&(c=Utils.containsXY(b.x,b.y,this.sx,this.sy-22,this.maxRadius,this.ratioY),e=this.atargets.indexOf(b),c?-1==e&&this.atargets.push(b):-1!=e&&this.atargets.splice(e,1))};return f}(TowerBase);MagicTowerBase.prototype.__class__="MagicTowerBase";
var ShieldTowerBase=function(c){function f(){c.call(this);this.offArr=[[10,0],[0,-10],[-10,0]];this.offIdx=-1;this.createTime=1E4;this.timesum=0;this.voiceArr=["shield_ready1","shield_ready2","shield_ready3"];var e=Math.floor(3*Math.random());SoundManager.playEffect(this.voiceArr[e])}__extends(f,c);return f}(TowerBase);ShieldTowerBase.prototype.__class__="ShieldTowerBase";
var GuankaBase=function(c){function f(){c.call(this);this.numSunmage=0;this.perxs=1;this.perxs2=0.1;this.hardxs2=this.hardxs=1;this.allBo=2;this.curBo=-1;this.boLeft=99999;this.boing=!1;this.delayToNext=1E3;this.timeGo=this.mtime=this.stime=this.atime=this.otime=this.delayToNextSum=0;this.roadArr=[];this.coldDown=this.defendUp=this.damagekUp=this.lifeUp=0;this.soldierArr=[];f.instance=this;this.baseArr=[];this.towerArr=[];this.buildQuene=[];this.objArr=[];this.enemyArr=[];this.friendArr=[];this.IconArr=
[];this.bm=new egret.Bitmap;this.addChild(this.bm);this.bm.touchEnabled=!0;this.bm.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.bgMapClick,this);this.baseLayer=new egret.Sprite;this.addChild(this.baseLayer);this.areaLayer=new egret.Sprite;this.addChild(this.areaLayer);this.objLayer=new egret.Sprite;this.addChild(this.objLayer);this.weaponLayer=new egret.Sprite;this.addChild(this.weaponLayer);this.toolLayer=new egret.Sprite;this.addChild(this.toolLayer);this.uiLayer=new egret.Sprite;this.addChild(this.uiLayer);
this.board=Utils.createBitmapByName("board");this.addChild(this.board);this.board.alpha=0}__extends(f,c);var e=f.prototype;e.bgMapClick=function(a){this.guankaUI.boardSp.alpha=0;var b=Group.selectedItem;if(null!=b){var c=egret.getQualifiedSuperclassName(b);if("Base"==c||"ArrowTowerBase"==c||"ShieldTowerBase"==c||"MagicTowerBase"==c||"ExploTowerBase"==c)this.hideTool(null);else if("ShieldSoldierBase"==c||"SkillBase"==c)b.deselectItem(),c=Math.round(a.localX),a=Math.round(a.localY)-50,this.checkPoint(c,
a)&&b.setPoint([c,a]);Group.dispose()}};e.makeGrid=function(a){a=RES.getRes(a);var b,c,e=a.MapData.length,f=a.MapData[0].length;this._cellSize=a.TileWidth;this._grid=new Grid(e,f);for(b=0;b<e;b++)for(c=0;c<f;c++)1==a.MapData[b][c].val&&this._grid.setWalkable(b,c,!1)};e.checkPoint=function(a,b){return!1==this._grid.getNode(Math.floor(a/this._cellSize),Math.floor(b/this._cellSize)).walkable?!1:!0};e.createUI=function(){this.guankaUI=new GuanKaUI(this.weaponLayer,this.objLayer);this.uiLayer.addChild(this.guankaUI);
this.uiLayer.addEventListener(MainEvent.TRYAGAIN,this.tryAgainHandle,this);this.uiLayer.addEventListener(MainEvent.QUITGUANKA,this.quitHandle,this);var a=this;TweenMax.delayedCall(1.2,function(){a.guankaUI.showUI()})};e.createBase=function(){for(var a=0;a<this.basePoseArr.length;a++)this.base=new Base01,this.base.x=this.basePoseArr[a][0],this.base.y=this.basePoseArr[a][1],this.base.baseIdx=a,this.baseLayer.addChild(this.base),this.baseArr.push(this.base),this.base.touchEnabled=!0,this.base.addEventListener(egret.TouchEvent.TOUCH_BEGIN,
this.baseOrTowerTouch,this),this.base.addEventListener(TowerEvent.SHOWTOOL,this.showTool,this),this.base.addEventListener(TowerEvent.HIDETOOL,this.hideTool,this);for(a=0;a<this.base2PoseArr.length;a++)this.base=new Base03,this.base.x=this.base2PoseArr[a][0],this.base.y=this.base2PoseArr[a][1],this.base.baseIdx=a+this.basePoseArr.length,this.baseLayer.addChild(this.base),this.baseArr.push(this.base),this.base.touchEnabled=!0,this.base.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.baseOrTowerTouch,
this),this.base.addEventListener(TowerEvent.SHOWTOOL,this.showTool,this),this.base.addEventListener(TowerEvent.HIDETOOL,this.hideTool,this);if(0<this.base3PoseArr.length)for(a=0;a<this.base3PoseArr.length;a++)this.base=new Base02,this.base.x=this.base3PoseArr[a][0],this.base.y=this.base3PoseArr[a][1],this.baseLayer.addChild(this.base)};e.baseOrTowerTouch=function(a){Group.selectItem(a.currentTarget)};e.showTool=function(a){var b=a.currentTarget;this.oldSelect=b;this.tool=new BuildTool(a.obj,this.gold);
this.tool.anchorX=0.5;this.tool.x=b.x+13;this.tool.y=b.y-17;if(b instanceof Base01||b instanceof Base03||b instanceof SpellTower01||b instanceof GoldOre01)this.tool.x-=13;this.toolLayer.addChild(this.tool);this.tool.addEventListener(ToolEvent.BUILD_START,this.buildStart,this);egret.getQualifiedSuperclassName(this.oldSelect)};e.showIcon=function(a){for(var b=0;b<this.IconArr.length;b++)this.IconArr[b].loopBuildIcon(a)};e.hideTool=function(a){for(;0<this.areaLayer.numChildren;)this.areaLayer.removeChildAt(0);
null!=this.tool&&(this.tool.removeEventListener(ToolEvent.BUILD_START,this.buildStart,this),this.tool.hide(),this.tool=null,this.guankaUI.boardSp.alpha=0)};e.buildStart=function(a){this.curX=this.oldSelect.x;this.curY=this.oldSelect.y;this.baseIdx=this.oldSelect.baseIdx;var b=a.className;if("AttackTower01"==b||"ShieldTower01"==b||"MagicTower01"==b||"AttackTower02"==b||"ShieldTower02"==b||"MagicTower02"==b||"ExploTower01"==b||"GoldOre01"==b||"Strengthen01"==b||"SpellTower01"==b)b=new BuildWait(b),
b.x=this.curX,b.y=this.curY,this.objLayer.addChild(b),b.addEventListener(ToolEvent.BUILD_COMP,this.buildComp,this),this.gold-=a.price,this.guankaUI.setGold(this.gold),b={},b.className=a.className,b.x=this.curX,b.y=this.curY,b.baseIdx=this.baseIdx,this.buildQuene.push(b);else if("SellTower"==b)a=egret.getQualifiedClassName(this.oldSelect),this.gold+=Math.round(TowerLevel.dic[a].price/3),this.guankaUI.setGold(this.gold),this.baseArr[this.baseIdx].addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.baseOrTowerTouch,
this),console.log(this.baseIdx),SoundManager.playEffect("sell_tower");else{if("LockTower"==b)return;if(4>a.price){this.oldSelect.buildID=a.price;this.showIcon(this.oldSelect);Group.dispose();this.hideTool(null);return}if(this.oldSelect instanceof Strengthen01||this.oldSelect instanceof SpellTower01||this.oldSelect instanceof GoldOre01){this.gold-=a.price;this.guankaUI.setGold(this.gold);"DamagekUp"==b?(this.oldSelect.damagekUp++,this.damagekUp++):"LifeUp"==b?(this.oldSelect.lifeUp++,this.lifeUp++):
"DefendUp"==b?(this.oldSelect.defendUp++,this.defendUp++):"SpellTowerUp"==b?(this.oldSelect.level++,this.coldDown++):"GoldOreUp"==b&&this.oldSelect.level++;this.guankaUI.setLife();Group.dispose();this.hideTool(null);return}this.buildTower(this.oldSelect,b,!1);this.gold-=a.price;this.guankaUI.setGold(this.gold)}Group.dispose();this.hideTool(null);this.oldSelect.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.baseOrTowerTouch,this);"Base"!=egret.getQualifiedSuperclassName(this.oldSelect)&&(this.objLayer.removeChild(this.oldSelect),
a=this.objArr.indexOf(this.oldSelect),-1!=a&&this.objArr.splice(a,1),a=this.towerArr.indexOf(this.oldSelect),-1!=a&&this.towerArr.splice(a,1),this.oldSelect.destory());this.oldSelect=null};e.buildComp=function(a){a=a.currentTarget;a.removeEventListener(ToolEvent.BUILD_COMP,this.buildComp,this);this.objLayer.removeChild(a);a=this.buildQuene.shift();this.buildTower(a,a.className,!1)};e.buildTower=function(a,b,c){b=new (egret.getDefinitionByName(b));b.sx=b.x=a.x;b.sy=b.y=a.y;b.baseIdx=a.baseIdx;a=egret.getQualifiedSuperclassName(b);
"ArrowTowerBase"==a||"ExploTowerBase"==a||"MagicTowerBase"==a?b.contentLayer=this.weaponLayer:"ShieldTowerBase"==a&&(b.objArr=this.objArr,b.contentLayer=this.objLayer,b.areaLayer=this.areaLayer,b.soldPoint=new egret.Point(this.soldPointArr[b.baseIdx][0],this.soldPointArr[b.baseIdx][1]));this.objLayer.addChild(b);this.objArr.push(b);this.towerArr.push(b);b.touchEnabled=!0;b.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.baseOrTowerTouch,this);b.addEventListener(TowerEvent.SHOWTOOL,this.showTool,
this);b.addEventListener(TowerEvent.HIDETOOL,this.hideTool,this);b.init()};e.onEnterFrame=function(a){this.timeGo+=a;this.otime<Math.floor(this.timeGo/200)&&(this.otime=Math.floor(this.timeGo/200),this.stime+=2,this.gold+=this.income,this.guankaUI.setGold(this.gold),10<=this.stime&&(this.createEnemies(),this.stime=0));this.removeEnemies();this.enterFrameTowers(a);if(this.guankaUI)this.guankaUI.onEnterFrame(a);this.objArr=Utils.sortarr(this.objArr);for(a=0;a<this.objArr.length;a++){var b=this.objArr[a];
this.objLayer.contains(b)&&this.objLayer.setChildIndex(b,a)}for(a=0;a<this.enemyArr.length;a++)b=this.enemyArr[a],0<b.hp&&(b.targets=this.friendArr);for(a=0;a<this.friendArr.length;a++)b=this.friendArr[a],0<b.hp?b.targets=this.enemyArr:(this.friendArr.splice(a,1),a--);0>=this.EnemyLord.hp&&this.victory();0>=this.FriendLord.hp&&this.lose()};e.removeEnemies=function(){var a;for(a=0;a<this.enemyArr.length;a++){var b=this.enemyArr[a];b.canClear&&(this.enemyArr.splice(a,1),this.boing&&0==this.enemyArr.length&&
(this.curBo==this.allBo-1?this.curBo--:this.boing=!1))}for(a=0;a<this.objArr.length;a++)b=this.objArr[a],b.canClear&&this.objArr.splice(a,1)};e.createEnemies=function(){if(!(75>this.otime)){75==this.otime&&SoundManager.playEffect("bo_start");for(var a=0;a<this.enemyData.length;a++)this.atime=this.enemyData[a].atime,0==this.otime/5%this.atime&&(this.boType=this.enemyData[a].type,this.boLife=this.enemyData[a].life*this.hardxs,this.boSpeed=this.enemyData[a].maxSpeed,this.boDamage=this.enemyData[a].damage*
this.hardxs,this.value=this.enemyData[a].value,this.unitType=this.enemyData[a].unitType,this.curRoadArr=this.roadArr[this.boLeft%this.roadArr.length],this.addEnemys(this.boType,this.curRoadArr),this.boLeft-=1,this.curRoadArr=this.roadArr[this.boLeft%this.roadArr.length],this.addEnemys(this.boType,this.curRoadArr),this.boLeft-=1)}};e.addEnemys=function(a,b){void 0===b&&(b=null);var c=ObjectPool.getInstance().createObject(Monster01);c.addTexture(a);c.init(b,this.boLife,this.boSpeed,this.boDamage,this.value,
this.unitType);this.objLayer.addChild(c);this.objArr.push(c);this.enemyArr.push(c);c.targets=this.friendArr};e.addSoldier=function(a,b){var c=ObjectPool.getInstance().createObject(AttackSoldier03);this.objLayer.addChild(c);this.objArr.push(c);c.x=a;c.y=b;c.init([[a,b],[280,10]]);this.friendArr.push(c)};e.damage=function(a,b,c){var e,f=0;e=1==b.unitType&&3!=a.unitType?0.7*c:3==b.unitType&&2==a.unitType?1.2*c:c;var r=[];if(4==a.specialType){for(var l=0;l<a.targets.length;l++)30>Math.abs(a.targets[l].x-
b.x)&&30>Math.abs(a.targets[l].y-b.y)&&r.push(a.targets[l]);for(l=0;l<r.length;l++)r[l].hp-=e/r.length}else b.hp-=e;f+=e;if(1==a.specialType)for(l=0;l<a.targets.length;l++)if(20>Math.abs(a.targets[l].x-a.target.x)&&20>Math.abs(a.targets[l].y-a.target.y)&&a.targets[l]!=a.target){a.targets[l].hp-=0.5*a.damage;f+=0.5*a.damage;break}3==b.specialType&&(a.hp-=0.3*c);4==a.specialType&&(b.hp-=0.1*b.life);0<a.suckBlood&&(a.hp+=f*a.suckBlood);5==a.specialType&&0.5>b.hp/b.life&&(b.hp-=0.5*e)};e.enterFrameTowers=
function(a){for(var b=this.towerArr.length,c,e=0;e<b;e++)c=this.towerArr[e],c.onEnterFrame(a)};e.quitHandle=function(a){Main.instance.dispatchEvent(new MainEvent(MainEvent.OPENLOADBAR,"maps"))};e.tryAgainHandle=function(a){};e.victory=function(){this.clear();this.guankaUI.showVictory();StorageSetting.setGuankaPass(Main.curIdx);StorageSetting.setTowerUpgrade(Main.curIdx)};e.lose=function(){this.clear();this.guankaUI.showLose()};e.clear=function(){SoundManager.stopBgSound();egret.Ticker.getInstance().unregister(this.onEnterFrame,
this);ObjectPool.getInstance().destroyAllObject()};e.destroy=function(){this.friendArr=this.enemyArr=this.objArr=this.towerArr=this.enemyData=this.soldPointArr=this.basePoseArr=this.baseArr=this.curRoadArr=this.roadArr=null;ObjectPool.getInstance()._pool={}};return f}(egret.Sprite);GuankaBase.prototype.__class__="GuankaBase";
var MonsterBase=function(c){function f(){c.call(this);this.beAttack=!1;this.timesum=this.fireDelay=0;this.maxSoldRadius=70;this.minSoldRadius=25;this.moveToTarget=!1;this.dieVoiceArr=["monster_die1","monster_die2","monster_die3","monster_die4"];this.ratioSoldY=this.minSoldRadius/this.maxSoldRadius;this.fsm=new StateMachine(this);this.lifeBar=new LifeBar;this.addChild(this.lifeBar)}__extends(f,c);var e=f.prototype;e.live=function(){0>=this._hp&&this.fsm.changeState(5);this._hp>this.life&&(this._hp=
this.life)};Object.defineProperty(e,"hp",{get:function(){return this._hp},set:function(a){this._hp=a;this.live();this.lifeBar.setProgress(this._hp,this.life)},enumerable:!0,configurable:!0});e.onDestroy=function(){c.prototype.onDestroy.call(this);null!=this.target&&(this.target=null)};e.hittest=function(){null!=this.target&&(0<GuankaBase.instance.numSunmage?0.1<Math.random()&&GuankaBase.instance.damage(this,this.target,this.damage):GuankaBase.instance.damage(this,this.target,this.damage),0>=this.target.hp&&
(this.target=null))};e.onEnterFrame=function(a){this.timesum+=a;this.fsm.onEnterFrame(a);c.prototype.onEnterFrame.call(this,a);this.canClear&&ObjectPool.getInstance().destroyObject(this)};e.getMoveAngle=function(a){0<=a&&60>=a||300<=a&&360>=a?(this.stateLabel="walking",this.view.scaleX=1):60<a&&120>a?this.stateLabel="walkingDown":120<=a&&240>=a?(this.stateLabel="walking",this.view.scaleX=-1):240<a&&300>a&&(this.stateLabel="walkingUp")};e.idling=function(){0!=this.curState&&(this.curState=0,this.view.gotoAndStop(this.stateLabel));
this.moveOrFight()};e.moving=function(){this.getMoveAngle(this._angle);1!=this.curState&&(this.curState=1,this.view.gotoAndPlay(this.stateLabel));this.moveOrFight();null!=this.target&&this.fsm.changeState(0);this.checkLast(this.stateLabel)};e.movingEnd=function(){2!=this.curState&&(this.curState=2,this.moveOrFight())};e.fighting=function(){3!=this.curState&&(this.curState=3,this.view.gotoAndPlay(this.stateLabel),null!=this.target&&(this.view.scaleX=this.x<=this.target.x?1:-1));this.checkLastEnd(this.stateLabel)};
e.fightingEnd=function(){4!=this.curState&&(this.curState=4,this.hittest(),this.timesum=0);null==this.target?(this.moveOrFight(),this.fsm.changeState(1)):this.timesum>=this.fireDelay&&(this.moveOrFight(),this.fsm.changeState(3),this.timesum=0)};e.dying=function(){if(5!=this.curState){this.curState=5;this.view.gotoAndPlay(this.stateLabel);var a=Math.floor(4*Math.random());SoundManager.playEffect(this.dieVoiceArr[a])}this.checkLastEnd(this.stateLabel)};e.dyingEnd=function(){6!=this.curState&&(this.curState=
6,this.canClear=!0)};e.checkLast=function(a){this.view._getFrameLabelForFrame(this.view.currentFrame+1).name!=a&&this.view.gotoAndPlay(a)};e.checkLastEnd=function(a){if(this.view._getFrameLabelForFrame(this.view.currentFrame+1).name!=a||this.view.currentFrame>=this.view.totalFrames)this.view.stop(),3==this.curState?this.fsm.changeState(4):5==this.curState&&this.fsm.changeState(6)};e.isIdle=function(){this.stateLabel="idle";return!0};e.isMove=function(){return!0};e.isFighting=function(){this.stateLabel=
"fighting";return!0};e.isDead=function(){this.stateLabel="dead";return!0};e.moveOrFight=function(){this.getTarget();null!=this.target&&(this.moveToTarget?(this.moveToTarget=!1,this.fsm.changeState(3)):this.moveToTarget=!0)};e.getTarget=function(){var a;this.atargets=[];for(a=0;a<this.targets.length;a++){var b=this.targets[a],c=Utils.containsXY(b.x,b.y,this.x,this.y,this.maxSoldRadius,this.ratioSoldY),e=this.atargets.indexOf(b);c?-1==e&&this.atargets.push(b):-1!=e&&this.atargets.splice(e,1)}0<this.atargets.length&&
null==this.target&&(this.target=this.atargets[0])};return f}(VectorElements);MonsterBase.prototype.__class__="MonsterBase";
var ArrowShooterBase=function(c){function f(){c.call(this)}__extends(f,c);var e=f.prototype;e.onEnterFrame=function(a){this.currentLabel==this.endLabel&&this.gotoAndStop(this.idleLabel)};e.fire=function(a){"downR"==a?(this.startLabel="shootDown",this.endLabel="shootDownEnd",this.idleLabel="idleDown",this.scaleX=1):"upR"==a?(this.startLabel="shootUp",this.endLabel="shootUpEnd",this.idleLabel="idleUp",this.scaleX=1):"downL"==a?(this.startLabel="shootDown",this.endLabel="shootDownEnd",this.idleLabel=
"idleDown",this.scaleX=-1):"upL"==a&&(this.startLabel="shootUp",this.endLabel="shootUpEnd",this.idleLabel="idleUp",this.scaleX=-1);this.gotoAndPlay(this.startLabel)};return f}(egret.MovieClip);ArrowShooterBase.prototype.__class__="ArrowShooterBase";
var AttackArcherBase=function(c){function f(){c.call(this);this.moveToTarget=!1;this.yoffset=this.xoffset=this.timesum=this.fireDelay=0;this.atjijie=!1;this.maxSoldRadius=200;this.minSoldRadius=60;this.ratioSoldY=this.minSoldRadius/this.maxSoldRadius;this.fsm=new StateMachine(this);this.lifeBar=new LifeBar;this.addChild(this.lifeBar)}__extends(f,c);var e=f.prototype;e.setPath2=function(a){this.posArr.length=0;this.posArr.push(a);this.fsm.changeState(1)};e.live=function(){0>=this._hp&&this.fsm.changeState(5);
this._hp>this.life&&(this._hp=this.life)};Object.defineProperty(e,"hp",{get:function(){return this._hp},set:function(a){this._hp=a;this.live();this.lifeBar.setProgress(this._hp,this.life)},enumerable:!0,configurable:!0});e.selectItem=function(){this.dispatchEvent(new SoldEvent(SoldEvent.SELECT,this))};e.deselectItem=function(){this.dispatchEvent(new SoldEvent(SoldEvent.DESELECT,this))};e.reselectItem=function(){};e.createYQ=function(){this.view.touchEnabled=!1};e.clearYQ=function(){null!=this.selectYQ&&
(this.removeChild(this.selectYQ),this.selectYQ=null);this.view.touchEnabled=!0};e.onDestroy=function(){c.prototype.onDestroy.call(this);null!=this.target&&(this.target=null);this.clearYQ()};e.hittest=function(){if(null!=this.target&&0>=this.target.hp){var a=this.targets.indexOf(this.target);-1!=a&&this.targets.splice(a,1);a=this.atargets.indexOf(this.target);-1!=a&&this.atargets.splice(a,1);this.target=null}};e.onEnterFrame=function(a){this.timesum+=a;this.fsm.onEnterFrame(a);c.prototype.onEnterFrame.call(this,
a);this.canClear&&ObjectPool.getInstance().destroyObject(this)};e.getMoveAngle=function(a){0<=a&&60>=a||300<=a&&360>=a?(this.stateLabel="walking",this.view.scaleX=1):60<a&&120>a?this.stateLabel="walkingDown":120<=a&&240>=a?(this.stateLabel="walking",this.view.scaleX=-1):240<a&&300>a&&(this.stateLabel="walkingUp")};e.idling=function(){0!=this.curState&&(this.curState=0,this.view.gotoAndStop(this.stateLabel));this.moveOrFight()};e.moving=function(){this.getMoveAngle(this._angle);1!=this.curState&&(this.curState=
1,this.view.gotoAndPlay(this.stateLabel));this.moveOrFight();this.checkLast(this.stateLabel)};e.movingEnd=function(){2!=this.curState&&(this.curState=2,this.fsm.changeState(0))};e.fighting=function(){3!=this.curState&&(this.curState=3,null!=this.target&&(this.stateLabel=this.y>=this.target.y?"shootUp":"shootDown"),this.view.gotoAndPlay(this.stateLabel));this.checkLastEnd(this.stateLabel)};e.fightingEnd=function(){4!=this.curState&&(this.curState=4,this.hittest(),this.timesum=0);null==this.target?
(this.fsm.changeState(1),this.moveOrFight()):this.timesum>=this.fireDelay&&(this.fsm.changeState(3),this.timesum=0)};e.dying=function(){5!=this.curState&&(this.curState=5,this.view.gotoAndPlay(this.stateLabel));this.checkLastEnd(this.stateLabel)};e.dyingEnd=function(){6!=this.curState&&(this.curState=6,this.canClear=!0)};e.checkLast=function(a){this.view._getFrameLabelForFrame(this.view.currentFrame+1).name!=a&&this.view.gotoAndPlay(a)};e.checkLastEnd=function(a){if(this.view._getFrameLabelForFrame(this.view.currentFrame+
1).name!=a||this.view.currentFrame>=this.view.totalFrames)this.view.stop(),3==this.curState?this.fsm.changeState(4):5==this.curState&&this.fsm.changeState(6)};e.isIdle=function(){this.stateLabel="idle";return!0};e.isMove=function(){return!0};e.isFighting=function(){return!0};e.isDead=function(){this.stateLabel="dead";return!0};e.moveOrFight=function(){this.getTarget();null!=this.target&&(this.moveToTarget?(this.moveToTarget=!1,this.fsm.changeState(3)):(this.moveToTarget=!0,this.target.beAttack=!1))};
e.getTarget=function(){var a;this.atargets=[];for(a=0;a<this.targets.length;a++){var b=this.targets[a],c=Utils.containsXY(b.x,b.y,this.x,this.y,this.maxSoldRadius,this.ratioSoldY),e=this.atargets.indexOf(b);c?-1==e&&this.atargets.push(b):-1!=e&&this.atargets.splice(e,1)}0<this.atargets.length&&null==this.target&&(this.target=this.atargets[0])};return f}(VectorElements);AttackArcherBase.prototype.__class__="AttackArcherBase";
var MagicWizardBase=function(c){function f(){c.call(this)}__extends(f,c);var e=f.prototype;e.onEnterFrame=function(a){this.checkLastEnd(this.stateLabel)};e.fire=function(a){"down"==a?(this.stateLabel="shoot_down",this.idleLabel="idleDown"):"up"==a&&(this.stateLabel="shoot_up",this.idleLabel="idleUp");this.gotoAndPlay(this.stateLabel)};e.checkLastEnd=function(a){(this._getFrameLabelForFrame(this.currentFrame+1).name!=a||this.currentFrame>=this.totalFrames)&&this.gotoAndStop(this.idleLabel)};return f}(egret.MovieClip);
MagicWizardBase.prototype.__class__="MagicWizardBase";
var TowersBase=function(c){function f(){c.call(this);this.moveToTarget=!1;this.firstst="R";this.yoffset=this.xoffset=this.timesum=this.fireDelay=this.time=0;this.atjijie=!1;this.maxRadius=140;this.minRadius=100;this.voiceArr=["shield_fire1","shield_fire2","shield_fire3"];this.lifeBar=new LifeBar;this.addChild(this.lifeBar)}__extends(f,c);var e=f.prototype;e.playFireVoice=function(){0.5<Math.random()?SoundManager.playEffect("arrow_fire1"):SoundManager.playEffect("arrow_fire2")};e.live=function(){0>=
this._hp&&(this.canClear=!0);this._hp>this.life&&(this._hp=this.life)};Object.defineProperty(e,"hp",{get:function(){return this._hp},set:function(a){this._hp=a;this.live();this.lifeBar.setProgress(this._hp,this.life)},enumerable:!0,configurable:!0});e.selectItem=function(){this.dispatchEvent(new SoldEvent(SoldEvent.SELECT,this))};e.deselectItem=function(){this.dispatchEvent(new SoldEvent(SoldEvent.DESELECT,this))};e.reselectItem=function(){};e.createYQ=function(){this.view.touchEnabled=!1};e.clearYQ=
function(){null!=this.selectYQ&&(this.removeChild(this.selectYQ),this.selectYQ=null);this.view.touchEnabled=!0};e.onDestroy=function(){c.prototype.onDestroy.call(this);null!=this.target&&(this.target=this.target.target=null)};e.onEnterFrame=function(a){this.timesum+=a;c.prototype.onEnterFrame.call(this,a);this.canClear&&ObjectPool.getInstance().destroyObject(this);this.atargets=[];for(a=0;a<this.targets.length;a++){var b=this.targets[a];if(null==b.target){var d=Utils.containsXY(b.x,b.y,this.sx,this.sy-
22,this.maxRadius,this.ratioY),e=this.atargets.indexOf(b);d&&0<b.hp?-1==e&&this.atargets.push(b):-1!=e&&this.atargets.splice(e,1)}}for(a=0;a<this.targets.length;a++)b=this.targets[a],null!=b.target&&(d=Utils.containsXY(b.x,b.y,this.sx,this.sy-22,this.maxRadius,this.ratioY),e=this.atargets.indexOf(b),d&&0<b.hp?-1==e&&this.atargets.push(b):-1!=e&&this.atargets.splice(e,1))};e.isIdle=function(){this.stateLabel="idle";return!0};e.isMove=function(){return!0};e.isFighting=function(){this.stateLabel="fighting";
return!0};e.isDead=function(){this.stateLabel="dead";return!0};return f}(VectorElements);TowersBase.prototype.__class__="TowersBase";
var ArrowBase=function(c){function f(){c.call(this);this.follow=this.isMiss=this.isHit=!1;this.t0=0;this.t1=20;this.g=1}__extends(f,c);var e=f.prototype;e.update=function(){this.follow&&(this.move(),this.hittest())};e.setTarget=function(a,b){this.pos=new egret.Point(a,b);this.xSpeed=(this.pos.x-this.p1.x)/this.t1;this.ySpeed=(this.pos.y-this.p1.y-this.t1/2*this.t1*this.g)/this.t1};e.move=function(){this.setTarget(this.target.x,this.target.y-this.offy);this.t0+=0.5;this.x=this.p1.x+this.t0*this.xSpeed;
this.y=this.p1.y+this.t0*this.ySpeed+this.g*this.t0*this.t0/2;this.t0+=0.5;var a=this.p1.x+this.t0*this.xSpeed,b=this.p1.y+this.t0*this.ySpeed+this.g*this.t0*this.t0/2;this.t0-=0.5;this.angel=Math.atan2(b-this.y,a-this.x);this.angle=this.rotation=180*this.angel/Math.PI+180};e.onEnterFrame=function(a){this.update();this.isHit&&(this.view.gotoAndPlay("hit"),this.isHit=!1);this.isMiss&&(this.view.gotoAndPlay("miss"),this.isMiss=!1);if("hitEnd"==this.view.currentLabel||"missEnd"==this.view.currentLabel)this.canClear=
!0;this.canClear&&ObjectPool.getInstance().destroyObject(this)};e.hittest=function(){if(!(0<=this.angle&&180>=this.angle)){var a=0>this.y-this.target.y-this.offy?this.target.y-this.offy-this.y:this.y-this.target.y-this.offy;if(1>=(0>this.x-this.target.x?this.target.x-this.x:this.x-this.target.x)&&1>=a){this.target.hp-=this.damage;if(this.target.hp<=-this.damage){this.isMiss=!0;this.rotation=270;var a=2-4*Math.random(),b=6*Math.random()+4;this.x+=a;this.y+=b}else this.isHit=!0,0.4<Math.random()?SoundManager.playEffect("arrow_hit2"):
SoundManager.playEffect("arrow_hit1");this.follow=!1}}};return f}(Elements);ArrowBase.prototype.__class__="ArrowBase";
var MagicBulletBase=function(c){function f(){c.call(this);this.follow=this.isHit=this.isTravel=!1;this.fsm=new StateMachine(this)}__extends(f,c);var e=f.prototype;e.update=function(){};e.idling=function(){0!=this.curState&&(this.curState=0)};e.moving=function(){1!=this.curState&&(this.curState=1);this.setPosArr()};e.movingEnd=function(){2!=this.curState&&(this.curState=2,this.fsm.changeState(0),this.hittest())};e.isIdle=function(){return!0};e.isMove=function(){return!0};e.setPosArr=function(){this._pathIndex=
0;this.posArr.length=0;var a=new Vector2D(this.target.x,this.target.y-this.target.offy);this.posArr.push(a);this.fsm.changeState(1)};e.onEnterFrame=function(a){c.prototype.onEnterFrame.call(this,a);this.rotation=this._angle;this.fsm.onEnterFrame(a);this.update();this.isTravel&&(this.view.gotoAndPlay("travel"),this.isTravel=!1);this.isHit&&(this.view.gotoAndPlay("hit"),this.isHit=!1);"hitEnd"==this.view.currentLabel&&(this.canClear=!0);"travelEnd"==this.view.currentLabel&&this.view.gotoAndPlay("travel");
this.canClear&&ObjectPool.getInstance().destroyObject(this)};e.hittest=function(){var a=0>this.y-this.target.y-this.target.offy?this.target.y-this.target.offy-this.y:this.y-this.target.y-this.target.offy;4>=(0>this.x-this.target.x?this.target.x-this.x:this.x-this.target.x)&&4>=a&&HitTest.hitTestRect(this,this.target)&&(this.target.hp-=this.damage,this.isHit=!0,this.follow=!1)};return f}(VectorElements);MagicBulletBase.prototype.__class__="MagicBulletBase";var stateType;
(function(c){c[c.idleState=0]="idleState";c[c.moveState=1]="moveState";c[c.moveEndState=2]="moveEndState";c[c.fightState=3]="fightState";c[c.fightEndState=4]="fightEndState";c[c.deadState=5]="deadState";c[c.deadEndState=6]="deadEndState"})(stateType||(stateType={}));
var StateMachine=function(){function c(c){this._obj=c}var f=c.prototype;f.changeState=function(c){this._curState=c};f.onEnterFrame=function(c){switch(this._curState){case 0:this._obj.isIdle()&&this._obj.idling();break;case 1:this._obj.isMove()&&this._obj.moving();break;case 2:this._obj.movingEnd();break;case 3:this._obj.isFighting()&&this._obj.fighting();break;case 4:this._obj.fightingEnd();break;case 5:this._obj.isDead()&&this._obj.dying();break;case 6:this._obj.dyingEnd()}};Object.defineProperty(f,
"curState",{get:function(){return this._curState},enumerable:!0,configurable:!0});return c}();StateMachine.prototype.__class__="StateMachine";var SoundManager=function(){function c(){}c.playEffect=function(c,e){void 0===e&&(e=1);var a=RES.getRes(c);a.type=egret.Sound.EFFECT;a.volume=e;a.play()};c.playBgSound=function(c,e){void 0===e&&(e=!0);this.sdbg=RES.getRes(c);this.sdbg.type=egret.Sound.MUSIC;this.sdbg.play(e)};c.stopBgSound=function(){this.sdbg.stop()};return c}();
SoundManager.prototype.__class__="SoundManager";
var Vector2D=function(){function c(c,a){void 0===c&&(c=0);void 0===a&&(a=0);this._x=c;this._y=a}var f=c.prototype;f.draw=function(c,a){void 0===a&&(a=0);c.lineStyle(0,a);c.moveTo(0,0);c.lineTo(this._x,this._y)};f.clone=function(){return new c(this.x,this.y)};f.zero=function(){this._y=this._x=0;return this};f.isZero=function(){return 0==this._x&&0==this._y};Object.defineProperty(f,"length",{get:function(){return Math.sqrt(this.lengthSQ)},set:function(c){var a=this.angle;this._x=Math.cos(a)*c;this._y=
Math.sin(a)*c},enumerable:!0,configurable:!0});Object.defineProperty(f,"lengthSQ",{get:function(){return this._x*this._x+this._y*this._y},enumerable:!0,configurable:!0});Object.defineProperty(f,"angle",{get:function(){return Math.atan2(this._y,this._x)},set:function(c){var a=this.length;this._x=Math.cos(c)*a;this._y=Math.sin(c)*a},enumerable:!0,configurable:!0});f.normalize=function(){if(0==this.length)return this._x=1,this;var c=this.length;this._x/=c;this._y/=c;return this};f.truncate=function(c){this.length=
Math.min(c,this.length);return this};f.reverse=function(){this._x=-this._x;this._y=-this._y;return this};f.isNormalized=function(){return 1==this.length};f.dotProd=function(c){return this._x*c.x+this._y*c.y};f.crossProd=function(c){return this._x*c.y-this._y*c.x};c.angleBetween=function(c,a){c.isNormalized()||(c=c.clone().normalize());a.isNormalized()||(a=a.clone().normalize());return Math.acos(c.dotProd(a))};f.sign=function(c){return 0>this.perp.dotProd(c)?-1:1};Object.defineProperty(f,"perp",{get:function(){return new c(-this.y,
this.x)},enumerable:!0,configurable:!0});f.dist=function(c){return Math.sqrt(this.distSQ(c))};f.distSQ=function(c){var a=c.x-this.x;c=c.y-this.y;return a*a+c*c};f.add=function(e){return new c(this._x+e.x,this._y+e.y)};f.subtract=function(e){return new c(this._x-e.x,this._y-e.y)};f.multiply=function(e){return new c(this._x*e,this._y*e)};f.divide=function(e){return new c(this._x/e,this._y/e)};f.equals=function(c){return this._x==c.x&&this._y==c.y};Object.defineProperty(f,"x",{get:function(){return this._x},
set:function(c){this._x=c},enumerable:!0,configurable:!0});Object.defineProperty(f,"y",{get:function(){return this._y},set:function(c){this._y=c},enumerable:!0,configurable:!0});f.tostring=function(){return"[Vector2D (x:"+this._x+", y:"+this._y+")]"};return c}();Vector2D.prototype.__class__="Vector2D";var GameSetting=function(){function c(){}c.swid=480;c.shei=640;c.goldStar=0;return c}();GameSetting.prototype.__class__="GameSetting";
var Monster01=function(c){function f(){c.call(this);this.view=new egret.MovieClip;this.addChild(this.view)}__extends(f,c);var e=f.prototype;e.addTexture=function(a){var b=RES.getRes(a+"json"),c=RES.getRes(a+"png"),b=new egret.MovieClipDataFactory(b,c);this.view.movieClipData=b.generateMovieClipData(a);this.view.anchorX=0.5;this.view.x=this.view.width/2;this.anchorX=0.5;this.anchorY=0.9;this.lifeBar.x=(this.view.width-this.lifeBar.width)/2;this.lifeBar.y=-5;this.offy=10;this.fireDelay=500};e.onCreate=
function(){this.posArr=[];this._pathIndex=0;this.moveToTarget=!1;this.timesum=0;this.lifeBar.reSet();this.canClear=!1;this.target=null;this.fsm.changeState(0);this.curState=0};e.init=function(a,b,c,e,f,r){this.unitType=r;this.hp=this.life=b;this._maxSpeed=c;this.damage=e;this.value=f;this._position.x=this.x=a[0][0];this._position.y=this.y=a[0][1];b=1;e=Math.round(10-20*Math.random());for(b;b<a.length;b++)c=new Vector2D(a[b][0],a[b][1]+e),this.posArr.push(c);this.fsm.changeState(1)};e.onEnterFrame=
function(a){c.prototype.onEnterFrame.call(this,a)};e.onDestroy=function(){GuankaBase.instance.gold+=this.value;GuankaBase.instance.guankaUI.setGold(GuankaBase.instance.gold);c.prototype.onDestroy.call(this);this.view.touchEnabled=!1};return f}(MonsterBase);Monster01.prototype.__class__="Monster01";
var SoldEvent=function(c){function f(a,b,d,e,f){void 0===b&&(b=null);void 0===d&&(d=null);void 0===e&&(e=!1);void 0===f&&(f=!1);c.call(this,a,e,f);this._obj=b;this._arr=d}__extends(f,c);var e=f.prototype;Object.defineProperty(e,"obj",{get:function(){return this._obj},enumerable:!0,configurable:!0});Object.defineProperty(e,"arr",{get:function(){return this._arr},enumerable:!0,configurable:!0});f.SELECT="select";f.DESELECT="deselect";f.MOVE="move";return f}(egret.Event);
SoldEvent.prototype.__class__="SoldEvent";
var Group=function(){function c(){}c.selectItem=function(f){if(c.selectedItem){if(c.selectedItem==f){c.selectedItem.reselectItem();return}c.selectedItem.deselectItem()}c.selectedItem=f;c.selectedItem&&(c.selectedItem.selectItem(),SoundManager.playEffect("select"))};c.dispose=function(){c.selectedItem=null};c.selectIcon=function(f){if(c.selectedIcon){if(c.selectedIcon==f){c.selectedIcon.reselectIcon();return}c.selectedIcon.deselectIcon()}c.selectedIcon=f;c.selectedIcon&&(c.selectedIcon.selectIcon(),
SoundManager.playEffect("select"))};c.disposeIcon=function(){c.selectedIcon=null};return c}();Group.prototype.__class__="Group";
var ObjectPool=function(){function c(){this._isPause=!1;this._pool={};this._list=[];egret.Ticker.getInstance().register(this.onEnterFrame,this)}var f=c.prototype;f.onEnterFrame=function(c){for(var a=this._list.concat(),b=0,d=a.length;b<d;b++)a[b].onEnterFrame(c)};f.pauseEnterFrame=function(){this._isPause=!0};f.resumeEnterFrame=function(){this._isPause=!1};f.createObject=function(c){var a=egret.getQualifiedClassName(c),a=this._pool[a];c=null!=a&&a.length?a.shift():new c;c.onCreate();this._list.push(c);
return c};f.destroyObject=function(c){var a=egret.getQualifiedClassName(c);null==this._pool[a]&&(this._pool[a]=[]);-1==this._pool[a].indexOf(c)&&this._pool[a].push(c);c.onDestroy();c=this._list.indexOf(c);-1!=c&&this._list.splice(c,1)};f.destroyObjectByKey=function(c){for(var a=0;a<this._list.length;a++)this._list[a].key==c&&(this._list[a].onDestroy(),a--)};f.destroyAllObject=function(){for(;this._list.length;)this.destroyObject(this._list[0])};c.getInstance=function(){null==c.instance&&(c.instance=
new c);return c.instance};return c}();ObjectPool.prototype.__class__="ObjectPool";
var MagicBullet010203=function(c){function f(){c.call(this);this.view=new egret.MovieClip;this.addChild(this.view);this.anchorX=this.anchorY=0.5;var a=RES.getRes("MagicBullet010203json"),b=RES.getRes("MagicBullet010203png"),a=new egret.MovieClipDataFactory(a,b);this.view.movieClipData=a.generateMovieClipData("MagicBullet010203")}__extends(f,c);var e=f.prototype;e.onCreate=function(){this.follow=this.isHit=this.canClear=!1;this.isTravel=!0;this.target=null;this._maxSpeed=2;this.fsm.changeState(0);
this.curState=0};e.init=function(a,b){this.target=b;this._position.x=this.x=a.x;this._position.y=this.y=a.y;this.setPosArr()};e.onEnterFrame=function(a){c.prototype.onEnterFrame.call(this,a)};return f}(MagicBulletBase);MagicBullet010203.prototype.__class__="MagicBullet010203";
var MagicMage11=function(c){function f(){c.call(this);this.addTexture()}__extends(f,c);var e=f.prototype;e.addTexture=function(){this.anchorX=0.5;this.view=new egret.MovieClip;this.addChild(this.view);var a=RES.getRes("human3-1_json"),b=RES.getRes("human3-1_png"),a=new egret.MovieClipDataFactory(a,b);this.view.movieClipData=a.generateMovieClipData("human3-1");this.view.x=this.view.width/2;this.lifeBar.x=(this.view.width-this.lifeBar.width)/2;this.lifeBar.y=-50;this._maxSpeed=0.7;this.offy=10;this.fireDelay=
1500};e.onCreate=function(){this.unitType=2;this.hp=70*(1+0.2*GuankaBase.instance.lifeUp);this.life=70*(1+0.2*GuankaBase.instance.lifeUp);this.damage=90*(1+0.2*GuankaBase.instance.damagekUp);this.posArr=[];this.timesum=this._pathIndex=0;this.lifeBar.reSet();this.moveToTarget=this.atjijie=this.canClear=!1;this.fsm.changeState(0);this.curState=0;this.view.touchEnabled=!0;this.view.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.viewSelect,this)};e.init=function(a){this.atjijie=!0;this._position.x=
this.x=a[0][0];this._position.y=this.y=a[0][1];var b=1;for(b;b<a.length;b++)this.jijieDian=new Vector2D(a[b][0]+this.xoffset,a[b][1]+this.yoffset),this.posArr.push(this.jijieDian);this.fsm.changeState(1);b=ObjectPool.getInstance().createObject(Monster01);b.addTexture("Monster15");GuankaBase.instance.objLayer.addChild(b);GuankaBase.instance.objArr.push(b);b.x=this.x-3;b.y=this.y+(240-this.y)/1.5;b.init(a,300,0.7,100,0,1);GuankaBase.instance.friendArr.push(b)};e.playFireVoice=function(){0.5<Math.random()?
SoundManager.playEffect("arrow_fire1"):SoundManager.playEffect("arrow_fire2")};e.setPoint=function(a){this.dispatchEvent(new SoldEvent(SoldEvent.MOVE,this,a))};e.setPath=function(a){this.atjijie=!0;this.posArr.length=0;this.jijieDian=new Vector2D(a[0]+this.xoffset,a[1]+this.yoffset);this.posArr.push(this.jijieDian);this.fsm.changeState(1);null!=this.target&&(null!=this.target.target&&(this.target.target=null),this.target=null)};e.onEnterFrame=function(a){c.prototype.onEnterFrame.call(this,a);0==this.atargets.length?
this.timesum=this.fireDelay:(this.timesum+=a,this.timesum<this.fireDelay||(this.timesum=0,this.playFireVoice(),this.weapon=ObjectPool.getInstance().createObject(MagicBullet010203),this.weapon.damage=1==this.target.unitType&&2==this.unitType?0.7*this.damage:this.damage,a=new egret.Point(this.x,this.y-50),this.weapon.init(a,this.target),GuankaBase.instance.weaponLayer.addChild(this.weapon),this.weapon.damage>=this.target.hp&&(a=this.targets.indexOf(this.target),-1!=a&&this.targets.splice(a,1),a=this.atargets.indexOf(this.target),
-1!=a&&this.atargets.splice(a,1),this.target=null)))};e.viewSelect=function(a){Group.selectItem(this)};e.onDestroy=function(){c.prototype.onDestroy.call(this);this.view.touchEnabled=!1;this.view.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.viewSelect,this)};return f}(AttackArcherBase);MagicMage11.prototype.__class__="MagicMage11";
var MagicMage12=function(c){function f(){c.call(this);this.time=0;this.cd=300;this.float=new egret.TextField;this.addTexture()}__extends(f,c);var e=f.prototype;e.addTexture=function(){this.anchorX=0.5;this.view=new egret.MovieClip;this.addChild(this.view);var a=RES.getRes("human3-2_json"),b=RES.getRes("human3-2_png"),a=new egret.MovieClipDataFactory(a,b);this.view.movieClipData=a.generateMovieClipData("human3-2");this.view.x=this.view.width/2;this.lifeBar.x=(this.view.width-this.lifeBar.width)/2;
this.lifeBar.y=-50;this._maxSpeed=0.7;this.offy=10;this.fireDelay=1500};e.onCreate=function(){GuankaBase.instance.numSunmage++;this.unitType=2;this.hp=70*(1+0.2*GuankaBase.instance.lifeUp);this.life=70*(1+0.2*GuankaBase.instance.lifeUp);this.damage=90*(1+0.2*GuankaBase.instance.damagekUp);this.posArr=[];this.timesum=this._pathIndex=0;this.lifeBar.reSet();this.moveToTarget=this.atjijie=this.canClear=!1;this.fsm.changeState(0);this.curState=0;this.view.touchEnabled=!0;this.view.addEventListener(egret.TouchEvent.TOUCH_BEGIN,
this.viewSelect,this);GuankaBase.instance.addChild(this.float);this.float.anchorX=0.5;this.float.alpha=0;this.float.size=13;this.float.textColor=60416};e.init=function(a){this.atjijie=!0;this._position.x=this.x=a[0][0];this._position.y=this.y=a[0][1];var b=1;for(b;b<a.length;b++)this.jijieDian=new Vector2D(a[b][0]+this.xoffset,a[b][1]+this.yoffset),this.posArr.push(this.jijieDian);this.fsm.changeState(1)};e.playFireVoice=function(){0.5<Math.random()?SoundManager.playEffect("arrow_fire1"):SoundManager.playEffect("arrow_fire2")};
e.setPoint=function(a){this.dispatchEvent(new SoldEvent(SoldEvent.MOVE,this,a))};e.setPath=function(a){this.atjijie=!0;this.posArr.length=0;this.jijieDian=new Vector2D(a[0]+this.xoffset,a[1]+this.yoffset);this.posArr.push(this.jijieDian);this.fsm.changeState(1);null!=this.target&&(null!=this.target.target&&(this.target.target=null),this.target=null)};e.onEnterFrame=function(a){c.prototype.onEnterFrame.call(this,a);this.time++;if(this.time>this.cd){if(0<GuankaBase.instance.friendArr.length){var b;
b=GuankaBase.instance.friendArr[0];for(var d=0;d<GuankaBase.instance.friendArr.length;d++)b.hp/b.life>GuankaBase.instance.friendArr[d].hp/GuankaBase.instance.friendArr[d].life&&(b=GuankaBase.instance.friendArr[d]);b.hp<b.life&&(b.hp+=50,this.float.alpha=1,this.float.text="+50",this.float.x=b.x,this.float.y=b.y-50,TweenMax.to(this.float,2,{y:this.float.y-50,alpha:0}))}this.time=0}0==this.atargets.length?this.timesum=this.fireDelay:(this.timesum+=a,this.timesum<this.fireDelay||(this.timesum=0,this.playFireVoice(),
this.weapon=ObjectPool.getInstance().createObject(MagicBullet010203),this.weapon.damage=1==this.target.unitType&&2==this.unitType?0.7*this.damage:1==this.target.unitType&&3==this.unitType?1.3*this.damage:this.damage,a=new egret.Point(this.x,this.y-50),this.weapon.init(a,this.target),GuankaBase.instance.weaponLayer.addChild(this.weapon),this.weapon.damage>=this.target.hp&&(a=this.targets.indexOf(this.target),-1!=a&&this.targets.splice(a,1),a=this.atargets.indexOf(this.target),-1!=a&&this.atargets.splice(a,
1),this.target=null)))};e.viewSelect=function(a){Group.selectItem(this)};e.onDestroy=function(){GuankaBase.instance.numSunmage--;c.prototype.onDestroy.call(this);this.view.touchEnabled=!1;this.view.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.viewSelect,this)};return f}(AttackArcherBase);MagicMage12.prototype.__class__="MagicMage12";
var MagicWizard010203=function(c){function f(){c.call(this);this.anchorX=0.5;var e=RES.getRes("MagicWizard010203json"),a=RES.getRes("MagicWizard010203png");this.movieClipData=(new egret.MovieClipDataFactory(e,a)).generateMovieClipData("MagicWizard010203");this.idleLabel=this.stateLabel="idleDown"}__extends(f,c);return f}(MagicWizardBase);MagicWizard010203.prototype.__class__="MagicWizard010203";
var ShieldSoldier01=function(c){function f(){c.call(this);this.hp=260;this.damage=60;this.view=new egret.MovieClip;this.addChild(this.view)}__extends(f,c);var e=f.prototype;e.addTexture=function(a){this.anchorX=0.6;var b=RES.getRes(a+"_json"),c=RES.getRes(a+"_png"),b=new egret.MovieClipDataFactory(b,c);this.view.movieClipData=b.generateMovieClipData(a);this.view.x=this.view.width/2;this.lifeBar.x=(this.view.width-this.lifeBar.width)/2;this.lifeBar.y=-50;this._maxSpeed=0.7;this.offy=10;this.fireDelay=
1E3};e.onCreate=function(){this.posArr=[];this.timesum=this._pathIndex=0;this.lifeBar.reSet();this.moveToTarget=this.atjijie=this.canClear=!1;this.fsm.changeState(0);this.curState=0};e.init=function(a,b,c){this.hp=this.life=b*(1+0.2*GuankaBase.instance.lifeUp);this.damage=c*(1+0.2*GuankaBase.instance.damagekUp);this.atjijie=!0;this._position.x=this.x=a[0][0];this._position.y=this.y=a[0][1];b=1;for(b;b<a.length;b++)this.jijieDian=new Vector2D(a[b][0]+this.xoffset,a[b][1]+this.yoffset),this.posArr.push(this.jijieDian);
this.fsm.changeState(1)};e.setPoint=function(a){this.dispatchEvent(new SoldEvent(SoldEvent.MOVE,this,a))};e.setPath=function(a){this.atjijie=!0;this.posArr.length=0;this.jijieDian=new Vector2D(a[0]+this.xoffset,a[1]+this.yoffset);this.posArr.push(this.jijieDian);this.fsm.changeState(1);null!=this.target&&(null!=this.target.target&&(this.target.target=null),this.target=null)};e.onEnterFrame=function(a){c.prototype.onEnterFrame.call(this,a)};e.viewSelect=function(a){Group.selectItem(this)};e.onDestroy=
function(){c.prototype.onDestroy.call(this);this.view.touchEnabled=!1;this.view.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.viewSelect,this)};return f}(ShieldSoldierBase);ShieldSoldier01.prototype.__class__="ShieldSoldier01";
var ShieldSoldier11=function(c){function f(){c.call(this);this.addTexture()}__extends(f,c);var e=f.prototype;e.addTexture=function(){this.anchorX=0.6;this.view=new egret.MovieClip;this.addChild(this.view);var a=RES.getRes("h1001_json"),b=RES.getRes("h1001_png"),a=new egret.MovieClipDataFactory(a,b);this.view.movieClipData=a.generateMovieClipData("h1001");this.view.x=this.view.width/2;this.lifeBar.x=(this.view.width-this.lifeBar.width)/2;this.lifeBar.y=-50;this._maxSpeed=0.7;this.offy=10;this.fireDelay=
500};e.onCreate=function(){this.unitType=1;this.hp=840*(1+0.4*GuankaBase.instance.lifeUp);this.life=840*(1+0.4*GuankaBase.instance.lifeUp);this.damage=66*(1+0.2*GuankaBase.instance.damagekUp);this.posArr=[];this.timesum=this._pathIndex=0;this.lifeBar.reSet();this.moveToTarget=this.atjijie=this.canClear=!1;this.fsm.changeState(0);this.curState=0;this.view.touchEnabled=!0;this.view.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.viewSelect,this)};e.init=function(a){this.hp=this.life;this.atjijie=
!0;this._position.x=this.x=a[0][0];this._position.y=this.y=a[0][1];var b=1;for(b;b<a.length;b++)this.jijieDian=new Vector2D(a[b][0]+this.xoffset,a[b][1]+this.yoffset),this.posArr.push(this.jijieDian);this.fsm.changeState(1)};e.setPoint=function(a){this.dispatchEvent(new SoldEvent(SoldEvent.MOVE,this,a))};e.setPath=function(a){this.atjijie=!0;this.posArr.length=0;this.jijieDian=new Vector2D(a[0]+this.xoffset,a[1]+this.yoffset);this.posArr.push(this.jijieDian);this.fsm.changeState(1);null!=this.target&&
(null!=this.target.target&&(this.target.target=null),this.target=null)};e.onEnterFrame=function(a){c.prototype.onEnterFrame.call(this,a)};e.viewSelect=function(a){Group.selectItem(this)};e.onDestroy=function(){c.prototype.onDestroy.call(this);this.view.touchEnabled=!1;this.view.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.viewSelect,this)};return f}(ShieldSoldierBase);ShieldSoldier11.prototype.__class__="ShieldSoldier11";
var ShieldSoldier12=function(c){function f(){c.call(this);this.addTexture()}__extends(f,c);var e=f.prototype;e.addTexture=function(){this.anchorX=0.5;this.view=new egret.MovieClip;this.addChild(this.view);var a=RES.getRes("h1002_json"),b=RES.getRes("h1002_png"),a=new egret.MovieClipDataFactory(a,b);this.view.movieClipData=a.generateMovieClipData("h1002");this.view.x=this.view.width/2;this.lifeBar.x=(this.view.width-this.lifeBar.width)/2;this.lifeBar.y=-50;this._maxSpeed=0.7;this.offy=10;this.fireDelay=
1E3};e.onCreate=function(){this.suckBlood=0.5;this.unitType=this.specialType=1;this.hp=640*(1+0.2*GuankaBase.instance.lifeUp);this.life=640*(1+0.2*GuankaBase.instance.lifeUp);this.damage=70*(1+0.2*GuankaBase.instance.damagekUp);this.posArr=[];this.timesum=this._pathIndex=0;this.lifeBar.reSet();this.moveToTarget=this.atjijie=this.canClear=!1;this.fsm.changeState(0);this.curState=0;this.view.touchEnabled=!0;this.view.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.viewSelect,this)};e.init=function(a){this.hp=
this.life;this.atjijie=!0;this._position.x=this.x=a[0][0];this._position.y=this.y=a[0][1];var b=1;for(b;b<a.length;b++)this.jijieDian=new Vector2D(a[b][0]+this.xoffset,a[b][1]+this.yoffset),this.posArr.push(this.jijieDian);this.fsm.changeState(1)};e.setPoint=function(a){this.dispatchEvent(new SoldEvent(SoldEvent.MOVE,this,a))};e.setPath=function(a){this.atjijie=!0;this.posArr.length=0;this.jijieDian=new Vector2D(a[0]+this.xoffset,a[1]+this.yoffset);this.posArr.push(this.jijieDian);this.fsm.changeState(1);
null!=this.target&&(null!=this.target.target&&(this.target.target=null),this.target=null)};e.onEnterFrame=function(a){c.prototype.onEnterFrame.call(this,a)};e.viewSelect=function(a){Group.selectItem(this)};e.onDestroy=function(){c.prototype.onDestroy.call(this);this.view.touchEnabled=!1;this.view.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.viewSelect,this)};return f}(ShieldSoldierBase);ShieldSoldier12.prototype.__class__="ShieldSoldier12";
var Utils=function(){function c(){}c.createBitmapByName=function(c){var e=new egret.Bitmap;c=RES.getRes(c);e.texture=c;return e};c.containsXY=function(c,e,a,b,d,m){void 0===m&&(m=0.5);c-=a;e=(e-b)/m;return Math.sqrt(c*c+e*e)<d?!0:!1};c.containsXY2=function(c,e){return 40<c&&c<GameSetting.swid-80&&40<e&&e<GameSetting.shei-80?!0:!1};c.drawEllipse=function(c,e,a,b){b=new egret.Shape;b.graphics.lineStyle(1,a);b.graphics.drawEllipse(0,0,c,e);b.graphics.endFill();return b};c.sortarr=function(c){for(var e,
a=0;a<c.length;a++)for(var b=c.length-1;b>a;b--)c[b].y<c[b-1].y&&(e=c[b],c[b]=c[b-1],c[b-1]=e);return c};return c}();Utils.prototype.__class__="Utils";
var Arrow01=function(c){function f(){c.call(this);this.view=new egret.MovieClip;this.addChild(this.view);this.anchorY=0.5;var a=RES.getRes("Arrow01json"),b=RES.getRes("Arrow01png"),a=new egret.MovieClipDataFactory(a,b);this.view.movieClipData=a.generateMovieClipData("Arrow01");this.damage=1}__extends(f,c);var e=f.prototype;e.onCreate=function(){this.isMiss=this.follow=this.isHit=this.canClear=!1;this.target=null;this.view.gotoAndStop(1);this.ySpeed=this.xSpeed=this.t0=0;this.pos=null};e.init=function(a,
b,c){this.x=a.x;this.y=a.y;this.p1=a;this.target=b;this.offy=c;this.setTarget(this.target.x,this.target.y-this.offy);this.follow=!0};e.onEnterFrame=function(a){c.prototype.onEnterFrame.call(this,a)};return f}(ArrowBase);Arrow01.prototype.__class__="Arrow01";
var AttackArcher01=function(c){function f(){c.call(this);this.view=new egret.MovieClip;this.addChild(this.view)}__extends(f,c);var e=f.prototype;e.addTexture=function(a){this.anchorX=0.5;var b=RES.getRes(a+"_json"),c=RES.getRes(a+"_png"),b=new egret.MovieClipDataFactory(b,c);this.view.movieClipData=b.generateMovieClipData(a);this.view.x=this.view.width/2;this.lifeBar.x=(this.view.width-this.lifeBar.width)/2;this.lifeBar.y=-50;this._maxSpeed=0.3;this.offy=10;this.fireDelay=700};e.onCreate=function(){this.posArr=
[];this.timesum=this._pathIndex=0;this.lifeBar.reSet();this.moveToTarget=this.atjijie=this.canClear=!1;this.fsm.changeState(0);this.curState=0};e.init=function(a,b,c){this.hp=this.life=b*(1+0.2*GuankaBase.instance.lifeUp);this.damage=c*(1+0.2*GuankaBase.instance.damagekUp);this.atjijie=!0;this._position.x=this.x=a[0][0];this._position.y=this.y=a[0][1];b=1;for(b;b<a.length;b++)this.jijieDian=new Vector2D(a[b][0]+this.xoffset,a[b][1]+this.yoffset),this.posArr.push(this.jijieDian);this.fsm.changeState(1)};
e.playFireVoice=function(){0.5<Math.random()?SoundManager.playEffect("arrow_fire1"):SoundManager.playEffect("arrow_fire2")};e.setPoint=function(a){this.dispatchEvent(new SoldEvent(SoldEvent.MOVE,this,a))};e.setPath=function(a){this.atjijie=!0;this.posArr.length=0;this.jijieDian=new Vector2D(a[0]+this.xoffset,a[1]+this.yoffset);this.posArr.push(this.jijieDian);this.fsm.changeState(1);null!=this.target&&(null!=this.target.target&&(this.target.target=null),this.target=null)};e.onEnterFrame=function(a){c.prototype.onEnterFrame.call(this,
a);0==this.atargets.length?this.timesum=this.fireDelay:(this.timesum+=a,this.timesum<this.fireDelay||(this.timesum=0,this.playFireVoice(),this.weapon=ObjectPool.getInstance().createObject(Arrow01),this.weapon.damage=1==this.target.unitType&&2==this.unitType?0.7*this.damage:this.damage,a=new egret.Point(this.x,this.y-50),this.weapon.init(a,this.target,this.target.offy),GuankaBase.instance.weaponLayer.addChild(this.weapon),this.weapon.damage>=this.target.hp&&(a=this.targets.indexOf(this.target),-1!=
a&&this.targets.splice(a,1),a=this.atargets.indexOf(this.target),-1!=a&&this.atargets.splice(a,1),this.target=null)))};e.viewSelect=function(a){Group.selectItem(this)};e.onDestroy=function(){c.prototype.onDestroy.call(this);this.view.touchEnabled=!1;this.view.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.viewSelect,this)};return f}(AttackArcherBase);AttackArcher01.prototype.__class__="AttackArcher01";
var AttackArcher11=function(c){function f(){c.call(this);this.addTexture()}__extends(f,c);var e=f.prototype;e.addTexture=function(){this.anchorX=0.5;this.view=new egret.MovieClip;this.addChild(this.view);var a=RES.getRes("human2-3_json"),b=RES.getRes("human2-3_png"),a=new egret.MovieClipDataFactory(a,b);this.view.movieClipData=a.generateMovieClipData("human2-3");this.view.x=this.view.width/2;this.lifeBar.x=(this.view.width-this.lifeBar.width)/2;this.lifeBar.y=-50;this._maxSpeed=0.7;this.offy=10;this.fireDelay=
1E3};e.onCreate=function(){this.unitType=2;this.hp=80*(1+0.2*GuankaBase.instance.lifeUp);this.life=80*(1+0.2*GuankaBase.instance.lifeUp);this.damage=100*(1+0.2*GuankaBase.instance.damagekUp);this.posArr=[];this.timesum=this._pathIndex=0;this.lifeBar.reSet();this.moveToTarget=this.atjijie=this.canClear=!1;this.fsm.changeState(0);this.curState=0;this.view.touchEnabled=!0;this.view.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.viewSelect,this)};e.init=function(a){this.atjijie=!0;this._position.x=
this.x=a[0][0];this._position.y=this.y=a[0][1];var b=1;for(b;b<a.length;b++)this.jijieDian=new Vector2D(a[b][0]+this.xoffset,a[b][1]+this.yoffset),this.posArr.push(this.jijieDian);this.fsm.changeState(1)};e.playFireVoice=function(){0.5<Math.random()?SoundManager.playEffect("arrow_fire1"):SoundManager.playEffect("arrow_fire2")};e.setPoint=function(a){this.dispatchEvent(new SoldEvent(SoldEvent.MOVE,this,a))};e.setPath=function(a){this.atjijie=!0;this.posArr.length=0;this.jijieDian=new Vector2D(a[0]+
this.xoffset,a[1]+this.yoffset);this.posArr.push(this.jijieDian);this.fsm.changeState(1);null!=this.target&&(null!=this.target.target&&(this.target.target=null),this.target=null)};e.onEnterFrame=function(a){c.prototype.onEnterFrame.call(this,a);0==this.atargets.length?this.timesum=this.fireDelay:(this.timesum+=a,this.timesum<this.fireDelay||(this.timesum=0,this.playFireVoice(),this.weapon=ObjectPool.getInstance().createObject(Arrow01),this.weapon.damage=1==this.target.unitType&&2==this.unitType?0.7*
this.damage:this.damage,a=new egret.Point(this.x,this.y-50),this.weapon.init(a,this.target,this.target.offy),GuankaBase.instance.weaponLayer.addChild(this.weapon),this.weapon.damage>=this.target.hp&&(a=this.targets.indexOf(this.target),-1!=a&&this.targets.splice(a,1),a=this.atargets.indexOf(this.target),-1!=a&&this.atargets.splice(a,1),this.target=null)))};e.viewSelect=function(a){Group.selectItem(this)};e.onDestroy=function(){c.prototype.onDestroy.call(this);this.view.touchEnabled=!1;this.view.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,
this.viewSelect,this)};return f}(AttackArcherBase);AttackArcher11.prototype.__class__="AttackArcher11";
var AttackSoldier01=function(c){function f(){c.call(this);this.addTexture()}__extends(f,c);var e=f.prototype;e.addTexture=function(){this.anchorX=0.5;this.view=new egret.MovieClip;this.addChild(this.view);var a=RES.getRes("h2001_json"),b=RES.getRes("h2001_png"),a=new egret.MovieClipDataFactory(a,b);this.view.movieClipData=a.generateMovieClipData("h2001");this.view.x=this.view.width/2;this.lifeBar.x=(this.view.width-this.lifeBar.width)/2;this.lifeBar.y=-50;this._maxSpeed=0.3;this.offy=10;this.fireDelay=
800};e.onCreate=function(){this.unitType=2;this.hp=150*(1+0.2*GuankaBase.instance.lifeUp);this.life=150*(1+0.2*GuankaBase.instance.lifeUp);this.damage=72*(1+0.2*GuankaBase.instance.damagekUp);this.posArr=[];this.timesum=this._pathIndex=0;this.lifeBar.reSet();this.moveToTarget=this.atjijie=this.canClear=!1;this.fsm.changeState(0);this.curState=0;this.view.touchEnabled=!0;this.view.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.viewSelect,this)};e.init=function(a){this.atjijie=!0;this._position.x=
this.x=a[0][0];this._position.y=this.y=a[0][1];var b=1;for(b;b<a.length;b++)this.jijieDian=new Vector2D(a[b][0]+this.xoffset,a[b][1]+this.yoffset),this.posArr.push(this.jijieDian);this.fsm.changeState(1)};e.setPoint=function(a){this.dispatchEvent(new SoldEvent(SoldEvent.MOVE,this,a))};e.setPath=function(a){this.atjijie=!0;this.posArr.length=0;this.jijieDian=new Vector2D(a[0]+this.xoffset,a[1]+this.yoffset);this.posArr.push(this.jijieDian);this.fsm.changeState(1);null!=this.target&&(null!=this.target.target&&
(this.target.target=null),this.target=null)};e.onEnterFrame=function(a){c.prototype.onEnterFrame.call(this,a)};e.viewSelect=function(a){Group.selectItem(this)};e.onDestroy=function(){c.prototype.onDestroy.call(this);this.view.touchEnabled=!1;this.view.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.viewSelect,this)};return f}(ShieldSoldierBase);AttackSoldier01.prototype.__class__="AttackSoldier01";
var AttackSoldier02=function(c){function f(){c.call(this);this.addTexture()}__extends(f,c);var e=f.prototype;e.addTexture=function(){this.anchorX=0.5;this.view=new egret.MovieClip;this.addChild(this.view);var a=RES.getRes("human2-2_json"),b=RES.getRes("human2-2_png"),a=new egret.MovieClipDataFactory(a,b);this.view.movieClipData=a.generateMovieClipData("human2-2");this.view.x=this.view.width/2;this.lifeBar.x=(this.view.width-this.lifeBar.width)/2;this.lifeBar.y=-50;this._maxSpeed=0.7;this.offy=10;
this.fireDelay=1E3};e.onCreate=function(){this.unitType=this.specialType=2;this.hp=100*(1+0.2*GuankaBase.instance.lifeUp);this.life=100*(1+0.2*GuankaBase.instance.lifeUp);this.damage=80*(1+0.2*GuankaBase.instance.damagekUp);this.posArr=[];this.timesum=this._pathIndex=0;this.lifeBar.reSet();this.moveToTarget=this.atjijie=this.canClear=!1;this.fsm.changeState(0);this.curState=0;this.view.touchEnabled=!0;this.view.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.viewSelect,this)};e.init=function(a){this.atjijie=
!0;this._position.x=this.x=a[0][0];this._position.y=this.y=a[0][1];var b=1;for(b;b<a.length;b++)this.jijieDian=new Vector2D(a[b][0]+this.xoffset,a[b][1]+this.yoffset),this.posArr.push(this.jijieDian);this.fsm.changeState(1)};e.setPoint=function(a){this.dispatchEvent(new SoldEvent(SoldEvent.MOVE,this,a))};e.setPath=function(a){this.atjijie=!0;this.posArr.length=0;this.jijieDian=new Vector2D(a[0]+this.xoffset,a[1]+this.yoffset);this.posArr.push(this.jijieDian);this.fsm.changeState(1);null!=this.target&&
(null!=this.target.target&&(this.target.target=null),this.target=null)};e.onEnterFrame=function(a){c.prototype.onEnterFrame.call(this,a)};e.viewSelect=function(a){Group.selectItem(this)};e.onDestroy=function(){c.prototype.onDestroy.call(this);this.view.touchEnabled=!1;this.view.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.viewSelect,this)};return f}(ShieldSoldierBase);AttackSoldier02.prototype.__class__="AttackSoldier02";
var AttackSoldier11=function(c){function f(){c.call(this);this.addTexture()}__extends(f,c);var e=f.prototype;e.addTexture=function(){this.anchorX=0.5;this.view=new egret.MovieClip;this.addChild(this.view);var a=RES.getRes("h2001_json"),b=RES.getRes("h2001_png"),a=new egret.MovieClipDataFactory(a,b);this.view.movieClipData=a.generateMovieClipData("h2001");this.view.x=this.view.width/2;this.lifeBar.x=(this.view.width-this.lifeBar.width)/2;this.lifeBar.y=-50;this._maxSpeed=0.7;this.offy=10;this.fireDelay=
800};e.onCreate=function(){this.specialType=4;this.unitType=2;this.hp=450*(1+0.2*GuankaBase.instance.lifeUp);this.life=450*(1+0.2*GuankaBase.instance.lifeUp);this.damage=144*(1+0.2*GuankaBase.instance.damagekUp);this.posArr=[];this.timesum=this._pathIndex=0;this.lifeBar.reSet();this.moveToTarget=this.atjijie=this.canClear=!1;this.fsm.changeState(0);this.curState=0;this.view.touchEnabled=!0;this.view.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.viewSelect,this)};e.init=function(a){this.atjijie=
!0;this._position.x=this.x=a[0][0];this._position.y=this.y=a[0][1];var b=1;for(b;b<a.length;b++)this.jijieDian=new Vector2D(a[b][0]+this.xoffset,a[b][1]+this.yoffset),this.posArr.push(this.jijieDian);this.fsm.changeState(1)};e.setPoint=function(a){this.dispatchEvent(new SoldEvent(SoldEvent.MOVE,this,a))};e.setPath=function(a){this.atjijie=!0;this.posArr.length=0;this.jijieDian=new Vector2D(a[0]+this.xoffset,a[1]+this.yoffset);this.posArr.push(this.jijieDian);this.fsm.changeState(1);null!=this.target&&
(null!=this.target.target&&(this.target.target=null),this.target=null)};e.onEnterFrame=function(a){c.prototype.onEnterFrame.call(this,a)};e.viewSelect=function(a){Group.selectItem(this)};e.onDestroy=function(){c.prototype.onDestroy.call(this);this.view.touchEnabled=!1;this.view.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.viewSelect,this)};return f}(ShieldSoldierBase);AttackSoldier11.prototype.__class__="AttackSoldier11";
var AttackSoldier12=function(c){function f(){c.call(this);this.addTexture()}__extends(f,c);var e=f.prototype;e.addTexture=function(){this.anchorX=0.5;this.view=new egret.MovieClip;this.addChild(this.view);var a=RES.getRes("human2-2_json"),b=RES.getRes("human2-2_png"),a=new egret.MovieClipDataFactory(a,b);this.view.movieClipData=a.generateMovieClipData("human2-2");this.view.x=this.view.width/2;this.lifeBar.x=(this.view.width-this.lifeBar.width)/2;this.lifeBar.y=-50;this._maxSpeed=0.7;this.offy=10;
this.fireDelay=1E3};e.onCreate=function(){this.specialType=5;this.unitType=2;this.hp=420*(1+0.2*GuankaBase.instance.lifeUp);this.life=420*(1+0.2*GuankaBase.instance.lifeUp);this.damage=93*(1+0.2*GuankaBase.instance.damagekUp);this.posArr=[];this.timesum=this._pathIndex=0;this.lifeBar.reSet();this.moveToTarget=this.atjijie=this.canClear=!1;this.fsm.changeState(0);this.curState=0;this.view.touchEnabled=!0;this.view.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.viewSelect,this)};e.init=function(a){this.atjijie=
!0;this._position.x=this.x=a[0][0];this._position.y=this.y=a[0][1];var b=1;for(b;b<a.length;b++)this.jijieDian=new Vector2D(a[b][0]+this.xoffset,a[b][1]+this.yoffset),this.posArr.push(this.jijieDian);this.fsm.changeState(1)};e.setPoint=function(a){this.dispatchEvent(new SoldEvent(SoldEvent.MOVE,this,a))};e.setPath=function(a){this.atjijie=!0;this.posArr.length=0;this.jijieDian=new Vector2D(a[0]+this.xoffset,a[1]+this.yoffset);this.posArr.push(this.jijieDian);this.fsm.changeState(1);null!=this.target&&
(null!=this.target.target&&(this.target.target=null),this.target=null)};e.onEnterFrame=function(a){c.prototype.onEnterFrame.call(this,a)};e.viewSelect=function(a){Group.selectItem(this)};e.onDestroy=function(){c.prototype.onDestroy.call(this);this.view.touchEnabled=!1;this.view.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.viewSelect,this)};return f}(ShieldSoldierBase);AttackSoldier12.prototype.__class__="AttackSoldier12";
var MagicMage01=function(c){function f(){c.call(this);this.time=0;this.cd=5E3;this.float=new egret.TextField;this.view=new egret.MovieClip;this.addChild(this.view)}__extends(f,c);var e=f.prototype;e.addTexture=function(a){this.anchorX=0.5;var b=RES.getRes(a+"_json"),c=RES.getRes(a+"_png"),b=new egret.MovieClipDataFactory(b,c);this.view.movieClipData=b.generateMovieClipData(a);this.view.x=this.view.width/2;this.lifeBar.x=(this.view.width-this.lifeBar.width)/2;this.lifeBar.y=-50;this._maxSpeed=0.7;
this.offy=10;this.fireDelay=1500};e.onCreate=function(){this.posArr=[];this.timesum=this._pathIndex=0;this.lifeBar.reSet();this.moveToTarget=this.atjijie=this.canClear=!1;this.fsm.changeState(0);this.curState=0;GuankaBase.instance.addChild(this.float);this.float.anchorX=0.5;this.float.alpha=0;this.float.size=13;this.float.textColor=60416};e.init=function(a,b,c){this.hp=this.life=b*(1+0.2*GuankaBase.instance.lifeUp);this.damage=c*(1+0.2*GuankaBase.instance.damagekUp);this.atjijie=!0;this._position.x=
this.x=a[0][0];this._position.y=this.y=a[0][1];b=1;for(b;b<a.length;b++)this.jijieDian=new Vector2D(a[b][0]+this.xoffset,a[b][1]+this.yoffset),this.posArr.push(this.jijieDian);this.fsm.changeState(1)};e.playFireVoice=function(){0.5<Math.random()?SoundManager.playEffect("arrow_fire1"):SoundManager.playEffect("arrow_fire2")};e.setPoint=function(a){this.dispatchEvent(new SoldEvent(SoldEvent.MOVE,this,a))};e.setPath=function(a){this.atjijie=!0;this.posArr.length=0;this.jijieDian=new Vector2D(a[0]+this.xoffset,
a[1]+this.yoffset);this.posArr.push(this.jijieDian);this.fsm.changeState(1);null!=this.target&&(null!=this.target.target&&(this.target.target=null),this.target=null)};e.onEnterFrame=function(a){c.prototype.onEnterFrame.call(this,a);this.time+=a;if(this.time>this.cd&&0<GuankaBase.instance.friendArr.length){var b;b=GuankaBase.instance.friendArr[0];for(var d=0;d<GuankaBase.instance.friendArr.length;d++)b.hp/b.life>GuankaBase.instance.friendArr[d].hp/GuankaBase.instance.friendArr[d].life&&(b=GuankaBase.instance.friendArr[d]);
b.hp<b.life-30&&(this.time=0,b.hp+=50,this.float.alpha=1,this.float.text="+50",this.float.x=b.x,this.float.y=b.y-50,TweenMax.to(this.float,2,{y:this.float.y-50,alpha:0}))}0==this.atargets.length?this.timesum=this.fireDelay:(this.timesum+=a,this.timesum<this.fireDelay||(this.timesum=0,this.playFireVoice(),this.weapon=ObjectPool.getInstance().createObject(MagicBullet010203),this.weapon.damage=1==this.target.unitType&&2==this.unitType?0.7*this.damage:this.damage,a=new egret.Point(this.x,this.y-50),this.weapon.init(a,
this.target),GuankaBase.instance.weaponLayer.addChild(this.weapon),this.weapon.damage>=this.target.hp&&(a=this.targets.indexOf(this.target),-1!=a&&this.targets.splice(a,1),a=this.atargets.indexOf(this.target),-1!=a&&this.atargets.splice(a,1),this.target=null)))};e.viewSelect=function(a){Group.selectItem(this)};e.onDestroy=function(){c.prototype.onDestroy.call(this);this.view.touchEnabled=!1;this.view.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.viewSelect,this)};return f}(AttackArcherBase);
MagicMage01.prototype.__class__="MagicMage01";
var MagicMage02=function(c){function f(){c.call(this);this.time=0;this.cd=300;this.float=new egret.TextField;this.addTexture()}__extends(f,c);var e=f.prototype;e.addTexture=function(){this.anchorX=0.5;this.view=new egret.MovieClip;this.addChild(this.view);var a=RES.getRes("human3-2_json"),b=RES.getRes("human3-2_png"),a=new egret.MovieClipDataFactory(a,b);this.view.movieClipData=a.generateMovieClipData("human3-2");this.view.x=this.view.width/2;this.lifeBar.x=(this.view.width-this.lifeBar.width)/2;
this.lifeBar.y=-50;this._maxSpeed=0.7;this.offy=10;this.fireDelay=1500};e.onCreate=function(){this.unitType=2;this.hp=60*(1+0.2*GuankaBase.instance.lifeUp);this.life=60*(1+0.2*GuankaBase.instance.lifeUp);this.damage=70*(1+0.2*GuankaBase.instance.damagekUp);this.posArr=[];this.timesum=this._pathIndex=0;this.lifeBar.reSet();this.moveToTarget=this.atjijie=this.canClear=!1;this.fsm.changeState(0);this.curState=0;this.view.touchEnabled=!0;this.view.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.viewSelect,
this);GuankaBase.instance.addChild(this.float);this.float.anchorX=0.5;this.float.alpha=0;this.float.size=13;this.float.textColor=60416};e.init=function(a){this.atjijie=!0;this._position.x=this.x=a[0][0];this._position.y=this.y=a[0][1];var b=1;for(b;b<a.length;b++)this.jijieDian=new Vector2D(a[b][0]+this.xoffset,a[b][1]+this.yoffset),this.posArr.push(this.jijieDian);this.fsm.changeState(1)};e.playFireVoice=function(){0.5<Math.random()?SoundManager.playEffect("arrow_fire1"):SoundManager.playEffect("arrow_fire2")};
e.setPoint=function(a){this.dispatchEvent(new SoldEvent(SoldEvent.MOVE,this,a))};e.setPath=function(a){this.atjijie=!0;this.posArr.length=0;this.jijieDian=new Vector2D(a[0]+this.xoffset,a[1]+this.yoffset);this.posArr.push(this.jijieDian);this.fsm.changeState(1);null!=this.target&&(null!=this.target.target&&(this.target.target=null),this.target=null)};e.onEnterFrame=function(a){c.prototype.onEnterFrame.call(this,a);this.time++;if(this.time>this.cd){if(0<GuankaBase.instance.friendArr.length){var b;
b=GuankaBase.instance.friendArr[0];for(var d=0;d<GuankaBase.instance.friendArr.length;d++)b.hp/b.life>GuankaBase.instance.friendArr[d].hp/GuankaBase.instance.friendArr[d].life&&(b=GuankaBase.instance.friendArr[d]);b.hp<b.life&&(b.hp+=50,this.float.alpha=1,this.float.text="+50",this.float.x=b.x,this.float.y=b.y-50,TweenMax.to(this.float,2,{y:this.float.y-50,alpha:0}))}this.time=0}0==this.atargets.length?this.timesum=this.fireDelay:(this.timesum+=a,this.timesum<this.fireDelay||(this.timesum=0,this.playFireVoice(),
this.weapon=ObjectPool.getInstance().createObject(MagicBullet010203),this.weapon.damage=1==this.target.unitType&&2==this.unitType?0.7*this.damage:1==this.target.unitType&&3==this.unitType?1.3*this.damage:this.damage,a=new egret.Point(this.x,this.y-50),this.weapon.init(a,this.target),GuankaBase.instance.weaponLayer.addChild(this.weapon),this.weapon.damage>=this.target.hp&&(a=this.targets.indexOf(this.target),-1!=a&&this.targets.splice(a,1),a=this.atargets.indexOf(this.target),-1!=a&&this.atargets.splice(a,
1),this.target=null)))};e.viewSelect=function(a){Group.selectItem(this)};e.onDestroy=function(){c.prototype.onDestroy.call(this);this.view.touchEnabled=!1;this.view.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.viewSelect,this)};return f}(AttackArcherBase);MagicMage02.prototype.__class__="MagicMage02";
var ShieldSoldier02=function(c){function f(){c.call(this);this.addTexture()}__extends(f,c);var e=f.prototype;e.addTexture=function(){this.anchorX=0.5;this.view=new egret.MovieClip;this.addChild(this.view);var a=RES.getRes("h1002_json"),b=RES.getRes("h1002_png"),a=new egret.MovieClipDataFactory(a,b);this.view.movieClipData=a.generateMovieClipData("h1002");this.view.x=this.view.width/2;this.lifeBar.x=(this.view.width-this.lifeBar.width)/2;this.lifeBar.y=-50;this._maxSpeed=0.7;this.offy=10;this.fireDelay=
1E3};e.onCreate=function(){this.unitType=this.specialType=1;this.hp=180*(1+0.2*GuankaBase.instance.lifeUp);this.life=180*(1+0.2*GuankaBase.instance.lifeUp);this.damage=55*(1+0.2*GuankaBase.instance.damagekUp);this.posArr=[];this.timesum=this._pathIndex=0;this.lifeBar.reSet();this.moveToTarget=this.atjijie=this.canClear=!1;this.fsm.changeState(0);this.curState=0;this.view.touchEnabled=!0;this.view.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.viewSelect,this)};e.init=function(a){this.hp=this.life;
this.atjijie=!0;this._position.x=this.x=a[0][0];this._position.y=this.y=a[0][1];var b=1;for(b;b<a.length;b++)this.jijieDian=new Vector2D(a[b][0]+this.xoffset,a[b][1]+this.yoffset),this.posArr.push(this.jijieDian);this.fsm.changeState(1)};e.setPoint=function(a){this.dispatchEvent(new SoldEvent(SoldEvent.MOVE,this,a))};e.setPath=function(a){this.atjijie=!0;this.posArr.length=0;this.jijieDian=new Vector2D(a[0]+this.xoffset,a[1]+this.yoffset);this.posArr.push(this.jijieDian);this.fsm.changeState(1);null!=
this.target&&(null!=this.target.target&&(this.target.target=null),this.target=null)};e.onEnterFrame=function(a){c.prototype.onEnterFrame.call(this,a)};e.viewSelect=function(a){Group.selectItem(this)};e.onDestroy=function(){c.prototype.onDestroy.call(this);this.view.touchEnabled=!1;this.view.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.viewSelect,this)};return f}(ShieldSoldierBase);ShieldSoldier02.prototype.__class__="ShieldSoldier02";
var AttackTower01=function(c){function f(){c.call(this);this.soldiers=[];this.otime=0;this.mtime=5E3;this.minRadius=100;this.maxRadius=140;this.ratioY=this.minRadius/this.maxRadius;this.anchorX=0.5;this.anchorY=1;this.bm=Utils.createBitmapByName("AttackTower01");this.addChild(this.bm)}__extends(f,c);var e=f.prototype;e.init=function(){this.createSold()};e.createSold=function(){var a=ObjectPool.getInstance().createObject(ShieldSoldier01);a.addTexture(TowerLevel.soldierData.s02.type);a.specialType=
TowerLevel.soldierData.s02.specialType;a.unitType=TowerLevel.soldierData.s02.unitType;a.life=TowerLevel.soldierData.s02.life;a.damage=TowerLevel.soldierData.s02.damage;a.fireDelay=TowerLevel.soldierData.s02.fireDelay;a._maxSpeed=TowerLevel.soldierData.s02.maxSpeed;this.contentLayer.addChild(a);this.objArr.push(a);this.addIdx();a.xoffset=this.offArr[this.offIdx][0];a.yoffset=this.offArr[this.offIdx][1];a.init(this.baseIdx>GuankaBase.instance.basePoseArr.length/2-1?[[this.sx,this.sy],[this.soldPoint.x,
this.soldPoint.y],[280,this.soldPoint.y],[280,10]]:[[this.sx,this.sy],[this.soldPoint.x,this.soldPoint.y],[210,this.soldPoint.y],[210,10]],a.life,a.damage);GuankaBase.instance.friendArr.push(a)};e.addIdx=function(){this.offIdx++;2<this.offIdx&&(this.offIdx=0)};e.allSelect=function(a){a=0;var b=this.soldiers.length,c;for(a;a<b;a++)c=this.soldiers[a],c.createYQ()};e.allDeSelect=function(a){for(;0<this.areaLayer.numChildren;)this.areaLayer.removeChildAt(0);a=0;var b=this.soldiers.length,c;for(a;a<b;a++)c=
this.soldiers[a],c.clearYQ()};e.allMove=function(a){for(;0<this.areaLayer.numChildren;)this.areaLayer.removeChildAt(0);a=a.arr;if(Utils.containsXY(a[0],a[1],this.sx,this.sy-22,this.maxRadius,this.ratioY)){this.soldPoint=new egret.Point(a[0],a[1]+8);a=0;var b=this.soldiers.length;for(a;a<b;a++)this.soldiers[a].setPath([this.soldPoint.x,this.soldPoint.y])}};e.destory=function(){for(;0<this.areaLayer.numChildren;)this.areaLayer.removeChildAt(0);null!=this.timer&&(this.timer.removeEventListener(egret.TimerEvent.TIMER,
this.createSold,this),this.timer.stop(),this.timer=null);for(var a,b=0;b<this.soldiers.length;b++)a=this.soldiers[b],a.removeEventListener(SoldEvent.SELECT,this.allSelect,this),a.removeEventListener(SoldEvent.DESELECT,this.allDeSelect,this),a.removeEventListener(SoldEvent.MOVE,this.allMove,this),a.canClear=!0;this.soldiers=[];this.atargets=[]};e.onEnterFrame=function(a){var b;this.atargets=[];if(0<this.targets.length)for(b=0;b<this.targets.length;b++){var c=this.targets[b],e=Utils.containsXY(c.x,
c.y,this.sx,this.sy-22,this.maxRadius,this.ratioY),f=this.atargets.indexOf(c);e&&0<c.hp?-1==f&&this.atargets.push(c):-1!=f&&this.atargets.splice(f,1)}this.otime+=a;15E3<this.otime&&(this.createSold(),this.otime=0);for(b=0;b<this.soldiers.length;b++)a=this.soldiers[b],0>=a.hp?(a.removeEventListener(SoldEvent.SELECT,this.allSelect,this),a.removeEventListener(SoldEvent.DESELECT,this.allDeSelect,this),a.removeEventListener(SoldEvent.MOVE,this.allMove,this),this.soldiers.splice(b,1),b--):a.targets=this.atargets};
return f}(ShieldTowerBase);AttackTower01.prototype.__class__="AttackTower01";
var AttackTower02=function(c){function f(){c.call(this);this.soldiers=[];this.otime=0;this.mtime=5E3;this.minRadius=100;this.maxRadius=140;this.ratioY=this.minRadius/this.maxRadius;this.anchorX=0.5;this.anchorY=1;this.bm=Utils.createBitmapByName("ArrowTower02");this.addChild(this.bm)}__extends(f,c);var e=f.prototype;e.init=function(){this.createSold()};e.createSold=function(){var a=ObjectPool.getInstance().createObject(AttackArcher01);a.addTexture(TowerLevel.soldierData.s03.type);a.specialType=TowerLevel.soldierData.s03.specialType;
a.unitType=TowerLevel.soldierData.s03.unitType;a.life=TowerLevel.soldierData.s03.life;a.damage=TowerLevel.soldierData.s03.damage;a.fireDelay=TowerLevel.soldierData.s03.fireDelay;a._maxSpeed=TowerLevel.soldierData.s03.maxSpeed;this.contentLayer.addChild(a);this.objArr.push(a);a.init(this.baseIdx>GuankaBase.instance.basePoseArr.length/2-1?[[this.sx,this.sy],[this.soldPoint.x,this.soldPoint.y],[280,this.soldPoint.y],[280,10]]:[[this.sx,this.sy],[this.soldPoint.x,this.soldPoint.y],[210,this.soldPoint.y],
[210,10]],a.life,a.damage);GuankaBase.instance.friendArr.push(a)};e.addIdx=function(){this.offIdx++;2<this.offIdx&&(this.offIdx=0)};e.allSelect=function(a){a=0;var b=this.soldiers.length,c;for(a;a<b;a++)c=this.soldiers[a],c.createYQ()};e.allDeSelect=function(a){for(;0<this.areaLayer.numChildren;)this.areaLayer.removeChildAt(0);a=0;var b=this.soldiers.length,c;for(a;a<b;a++)c=this.soldiers[a],c.clearYQ()};e.allMove=function(a){for(;0<this.areaLayer.numChildren;)this.areaLayer.removeChildAt(0);a=a.arr;
if(Utils.containsXY(a[0],a[1],this.sx,this.sy-22,this.maxRadius,this.ratioY)){this.soldPoint=new egret.Point(a[0],a[1]+8);a=0;var b=this.soldiers.length;for(a;a<b;a++)this.soldiers[a].setPath([this.soldPoint.x,this.soldPoint.y])}};e.destory=function(){for(;0<this.areaLayer.numChildren;)this.areaLayer.removeChildAt(0);null!=this.timer&&(this.timer.removeEventListener(egret.TimerEvent.TIMER,this.createSold,this),this.timer.stop(),this.timer=null);for(var a,b=0;b<this.soldiers.length;b++)a=this.soldiers[b],
a.removeEventListener(SoldEvent.SELECT,this.allSelect,this),a.removeEventListener(SoldEvent.DESELECT,this.allDeSelect,this),a.removeEventListener(SoldEvent.MOVE,this.allMove,this),a.canClear=!0;this.soldiers=[];this.atargets=[]};e.onEnterFrame=function(a){var b;this.atargets=[];if(0<this.targets.length)for(b=0;b<this.targets.length;b++){var c=this.targets[b],e=Utils.containsXY(c.x,c.y,this.sx,this.sy-22,this.maxRadius,this.ratioY),f=this.atargets.indexOf(c);e&&0<c.hp?-1==f&&this.atargets.push(c):
-1!=f&&this.atargets.splice(f,1)}this.otime+=a;15E3<this.otime&&(this.createSold(),this.otime=0);for(b=0;b<this.soldiers.length;b++)a=this.soldiers[b],0>=a.hp?(a.removeEventListener(SoldEvent.SELECT,this.allSelect,this),a.removeEventListener(SoldEvent.DESELECT,this.allDeSelect,this),a.removeEventListener(SoldEvent.MOVE,this.allMove,this),this.soldiers.splice(b,1),b--):a.targets=this.atargets};return f}(ShieldTowerBase);AttackTower02.prototype.__class__="AttackTower02";
var GoldOre01=function(c){function f(){c.call(this);this.soldiers=[];this.goldTime=0;this.float=new egret.TextField;this.level=1;this.minRadius=100;this.maxRadius=140;this.ratioY=this.minRadius/this.maxRadius;this.anchorX=0.5;this.anchorY=1;this.bm=Utils.createBitmapByName("GoldOre01");this.addChild(this.bm);GuankaBase.instance.addChild(this.float);this.float.anchorX=0.5;this.float.alpha=0;this.float.size=13;this.float.textColor=16776960;this.float.strokeColor=16777215;this.float.stroke=0.5}__extends(f,
c);var e=f.prototype;e.addIdx=function(){this.offIdx++;2<this.offIdx&&(this.offIdx=0)};e.allSelect=function(a){a=0;var b=this.soldiers.length,c;for(a;a<b;a++)c=this.soldiers[a],c.createYQ()};e.allDeSelect=function(a){for(;0<this.areaLayer.numChildren;)this.areaLayer.removeChildAt(0);a=0;var b=this.soldiers.length,c;for(a;a<b;a++)c=this.soldiers[a],c.clearYQ()};e.allMove=function(a){for(;0<this.areaLayer.numChildren;)this.areaLayer.removeChildAt(0);a=a.arr;if(Utils.containsXY(a[0],a[1],this.sx,this.sy-
22,this.maxRadius,this.ratioY)){this.soldPoint=new egret.Point(a[0],a[1]+8);a=0;var b=this.soldiers.length;for(a;a<b;a++)this.soldiers[a].setPath([this.soldPoint.x,this.soldPoint.y])}};e.destory=function(){for(;0<this.areaLayer.numChildren;)this.areaLayer.removeChildAt(0);for(var a,b=0;b<this.soldiers.length;b++)a=this.soldiers[b],a.removeEventListener(SoldEvent.SELECT,this.allSelect,this),a.removeEventListener(SoldEvent.DESELECT,this.allDeSelect,this),a.removeEventListener(SoldEvent.MOVE,this.allMove,
this),a.canClear=!0;this.soldiers=[];this.atargets=[]};e.onEnterFrame=function(a){this.goldTime++;300==this.goldTime&&(GuankaBase.instance.gold+=3*this.level,GuankaBase.instance.guankaUI.setGold(GuankaBase.instance.gold),this.goldTime=0,a=this.float,a.alpha=1,a.text="+"+(3*this.level).toString(),a.x=this.x,a.y=this.y-50,TweenMax.to(a,2,{y:a.y-50,alpha:0}))};return f}(ShieldTowerBase);GoldOre01.prototype.__class__="GoldOre01";
var MagicTower01=function(c){function f(){c.call(this);this.soldiers=[];this.otime=0;this.mtime=5E3;this.minRadius=100;this.maxRadius=140;this.ratioY=this.minRadius/this.maxRadius;this.anchorX=0.5;this.anchorY=1;this.bm=Utils.createBitmapByName("MagicTower01");this.addChild(this.bm)}__extends(f,c);var e=f.prototype;e.init=function(){this.createSold()};e.createSold=function(){var a=ObjectPool.getInstance().createObject(MagicMage01);a.addTexture(TowerLevel.soldierData.s04.type);a.specialType=TowerLevel.soldierData.s04.specialType;
a.unitType=TowerLevel.soldierData.s04.unitType;a.life=TowerLevel.soldierData.s04.life;a.damage=TowerLevel.soldierData.s04.damage;a.fireDelay=TowerLevel.soldierData.s04.fireDelay;a._maxSpeed=TowerLevel.soldierData.s04.maxSpeed;this.contentLayer.addChild(a);this.objArr.push(a);this.addIdx();a.xoffset=this.offArr[this.offIdx][0];a.yoffset=this.offArr[this.offIdx][1];a.init(this.baseIdx>GuankaBase.instance.basePoseArr.length/2-1?[[this.sx,this.sy],[this.soldPoint.x,this.soldPoint.y],[280,this.soldPoint.y],
[280,10]]:[[this.sx,this.sy],[this.soldPoint.x,this.soldPoint.y],[210,this.soldPoint.y],[210,10]],a.life,a.damage);GuankaBase.instance.friendArr.push(a)};e.addIdx=function(){this.offIdx++;2<this.offIdx&&(this.offIdx=0)};e.allSelect=function(a){a=0;var b=this.soldiers.length,c;for(a;a<b;a++)c=this.soldiers[a],c.createYQ()};e.allDeSelect=function(a){for(;0<this.areaLayer.numChildren;)this.areaLayer.removeChildAt(0);a=0;var b=this.soldiers.length,c;for(a;a<b;a++)c=this.soldiers[a],c.clearYQ()};e.allMove=
function(a){for(;0<this.areaLayer.numChildren;)this.areaLayer.removeChildAt(0);a=a.arr;if(Utils.containsXY(a[0],a[1],this.sx,this.sy-22,this.maxRadius,this.ratioY)){this.soldPoint=new egret.Point(a[0],a[1]+8);a=0;var b=this.soldiers.length;for(a;a<b;a++)this.soldiers[a].setPath([this.soldPoint.x,this.soldPoint.y])}};e.destory=function(){for(;0<this.areaLayer.numChildren;)this.areaLayer.removeChildAt(0);null!=this.timer&&(this.timer.removeEventListener(egret.TimerEvent.TIMER,this.createSold,this),
this.timer.stop(),this.timer=null);for(var a,b=0;b<this.soldiers.length;b++)a=this.soldiers[b],a.removeEventListener(SoldEvent.SELECT,this.allSelect,this),a.removeEventListener(SoldEvent.DESELECT,this.allDeSelect,this),a.removeEventListener(SoldEvent.MOVE,this.allMove,this),a.canClear=!0;this.soldiers=[];this.atargets=[]};e.onEnterFrame=function(a){var b;this.atargets=[];if(0<this.targets.length)for(b=0;b<this.targets.length;b++){var c=this.targets[b],e=Utils.containsXY(c.x,c.y,this.sx,this.sy-22,
this.maxRadius,this.ratioY),f=this.atargets.indexOf(c);e&&0<c.hp?-1==f&&this.atargets.push(c):-1!=f&&this.atargets.splice(f,1)}this.otime+=a;15E3<this.otime&&(this.createSold(),this.otime=0);for(b=0;b<this.soldiers.length;b++)a=this.soldiers[b],0>=a.hp?(a.removeEventListener(SoldEvent.SELECT,this.allSelect,this),a.removeEventListener(SoldEvent.DESELECT,this.allDeSelect,this),a.removeEventListener(SoldEvent.MOVE,this.allMove,this),this.soldiers.splice(b,1),b--):a.targets=this.atargets};return f}(ShieldTowerBase);
MagicTower01.prototype.__class__="MagicTower01";
var MagicTower02=function(c){function f(){c.call(this);this.soldiers=[];this.otime=0;this.mtime=5E3;this.minRadius=100;this.maxRadius=140;this.ratioY=this.minRadius/this.maxRadius;this.anchorX=0.5;this.anchorY=1;this.bm=Utils.createBitmapByName("MagicTower02");this.addChild(this.bm)}__extends(f,c);var e=f.prototype;e.createSold=function(a){1==this.buildID?this.sold=ObjectPool.getInstance().createObject(MagicMage11):2==this.buildID&&(this.sold=ObjectPool.getInstance().createObject(MagicMage12));this.contentLayer.addChild(this.sold);
this.objArr.push(this.sold);this.addIdx();this.sold.xoffset=this.offArr[this.offIdx][0];this.sold.yoffset=this.offArr[this.offIdx][1];this.sold.init(3<this.baseIdx?[[this.sx,this.sy],[this.soldPoint.x,this.soldPoint.y],[280,this.soldPoint.y],[280,10]]:[[this.sx,this.sy],[this.soldPoint.x,this.soldPoint.y],[210,this.soldPoint.y],[210,10]]);GuankaBase.instance.friendArr.push(this.sold);this.sold.addEventListener(SoldEvent.SELECT,this.allSelect,this);this.sold.addEventListener(SoldEvent.DESELECT,this.allDeSelect,
this);this.sold.addEventListener(SoldEvent.MOVE,this.allMove,this)};e.addIdx=function(){this.offIdx++;2<this.offIdx&&(this.offIdx=0)};e.allSelect=function(a){a=0;var b=this.soldiers.length,c;for(a;a<b;a++)c=this.soldiers[a],c.createYQ()};e.allDeSelect=function(a){for(;0<this.areaLayer.numChildren;)this.areaLayer.removeChildAt(0);a=0;var b=this.soldiers.length,c;for(a;a<b;a++)c=this.soldiers[a],c.clearYQ()};e.allMove=function(a){for(;0<this.areaLayer.numChildren;)this.areaLayer.removeChildAt(0);a=
a.arr;if(Utils.containsXY(a[0],a[1],this.sx,this.sy-22,this.maxRadius,this.ratioY)){this.soldPoint=new egret.Point(a[0],a[1]+8);a=0;var b=this.soldiers.length;for(a;a<b;a++)this.soldiers[a].setPath([this.soldPoint.x,this.soldPoint.y])}};e.destory=function(){for(;0<this.areaLayer.numChildren;)this.areaLayer.removeChildAt(0);null!=this.timer&&(this.timer.removeEventListener(egret.TimerEvent.TIMER,this.createSold,this),this.timer.stop(),this.timer=null);for(var a,b=0;b<this.soldiers.length;b++)a=this.soldiers[b],
a.removeEventListener(SoldEvent.SELECT,this.allSelect,this),a.removeEventListener(SoldEvent.DESELECT,this.allDeSelect,this),a.removeEventListener(SoldEvent.MOVE,this.allMove,this),a.canClear=!0;this.soldiers=[];this.atargets=[]};e.onEnterFrame=function(a){this.atargets=[];if(0<this.targets.length)for(a=0;a<this.targets.length;a++){var b=this.targets[a],c=Utils.containsXY(b.x,b.y,this.sx,this.sy-22,this.maxRadius,this.ratioY),e=this.atargets.indexOf(b);c&&0<b.hp?-1==e&&this.atargets.push(b):-1!=e&&
this.atargets.splice(e,1)}0==Math.floor(GuankaBase.instance.timeGo/60)%30&&this.otime<Math.floor(GuankaBase.instance.timeGo/60)&&(this.createSold(null),this.otime=Math.floor(GuankaBase.instance.timeGo/60));for(a=0;a<this.soldiers.length;a++)b=this.soldiers[a],0>=b.hp?(b.removeEventListener(SoldEvent.SELECT,this.allSelect,this),b.removeEventListener(SoldEvent.DESELECT,this.allDeSelect,this),b.removeEventListener(SoldEvent.MOVE,this.allMove,this),this.soldiers.splice(a,1),a--):b.targets=this.atargets};
return f}(ShieldTowerBase);MagicTower02.prototype.__class__="MagicTower02";
var MagicTower03_1=function(c){function f(){c.call(this);this.minRadius=100;this.maxRadius=140;this.ratioY=this.minRadius/this.maxRadius;this.anchorX=0.5;this.anchorY=1;this.bm=Utils.createBitmapByName("MagicTower03_1");this.addChild(this.bm);this.st=new MagicWizard010203;this.st.x=43;this.st.y=2;this.addChild(this.st);this.fireDelay=1E3}__extends(f,c);f.prototype.onEnterFrame=function(e){c.prototype.onEnterFrame.call(this,e);this.st.onEnterFrame(e);0==this.atargets.length?this.timesum=this.fireDelay-
299:(this.target=this.atargets[0],this.target.y<=this.sy-22&&(this.direct="up"),this.target.y>this.sy-22&&(this.direct="down"),this.timesum+=e,this.timesum<this.fireDelay?300>this.fireDelay-this.timesum&&!this.isfire&&(this.st.fire(this.direct),this.isfire=!0):(this.timesum=0,this.isfire=!1,this.playFireVoice(),e="down"==this.direct?new egret.Point(this.sx-9,this.sy-58):new egret.Point(this.sx+5,this.sy-58),this.weapon=ObjectPool.getInstance().createObject(MagicBullet010203),this.weapon.damage=21,
this.contentLayer.addChild(this.weapon),this.weapon.init(e,this.target)))};return f}(MagicTowerBase);MagicTower03_1.prototype.__class__="MagicTower03_1";
var MagicTower03_2=function(c){function f(){c.call(this);this.minRadius=100;this.maxRadius=140;this.ratioY=this.minRadius/this.maxRadius;this.anchorX=0.5;this.anchorY=1;this.bm=Utils.createBitmapByName("MagicTower03_2");this.addChild(this.bm);this.st=new MagicWizard010203;this.st.x=48;this.st.y=0;this.addChild(this.st);this.fireDelay=1E3}__extends(f,c);f.prototype.onEnterFrame=function(e){c.prototype.onEnterFrame.call(this,e);this.st.onEnterFrame(e);0==this.atargets.length?this.timesum=this.fireDelay-
299:(this.target=this.atargets[0],this.target.y<=this.sy-22&&(this.direct="up"),this.target.y>this.sy-22&&(this.direct="down"),this.timesum+=e,this.timesum<this.fireDelay?300>this.fireDelay-this.timesum&&!this.isfire&&(this.st.fire(this.direct),this.isfire=!0):(this.timesum=0,this.isfire=!1,this.playFireVoice(),e="down"==this.direct?new egret.Point(this.sx-9,this.sy-58):new egret.Point(this.sx+5,this.sy-58),this.weapon=ObjectPool.getInstance().createObject(MagicBullet010203),this.weapon.damage=28,
this.contentLayer.addChild(this.weapon),this.weapon.init(e,this.target)))};return f}(MagicTowerBase);MagicTower03_2.prototype.__class__="MagicTower03_2";
var ShieldTower01=function(c){function f(){c.call(this);this.soldiers=[];this.otime=0;this.mtime=5E3;this.minRadius=100;this.maxRadius=140;this.ratioY=this.minRadius/this.maxRadius;this.anchorX=0.5;this.anchorY=1;this.bm=Utils.createBitmapByName("ShieldTowerBlue01");this.addChild(this.bm)}__extends(f,c);var e=f.prototype;e.init=function(){this.createSold()};e.createSold=function(){var a=ObjectPool.getInstance().createObject(ShieldSoldier01);a.addTexture(TowerLevel.soldierData.s01.type);a.specialType=
TowerLevel.soldierData.s01.specialType;a.unitType=TowerLevel.soldierData.s01.unitType;a.life=TowerLevel.soldierData.s01.life;a.damage=TowerLevel.soldierData.s01.damage;a.fireDelay=TowerLevel.soldierData.s01.fireDelay;a._maxSpeed=TowerLevel.soldierData.s01.maxSpeed;this.contentLayer.addChild(a);this.objArr.push(a);this.addIdx();a.xoffset=this.offArr[this.offIdx][0];a.yoffset=this.offArr[this.offIdx][1];a.init(this.baseIdx>GuankaBase.instance.basePoseArr.length/2-1?[[this.sx,this.sy],[this.soldPoint.x,
this.soldPoint.y],[280,this.soldPoint.y],[280,10]]:[[this.sx,this.sy],[this.soldPoint.x,this.soldPoint.y],[210,this.soldPoint.y],[210,10]],a.life,a.damage);GuankaBase.instance.friendArr.push(a)};e.addIdx=function(){this.offIdx++;2<this.offIdx&&(this.offIdx=0)};e.allSelect=function(a){a=0;var b=this.soldiers.length,c;for(a;a<b;a++)c=this.soldiers[a],c.createYQ()};e.allDeSelect=function(a){for(;0<this.areaLayer.numChildren;)this.areaLayer.removeChildAt(0);a=0;var b=this.soldiers.length,c;for(a;a<b;a++)c=
this.soldiers[a],c.clearYQ()};e.allMove=function(a){for(;0<this.areaLayer.numChildren;)this.areaLayer.removeChildAt(0);a=a.arr;if(Utils.containsXY(a[0],a[1],this.sx,this.sy-22,this.maxRadius,this.ratioY)){this.soldPoint=new egret.Point(a[0],a[1]+8);a=0;var b=this.soldiers.length;for(a;a<b;a++)this.soldiers[a].setPath([this.soldPoint.x,this.soldPoint.y])}};e.destory=function(){for(;0<this.areaLayer.numChildren;)this.areaLayer.removeChildAt(0);null!=this.timer&&(this.timer.removeEventListener(egret.TimerEvent.TIMER,
this.createSold,this),this.timer.stop(),this.timer=null);for(var a,b=0;b<this.soldiers.length;b++)a=this.soldiers[b],a.removeEventListener(SoldEvent.SELECT,this.allSelect,this),a.removeEventListener(SoldEvent.DESELECT,this.allDeSelect,this),a.removeEventListener(SoldEvent.MOVE,this.allMove,this),a.canClear=!0;this.soldiers=[];this.atargets=[]};e.onEnterFrame=function(a){var b;this.atargets=[];if(0<this.targets.length)for(b=0;b<this.targets.length;b++){var c=this.targets[b],e=Utils.containsXY(c.x,
c.y,this.sx,this.sy-22,this.maxRadius,this.ratioY),f=this.atargets.indexOf(c);e&&0<c.hp?-1==f&&this.atargets.push(c):-1!=f&&this.atargets.splice(f,1)}this.otime+=a;15E3<this.otime&&(this.createSold(),this.otime=0);for(b=0;b<this.soldiers.length;b++)a=this.soldiers[b],0>=a.hp?(a.removeEventListener(SoldEvent.SELECT,this.allSelect,this),a.removeEventListener(SoldEvent.DESELECT,this.allDeSelect,this),a.removeEventListener(SoldEvent.MOVE,this.allMove,this),this.soldiers.splice(b,1),b--):a.targets=this.atargets};
return f}(ShieldTowerBase);ShieldTower01.prototype.__class__="ShieldTower01";
var ShieldTower02=function(c){function f(){c.call(this);this.soldiers=[];this.otime=0;this.mtime=5E3;this.minRadius=100;this.maxRadius=140;this.ratioY=this.minRadius/this.maxRadius;this.anchorX=0.5;this.anchorY=1;this.bm=Utils.createBitmapByName("ShieldTowerBlue03");this.addChild(this.bm)}__extends(f,c);var e=f.prototype;e.createSold=function(){this.sold=1==this.buildID?ObjectPool.getInstance().createObject(ShieldSoldier11):ObjectPool.getInstance().createObject(ShieldSoldier12);this.contentLayer.addChild(this.sold);
this.objArr.push(this.sold);this.addIdx();this.sold.xoffset=this.offArr[this.offIdx][0];this.sold.yoffset=this.offArr[this.offIdx][1];this.sold.init(3<this.baseIdx?[[this.sx,this.sy],[this.soldPoint.x,this.soldPoint.y],[280,this.soldPoint.y],[280,10]]:[[this.sx,this.sy],[this.soldPoint.x,this.soldPoint.y],[210,this.soldPoint.y],[210,10]]);GuankaBase.instance.friendArr.push(this.sold);this.sold.addEventListener(SoldEvent.SELECT,this.allSelect,this);this.sold.addEventListener(SoldEvent.DESELECT,this.allDeSelect,
this);this.sold.addEventListener(SoldEvent.MOVE,this.allMove,this)};e.addIdx=function(){this.offIdx++;2<this.offIdx&&(this.offIdx=0)};e.allSelect=function(a){a=0;var b=this.soldiers.length,c;for(a;a<b;a++)c=this.soldiers[a],c.createYQ()};e.allDeSelect=function(a){for(;0<this.areaLayer.numChildren;)this.areaLayer.removeChildAt(0);a=0;var b=this.soldiers.length,c;for(a;a<b;a++)c=this.soldiers[a],c.clearYQ()};e.allMove=function(a){for(;0<this.areaLayer.numChildren;)this.areaLayer.removeChildAt(0);a=
a.arr;if(Utils.containsXY(a[0],a[1],this.sx,this.sy-22,this.maxRadius,this.ratioY)){this.soldPoint=new egret.Point(a[0],a[1]+8);a=0;var b=this.soldiers.length;for(a;a<b;a++)this.soldiers[a].setPath([this.soldPoint.x,this.soldPoint.y])}};e.destory=function(){for(;0<this.areaLayer.numChildren;)this.areaLayer.removeChildAt(0);null!=this.timer&&(this.timer.removeEventListener(egret.TimerEvent.TIMER,this.createSold,this),this.timer.stop(),this.timer=null);for(var a,b=0;b<this.soldiers.length;b++)a=this.soldiers[b],
a.removeEventListener(SoldEvent.SELECT,this.allSelect,this),a.removeEventListener(SoldEvent.DESELECT,this.allDeSelect,this),a.removeEventListener(SoldEvent.MOVE,this.allMove,this),a.canClear=!0;this.soldiers=[];this.atargets=[]};e.onEnterFrame=function(a){this.atargets=[];if(0<this.targets.length)for(a=0;a<this.targets.length;a++){var b=this.targets[a],c=Utils.containsXY(b.x,b.y,this.sx,this.sy-22,this.maxRadius,this.ratioY),e=this.atargets.indexOf(b);c&&0<b.hp?-1==e&&this.atargets.push(b):-1!=e&&
this.atargets.splice(e,1)}0==Math.floor(GuankaBase.instance.timeGo/60)%30&&this.otime<Math.floor(GuankaBase.instance.timeGo/60)&&(this.createSold(),this.otime=Math.floor(GuankaBase.instance.timeGo/60));for(a=0;a<this.soldiers.length;a++)b=this.soldiers[a],0>=b.hp?(b.removeEventListener(SoldEvent.SELECT,this.allSelect,this),b.removeEventListener(SoldEvent.DESELECT,this.allDeSelect,this),b.removeEventListener(SoldEvent.MOVE,this.allMove,this),this.soldiers.splice(a,1),a--):b.targets=this.atargets};
return f}(ShieldTowerBase);ShieldTower02.prototype.__class__="ShieldTower02";
var SpellTower01=function(c){function f(){c.call(this);this.soldiers=[];this.otime=this.goldTime=0;this.mtime=5E3;this.minRadius=100;this.maxRadius=140;this.ratioY=this.minRadius/this.maxRadius;this.anchorX=0.5;this.anchorY=1;this.bm=Utils.createBitmapByName("mifa");this.addChild(this.bm)}__extends(f,c);var e=f.prototype;e.addIdx=function(){this.offIdx++;2<this.offIdx&&(this.offIdx=0)};e.allSelect=function(a){a=0;var b=this.soldiers.length,c;for(a;a<b;a++)c=this.soldiers[a],c.createYQ()};e.allDeSelect=
function(a){for(;0<this.areaLayer.numChildren;)this.areaLayer.removeChildAt(0);a=0;var b=this.soldiers.length,c;for(a;a<b;a++)c=this.soldiers[a],c.clearYQ()};e.allMove=function(a){for(;0<this.areaLayer.numChildren;)this.areaLayer.removeChildAt(0);a=a.arr;if(Utils.containsXY(a[0],a[1],this.sx,this.sy-22,this.maxRadius,this.ratioY)){this.soldPoint=new egret.Point(a[0],a[1]+8);a=0;var b=this.soldiers.length;for(a;a<b;a++)this.soldiers[a].setPath([this.soldPoint.x,this.soldPoint.y])}};e.destory=function(){for(;0<
this.areaLayer.numChildren;)this.areaLayer.removeChildAt(0);for(var a,b=0;b<this.soldiers.length;b++)a=this.soldiers[b],a.removeEventListener(SoldEvent.SELECT,this.allSelect,this),a.removeEventListener(SoldEvent.DESELECT,this.allDeSelect,this),a.removeEventListener(SoldEvent.MOVE,this.allMove,this),a.canClear=!0;this.soldiers=[];this.atargets=[]};return f}(ShieldTowerBase);SpellTower01.prototype.__class__="SpellTower01";
var Strengthen01=function(c){function f(){c.call(this);this.defendUp=this.damagekUp=this.lifeUp=1;GuankaBase.instance.lifeUp++;GuankaBase.instance.damagekUp++;GuankaBase.instance.defendUp++;GuankaBase.instance.guankaUI.setLife();this.minRadius=100;this.maxRadius=140;this.ratioY=this.minRadius/this.maxRadius;this.anchorX=0.5;this.anchorY=1;this.bm=Utils.createBitmapByName("cuizi");this.addChild(this.bm)}__extends(f,c);var e=f.prototype;e.addIdx=function(){this.offIdx++;2<this.offIdx&&(this.offIdx=
0)};e.destory=function(){GuankaBase.instance.lifeUp-=this.lifeUp;GuankaBase.instance.damagekUp-=this.damagekUp;GuankaBase.instance.defendUp-=this.defendUp};e.onEnterFrame=function(a){};return f}(ShieldTowerBase);Strengthen01.prototype.__class__="Strengthen01";
var GuanKaConfig=function(){function c(){}c.getData=function(){return c.data};c.guankaData="guanka01load guanka02load guanka03load guanka04load guanka05load guanka06load guanka03load guanka04load guanka01load guanka02load guanka03load guanka04load".split(" ");c.data=[{xpos:105,ypos:388,ispass:!1,wujin:0,name:"\u5360\u5c71\u4e3a\u738b",story:"\u4e5d\u5dde\u52a8\u8361\uff0c\u53db\u4e71\u56db\u8d77\uff0c\u4f60\u672c\u4e8b\u4e0d\u884c\u4f46\u68a6\u60f3\u8fdc\u5927\uff0c\u6240\u4ee5\u5e26\u7740\u624b\u4e0b\u6765\u6e05\u527f\u8d8a\u8fbd\u5c71\u4e0a\u7684\u571f\u532a\uff0c\u51c6\u5907\u641e\u4e00\u4e2a\u5927\u65b0\u95fb"}];
return c}();GuanKaConfig.prototype.__class__="GuanKaConfig";
var TowerLevel=function(){function c(){}c.towNameArr=["ArrowTower-","ShieldTower-","MagicTower-","ExploTower-"];c.keyNameArr=["lv01-lv02","lv02-lv03_1","lv02-lv03_2"];c.AttackTower={"lv01-lv02":!1,"lv02-lv03_1":!1,"lv02-lv03_2":!1};c.ShieldTower={"lv01-lv02":!1,"lv02-lv03_1":!1,"lv02-lv03_2":!1};c.MagicTower={"lv01-lv02":!1,"lv02-lv03_1":!1,"lv02-lv03_2":!1};c.ExploTower={"lv01-lv02":!1,"lv02-lv03_1":!1,"lv02-lv03_2":!1};c.soldierData={s01:{type:"h1001",price:75,life:150,maxSpeed:0.6,damage:10,fireDelay:300,
specialType:0,attackType:1,unitType:1},s02:{type:"human2-2",price:75,life:80,maxSpeed:0.7,damage:14,fireDelay:300,specialType:4,attackType:1,unitType:2},s03:{type:"human2-3",price:75,life:60,maxSpeed:0.6,damage:20,fireDelay:700,specialType:0,attackType:2,unitType:2},s04:{type:"s04",price:100,life:50,maxSpeed:0.6,damage:30,fireDelay:700,specialType:0,attackType:3,unitType:3}};c.dic={s01:{className:"ShieldTower01",unitName:"ShieldSoldier01",res:"SS1_1",price:100,label:"\u5fa1\u6797",info:"\u666e\u901a\u9632\u5fa1\u578b\u58eb\u5175",
tip:"\u5237\u65b0\u65f6\u95f4\uff1a15\u79d2",type:"\u9632\u5fa1",life:150,damage:10},s02:{className:"AttackTower01",unitName:"AttackSoldier02",res:"AS1_2",price:100,label:"\u6714\u98ce\u9a91",info:"\u6bcf\u6b21\u653b\u51fb\u989d\u5916\u9020\u6210\u76ee\u6807\u6700\u5927\u751f\u547d\u503c10%\u4f24\u5bb3",tip:"\u5237\u65b0\u65f6\u95f4\uff1a15\u79d2",type:"\u653b\u51fb",life:80,damage:14},s03:{className:"AttackTower02",unitName:"AttackArcher03",res:"AS1_1",price:100,label:"\u91ce\u96e8",info:"\u653b\u901f\u5feb",
tip:"\u5237\u65b0\u65f6\u95f4\uff1a15\u79d2",type:"\u653b\u51fb",life:60,damage:20},s04:{className:"MagicTower01",unitName:"MagicMage01",res:"MS1_1",price:150,label:"\u6696\u9633\u672f\u58eb",info:"\u6bcf5\u79d2\u6cbb\u7597\u53cb\u65b9\u53d7\u4f24\u7684\u7684\u5355\u4f4d",tip:"\u5237\u65b0\u65f6\u95f4\uff1a15\u79d2",type:"\u79d8\u672f\uff1a\u592a\u9633",life:50,damage:30},AttackTower01:{className:"AttackTower01",res:"dp03_1",price:80,label:"\u5217\u5352\u8425",info:"\u751f\u4ea7\u653b\u51fb\u578b\u58eb\u5175\uff0c\u5bf9\u79d8\u672f\u5e08\u9020\u6210\u989d\u5916\u4f24\u5bb3",
tip:"\u70b9\u51fb\u5efa\u9020\u8be5\u5efa\u7b51",type:"\u653b\u51fb",life:0,damage:0},ShieldTower01:{className:"ShieldTower01",res:"dp01",price:80,label:"\u8fd1\u536b\u8425",info:"\u751f\u4ea7\u9632\u5fa1\u578b\u58eb\u5175\uff0c\u53ef\u964d\u4f4e\u653b\u51fb\u578b\u58eb\u5175\u5e26\u6765\u7684\u4f24\u5bb3",tip:"\u70b9\u51fb\u5efa\u9020\u8be5\u5efa\u7b51",type:"\u9632\u5fa1",life:0,damage:0},MagicTower01:{className:"MagicTower01",res:"mf01",price:80,label:"\u661f\u6d41\u8425",info:"\u751f\u4ea7\u79d8\u672f\u5e08\uff0c\u5bf9\u9632\u5fa1\u578b\u58eb\u5175\u9020\u6210\u989d\u5916\u4f24\u5bb3",
tip:"\u70b9\u51fb\u5efa\u9020\u8be5\u5efa\u7b51",type:"\u79d8\u672f",life:0,damage:0},AttackTower02:{className:"AttackTower02",res:"sj",price:160,label:"\u5217\u5352\u8425",info:"\u751f\u4ea7\u653b\u51fb\u578b\u58eb\u5175\uff0c\u5bf9\u79d8\u672f\u5e08\u9020\u6210\u989d\u5916\u4f24\u5bb3",tip:"\u70b9\u51fb\u5efa\u9020\u8be5\u5efa\u7b51",type:"\u653b\u51fb",life:0,damage:0},ShieldTower02:{className:"ShieldTower02",res:"sj",price:160,label:"\u8fd1\u536b\u8425",info:"\u751f\u4ea7\u9632\u5fa1\u578b\u58eb\u5175\uff0c\u53ef\u964d\u4f4e\u653b\u51fb\u578b\u58eb\u5175\u5e26\u6765\u7684\u4f24\u5bb3",
tip:"\u70b9\u51fb\u5efa\u9020\u8be5\u5efa\u7b51",type:"\u9632\u5fa1",life:0,damage:0},MagicTower02:{className:"MagicTower02",res:"sj",price:160,label:"\u661f\u6d41\u8425",info:"\u751f\u4ea7\u79d8\u672f\u5e08\uff0c\u5bf9\u9632\u5fa1\u578b\u58eb\u5175\u9020\u6210\u989d\u5916\u4f24\u5bb3",tip:"\u70b9\u51fb\u5efa\u9020\u8be5\u5efa\u7b51",type:"\u79d8\u672f",life:0,damage:0},ArrowTower03_1:{className:"ArrowTower03_1",res:"gj03_1",price:310},ShieldTower03_1:{className:"ShieldTower03_1",res:"dp03_1",price:330},
MagicTower03_1:{className:"MagicTower03_1",res:"mf03_1",price:360},ExploTower03_1:{className:"ExploTower03_1",res:"zd03_1",price:380},ArrowTower03_2:{className:"ArrowTower03_2",res:"gj03_2",price:610},ShieldTower03_2:{className:"ShieldTower03_2",res:"dp03_2",price:630},MagicTower03_2:{className:"MagicTower03_2",res:"mf03_2",price:660},ExploTower03_2:{className:"ExploTower03_2",res:"zd03_2",price:800},GoldOre01:{className:"GoldOre01",res:"gold",price:50,label:"\u91d1\u77ff",info:"\u6bcf5\u79d2\u83b7\u5f973\u91d1\u94e2",
tip:"\u70b9\u51fb\u5efa\u9020\u8be5\u5efa\u7b51",type:"\u91d1\u77ff",life:0,damage:0},Strengthen01:{className:"Strengthen01",res:"strengthen",price:100,label:"\u5929\u5de5\u574a",info:"\u5f3a\u5316\u6b66\u5668\u3001\u88c5\u7532\uff0c\u63d0\u5347\u6240\u6709\u58eb\u5175\u5c5e\u6027",tip:"\u70b9\u51fb\u5efa\u9020\u8be5\u5efa\u7b51",type:"\u79d1\u6280",life:0,damage:0},SpellTower01:{className:"SpellTower01",res:"mf03_1",price:100,label:"\u79d8\u6cd5\u5854",info:"\u51cf\u5c11\u6280\u80fd\u51b7\u5374\u65f6\u95f4",
tip:"\u70b9\u51fb\u5efa\u9020\u8be5\u5efa\u7b51",type:"\u79d8\u672f",life:0,damage:0},SellTower:{className:"SellTower",res:"sell",price:0},LockTower:{className:"LockTower",res:"lock",price:0},ShieldSoldier1_1:{className:"ShieldSoldier01",res:"SS1_1",price:1,label:"\u5fa1\u6797",info:"\u666e\u901a\u9632\u5fa1\u578b\u58eb\u5175",tip:"\u70b9\u51fb\u5207\u6362\u8be5\u5efa\u7b51\u6240\u4ea7\u751f\u7684\u5175\u79cd",type:"\u9632\u5fa1",life:260,damage:60},ShieldSoldier1_2:{className:"ShieldSoldier02",res:"SS1_2",
price:2,label:"\u4fe1\u86c7",info:"\u653b\u51fb\u4f1a\u5bf9\u76ee\u6807\u9644\u8fd1\u4e00\u4e2a\u989d\u5916\u5355\u4f4d\u9020\u621050%\u4f24\u5bb3",tip:"\u70b9\u51fb\u5207\u6362\u8be5\u5efa\u7b51\u6240\u4ea7\u751f\u7684\u5175\u79cd",type:"\u9632\u5fa1",life:180,damage:75},AttackSoldier1_1:{className:"AttackSoldier01",res:"AS1_3",price:1,label:"\u7834\u864f",info:"\u666e\u901a\u653b\u51fb\u578b\u58eb\u5175",tip:"\u70b9\u51fb\u5207\u6362\u8be5\u5efa\u7b51\u6240\u4ea7\u751f\u7684\u5175\u79cd",type:"\u653b\u51fb",
life:150,damage:108},AttackSoldier1_2:{className:"AttackSoldier02",res:"AS1_2",price:2,label:"\u6714\u98ce\u9a91",info:"\u6218\u9a6c\u6b7b\u4ea1\u540e\uff0c\u9a91\u58eb\u53ef\u4ee5\u7ee7\u7eed\u6218\u6597",tip:"\u70b9\u51fb\u5207\u6362\u8be5\u5efa\u7b51\u6240\u4ea7\u751f\u7684\u5175\u79cd",type:"\u653b\u51fb",life:140,damage:70},AttackSoldier1_3:{className:"AttackArcher01",res:"AS1_1",price:3,label:"\u91ce\u96e8",info:"\u653b\u901f\u5feb",tip:"\u70b9\u51fb\u5207\u6362\u8be5\u5efa\u7b51\u6240\u4ea7\u751f\u7684\u5175\u79cd",
type:"\u653b\u51fb",life:80,damage:120},MagicMage1_1:{className:"MagicMage01",res:"MS1_1",price:1,label:"\u5e7b\u672f\u5e08",info:"\u521b\u9020\u4e00\u4e2a\u5e7b\u8c61\u8ff7\u60d1\u654c\u4eba\uff0c\u65e0\u6cd5\u9020\u6210\u4f24\u5bb3",tip:"\u70b9\u51fb\u5207\u6362\u8be5\u5efa\u7b51\u6240\u4ea7\u751f\u7684\u5175\u79cd",type:"\u79d8\u672f\uff1a\u5bc6\u7f57",life:60,damage:120},MagicMage1_2:{className:"MagicMage02",res:"MS1_2",price:2,label:"\u6696\u9633",info:"\u6bcf5\u79d2\u6cbb\u7597\u53cb\u65b9\u53d7\u4f24\u7684\u7684\u5355\u4f4d",
tip:"\u70b9\u51fb\u5207\u6362\u8be5\u5efa\u7b51\u6240\u4ea7\u751f\u7684\u5175\u79cd",type:"\u79d8\u672f\uff1a\u592a\u9633",life:60,damage:120},ShieldSoldier2_1:{className:"ShieldSoldier11",res:"SS1_1",price:1,label:"\u950b\u7532",info:"\u53d7\u5230\u7684\u751f\u547d\u5f3a\u5316\u6548\u679c\u7ffb\u500d",tip:"\u70b9\u51fb\u5207\u6362\u8be5\u5efa\u7b51\u6240\u4ea7\u751f\u7684\u5175\u79cd",type:"\u9632\u5fa1",life:840,damage:100},ShieldSoldier2_2:{className:"ShieldSoldier12",res:"SS1_2",price:2,label:"\u5c71\u9635",
info:"\u653b\u51fb\u4f1a\u5bf9\u76ee\u6807\u9644\u8fd1\u4e00\u4e2a\u989d\u5916\u5355\u4f4d\u9020\u621050%\u4f24\u5bb3\uff0c\u5e76\u5c06\u4f24\u5bb3\u768430%\u8f6c\u5316\u4e3a\u751f\u547d\u503c",tip:"\u70b9\u51fb\u5207\u6362\u8be5\u5efa\u7b51\u6240\u4ea7\u751f\u7684\u5175\u79cd",type:"\u9632\u5fa1",life:640,damage:120},AttackSoldier2_1:{className:"AttackSoldier11",res:"AS1_3",price:1,label:"\u7834\u864f",info:"\u76ee\u6807\u5468\u56f4\u7684\u654c\u4eba\u4f1a\u5e73\u644a\u4f24\u5bb3",tip:"\u70b9\u51fb\u5207\u6362\u8be5\u5efa\u7b51\u6240\u4ea7\u751f\u7684\u5175\u79cd",
type:"\u653b\u51fb",life:450,damage:216},AttackSoldier2_2:{className:"AttackSoldier12",res:"AS1_2",price:2,label:"\u82cd\u72fc\u9a91",info:"\u5bf9\u751f\u547d\u503c50%\u4ee5\u4e0b\u7684\u76ee\u6807\u989d\u5916\u9020\u621050%\u4f24\u5bb3",tip:"\u70b9\u51fb\u5207\u6362\u8be5\u5efa\u7b51\u6240\u4ea7\u751f\u7684\u5175\u79cd",type:"\u653b\u51fb",life:420,damage:140},AttackSoldier2_3:{className:"AttackArcher11",res:"AS1_1",price:3,label:"\u6d41\u706b",info:"\u4e09\u4e2a\u706b\u67aa\u2026\u5443\u2026\u5f13\u7bad\u624b",
tip:"\u70b9\u51fb\u5207\u6362\u8be5\u5efa\u7b51\u6240\u4ea7\u751f\u7684\u5175\u79cd",type:"\u653b\u51fb",life:100,damage:120},MagicMage2_1:{className:"MagicMage11",res:"MS1_1",price:1,label:"\u5e7b\u76f8\u5e08",info:"\u5e7b\u5316\u4e00\u4e2a\u62e5\u6709300\u751f\u547d\u503c\uff0c100\u653b\u51fb\u529b\u521d\u7684\u7ea7\u539f\u517d",tip:"\u70b9\u51fb\u5207\u6362\u8be5\u5efa\u7b51\u6240\u4ea7\u751f\u7684\u5175\u79cd",type:"\u79d8\u672f\uff1a\u5bc6\u7f57",life:100,damage:150},MagicMage2_2:{className:"MagicMage12",
res:"MS1_2",price:2,label:"\u707c\u76ee",info:"\u6240\u6709\u654c\u4eba10%\u51e0\u7387\u4e22\u5931\u653b\u51fb",tip:"\u70b9\u51fb\u5207\u6362\u8be5\u5efa\u7b51\u6240\u4ea7\u751f\u7684\u5175\u79cd",type:"\u79d8\u672f\uff1a\u592a\u9633",life:100,damage:140},LifeUp:{className:"LifeUp",res:"life",price:40,label:"\u751f\u547d",info:"\u63d0\u5347\u6240\u6709\u58eb\u517520%\u751f\u547d\u503c",tip:"",type:"\u79d1\u6280",life:0,damage:0},DamagekUp:{className:"DamagekUp",res:"attack",price:50,label:"\u4f24\u5bb3",
info:"\u63d0\u5347\u6240\u6709\u58eb\u517520%\u653b\u51fb",tip:"",type:"\u79d1\u6280",life:0,damage:0},DefendUp:{className:"DefendUp",res:"defend",price:999,label:"\u9632\u5fa1",info:"\u589e\u52a0\u62a4\u7532\uff08\u4e0d\u8981\u70b9\u6682\u65f6\u6ca1\u7528\uff09",tip:"",type:"\u79d1\u6280",life:0,damage:0},GoldOreUp:{className:"GoldOreUp",res:"sj",price:60,label:"\u5347\u7ea7",info:"\u6bcf\u4e94\u79d2\u989d\u5916\u83b7\u5f973\u91d1\u94e2",tip:"",type:"\u91d1\u77ff",life:0,damage:0},SpellTowerUp:{className:"SpellTowerUp",
res:"sj",price:90,label:"\u5347\u7ea7",info:"\u964d\u4f4e\u66f4\u591a\u51b7\u5374\u65f6\u95f4\uff08\u4e0d\u8981\u70b9\u6682\u65f6\u6ca1\u7528\uff09",tip:"",type:"\u79d8\u672f",life:0,damage:0}};return c}();TowerLevel.prototype.__class__="TowerLevel";var LoadEvent=function(c){function f(e,a,b){void 0===a&&(a=!1);void 0===b&&(b=!1);c.call(this,e,a,b)}__extends(f,c);return f}(RES.ResourceEvent);LoadEvent.prototype.__class__="LoadEvent";
var UnitIcon=function(c){function f(a,b){c.call(this);this.curtime=0;this.cdtime=15E3;this.iscd=!0;this.priceTxt=new egret.TextField;this.gold=b;"lock"==a?(this.icon=Utils.createBitmapByName("unitLock"),this.addChild(this.icon)):(this.className=TowerLevel.soldierData[a].type,this.res=a,this.price=TowerLevel.soldierData[a].price,this.specialType=TowerLevel.soldierData[a].specialType,this.unitType=TowerLevel.soldierData[a].unitType,this.life=TowerLevel.soldierData[a].life,this.damage=TowerLevel.soldierData[a].damage,
this.fireDelay=TowerLevel.soldierData[a].fireDelay,this.attackType=TowerLevel.soldierData[a].attackType,this.maxSpeed=TowerLevel.soldierData[a].maxSpeed,this.icon=Utils.createBitmapByName(this.res),this.addChild(this.icon),this.balance=Utils.createBitmapByName("mb"),this.addChild(this.balance),this.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.touchHandle,this),this.priceTxt.text=this.price.toString(),this.priceTxt.textColor=16776960,this.priceTxt.size=10,this.priceTxt.fontFamily="Microsoft YaHei",
this.priceTxt.anchorX=1,this.priceTxt.x=45,this.priceTxt.y=32,this.addChild(this.priceTxt),this.gold>=this.price&&(this.balance.height=0),this.mb=Utils.createBitmapByName("mb"),this.mb.anchorY=1,this.mb.y=46,this.addChild(this.mb))}__extends(f,c);var e=f.prototype;e.touchHandle=function(a){SoundManager.playEffect("select");if(this.gold>=this.price&&!0!=this.iscd){GuankaBase.instance.gold-=this.price;GuankaBase.instance.guankaUI.setGold(GuankaBase.instance.gold);this.iscd=!0;var b=1==this.attackType?
ObjectPool.getInstance().createObject(ShieldSoldier01):2==this.attackType?ObjectPool.getInstance().createObject(AttackArcher01):ObjectPool.getInstance().createObject(MagicMage01);b.addTexture(this.className);b.specialType=this.specialType;b.unitType=this.unitType;b.life=this.life;b.damage=this.damage;b._maxSpeed=this.maxSpeed;GuankaBase.instance.objLayer.addChild(b);a=0.5<Math.random()?[[210,500],[210,10]]:[[280,500],[280,10]];b.init(a,b.life,b.damage);GuankaBase.instance.friendArr.push(b)}};e.setMbheight=
function(a){this.mb.height=a};e.setAlpha=function(a){this.balance.height=a};e.onEnterFrame=function(a){this.gold=GuankaBase.instance.gold;this.gold>=this.price?this.setAlpha(0):this.setAlpha(46);this.iscd&&(this.curtime+=a,a=this.curtime/this.cdtime,this.setMbheight(46*(1-a)),1<=a&&(this.iscd=!1,this.cdtime=500,this.curtime=0))};return f}(egret.Sprite);UnitIcon.prototype.__class__="UnitIcon";
var StorageSetting=function(){function c(){}c.getItem=function(c){c=egret.localStorage.getItem(c);null==c&&(c="0");return c};c.loadConfig=function(){var c,e,a;a=GuanKaConfig.data.length;for(e=0;e<a;e++)c="1",egret.localStorage.setItem("ispass"+e,c),GuanKaConfig.data[e].ispass=Boolean(Number(c)),c=egret.localStorage.getItem("wujin"+e),null==c&&(c="0",egret.localStorage.setItem("wujin"+e,c)),GuanKaConfig.data[e].wujin=Number(c);for(e=0;4>e;e++)for(a=0;3>a;a++)c="1",egret.localStorage.setItem(TowerLevel.towNameArr[e]+
TowerLevel.keyNameArr[a],c),0==e?TowerLevel.AttackTower[TowerLevel.keyNameArr[a]]=Boolean(Number(c)):1==e?TowerLevel.ShieldTower[TowerLevel.keyNameArr[a]]=Boolean(Number(c)):2==e?TowerLevel.MagicTower[TowerLevel.keyNameArr[a]]=Boolean(Number(c)):3==e&&(TowerLevel.ExploTower[TowerLevel.keyNameArr[a]]=Boolean(Number(c)));c=egret.localStorage.getItem("goldStar");null==c&&(c="0",egret.localStorage.setItem("goldStar",c));GameSetting.goldStar=Number(c)};c.setGuankaPass=function(c){egret.localStorage.setItem("ispass"+
c,"1");GuanKaConfig.data[c].ispass=!0};c.setGuankaWujin=function(c,e){var a=egret.localStorage.getItem("wujin"+c);e<=Number(a)||(egret.localStorage.setItem("wujin"+c,String(e)),GuanKaConfig.data[c].wujin=e)};c.setTowerUpgrade=function(c){for(var e=0;4>e;e++)egret.localStorage.setItem(TowerLevel.towNameArr[e]+TowerLevel.keyNameArr[c],"1"),0==e?TowerLevel.AttackTower[TowerLevel.keyNameArr[c]]=!0:1==e?TowerLevel.ShieldTower[TowerLevel.keyNameArr[c]]=!0:2==e?TowerLevel.MagicTower[TowerLevel.keyNameArr[c]]=
!0:3==e&&(TowerLevel.ExploTower[TowerLevel.keyNameArr[c]]=!0)};return c}();StorageSetting.prototype.__class__="StorageSetting";
var MainEvent=function(c){function f(e,a,b,d){void 0===a&&(a="");void 0===b&&(b=!1);void 0===d&&(d=!1);c.call(this,e,b,d);this._resName="";this._resName=a}__extends(f,c);Object.defineProperty(f.prototype,"resName",{get:function(){return this._resName},enumerable:!0,configurable:!0});f.OPENLOADBAR="openloadbar";f.REMOVE="remove";f.LOADCOMP="loadcomp";f.PAUSE="pause";f.QUITGUANKA="quitguanka";f.TRYAGAIN="tryagain";return f}(egret.Event);MainEvent.prototype.__class__="MainEvent";
var ToolEvent=function(c){function f(a,b,d,e,f){void 0===b&&(b="");void 0===d&&(d=0);void 0===e&&(e=!1);void 0===f&&(f=!1);c.call(this,a,e,f);this._className="";this._price=0;this._className=b;this._price=d}__extends(f,c);var e=f.prototype;Object.defineProperty(e,"className",{get:function(){return this._className},enumerable:!0,configurable:!0});Object.defineProperty(e,"price",{get:function(){return this._price},enumerable:!0,configurable:!0});f.BUILD_START="build_start";f.BUILD_COMP="build_comp";
return f}(egret.Event);ToolEvent.prototype.__class__="ToolEvent";
var Loader=function(c){function f(){c.call(this)}__extends(f,c);var e=f.prototype;f.getInstance=function(){if(null==f.instance){var a=new f;f.instance=a}return f.instance};e.init=function(){RES.addEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this);RES.loadConfig("resource/resource.json","resource/")};e.onConfigComplete=function(a){RES.removeEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this);RES.addEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,
this);RES.addEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this);RES.addEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this);RES.loadGroup("preload")};e.onResourceLoadError=function(a){console.warn("Group:"+a.groupName+" has failed to load");this.onResourceLoadComplete(a)};e.onResourceProgress=function(a){this.loadevent=new LoadEvent(LoadEvent.GROUP_PROGRESS);this.loadevent.groupName=a.groupName;this.loadevent.itemsLoaded=a.itemsLoaded;this.loadevent.itemsTotal=
a.itemsTotal;this.dispatchEvent(this.loadevent);this.loadevent=null};e.onResourceLoadComplete=function(a){RES.removeEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this);RES.removeEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this);RES.removeEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this);this.loadevent=new LoadEvent(LoadEvent.GROUP_COMPLETE);this.loadevent.groupName=a.groupName;this.dispatchEvent(this.loadevent);
this.loadevent=null};e.load=function(a){RES.addEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this);RES.addEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this);RES.addEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this);RES.loadGroup(a)};return f}(egret.EventDispatcher);Loader.prototype.__class__="Loader";
var ArrowShooter01=function(c){function f(){c.call(this);this.anchorX=0.5;var e=RES.getRes("ArrowShooter01json"),a=RES.getRes("ArrowShooter01png");this.movieClipData=(new egret.MovieClipDataFactory(e,a)).generateMovieClipData("ArrowShooter01");this.endLabel=this.startLabel="";this.idleLabel="idleDown"}__extends(f,c);return f}(ArrowShooterBase);ArrowShooter01.prototype.__class__="ArrowShooter01";
var Base02=function(c){function f(){c.call(this);this.cacheAsBitmap=!0;var e=Utils.createBitmapByName("Base03");this.anchorX=0.5;this.anchorY=1;this.addChild(e)}__extends(f,c);f.prototype.onEnterFrame=function(c){};return f}(Base);Base02.prototype.__class__="Base02";
var BuildIcon=function(c){function f(a,b,d){c.call(this);this.gold=b;this.className=TowerLevel.dic[a].className;this.res=TowerLevel.dic[a].res;this.price="DamagekUp"==this.className?TowerLevel.dic[a].price*d.damagekUp:"LifeUp"==this.className?TowerLevel.dic[a].price*d.lifeUp:"DefendUp"==this.className?TowerLevel.dic[a].price*d.defendUp:TowerLevel.dic[a].price;this.is=!1;this.label=TowerLevel.dic[a].label;this.info=TowerLevel.dic[a].info;this.type=TowerLevel.dic[a].type;this.tip=TowerLevel.dic[a].tip;
this.life=TowerLevel.dic[a].life;this.damage=TowerLevel.dic[a].damage;this.icon=Utils.createBitmapByName(this.res);this.addChild(this.icon);this.xunhuan=Utils.createBitmapByName("xunhuan");this.xunhuan.x=12;this.xunhuan.y=32;this.addChild(this.xunhuan);GuankaBase.instance.IconArr.push(this);"LockTower"==this.className||"SellTower"==this.className?this.is=!0:this.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.touchHandle,this);this.loopBuildIcon(d);4>this.price||(this.bm=Utils.createBitmapByName("cashbg"),
this.bm.x=8,this.bm.y=32,this.addChild(this.bm),this.txt=new egret.BitmapText,a=this.gold>=this.price?RES.getRes("NumFont"):RES.getRes("NumFont2"),this.txt.font=a,this.txt.letterSpacing=-1,this.txt.text=this.price.toString(),this.txt.x=(30-this.txt.width)/2+8,this.txt.y=32,this.addChild(this.txt))}__extends(f,c);var e=f.prototype;e.touchHandle=function(a){Group.selectIcon(this)};e.selectIcon=function(){this.icon.texture=RES.getRes("queren");var a=GuankaBase.instance.guankaUI.boardSp;a.alpha=1;GuankaBase.instance.guankaUI.label.text=
this.label;GuankaBase.instance.guankaUI.type.text=this.type;GuankaBase.instance.guankaUI.info.text=this.info;GuankaBase.instance.guankaUI.tip.text=this.tip;null!=this.life?(GuankaBase.instance.guankaUI.lifetxt.text=Math.floor(this.life*(1+0.2*GuankaBase.instance.lifeUp)).toString(),GuankaBase.instance.guankaUI.damagetxt.text=Math.floor(this.damage*(1+0.2*GuankaBase.instance.damagekUp)).toString()):(GuankaBase.instance.guankaUI.lifetxt.text="",GuankaBase.instance.guankaUI.damagetxt.text="");a.x=this.parent.x-
90;a.y=this.parent.y-190};e.reselectIcon=function(){};e.deselectIcon=function(){this.icon.texture=RES.getRes(this.res);this.is=!1};e.loopBuildIcon=function(a){this.price==a.buildID?TweenMax.to(this.xunhuan,0.01,{alpha:100}):TweenMax.to(this.xunhuan,0.01,{alpha:0})};return f}(egret.Sprite);BuildIcon.prototype.__class__="BuildIcon";
var UnitTool=function(c){function f(a){c.call(this);this.iconArr=[];this.cacheAsBitmap=!0;this.gold=a;this.createTools()}__extends(f,c);var e=f.prototype;e.createTools=function(){var a=GuankaBase.instance.soldierArr;this.addIcon(a[0],0,0);this.addIcon(a[1],51,0);this.addIcon(a[2],102,0);this.addIcon(a[3],153,0);this.addIcon(a[4],204,0);this.addIcon(a[5],255,0);this.addIcon(a[6],306,0)};e.addIcon=function(a,b,c){this.icon=new UnitIcon(a,this.gold);this.icon.x=b;this.icon.y=c;this.icon.touchEnabled=
!0;this.icon.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.iconClickHandle,this);this.addChild(this.icon);"lock"!=a&&this.iconArr.push(this.icon)};e.iconClickHandle=function(a){var b=a.currentTarget.className,c=a.currentTarget.price;!1==a.currentTarget.is?a.currentTarget.is=!0:this.gold>=c&&this.dispatchEvent(new ToolEvent(ToolEvent.BUILD_START,b,c))};e.onEnterFrame=function(a){for(var b=0;b<this.iconArr.length;b++)this.iconArr[b].onEnterFrame(a)};return f}(egret.Sprite);
UnitTool.prototype.__class__="UnitTool";
var Main=function(c){function f(){c.call(this);this.views=[];this.senceName={welcomeload:"Index",maps:"World",guanka01load:"Guanka01",guanka02load:"Guanka02",guanka03load:"Guanka03",guanka04load:"Guanka04",guanka05load:"Guanka05",guanka06load:"Guanka06",guanka07load:"Guanka07",guanka08load:"Guanka08",guanka09load:"Guanka09",guanka10load:"Guanka10",guanka11load:"Guanka11",guanka12load:"Guanka12"};this.loadIndexis1st=!0;this.isRotation=!1;f.instance=this;this.addEventListener(egret.Event.ADDED_TO_STAGE,this.onAddToStage,
this)}__extends(f,c);var e=f.prototype;e.onAddToStage=function(a){console.log(document.body.clientWidth);this.loadingView=new LoadingUI;this.addChild(this.loadingView);Loader.getInstance();Loader.instance.addEventListener(LoadEvent.GROUP_COMPLETE,this.loadComp,this);Loader.instance.addEventListener(LoadEvent.GROUP_PROGRESS,this.loadprogress,this);Loader.instance.init();this.addEventListener(MainEvent.REMOVE,this.removeLast,this);this.addEventListener(MainEvent.OPENLOADBAR,this.createLoadBar,this);
this.addEventListener(MainEvent.LOADCOMP,this.addSence,this)};e.loadprogress=function(a){switch(a.groupName){case "preload":this.loadingView.setProgress(a.itemsLoaded,a.itemsTotal);break;case "welcomeload":if(this.loadIndexis1st){this.preload.setProgress(a.itemsLoaded,a.itemsTotal);break}default:this.loadBar.setProgress(a.itemsLoaded,a.itemsTotal)}};e.loadComp=function(a){switch(a.groupName){case "preload":this.removeChild(this.loadingView);this.loadingView=null;this.createScene();StorageSetting.loadConfig();
break;case "welcomeload":if(this.loadIndexis1st){this.preload.loadComp();this.loadIndexis1st=!1;break}default:"uiLoad"==a.groupName?(console.log("\u52a0\u8f7d\u602a\u7269\u8d44\u6e90"),Loader.instance.load("monsterLoad")):"monsterLoad"==a.groupName?(console.log("\u52a0\u8f7d\u5854\u7c7b\u8d44\u6e90"),Loader.instance.load("towerLoad")):"towerLoad"==a.groupName?(console.log("\u52a0\u8f7d\u97f3\u6548\u8d44\u6e90"),Loader.instance.load("soundLoad")):"soundLoad"==a.groupName?(console.log("\u52a0\u8f7d\u5173\u5361\u8d44\u6e90"),
Loader.instance.load(GuanKaConfig.guankaData[f.curIdx])):(this.dispatchEvent(new MainEvent(MainEvent.LOADCOMP,a.groupName)),this.loadBar.hideLoadBar())}};e.createLoadBar=function(a){this.resName=a.resName;this.loadBar=new LoadBar;this.addChild(this.loadBar)};e.removeLast=function(a){Loader.instance.load(this.resName);this.gameLayer.removeChildAt(0);this.views.shift().destroy()};e.addSence=function(a){a=new (egret.getDefinitionByName(this.senceName[a.resName]));this.gameLayer.addChild(a);this.views.push(a)};
e.createScene=function(){egret.MainContext.deviceType==egret.MainContext.DEVICE_MOBILE&&(this.isRotation=!0);this.gameLayer=new egret.DisplayObjectContainer;this.addChild(this.gameLayer);this.preload=new PreLoad;this.gameLayer.addChild(this.preload)};e.init=function(){this.gameLayer.removeChildAt(0);this.preload=null;this.welcome=new Index;this.gameLayer.addChild(this.welcome);this.views.push(this.welcome)};e.onRotation=function(a){!this.isRotation||90!=a&&-90!=a?this.isRotation||0!=a||(this.rotation=
90,this.x=480,this.isRotation=!0,egret.StageDelegate.getInstance().setDesignSize(480,640)):(this.x=this.rotation=0,this.isRotation=!1,egret.StageDelegate.getInstance().setDesignSize(640,480))};f.wujin=!1;f.loadCommis1st=!0;return f}(egret.DisplayObjectContainer);Main.prototype.__class__="Main";
var HumanBoss=function(c){function f(){c.call(this);this.minRadius=100;this.maxRadius=140;this.ratioY=this.minRadius/this.maxRadius;this.anchorX=0.5;this.anchorY=1;this.bm=Utils.createBitmapByName("ShieldTower03_2");this.addChild(this.bm);this.lifeBar.x=38;this.lifeBar.y=5;this.st11=new ArrowShooter01;this.st11.x=38;this.st11.y=7;this.addChild(this.st11);this.st12=new ArrowShooter01;this.st12.x=53;this.st12.y=7;this.addChild(this.st12);this.offy=10;this.fireDelay=1E3}__extends(f,c);var e=f.prototype;
e.onCreate=function(){this.hp=this.life;this.posArr=[];this.timesum=this._pathIndex=0;this.lifeBar.reSet();this.moveToTarget=this.atjijie=this.canClear=!1;this.unitType=4};e.viewSelect=function(a){Group.selectItem(this)};e.onEnterFrame=function(a){c.prototype.onEnterFrame.call(this,a);this.st11.onEnterFrame(a);this.st12.onEnterFrame(a);this.time++;240<this.time&&this.hp<this.life&&(this.hp+=0.01*this.life,this.time=0);if(0==this.atargets.length)this.timesum=this.fireDelay;else if(this.timesum+=a,
!(this.timesum<this.fireDelay)){this.timesum=0;this.target=this.atargets[0];this.target.x>=this.sx&&this.target.y<=this.sy-22&&(this.direct="upR");this.target.x>=this.sx&&this.target.y>this.sy-22&&(this.direct="downR");this.target.x<this.sx&&this.target.y<=this.sy-22&&(this.direct="upL");this.target.x<this.sx&&this.target.y>this.sy-22&&(this.direct="downL");this.playFireVoice();var b;"L"==this.firstst?(this.st11.fire(this.direct),this.firstst="R",b=new egret.Point(this.sx-5,this.sy-46)):"R"==this.firstst&&
(this.st12.fire(this.direct),this.firstst="L",b=new egret.Point(this.sx+5,this.sy-46));this.weapon=ObjectPool.getInstance().createObject(Arrow01);this.weapon.damage=this.damage;this.weapon.init(b,this.target,this.target.offy);GuankaBase.instance.weaponLayer.addChild(this.weapon);this.weapon.damage>=this.target.hp&&(a=this.targets.indexOf(this.target),-1!=a&&this.targets.splice(a,1),a=this.atargets.indexOf(this.target),-1!=a&&this.atargets.splice(a,1),this.target=null)}};e.onDestroy=function(){c.prototype.onDestroy.call(this)};
return f}(TowersBase);HumanBoss.prototype.__class__="HumanBoss";
var HumanTower=function(c){function f(){c.call(this);this.minRadius=100;this.maxRadius=140;this.ratioY=this.minRadius/this.maxRadius;this.anchorX=0.5;this.anchorY=1;this.bm=Utils.createBitmapByName("ArrowTower01");this.addChild(this.bm);this.lifeBar.x=32;this.lifeBar.y=5;this.st1=new ArrowShooter01;this.st1.x=36;this.st1.y=15;this.addChild(this.st1);this.st2=new ArrowShooter01;this.st2.x=50;this.st2.y=15;this.addChild(this.st2);this.offy=10;this.fireDelay=1E3}__extends(f,c);var e=f.prototype;e.onCreate=
function(){this.hp=this.life;this.posArr=[];this.timesum=this._pathIndex=0;this.lifeBar.reSet();this.moveToTarget=this.atjijie=this.canClear=!1;this.unitType=4};e.viewSelect=function(a){Group.selectItem(this)};e.onEnterFrame=function(a){c.prototype.onEnterFrame.call(this,a);this.st1.onEnterFrame(a);this.st2.onEnterFrame(a);this.time++;240<this.time&&this.hp<this.life&&(this.hp+=0.01*this.life,this.time=0);if(0==this.atargets.length||0>this.hp)this.timesum=this.fireDelay;else if(this.timesum+=a,!(this.timesum<
this.fireDelay)){this.timesum=0;this.target=this.atargets[0];this.target.x>=this.sx&&this.target.y<=this.sy-22&&(this.direct="upR");this.target.x>=this.sx&&this.target.y>this.sy-22&&(this.direct="downR");this.target.x<this.sx&&this.target.y<=this.sy-22&&(this.direct="upL");this.target.x<this.sx&&this.target.y>this.sy-22&&(this.direct="downL");this.playFireVoice();var b;"L"==this.firstst?(this.st1.fire(this.direct),this.firstst="R",b=new egret.Point(this.sx-5,this.sy-46)):"R"==this.firstst&&(this.st2.fire(this.direct),
this.firstst="L",b=new egret.Point(this.sx+5,this.sy-46));this.weapon=ObjectPool.getInstance().createObject(Arrow01);this.weapon.damage=this.damage;this.weapon.init(b,this.target,this.target.offy);GuankaBase.instance.weaponLayer.addChild(this.weapon);this.weapon.damage>=this.target.hp&&(a=this.targets.indexOf(this.target),-1!=a&&this.targets.splice(a,1),a=this.atargets.indexOf(this.target),-1!=a&&this.atargets.splice(a,1),this.target=null)}};e.onDestroy=function(){c.prototype.onDestroy.call(this)};
return f}(TowersBase);HumanTower.prototype.__class__="HumanTower";var Base01=function(c){function f(){c.call(this);this.cacheAsBitmap=!0;var e=Utils.createBitmapByName("empty01");this.anchorX=0.5;this.anchorY=1;this.addChild(e)}__extends(f,c);f.prototype.onEnterFrame=function(c){};return f}(Base);Base01.prototype.__class__="Base01";
var Base03=function(c){function f(){c.call(this);this.cacheAsBitmap=!0;var e=Utils.createBitmapByName("Base02");this.anchorX=0.5;this.anchorY=1;this.addChild(e)}__extends(f,c);f.prototype.onEnterFrame=function(c){};return f}(Base);Base03.prototype.__class__="Base03";var NodePoint=function(){return function(c,f){this.walkable=!0;this.x=c;this.y=f}}();NodePoint.prototype.__class__="NodePoint";
var BuildTool=function(c){function f(a,b){c.call(this);this.cacheAsBitmap=!0;this.scaleX=this.scaleY=this.anchorX=this.anchorY=0.5;this.alpha=0;this.bm=Utils.createBitmapByName("yuan");this.addChild(this.bm);this.gold=b;this.objTouch=a;this.createTools(a);TweenMax.to(this,0.1,{alpha:1,scaleX:1,scaleY:1})}__extends(f,c);var e=f.prototype;e.createTools=function(a){a instanceof Base01||a instanceof Base02?(this.addIcon("s01",36,-14),this.addIcon("s02",-14,43),this.addIcon("s03",85,43),this.addIcon("s04",
36,88)):a instanceof Base03?(this.addIcon("GoldOre01",36,-14),this.addIcon("Strengthen01",-4,70),this.addIcon("SpellTower01",75,70)):(a instanceof ShieldTower01?this.addIcon("ShieldSoldier1_1",36,-14):a instanceof AttackTower01?this.addIcon("AttackSoldier1_2",36,-14):a instanceof MagicTower01?this.addIcon("MagicMage1_1",36,-14):a instanceof GoldOre01?TowerLevel.ExploTower["lv01-lv02"]?this.addIcon("GoldOreUp",36,-14):this.addIcon("LockTower",36,-14):a instanceof SpellTower01?TowerLevel.AttackTower["lv02-lv03_1"]?
this.addIcon("SpellTowerUp",36,-14):this.addIcon("LockTower",72,-14):a instanceof Strengthen01?TowerLevel.ShieldTower["lv02-lv03_1"]?(this.addIcon("LifeUp",36,-14),this.addIcon("DamagekUp",-14,43),this.addIcon("DefendUp",85,43)):this.addIcon("LockTower",72,-14):a instanceof ShieldTower02?TowerLevel.ShieldTower["lv01-lv02"]?(this.addIcon("LockTower",36,-14),this.addIcon("ShieldSoldier2_1",-14,43),this.addIcon("ShieldSoldier2_2",85,43)):this.addIcon("LockTower",36,-14):a instanceof AttackTower02?this.addIcon("AttackSoldier1_2",
36,-14):a instanceof MagicTower02&&(TowerLevel.MagicTower["lv01-lv02"]?(this.addIcon("LockTower",36,-14),this.addIcon("MagicMage2_1",-14,43),this.addIcon("MagicMage2_2",85,43)):this.addIcon("LockTower",36,-14)),this.addIcon("SellTower",43,98))};e.addIcon=function(a,b,c){this.icon=new BuildIcon(a,this.gold,this.objTouch);this.icon.x=b;this.icon.y=c;this.icon.touchEnabled=!0;this.icon.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.iconClickHandle,this);this.addChild(this.icon)};e.iconClickHandle=
function(a){var b=a.currentTarget.className,c=a.currentTarget.price;!1==a.currentTarget.is?a.currentTarget.is=!0:this.gold>=c&&this.dispatchEvent(new ToolEvent(ToolEvent.BUILD_START,b,c))};e.hide=function(){var a=this;GuankaBase.instance.IconArr=[];TweenMax.to(a,0.1,{alpha:0,scaleX:0.5,scaleY:0.5,onComplete:function(){null!=a.parent&&a.parent.removeChild(a)}})};return f}(egret.Sprite);BuildTool.prototype.__class__="BuildTool";
var BuildWait=function(c){function f(e){c.call(this);this.buildType={AttackTower01:"building1",ShieldTower01:"building2",MagicTower01:"building3",AttackTower02:"building1",ShieldTower02:"building2",MagicTower02:"building3",ExploTower01:"building4",GoldOre01:"building4",SpellTower01:"building3",Strengthen01:"building4"};this.anchorX=0.5;this.anchorY=1;this.bm=Utils.createBitmapByName(this.buildType[e]);this.addChild(this.bm);this.bm=Utils.createBitmapByName("buildbarbg");this.bm.x=23;this.bm.y=23;
this.addChild(this.bm);this.bm=Utils.createBitmapByName("buildbartop");this.bm.x=24;this.bm.y=24;this.bm.width=1;this.addChild(this.bm);this.building();SoundManager.playEffect("building")}__extends(f,c);f.prototype.building=function(){var c=this;TweenLite.to(this.bm,1.5,{width:37,ease:Linear.easeNone,onComplete:function(){c.dispatchEvent(new ToolEvent(ToolEvent.BUILD_COMP))}})};return f}(egret.Sprite);BuildWait.prototype.__class__="BuildWait";
var TowerEvent=function(c){function f(e,a,b,d){void 0===a&&(a=null);void 0===b&&(b=!1);void 0===d&&(d=!1);c.call(this,e,b,d);this._obj=a}__extends(f,c);Object.defineProperty(f.prototype,"obj",{get:function(){return this._obj},enumerable:!0,configurable:!0});f.SHOWTOOL="showtool";f.HIDETOOL="hidetool";return f}(egret.Event);TowerEvent.prototype.__class__="TowerEvent";
var GuanKaUI=function(c){function f(a,b){c.call(this);this.timeTxt=new egret.TextField;this.gold=250;this.label=new egret.TextField;this.lifetxt=new egret.TextField;this.damagetxt=new egret.TextField;this.info=new egret.TextField;this.type=new egret.TextField;this.tip=new egret.TextField;this.canClick=!1;var d;this.boardSp=new egret.Sprite;this.addChild(this.boardSp);this.boardSp.alpha=0;this.board=Utils.createBitmapByName("board");this.boardSp.addChild(this.board);this.label.text="\u9e64\u96ea";
this.label.textColor=16776960;this.label.fontFamily="Microsoft YaHei";this.label.size=18;this.label.x=10;this.label.y=8;this.boardSp.addChild(this.label);this.type.text="\u9632\u5fa1";this.type.size=15;this.type.x=130;this.type.y=13;this.boardSp.addChild(this.type);this.info.text="\u9e64\u96ea\u597d\u725b\u903c\u554a";this.info.width=160;this.info.height=50;this.info.size=12;this.info.x=10;this.info.y=35;this.boardSp.addChild(this.info);this.tip.text="\u70b9\u51fb\u5207\u6362\u8be5\u5efa\u7b51\u6240\u4ea7\u751f\u7684\u5175\u79cd";
this.tip.textColor=16776960;this.tip.size=10;this.tip.x=10;this.tip.y=70;this.boardSp.addChild(this.tip);this.lifetxt.text="100";this.lifetxt.size=10;this.lifetxt.x=35;this.lifetxt.y=88;this.boardSp.addChild(this.lifetxt);this.damagetxt.text="100";this.damagetxt.size=10;this.damagetxt.x=115;this.damagetxt.y=88;this.boardSp.addChild(this.damagetxt);this.topSp=new egret.Sprite;this.topSp.x=egret.MainContext.instance.stage.stageWidth-140;this.topSp.y=-100;this.addChild(this.topSp);d=Utils.createBitmapByName("uiinfo");
d.x=d.y=10;this.topSp.addChild(d);this.lifeLeftTxt=new egret.TextField;this.lifeLeftTxt.text="0/0/0";this.lifeLeftTxt.size=15;this.lifeLeftTxt.x=75;this.lifeLeftTxt.y=44;this.topSp.addChild(this.lifeLeftTxt);this.goldTxt=new egret.TextField;this.goldTxt.anchorX=0.5;this.goldTxt.text="0";this.goldTxt.textColor=16776960;this.goldTxt.fontFamily="Microsoft YaHei";this.goldTxt.size=20;this.goldTxt.x=80;this.goldTxt.y=15;this.topSp.addChild(this.goldTxt);this.bottomSp=new egret.Sprite;this.bottomSp.x=0;
this.bottomSp.y=egret.MainContext.instance.stage.stageHeight-50;this.addChild(this.bottomSp);d=Utils.createBitmapByName("pause");d.x=430;d.y=10;this.bottomSp.addChild(d);d.touchEnabled=!0;d.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.backToMapsHandle,this);d=Utils.createBitmapByName("bar");d.x=0;d.y=-5;this.bottomSp.addChild(d);this.tool=new UnitTool(this.gold);this.tool.x=5;this.tool.y=3;this.bottomSp.addChild(this.tool)}__extends(f,c);var e=f.prototype;e.backToMapsHandle=function(a){TweenMax.killAll();
GuankaBase.instance.clear();this.dispatchEvent(new MainEvent(MainEvent.QUITGUANKA,null,!0))};e.onEnterFrame=function(a){this.tool.onEnterFrame(a)};e.showUI=function(){TweenLite.to(this.topSp,0.3,{y:0,ease:Circ.easeOut});TweenLite.to(this.bottomSp,0.3,{delay:0.1,y:GameSetting.shei-60,ease:Circ.easeOut})};e.alarmTouch=function(){var a=GuankaBase.instance,b=a.guankaUI.boardSp;b.alpha=1;a.guankaUI.label.text="\u7b2c"+(GuankaBase.instance.curBo+2)+"\u6ce2";var c=a.enemyData[a.curBo+1].unitType,e=a.enemyData[a.curBo+
1].count;1==c?(a.guankaUI.type.text="\u9632\u5fa1",a.guankaUI.info.text="\u53d7\u5230\u653b\u51fb\u578b\u58eb\u5175\u653b\u51fb\u65f6\u51cf\u5c1130%\u4f24\u5bb3"):2==c?(a.guankaUI.type.text="\u653b\u51fb",a.guankaUI.info.text="\u653b\u51fb\u79d8\u672f\u5e08\u65f6\u6709\u4e00\u5b9a\u51e0\u7387\u9020\u6210\u53cc\u500d\u4f24\u5bb3"):(a.guankaUI.type.text="\u79d8\u672f",a.guankaUI.info.text="\u5bf9\u9632\u5fa1\u578b\u58eb\u5175\u989d\u5916\u9020\u621030%\u4f24\u5bb3");a.guankaUI.tip.text="\u6570\u91cf\uff1a"+
e;a.guankaUI.lifetxt.text=a.enemyData[a.curBo+1].life;a.guankaUI.damagetxt.text=a.enemyData[a.curBo+1].damage;b.x=this.rightSp.x-30;b.y=this.rightSp.y-10};e.touchEnd=function(){GuankaBase.instance.guankaUI.boardSp.alpha=0};e.setGold=function(a){this.goldTxt.text=a.toString();this.gold=a};e.setLife=function(){this.lifeLeftTxt.text=GuankaBase.instance.lifeUp+"/"+GuankaBase.instance.damagekUp+"/"+GuankaBase.instance.defendUp};e.showVictory=function(){var a=new egret.Shape;a.graphics.beginFill(0,0.6);
a.graphics.drawRect(0,0,GameSetting.swid,GameSetting.shei);this.addChild(a);a.touchEnabled=!0;a.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.spTouch1,this);this.victoryBm=Utils.createBitmapByName("victory");this.victoryBm.anchorX=this.victoryBm.anchorY=0.5;this.victoryBm.x=GameSetting.swid/2;this.victoryBm.y=180;this.victoryBm.scaleX=this.victoryBm.scaleY=0.1;this.addChild(this.victoryBm);TweenMax.to(this.victoryBm,0.5,{scaleX:1,scaleY:1,ease:Back.easeOut});var b=this;TweenMax.delayedCall(15,
function(){b.dispatchEvent(new MainEvent(MainEvent.QUITGUANKA,null,!0))});SoundManager.playBgSound("victorysd",!1)};e.showLose=function(){this.mbBm=new egret.Shape;this.mbBm.graphics.beginFill(0,0.6);this.mbBm.graphics.drawRect(0,0,GameSetting.swid,GameSetting.shei);this.addChild(this.mbBm);this.mbBm.touchEnabled=!0;this.mbBm.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.spTouch2,this);this.loseBm=Utils.createBitmapByName("lose");this.loseBm.anchorX=this.loseBm.anchorY=0.5;this.loseBm.x=GameSetting.swid/
2;this.loseBm.y=-180;this.addChild(this.loseBm);this.tryAgainBm=Utils.createBitmapByName("tryagain");this.tryAgainBm.anchorX=this.tryAgainBm.anchorY=0.5;this.tryAgainBm.x=GameSetting.swid/2;this.tryAgainBm.y=550;this.addChild(this.tryAgainBm);this.quitBm=Utils.createBitmapByName("quitgame");this.quitBm.anchorX=this.quitBm.anchorY=0.5;this.quitBm.x=GameSetting.swid/2;this.quitBm.y=550;this.addChild(this.quitBm);this.tryAgainBm.touchEnabled=!0;this.quitBm.touchEnabled=!0;this.tryAgainBm.addEventListener(egret.TouchEvent.TOUCH_BEGIN,
this.tryAgainHandle,this);this.quitBm.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.spTouch1,this);TweenMax.to(this.loseBm,0.5,{y:150,ease:Cubic.easeOut});TweenMax.to(this.tryAgainBm,0.3,{delay:0.3,y:240,ease:Cubic.easeOut});TweenMax.to(this.quitBm,0.3,{delay:0.4,y:300,ease:Cubic.easeOut})};e.spTouch1=function(a){TweenMax.killAll();SoundManager.stopBgSound();this.dispatchEvent(new MainEvent(MainEvent.QUITGUANKA,null,!0));a.stopPropagation()};e.tryAgainHandle=function(a){TweenMax.killAll();SoundManager.stopBgSound();
this.dispatchEvent(new MainEvent(MainEvent.TRYAGAIN,null,!0));this.removeChild(this.mbBm);this.removeChild(this.loseBm);this.removeChild(this.tryAgainBm);this.removeChild(this.quitBm);a.stopPropagation()};e.spTouch2=function(a){a.stopPropagation()};return f}(egret.Sprite);GuanKaUI.prototype.__class__="GuanKaUI";
var Guanka01=function(c){function f(){c.call(this);this.mtime=0;this.bm.texture=RES.getRes("map0");this.bm.anchorY=0.5;this.bm.anchorX=0.5;this.bm.x=GameSetting.swid/2;this.bm.y=GameSetting.shei/2;this.makeGrid("map0json");this.basePoseArr=[[150,410],[150,470],[340,410],[340,470]];this.base2PoseArr=[[150,530],[340,530]];this.base3PoseArr=[[75,410],[75,470],[415,410],[415,470],[75,530],[415,530]];this.soldPointArr=[[150,440],[150,500],[340,440],[340,500],[150,550],[340,550]];this.roadArr1=[[220,100],
[210,150],[230,200],[240,600]];this.roadArr2=[[260,100],[270,150],[250,200],[240,600]];this.roadArr.push(this.roadArr1);this.roadArr.push(this.roadArr2);this.enemyData=[{type:"Monster02",count:66,life:203,maxSpeed:0.3,damage:10,value:5,unitType:2,atime:15},{type:"Monster11",count:12,life:402,maxSpeed:0.3,damage:20,value:18,unitType:2,atime:26},{type:"Monster04",count:14,life:500,maxSpeed:0.2,damage:50,value:24,unitType:2,atime:62},{type:"Monster12",count:12,life:1E3,maxSpeed:0.2,damage:80,value:30,
unitType:1,atime:105},{type:"Monster10",count:12,life:4E3,maxSpeed:0.2,damage:120,value:45,unitType:3,atime:183},{type:"Boss01",count:12,life:6E3,maxSpeed:0.3,damage:200,value:80,unitType:2,atime:300}];this.soldierArr="s01 s03 s02 s04 lock lock lock".split(" ");this.createUI();this.createBase();this.FriendLord=ObjectPool.getInstance().createObject(HumanBoss);this.FriendLord.life=this.FriendLord.hp=1500;this.FriendLord.damage=80;GuankaBase.instance.objArr.push(this.FriendLord);this.FriendLord.x=this.FriendLord.sx=
240;this.FriendLord.y=this.FriendLord.sy=550;this.objLayer.addChild(this.FriendLord);this.objArr.push(this.FriendLord);this.friendArr.push(this.FriendLord);this.FriendLord.targets=this.enemyArr;this.boss1=ObjectPool.getInstance().createObject(HumanTower);this.boss1.life=this.boss1.hp=1E3;this.boss1.damage=20;GuankaBase.instance.objArr.push(this.boss1);this.boss1.x=this.boss1.sx=240;this.boss1.y=this.boss1.sy=470;this.objLayer.addChild(this.boss1);this.objArr.push(this.boss1);this.friendArr.push(this.boss1);
this.boss1.targets=this.enemyArr;this.EnemyLord=ObjectPool.getInstance().createObject(HumanBoss);this.EnemyLord.life=this.EnemyLord.hp=5E3;this.EnemyLord.damage=80;GuankaBase.instance.objArr.push(this.boss1);this.EnemyLord.x=this.EnemyLord.sx=240;this.EnemyLord.y=this.EnemyLord.sy=70;this.objLayer.addChild(this.EnemyLord);this.objArr.push(this.EnemyLord);this.enemyArr.push(this.EnemyLord);this.EnemyLord.targets=this.friendArr;this.boss2=ObjectPool.getInstance().createObject(HumanTower);this.boss2.life=
this.boss2.hp=3E3;this.boss2.damage=40;GuankaBase.instance.objArr.push(this.boss2);this.boss2.x=this.boss2.sx=240;this.boss2.y=this.boss2.sy=150;this.objLayer.addChild(this.boss2);this.objArr.push(this.boss2);this.enemyArr.push(this.boss2);this.boss2.targets=this.friendArr;this.init()}__extends(f,c);var e=f.prototype;e.init=function(){this.boSum=0;this.hardxs2=this.hardxs=1;this.curBo=-1;this.boLeft=99999;this.otime=this.delayToNextSum=0;this.boing=!1;this.gold=100;this.income=1;this.guankaUI.setGold(this.gold);
this.allBo=this.enemyData.length;this.build("ShieldTower03_1",75,5);this.build("ShieldTower03_1",150,5);this.build("ShieldTower03_1",340,5);this.build("ShieldTower03_1",415,5);this.build("MagicTower02",75,50);this.build("MagicTower02",150,50);this.build("MagicTower02",340,50);this.build("MagicTower02",415,50);this.build("ShieldTower01",150,95);this.build("ShieldTower01",340,95);SoundManager.playBgSound("map0bg");egret.Ticker.getInstance().register(this.onEnterFrame,this)};e.onEnterFrame=function(a){c.prototype.onEnterFrame.call(this,
a)};e.build=function(a,b,c){a=Utils.createBitmapByName(a);a.anchorX=0.5;a.x=b;a.y=c;this.objLayer.addChild(a);this.objArr.push(a)};e.tryAgainHandle=function(a){for(;0<this.objLayer.numChildren;)this.objLayer.removeChildAt(0);for(;0<this.toolLayer.numChildren;)this.toolLayer.removeChildAt(0);for(a=0;a<this.baseArr.length;a++)this.base=this.baseArr[a],this.base.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.baseOrTowerTouch,this);this.towerArr=[];this.objArr=[];this.enemyArr=[];this.friendArr=[];
this.buildQuene=[];this.init()};e.destroy=function(){c.prototype.destroy.call(this);RES.destroyRes(GuanKaConfig.guankaData[Main.curIdx]);this.roadArr2=this.roadArr1=null};return f}(GuankaBase);Guanka01.prototype.__class__="Guanka01";
var Index=function(c){function f(){c.call(this);this.stageWidth=GameSetting.swid;this.stageHeight=GameSetting.shei;this.addEventListener(egret.Event.ADDED_TO_STAGE,this.onAddToStage,this);SoundManager.playBgSound("gamebgsound")}__extends(f,c);var e=f.prototype;e.init=function(){};e.onAddToStage=function(a){this.bg=new egret.Bitmap;this.bg.texture=RES.getRes("welbg");this.bg.alpha=0;this.addChild(this.bg);egret.Tween.get(this.bg).wait(500).to({alpha:1},800);this.logo=new egret.Bitmap;this.logo.texture=
RES.getRes("wellogo");this.logo.anchorX=0.5;this.logo.anchorY=1;this.logo.x=this.stageWidth/2;this.logo.y=-this.logo.height;this.addChild(this.logo);TweenMax.fromTo(this.logo,0.2,{y:-this.logo.height,scaleX:0.1,rotation:40},{delay:1.3,y:this.stageHeight/2+70,scaleX:1,rotation:0,ease:Circ.easeOut});egret.Tween.get(this.logo).wait(1450).to({scaleX:0.9},100).to({scaleX:1},100);egret.Tween.get(this.logo).wait(1460).to({scaleY:1.1},100).to({scaleY:1},100).call(this.showLiantiao,this)};e.showLiantiao=function(){this.dropsp=
new egret.Sprite;this.dropsp.x=this.stageWidth/2;this.dropsp.y=this.logo.y-30;this.addChildAt(this.dropsp,1);this.liantiao=new egret.Bitmap;this.liantiao.texture=RES.getRes("liantiao");this.liantiao.anchorX=0.5;this.liantiao.anchorY=1;this.dropsp.addChild(this.liantiao);this.btn=new egret.Bitmap;this.btn.texture=RES.getRes("welbtn");this.btn.anchorX=0.5;this.btn.anchorY=1;this.dropsp.addChild(this.btn);egret.Tween.get(this.dropsp).to({y:this.logo.y+110},600,egret.Ease.bounceOut).call(this.addLis,
this)};e.addLis=function(){this.btn.touchEnabled=!0;this.btn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.btnCkH,this)};e.btnCkH=function(a){this.btn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.btnCkH,this);Main.instance.dispatchEvent(new MainEvent(MainEvent.OPENLOADBAR,"maps"));SoundManager.stopBgSound()};e.destroy=function(){RES.destroyRes("welbg");RES.destroyRes("wellogo");RES.destroyRes("liantiao");RES.destroyRes("welbtn")};return f}(egret.DisplayObjectContainer);
Index.prototype.__class__="Index";
var LoadBar=function(c){function f(){c.call(this);this.stageWidth=GameSetting.swid;this.stageHeight=GameSetting.shei;this.init()}__extends(f,c);var e=f.prototype;e.init=function(){this.leftP=new egret.DisplayObjectContainer;this.rightP=new egret.DisplayObjectContainer;this.addChild(this.leftP);this.addChild(this.rightP);this.bm=Utils.createBitmapByName("loadbg");this.bm.anchorX=0.5;this.bm.anchorY=1;this.leftP.addChild(this.bm);this.bm=Utils.createBitmapByName("loadl");this.bm.anchorX=0.5;this.rightP.addChild(this.bm);
this.leftP.x=this.stageWidth/2;this.rightP.x=this.stageWidth/2;this.leftP.y=this.stageHeight/2;this.rightP.y=this.stageHeight/2;this.loadP=new egret.DisplayObjectContainer;this.addChild(this.loadP);this.prol=new egret.Sprite;this.prol.anchorX=0.5;this.prol.anchorY=0.5;this.prol.x=this.stageWidth/2;this.prol.y=this.stageHeight/2;this.loadP.addChild(this.prol);this.bm=Utils.createBitmapByName("probarbg");this.prol.addChild(this.bm);this.barl=Utils.createBitmapByName("probartop");this.barl.x=9;this.barl.y=
9;this.barl.width=1;this.prol.addChild(this.barl);var a=new egret.Rectangle(0,0,99,36);this.prol.mask=a;this.pror=new egret.Sprite;this.pror.anchorX=0.5;this.pror.anchorY=0.5;this.pror.x=this.stageWidth/2;this.pror.y=this.stageHeight/2;this.loadP.addChild(this.pror);this.bm=Utils.createBitmapByName("probarbg");this.pror.addChild(this.bm);this.barr=Utils.createBitmapByName("probartop");this.barr.x=9;this.barr.y=9;this.barr.width=1;this.pror.addChild(this.barr);a=new egret.TextField;a.text="\u4e5d\u5dde\u5206\u88c2\u4e2d";
a.anchorX=0.5;a.anchorY=0.5;a.size=20;a.fontFamily="Microsoft YaHei";a.strokeColor=0;a.stroke=1;a.x=this.stageWidth/2;a.y=this.stageHeight/2;this.loadP.addChild(a);a=new egret.Rectangle(99,0,99,36);this.pror.mask=a;this.showLoadBar()};e.setProgress=function(a,b){this.barl.width=a/b*182;this.barr.width=a/b*182};e.showLoadBar=function(){TweenMax.to(this.leftP,0.3,{y:this.stageHeight/2,ease:Cubic.easeOut});TweenMax.to(this.rightP,0.3,{y:this.stageHeight/2,ease:Cubic.easeOut,onComplete:function(){Main.instance.dispatchEvent(new MainEvent(MainEvent.REMOVE))}});
SoundManager.playEffect("loaderClose")};e.hideLoadBar=function(){var a=this;TweenMax.to(this.loadP,0.01,{delay:0.6,y:1E3,ease:Cubic.easeOut});TweenMax.to(this.leftP,1.5,{delay:0.6,y:-400,ease:Cubic.easeOut});TweenMax.to(this.rightP,1.5,{delay:0.6,y:800,ease:Cubic.easeOut,onComplete:function(){null!=a.parent&&a.parent.removeChild(a);SoundManager.playEffect("loaderOpen")}})};return f}(egret.DisplayObjectContainer);LoadBar.prototype.__class__="LoadBar";
var LoadingUI=function(c){function f(){c.call(this);this.createView()}__extends(f,c);var e=f.prototype;e.createView=function(){this.textField=new egret.TextField;this.addChild(this.textField);this.textField.y=300;this.textField.width=480;this.textField.height=100;this.textField.textAlign="center"};e.setProgress=function(a,b){this.textField.text="Loading..."+a+"/"+b};return f}(egret.Sprite);LoadingUI.prototype.__class__="LoadingUI";
var PreLoad=function(c){function f(){c.call(this);this.stageWidth=GameSetting.swid;this.stageHeight=GameSetting.shei;this.addEventListener(egret.Event.ADDED_TO_STAGE,this.onAddToStage,this)}__extends(f,c);var e=f.prototype;e.onAddToStage=function(a){this.bg=new egret.Bitmap;this.bg.texture=RES.getRes("0ui_bg");this.bg.anchorX=0.5;this.bg.anchorY=0.5;this.bg.x=this.stageWidth/2;this.bg.y=this.stageHeight/2;this.addChild(this.bg);this.barbg=new egret.Bitmap;this.barbg.texture=RES.getRes("probarbg");
this.barbg.anchorX=0.5;this.barbg.x=this.stageWidth/2;this.barbg.y=this.stageHeight-138;this.addChild(this.barbg);this.sp=new egret.DisplayObjectContainer;this.sp.x=this.stageWidth/2-91;this.sp.y=this.stageHeight-129;this.addChild(this.sp);this.bartop=new egret.Bitmap;this.bartop.texture=RES.getRes("probartop");this.bartop.width=1;this.sp.addChild(this.bartop);Loader.instance.load("welcomeload")};e.setProgress=function(a,b){this.bartop.width=a/b*182};e.loadComp=function(){this.removeChild(this.barbg);
this.removeChild(this.sp);this.sp=this.bartop=this.barbg=null;this.btn=new egret.Bitmap;this.btn.texture=RES.getRes("0ui_btn");this.btn.anchorX=0.5;this.btn.x=this.stageWidth/2;this.btn.y=this.stageHeight-100;this.addChild(this.btn);this.btn.touchEnabled=!0;this.btn.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.touchH,this)};e.destroy=function(){RES.destroyRes("0ui_bg");RES.destroyRes("0ui_btn")};e.touchH=function(a){this.btn.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.touchH,this);
Main.instance.dispatchEvent(new MainEvent(MainEvent.OPENLOADBAR,"maps"));this.destroy()};return f}(egret.DisplayObjectContainer);PreLoad.prototype.__class__="PreLoad";
var AttackSoldier03=function(c){function f(){c.call(this);this.addTexture()}__extends(f,c);var e=f.prototype;e.addTexture=function(){this.anchorX=0.5;this.view=new egret.MovieClip;this.addChild(this.view);var a=RES.getRes("human2-1-1_json"),b=RES.getRes("human2-1-1_png"),a=new egret.MovieClipDataFactory(a,b);this.view.movieClipData=a.generateMovieClipData("human2-1-1");this.view.x=this.view.width/2;this.lifeBar.x=(this.view.width-this.lifeBar.width)/2;this.lifeBar.y=-50;this._maxSpeed=0.7;this.offy=
10;this.fireDelay=800};e.onCreate=function(){this.unitType=2;this.hp=100*(1+0.2*GuankaBase.instance.lifeUp);this.life=100*(1+0.2*GuankaBase.instance.lifeUp);this.damage=40*(1+0.2*GuankaBase.instance.damagekUp);this.posArr=[];this.timesum=this._pathIndex=0;this.lifeBar.reSet();this.moveToTarget=this.atjijie=this.canClear=!1;this.fsm.changeState(0);this.curState=0;this.view.touchEnabled=!0;this.view.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.viewSelect,this)};e.init=function(a){this.atjijie=
!0;this._position.x=this.x=a[0][0];this._position.y=this.y=a[0][1];var b=1;for(b;b<a.length;b++)this.jijieDian=new Vector2D(a[b][0]+this.xoffset,a[b][1]+this.yoffset),this.posArr.push(this.jijieDian);this.fsm.changeState(1)};e.setPoint=function(a){this.dispatchEvent(new SoldEvent(SoldEvent.MOVE,this,a))};e.setPath=function(a){this.atjijie=!0;this.posArr.length=0;this.jijieDian=new Vector2D(a[0]+this.xoffset,a[1]+this.yoffset);this.posArr.push(this.jijieDian);this.fsm.changeState(1);null!=this.target&&
(null!=this.target.target&&(this.target.target=null),this.target=null)};e.onEnterFrame=function(a){c.prototype.onEnterFrame.call(this,a)};e.viewSelect=function(a){Group.selectItem(this)};e.onDestroy=function(){c.prototype.onDestroy.call(this);this.view.touchEnabled=!1;this.view.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.viewSelect,this)};return f}(ShieldSoldierBase);AttackSoldier03.prototype.__class__="AttackSoldier03";
var Grid=function(){function c(c,a){this._numCols=c;this._numRows=a;this._nodes=[];for(var b=0;b<this._numCols;b++){this._nodes[b]=[];for(var d=0;d<this._numRows;d++)this._nodes[b][d]=new NodePoint(b,d)}}var f=c.prototype;f.getNode=function(c,a){return this._nodes[c][a]};f.setWalkable=function(c,a,b){this._nodes[c][a].walkable=b};return c}();Grid.prototype.__class__="Grid";
var HitTest=function(){function c(){}c.hitTestRect=function(c,e){var a=c.getBounds(),b=e.getBounds();a.x=c.x;a.y=c.y;b.x=e.x;b.y=e.y;return a.intersects(b)||b.intersects(a)};c.hitTestLayer=function(c,e){return Math.abs(c.x+c.width/2-(e.x+e.width/2))<=Math.abs((c.width+e.width)/2)&&Math.abs(c.y+c.height/2-(e.y+e.height/2))<=Math.abs((c.height+e.height)/2)};c.hitTestPoint=function(c){return!1};return c}();HitTest.prototype.__class__="HitTest";
var LifeBar=function(c){function f(){c.call(this);this.bg=Utils.createBitmapByName("lifeBarBg");this.addChild(this.bg);this.bar=Utils.createBitmapByName("lifeBar");this.addChild(this.bar);this.bar.x=this.bar.y=1;this.cacheAsBitmap=!0}__extends(f,c);var e=f.prototype;e.setProgress=function(a,b){var c=18*a/b;this.bar.width=0>c?0:c};e.reSet=function(){this.bar.width=18};return f}(egret.Sprite);LifeBar.prototype.__class__="LifeBar";
var World=function(c){function f(){c.call(this);SoundManager.playBgSound("mapbgsound");this.init()}__extends(f,c);var e=f.prototype;e.init=function(){this.bg=Utils.createBitmapByName("map");this.bg.anchorY=0.2;this.addChild(this.bg);this.flagArr=[];for(var a=GuanKaConfig.getData(),b=a.length,c,e=0;e<b;e++){var f=a[e].ispass;c=Utils.createBitmapByName(f?"flag0":"flag1");c.x=a[e].xpos;c.y=a[e].ypos;c.alpha=0;c.touchEnabled=!0;c.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.choseGuanka,this);this.addChild(c);
this.flagArr.push(c);if(!f)break}for(e=0;e<this.flagArr.length;e++)TweenMax.fromTo(this.flagArr[e],0.3,{alpha:0,y:this.flagArr[e].y-30},{alpha:1,y:this.flagArr[e].y,delay:0.1*e+1})};e.removeLis=function(){var a,b;for(a=0;a<this.flagArr.length;a++)b=this.flagArr[a],b.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.choseGuanka,this)};e.addLis=function(){var a,b;for(a=0;a<this.flagArr.length;a++)b=this.flagArr[a],b.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.choseGuanka,this)};e.showXZ=
function(){this.xzmb=new egret.Sprite;this.xzmb.anchorX=this.xzmb.anchorY=0.5;this.xzmb.x=egret.MainContext.instance.stage.stageWidth/2;this.xzmb.y=egret.MainContext.instance.stage.stageHeight/2;this.addChild(this.xzmb);this.xzmb.scaleX=this.xzmb.scaleY=0.1;this.gkxz=Utils.createBitmapByName("select_png");this.xzmb.addChild(this.gkxz);this.gushi=Utils.createBitmapByName("button_png");this.gushi.x=45;this.gushi.y=250;this.xzmb.addChild(this.gushi);this.gktxt=new egret.TextField;this.gktxt.text=GuanKaConfig.data[Main.curIdx].name.toString();
this.gktxt.fontFamily="Microsoft YaHei";this.gktxt.textColor=16776960;this.gktxt.strokeColor=0;this.gktxt.size=25;this.gktxt.stroke=1;this.gktxt.x=70;this.gktxt.y=5;this.xzmb.addChild(this.gktxt);this.gkStory=new egret.TextField;this.gkStory.text=GuanKaConfig.data[Main.curIdx].story.toString();this.gkStory.size=15;this.gkStory.textColor=0;this.gkStory.width=200;this.gkStory.fontFamily="Microsoft YaHei";this.gkStory.x=20;this.gkStory.y=160;this.xzmb.addChild(this.gkStory);this.txt=new egret.TextField;
this.txt.text="\u51c6\u5907\u6e38\u620f";this.txt.size=25;this.txt.fontFamily="Microsoft YaHei";this.txt.x=70;this.txt.y=260;this.xzmb.addChild(this.txt);this.bg.touchEnabled=!0;this.bg.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.closeHandle,this);this.gushi.touchEnabled=!0;this.gushi.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.gushiHandle,this);TweenMax.to(this.xzmb,0.3,{scaleX:1,scaleY:1,ease:Back.easeOut})};e.gushiHandle=function(a){this.closeHandle(null);this.zbmb=new egret.Sprite;
this.zbmb.anchorX=this.zbmb.anchorY=0.5;this.zbmb.x=egret.MainContext.instance.stage.stageWidth/2;this.zbmb.y=egret.MainContext.instance.stage.stageHeight/2;this.addChild(this.zbmb);this.zbmb.scaleX=this.zbmb.scaleY=0.1;this.gkzb=Utils.createBitmapByName("yubei_png");this.zbmb.addChild(this.gkzb);this.start=Utils.createBitmapByName("button_png");this.start.x=150;this.start.y=320;this.zbmb.addChild(this.start);TweenMax.to(this.zbmb,0.5,{scaleX:0.9,scaleY:0.9,ease:Back.easeOut});this.txt=new egret.TextField;
this.txt.text="\u5f00\u59cb\u6e38\u620f";this.txt.size=25;this.txt.fontFamily="Microsoft YaHei";this.txt.x=175;this.txt.y=330;this.zbmb.addChild(this.txt);this.float=new egret.TextField;this.float.anchorX=0.5;this.float.alpha=0;this.float.size=20;this.float.text="\u6682\u65f6\u65e0\u6cd5\u9009\u62e9\u51fa\u6218\u7684\u5175\u79cd";this.float.textColor=16776960;this.float.x=200;this.float.y=300;this.float.fontFamily="Microsoft YaHei";this.addChild(this.float);this.zbmb.touchEnabled=!0;this.zbmb.addEventListener(egret.TouchEvent.TOUCH_BEGIN,
this.floatTxt,this);this.start.touchEnabled=!0;this.start.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.kaishiHandle,this)};e.kaishiHandle=function(a){Main.wujin=!1;this.loadGuanka()};e.floatTxt=function(a){this.zbmb.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.floatTxt,this);this.float.alpha=1;this.float.x=a.localX;this.float.y=a.localY+100;var b=this;TweenMax.to(this.float,1,{y:this.float.y-50,alpha:0,onComplete:function(){b.zbmb.addEventListener(egret.TouchEvent.TOUCH_BEGIN,b.floatTxt,
b)}})};e.closeHandle=function(a){this.gushi.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.gushiHandle,this);var b=this;null!=this.xzmb&&TweenMax.to(this.xzmb,0.3,{scaleX:0.1,scaleY:0.1,ease:Back.easeIn,onComplete:function(){b.removeChild(b.xzmb);b.xzmb=null;b.addLis()}});null!=this.zbmb&&(this.zbmb.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.floatTxt,this),this.start.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.kaishiHandle,this),TweenMax.to(this.zbmb,0.3,{scaleX:0.1,scaleY:0.1,
ease:Back.easeIn,onComplete:function(){b.removeChild(b.zbmb);b.zbmb=null;b.addLis()}}))};e.choseGuanka=function(a){Main.curIdx=this.flagArr.indexOf(a.currentTarget);this.removeLis();this.showXZ()};e.loadGuanka=function(){Main.loadCommis1st?(console.log("\u52a0\u8f7dUI\u8d44\u6e90"),Main.instance.dispatchEvent(new MainEvent(MainEvent.OPENLOADBAR,"uiLoad")),Main.loadCommis1st=!1):(console.log("\u52a0\u8f7d\u5173\u5361\u8d44\u6e90"),Main.instance.dispatchEvent(new MainEvent(MainEvent.OPENLOADBAR,GuanKaConfig.guankaData[Main.curIdx])));
SoundManager.stopBgSound()};e.backH=function(a){this.back.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.backH,this);Main.instance.dispatchEvent(new MainEvent(MainEvent.OPENLOADBAR,"welcomeload"));SoundManager.stopBgSound()};e.openHeroH=function(a){};e.destroy=function(){RES.destroyRes("map");TweenMax.killChildTweensOf(this);for(var a=0;a<this.flagArr.length;a++)this.flagArr[a].removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.choseGuanka,this)};return f}(egret.Sprite);
World.prototype.__class__="World";
